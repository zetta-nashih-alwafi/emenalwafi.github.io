"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[4050],{34050:(I,g,r)=>{r.d(g,{S:()=>Q});var c=r(65938),_=r(17489),f=r(35226),d=r.n(f),h=r(62416),o=r(68745),l=r(33296),t=r(94650),m=r(24006),T=r(89383),D=r(79710),y=r(52688),O=r(610),P=r(11481),S=r(4859),B=r(97392),b=r(71948),M=r(10266),R=r(24784),v=r(36895);function L(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",8)(2,"div",9)(3,"b"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"div",8)(8,"div",9)(9,"b"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()()()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate5("",t.\u0275\u0275pipeBind1(5,6,"We are sending your file to the bank")," ",null==e.data||null==e.data.data[0]||null==e.data.data[0].campuses[0]||null==e.data.data[0].campuses[0].bank?null:e.data.data[0].campuses[0].bank.name," ",t.\u0275\u0275pipeBind1(6,8,"from")," ",null==e.data||null==e.data.data[0]||null==e.data.data[0].campuses[0]||null==e.data.data[0].campuses[0].bank?null:e.data.data[0].campuses[0].bank.city," - ",null==e.data||null==e.data.data[0]||null==e.data.data[0].campuses[0]||null==e.data.data[0].campuses[0].bank?null:e.data.data[0].campuses[0].bank.address,""),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(11,10,"An email of confirmation that you are in relation will be sent to you")," ")}}function A(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",8)(2,"div",9)(3,"b"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"div",8)(7,"div",10)(8,"b"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"div",8)(12,"div",10)(13,"b"),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()()()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,5,"Please confirm your choice")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate2("- ",t.\u0275\u0275pipeBind1(10,7,"Deposit"),": ",e.data.depositAmount," \u20ac"),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate2("- ",t.\u0275\u0275pipeBind1(15,9,"Payment by")," ",t.\u0275\u0275pipeBind1(16,11,null==e.data?null:e.data.data),"")}}function U(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8)(1,"div",13),t.\u0275\u0275element(2,"img",14),t.\u0275\u0275elementEnd()()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("src",e.validationStepList&&null!=e.validationStepList&&e.validationStepList.image_upload?e.serverimgPath+(null==e.validationStepList?null:e.validationStepList.image_upload):"",t.\u0275\u0275sanitizeUrl)}}function k(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",8)(1,"div",15)(2,"div"),t.\u0275\u0275element(3,"iframe",16),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275property("src",e.sanitizeVideoUrl(null==e.validationStepList?null:e.validationStepList.video_link)||e.sanitizeVideoUrl("https://www.youtube.com/embed/TyTjGZkhNQE"),t.\u0275\u0275sanitizeResourceUrl)}}function N(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",8)(2,"div",9),t.\u0275\u0275element(3,"b",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,U,3,1,"div",12),t.\u0275\u0275template(5,k,4,1,"div",12),t.\u0275\u0275elementStart(6,"div",8)(7,"div",9),t.\u0275\u0275element(8,"b",11),t.\u0275\u0275elementEnd()()()),2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("innerHTML",null==e.validationStepList?null:e.validationStepList.first_title,t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isVideoLink),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isVideoLink),t.\u0275\u0275advance(3),t.\u0275\u0275property("innerHTML",null==e.validationStepList?null:e.validationStepList.second_title,t.\u0275\u0275sanitizeHtml)}}function V(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.confirm(!0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon",22),t.\u0275\u0275text(5,"touch_app"),t.\u0275\u0275elementEnd()()}2&i&&(t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,2,"Confirm")," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Confirm")," "))}function w(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.confirm(!0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon",22),t.\u0275\u0275text(5,"touch_app"),t.\u0275\u0275elementEnd()()}2&i&&(t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,2,"Confirm")," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Understood")," "))}function Y(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",17)(1,"button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.closeDialog())}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275element(3,"mat-icon",19),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,V,6,6,"button",20),t.\u0275\u0275template(7,w,6,6,"button",20),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,4,"Go back")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,6,"Go back")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.data&&"confirmOne"!==e.data.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&"confirmOne"===e.data.type)}}const E=function(i){return{disabledd:i}};function G(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",25),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.confirmValidation(!0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon",22),t.\u0275\u0275text(5,"touch_app"),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,6,"Confirm")," "),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(10,E,0!==e.count))("disabled",0!==e.count),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(3,8,"I go to step")," ",e.data.step+1," ",e.count?"("+e.count+"s)":""," ")}}function H(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",25),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.confirmValidation(!0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon",22),t.\u0275\u0275text(5,"touch_app"),t.\u0275\u0275elementEnd()()}if(2&i){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,5,"Confirm")," "),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(9,E,0!==e.count))("disabled",0!==e.count),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(3,7,"I disconnect")," ",e.count?"("+e.count+"s)":""," ")}}function W(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",17)(1,"button",23),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.closeDialog())}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275element(3,"mat-icon",19),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,G,6,12,"button",24),t.\u0275\u0275template(7,H,6,11,"button",24),t.\u0275\u0275elementEnd()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,4,"Go back")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,6,"Go back")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.data&&6!==e.data.step),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&6===e.data.step)}}function K(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",2)(1,"form",3)(2,"div")(3,"mat-dialog-content",4),t.\u0275\u0275template(4,L,12,12,"div",5),t.\u0275\u0275template(5,A,17,13,"div",5),t.\u0275\u0275template(6,N,9,4,"div",5),t.\u0275\u0275element(7,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"mat-dialog-actions",6),t.\u0275\u0275template(9,Y,8,8,"div",7),t.\u0275\u0275template(10,W,8,8,"div",7),t.\u0275\u0275elementEnd()()()()),2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.data&&"confirmOne"===e.data.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&"confirmTwo"===e.data.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&"stepValidation"===e.data.type),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",e.data&&"stepValidation"!==e.data.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&"stepValidation"===e.data.type)}}function F(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",8)(2,"div",29)(3,"b"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"div",8)(7,"div",29)(8,"b"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275pipe(11,"currency"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(12,"div",8)(13,"div",29)(14,"b"),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(18,"div",30)(19,"mat-radio-group",31)(20,"mat-radio-button",32),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.radioChange("Transfer"))}),t.\u0275\u0275text(21),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"mat-radio-button",33),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.radioChange("Cheque"))}),t.\u0275\u0275text(24),t.\u0275\u0275pipe(25,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"mat-radio-button",34),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.radioChange("Bank Debit"))}),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd()()()()}if(2&i){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,9,"Please confirm your choice")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(10,11,"Balance")," ",t.\u0275\u0275pipeBind4(11,13,null==e.data||null==e.data.balance?null:e.data.balance.total_amount,"EURO","","0.2")," \u20ac"),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate3("",t.\u0275\u0275pipeBind1(16,18,"Payment in")," ",null==e.data||null==e.data.balance?null:e.data.balance.times," ",t.\u0275\u0275pipeBind1(17,20,"times"),":"),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(22,22,"Transfer")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(25,24,"Cheque")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(28,26,"credit_card"))}}function z(i,p){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",26)(1,"form",3)(2,"div")(3,"mat-dialog-content",27),t.\u0275\u0275template(4,F,29,28,"div",5),t.\u0275\u0275element(5,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-dialog-actions",6)(7,"button",23),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.closeDialog())}),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275element(9,"mat-icon",19),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"button",28),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.confirmPayment(!0))}),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementStart(16,"mat-icon",22),t.\u0275\u0275text(17,"touch_app"),t.\u0275\u0275elementEnd()()()()()()}if(2&i){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("formGroup",e.paymentPlanMethod),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.data&&"confirmTiga"===e.data.type),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(8,7,"Go back")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,9,"Go back")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(13,11,"Confirm")," "),t.\u0275\u0275property("disabled",e.buttonDisabled),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,13,"Confirm")," ")}}let Q=(()=>{class i{constructor(e,n,a,s,u,x,j,$){this.dialogRef=e,this.fb=n,this.translate=a,this.candidateService=s,this.userService=u,this.data=x,this.route=j,this.sanitizer=$,this.subs=new o.Y,this.isTitleTrue=!1,this.noUsers=!1,this.correctorName="",this.userTypes=[],this.userCorrectorList=[],this.userList=[],this.memberAssigned=[],this.isGroupTest=!1,this.isWaitingForResponse=!1,this.isWaitingForUserList=!0,this.isMultipleSelected=!1,this.isSingleSelected=!0,this.dataMemberAssigned=[],this.candidateAssignedMember=[],this.campusList=[{campus:"PARIS",dev_leader:{civility:"MR",first_name:"R\xe9mi",last_name:"Barrault"}},{campus:"NEW YORK",dev_leader:{civility:"MRS",first_name:"Michel",last_name:"Lema\xeetre"}},{campus:"Lyon",dev_leader:{civility:"MR",first_name:"L\xe9on",last_name:"Blanc"}}],this.serverimgPath=`${l.a.baseApi}/fileuploads/`.replace("/graphql",""),this.campus="PARIS",this.candidate="",this.isVideoLink=!1,this.generateVideo=!0,this.candidateSchool=[],this.buttonDisabled=!0,this.time=125,this.countdownHabis=!1,this.count=5,this.timeout=setInterval(()=>{this.count>0?this.count-=1:clearInterval(this.timeout)},1e3)}ngOnInit(){this.paymentPlanMethod=this.fb.group({method:[""]}),console.log("Candidate Selected is => ",this.data),this.method=this.data&&this.data.data?this.data.data:"";const e=this.route.snapshot.queryParamMap.get("campus"),n=this.route.snapshot.queryParamMap.get("candidate")?this.route.snapshot.queryParamMap.get("candidate"):this.data&&this.data.candidateId?this.data.candidateId:"";e&&(this.campus=e),n&&(this.candidate=n),this.getCandidate(),this.currentUser=this.userService.getLocalStorageUser()}getCandidate(){this.getDataValidation(),"confirmTwo"===this.data.type&&(console.log("Data Modify",this.data.modify),this.candidate=this.data.candidateId),this.subs.sink=this.candidateService.getCandidateRegistration(this.candidate).subscribe(e=>{this.singleCandidate=e},e=>{d().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}confirm(e){let n="";if("confirmTwo"===this.data.type?n="Transfer"===this.data.data?"You confirmed payment by transfer":"You confirmed payment by credit card":"confirmTiga"===this.data.type?n="You confirmed your Payment":"confirmOne"===this.data.type&&(n="You confirmed your Method of Payment"),"confirmOne"===this.data.type)this.subs.sink=this.candidateService.SendRegistrationNotification(this.data.candidateId).subscribe(a=>{d().fire({type:"success",title:"Bravo !",text:this.translate.instant(n)}).then(()=>{const s={type:"reset",data:this.data.type};this.data&&"stepValidation"===this.data.type&&(this.validationStepList="",this.getDataValidation()),this.dialogRef.close(s)})},a=>{d().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.closeDialog()})});else{const a=this.createPayload(_.cloneDeep(this.data.modify));delete a._id,delete a.candidate_name,delete a.split,delete a.relation_bank,delete a.already_started,delete a.rate_amount,delete a.deposit_amount,delete a.payment_plan,delete a.method_dp,delete a.count_document,delete a.user_id,this.subs.sink=this.candidateService.UpdateCandidate(this.data.candidateId,a).subscribe(s=>{s&&(console.log("Candidate Updated!",s),d().fire({type:"success",title:"Bravo!",text:this.translate.instant(n),allowOutsideClick:!1,confirmButtonText:"OK"}).then(()=>{this.dialogRef.close({type:"reset",data:this.data.type})}))},s=>{"GraphQL error: You type the IBAN or BIC from the legal entity. Please enter your IBAN and BIC"===s.message||"GraphQL error: Error: You type the IBAN or BIC from the legal entity. Please enter your IBAN and BIC"===s.message?d().fire({type:"info",title:this.translate.instant("LEGAL_S5.Title"),text:this.translate.instant("LEGAL_S5.Text"),confirmButtonText:this.translate.instant("LEGAL_S5.Button")}).then(()=>{this.closeDialog()}):"GraphQL error: Sorry This IBAN is related to an account outside Euro Zone not allowing SEPA Direct Debit"===s.message||s.message.includes("Sorry This IBAN is related to an account outside Euro Zone not allowing SEPA Direct Debit")?d().fire({type:"info",title:this.translate.instant("EUROPEAN_COUNTRIES.TITLE"),html:this.translate.instant("EUROPEAN_COUNTRIES.TEXT"),confirmButtonText:this.translate.instant("EUROPEAN_COUNTRIES.BUTTON")}).then(()=>{this.closeDialog()}):s.message.includes("is invalid. Please enter a valid IBAN.")?d().fire({type:"info",title:this.translate.instant("IBAN_S1.Title"),text:this.translate.instant("IBAN_S1.Text"),confirmButtonText:this.translate.instant("IBAN_S1.Button")}).then(()=>{this.closeDialog()}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.closeDialog()})})}}createPayload(e){return e&&e._id&&delete e._id,e&&e.campus&&(e.campus=e.campus._id),e&&e.intake_channel&&(e.intake_channel=e.intake_channel._id),e&&e.scholar_season&&(e.scholar_season=e.scholar_season._id),e&&e.level&&(e.level=e.level._id),e&&e.school&&(e.school=e.school._id),e&&e.sector&&(e.sector=e.sector._id),e&&e.speciality&&(e.speciality=e.speciality._id),e&&e.registration_profile&&(e.registration_profile=e.registration_profile._id),e&&e.admission_member_id&&(e.admission_member_id=e.admission_member_id._id),e}confirmValidation(e){console.log("Masuk Sini ",this.data.step);let n=this.data.step;3!==n&&4!==n&&5!==n&&6!==n?(console.log("Masuk Sini 2",this.data.step,n),this.candidateService.setIndexStep(n++),this.dialogRef.close({type:"reset",data:this.data.type})):this.dialogRef.close({type:"reset",data:this.data.type})}radioChange(e,n){console.log("radioChange $event",n),this.buttonDisabled=!1}confirmPayment(e){const n=this.createPayload(_.cloneDeep(this.data.data));n.personal_information="done",n.method_of_payment=this.paymentPlanMethod.get("method").value;const a=this.data.balance.payment_date.map(s=>({date:s.date,amount:parseInt(s.amount.toFixed())}));n.selected_payment_plan={name:this.data.balance.name,total_amount:this.data.balance.total_amount,times:this.data.balance.times,additional_expense:parseFloat(this.data.balance.additional_expense),down_payment:parseFloat(this.data.balance.down_payment),payment_date:a&&a.length?a:[]},delete n.rate_amount,delete n.deposit_amount,delete n.payment_plan,delete n.method_dp,delete n.count_document,delete n.user_id,console.log("Date payload",n),this.subs.sink=this.candidateService.UpdateCandidate(this.data.candidateId,n).subscribe(s=>{s&&(console.log("Candidate Updated!",s),d().fire({type:"success",title:"Bravo!",text:this.translate.instant("You confirmed your down Payment"),allowOutsideClick:!1,confirmButtonText:"OK"}).then(u=>{this.dialogRef.close({type:"reset",data:this.data.type})}))},s=>{"GraphQL error: You type the IBAN or BIC from the legal entity. Please enter your IBAN and BIC"===s.message||"GraphQL error: Error: You type the IBAN or BIC from the legal entity. Please enter your IBAN and BIC"===s.message?d().fire({type:"info",title:this.translate.instant("LEGAL_S5.Title"),text:this.translate.instant("LEGAL_S5.Text"),confirmButtonText:this.translate.instant("LEGAL_S5.Button")}).then(()=>{this.closeDialog()}):"GraphQL error: Sorry This IBAN is related to an account outside Euro Zone not allowing SEPA Direct Debit"===s.message||s.message.includes("Sorry This IBAN is related to an account outside Euro Zone not allowing SEPA Direct Debit")?d().fire({type:"info",title:this.translate.instant("EUROPEAN_COUNTRIES.TITLE"),html:this.translate.instant("EUROPEAN_COUNTRIES.TEXT"),confirmButtonText:this.translate.instant("EUROPEAN_COUNTRIES.BUTTON")}).then(()=>{this.closeDialog()}):s.message.includes("is invalid. Please enter a valid IBAN.")?d().fire({type:"info",title:this.translate.instant("IBAN_S1.Title"),text:this.translate.instant("IBAN_S1.Text"),confirmButtonText:this.translate.instant("IBAN_S1.Button")}).then(()=>{this.closeDialog()}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.closeDialog()})})}closeDialog(){this.dialogRef.close({type:"cancel",data:this.data.type})}ngOnDestroy(){this.subs.unsubscribe()}sanitizeVideoUrl(e){let n=e,a="";if(e&&-1!==e.search("youtube.com/embed/")){a=n.indexOf("embed/")+6;const s=n.slice(a,n.length);n=e?this.sanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+s):""}else if(e&&-1!==e.search("youtube.com")){a=n.indexOf("=")+1;const s=n.slice(a,n.length);n=e?this.sanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+s):""}else n=e?this.sanitizer.bypassSecurityTrustResourceUrl(e):"";return n}getDataValidation(){this.subs.sink=this.candidateService.getAllStepValidationMessages(this.data.data.school?this.data.data.school.short_name:"",this.data.data.campus?this.data.data.campus.name:"",this.data.step).subscribe(a=>{a&&(this.validationStepList=a,this.validationStepList.video_link&&(this.isVideoLink=!0))},a=>{d().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}messageDialog(){let e="";return e+=this.translate.instant("CANDIDATE_POPUP_C6.CANDIDATE_TEXT",{candidateName:this.singleCandidate?("neutral"!==this.singleCandidate.civility?this.translate.instant(this.singleCandidate.civility)+" ":"")+this.singleCandidate.first_name+" "+this.singleCandidate.last_name:""}),e}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(c.so),t.\u0275\u0275directiveInject(m.UntypedFormBuilder),t.\u0275\u0275directiveInject(T.sK),t.\u0275\u0275directiveInject(D.o),t.\u0275\u0275directiveInject(y.e),t.\u0275\u0275directiveInject(c.WI),t.\u0275\u0275directiveInject(O.gz),t.\u0275\u0275directiveInject(P.H7))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["ms-registration-dialog"]],features:[t.\u0275\u0275ProvidersFeature([h.t])],decls:2,vars:2,consts:[["class","background-dark",4,"ngIf"],["class","background-white",4,"ngIf"],[1,"background-dark"],[1,"header-form"],[1,"content-height"],[4,"ngIf"],["align","center",1,"align-button"],["class","flex-button",4,"ngIf"],[1,"p-grid"],[1,"p-col-12","text-center"],[1,"p-col-12",2,"padding-left","85px"],[2,"font-size","18px",3,"innerHTML"],["class","p-grid",4,"ngIf"],[1,"p-col-12","text-center","validation-img"],[1,"step-validation",3,"src"],[1,"p-col-12","text-center","validation-video"],["width","320","height","240","frameborder","0","allow","autoplay; encrypted-media","allowfullscreen","",3,"src"],[1,"flex-button"],["mat-raised-button","","matTooltipPosition","above",1,"background-grey",3,"matTooltip","click"],["svgIcon","backup-restore",1,"icon-style-go-back"],["mat-raised-button","","color","accent","class","btn-opssi",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btn-opssi",3,"matTooltip","click"],[1,"mat-icon-default"],["mat-raised-button","","matTooltipPosition","above",1,"background-grey",2,"padding-left","5px","padding-right","8px",3,"matTooltip","click"],["mat-raised-button","","color","accent","class","btn-opssi","style","padding-left: 5px; padding-right: 8px",3,"matTooltip","ngClass","disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btn-opssi",2,"padding-left","5px","padding-right","8px",3,"matTooltip","ngClass","disabled","click"],[1,"background-white"],[1,"content-height",3,"formGroup"],["mat-raised-button","","color","accent",1,"btn-opssi",2,"padding-left","5px","padding-right","8px",3,"disabled","matTooltip","click"],[1,"p-col-12",2,"padding-left","27px"],[1,"p-grid",2,"width","155px","padding-left","30px","margin-top","7px !important"],["formControlName","method",2,"font-size","12px"],["value","transfer",1,"radio-alignment",3,"change"],["value","check",1,"radio-alignment",3,"change"],["value","credit_card",1,"radio-alignment",3,"change"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,K,11,5,"div",0),t.\u0275\u0275template(1,z,18,15,"div",1)),2&e&&(t.\u0275\u0275property("ngIf","confirmTiga"!==n.data.type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","confirmTiga"===n.data.type))},dependencies:[S.lW,c.xY,c.H8,B.Hw,b.VQ,b.U0,M.gM,m.\u0275NgNoValidate,m.NgControlStatus,m.NgControlStatusGroup,m.NgForm,m.FormGroupDirective,m.FormControlName,R.oO,v.mk,v.O5,T.X$,v.H9],styles:["[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#3f3f3f}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.header-form[_ngcontent-%COMP%]{padding:18px}.footer-form[_ngcontent-%COMP%]{padding:0 18px 18px}.no-margin[_ngcontent-%COMP%]{margin:0!important}.disabledd[_ngcontent-%COMP%]{background-color:#565656!important;color:#ababab!important}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-b[_ngcontent-%COMP%], .no-padding-t[_ngcontent-%COMP%]{padding-bottom:0!important}.float-left[_ngcontent-%COMP%]{float:left}.align-button[_ngcontent-%COMP%]{text-align:center!important}[_nghost-%COMP%]     .mat-dialog-content{margin:0!important;padding:0!important;max-height:unset}.step-validation[_ngcontent-%COMP%]{max-height:390px}.background-dark[_ngcontent-%COMP%]{background-color:#3f3f3f;color:#fff}.background-grey[_ngcontent-%COMP%]{background-color:#78909c;color:#fff}.background-white[_ngcontent-%COMP%]{background-color:#fff;color:#000}.color-dark[_ngcontent-%COMP%]{color:#3f3f3f!important}.flex-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.icon-style-go-back[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;padding-right:1px}"]}),i})()},62416:(I,g,r)=>{r.d(g,{t:()=>f});var c=r(15439),C=r(94650);let f=(()=>{class d{transform(o,l){return o?c(o,"HH:mm").subtract(-c().utcOffset(),"m").format("HH:mm"):""}transformAMPM(o,l){return o?c(o,"HH:mm").subtract(-c().utcOffset(),"m").format("HH:mm"):""}transformDate(o,l){if(o&&l)return c(o+l,"DD/MM/YYYYHH:mm").subtract(-c().utcOffset(),"m").format("DD/MM/YYYY")}transformDateInDateFormat(o,l){if(o&&l)return c(o+l,"DD/MM/YYYYHH:mm").subtract(-c().utcOffset(),"m")}fixDateFormat(o){if(o&&o.includes("-")){const l=o.split("-");o=`${l[2]}/${l[1]}/${l[0]}`}return o}fixDateFormatUtc(o){if(o&&o.includes("-")){const l=o.split("-");o=`${l[2].split("T")[0]}/${l[1]}/${l[0]}`}return o}fixTimeFormat(o){return o&&!o.includes(":")&&(o="00:00"),o}transformDateToJavascriptDate(o,l){if(o=this.fixDateFormat(o),l=this.fixTimeFormat(l),o&&l)return c(o+l,"DD/MM/YYYYHH:mm").subtract(-c().utcOffset(),"m").toDate()}transformDateToStringFormat(o,l){if(o&&l)return c(o+l,"DD/MM/YYYYHH:mm").subtract(-c().utcOffset(),"m").format("MMM DD, YYYY")}}return d.\u0275fac=function(o){return new(o||d)},d.\u0275pipe=C.\u0275\u0275definePipe({name:"parseUtcToLocal",type:d,pure:!0}),d})()}}]);