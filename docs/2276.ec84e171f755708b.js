"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[2276],{2276:(de,I,r)=>{r.r(I),r.d(I,{ImportPreviousFinanceModule:()=>ce});var L=r(36895),V=r(93730),A=r(30160),C=r(88796),y=r(610),B=r(36224),w=r(25360),c=r(24006),N=r(35226),u=r.n(N),b=r(68745),M=r(33296),d=r(17489),v=r(65938),T=r(15439),O=r(10830),e=r(94650),S=r(89383),x=r(79710),D=r(94442),E=r(4859),F=r(99602),P=r(97392),f=r(59549),R=r(284);let j=(()=>{class s{constructor(i,t,n,o,l,a,p){this.dialogRef=i,this.fb=t,this.translate=n,this.candidateService=o,this.parseStringDatePipe=l,this.financeService=a,this.data=p,this.subs=new b.Y}ngOnInit(){console.log("Import Selected is => ",this.data),this.initForm();const i={opening:this.parseStringDatePipe.transform("09/01/2020"),closing:this.parseStringDatePipe.transform("08/31/2021")};this.importForm.patchValue(i)}initForm(){this.importForm=this.fb.group({opening:["",c.Validators.required],closing:["",c.Validators.required]})}downloadFile(){let i="",t="",n="",o="";const l=T(this.importForm.get("opening").value,"DD-MM-YYYY").format("DD-MM-YYYY"),a=T(this.importForm.get("closing").value,"DD-MM-YYYY").format("DD-MM-YYYY");for(const p of this.data.campuses)i+=p+",";i=i.substring(0,i.length-1);for(const p of this.data.levels)t+=p+",";t=t.substring(0,t.length-1);for(const p of this.data.scholarSeasons)n+=p+",";n=n.substring(0,n.length-1);for(const p of this.data.schools)o+=p+",";o=o.substring(0,o.length-1),this.financeService.downloadGeneralFinanceN1TemplateCSV(l,a,this.data.delimiter,n,o,i,t),this.dialogRef.close("downloaded")}downLoadFile(i,t){const n=new Blob([i],{type:t}),o=window.URL.createObjectURL(n),l=window.open(o);(!l||l.closed||typeof l.closed>"u")&&alert("Please disable your Pop-up blocker and try again.")}filterMonday(){return t=>{const n=(t||new Date).getDay();return 0!==n&&2!==n&&3!==n&&4!==n&&5!==n&&6!==n}}filterSunday(){return t=>{const n=(t||new Date).getDay();return 1!==n&&2!==n&&3!==n&&4!==n&&5!==n&&6!==n}}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return s.\u0275fac=function(i){return new(i||s)(e.\u0275\u0275directiveInject(v.so),e.\u0275\u0275directiveInject(c.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.sK),e.\u0275\u0275directiveInject(x.o),e.\u0275\u0275directiveInject(O.n),e.\u0275\u0275directiveInject(D.N),e.\u0275\u0275directiveInject(v.WI))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["ms-import-previous-finance"]],features:[e.\u0275\u0275ProvidersFeature([O.n])],decls:54,vars:27,consts:[[1,"header-div"],[1,"header-text"],["mat-icon-button","","type","button",1,"header-icon",3,"click"],[1,"header-form",3,"formGroup"],[2,"color","black"],[1,"content-height"],[1,"p-grid"],[1,"p-col-12"],[1,"p-col-3",2,"float","left","margin-top","6px"],[1,"p-col-7",2,"float","left","padding","0px"],["matInput","","required","","readonly","","formControlName","opening",3,"matDatepicker","disabled","click"],["matSuffix","",3,"for"],["myDatepicker",""],["matInput","","required","","readonly","","formControlName","closing",3,"matDatepicker","disabled","click"],["myDatepickers",""],["align","right"],["mat-raised-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"]],template:function(i,t){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"mat-icon"),e.\u0275\u0275text(2," cloud_download "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h4",1),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",2),e.\u0275\u0275listener("click",function(){return t.closeDialog()}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(9,"hr"),e.\u0275\u0275elementStart(10,"form",3)(11,"div",4)(12,"mat-dialog-content",5)(13,"div",6)(14,"div",7)(15,"b"),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",6)(19,"div",7)(20,"div",8)(21,"label"),e.\u0275\u0275text(22),e.\u0275\u0275pipe(23,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"div",9)(25,"mat-form-field")(26,"input",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275reference(29);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"mat-datepicker-toggle",11)(28,"mat-datepicker",null,12),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(30,"div",6)(31,"div",7)(32,"b"),e.\u0275\u0275text(33),e.\u0275\u0275pipe(34,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"div",6)(36,"div",7)(37,"div",8)(38,"label"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",9)(42,"mat-form-field")(43,"input",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const l=e.\u0275\u0275reference(46);return e.\u0275\u0275resetView(l.open())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(44,"mat-datepicker-toggle",11)(45,"mat-datepicker",null,14),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(47,"mat-dialog-actions",15)(48,"button",16),e.\u0275\u0275listener("click",function(){return t.closeDialog()}),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"button",17),e.\u0275\u0275listener("click",function(){return t.downloadFile()}),e.\u0275\u0275text(52),e.\u0275\u0275pipe(53,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&i){const n=e.\u0275\u0275reference(29),o=e.\u0275\u0275reference(46);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,13,"Download template of Finance N - 1")," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",t.importForm),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,15,"Please select the starting date for finance N - 1")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(23,17,"Import_Of.Start Date")),e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",n),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",n),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(34,19,"Please select the closing date for finance N - 1")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(40,21,"Import_Of.Close Date")),e.\u0275\u0275advance(4),e.\u0275\u0275property("matDatepicker",o),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",o),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(50,23,"ASSIGN_CORRECTOR_DIALOG.CANCEL")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.importForm.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(53,25,"Validate")," ")}},dependencies:[E.lW,F.Mq,F.hl,F.nW,v.xY,v.H8,P.Hw,f.KE,f.R9,R.Nt,c.\u0275NgNoValidate,c.DefaultValueAccessor,c.NgControlStatus,c.NgControlStatusGroup,c.RequiredValidator,c.FormGroupDirective,c.FormControlName,S.X$],styles:["[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#00000047!important}.header-form[_ngcontent-%COMP%]{padding:18px}.footer-form[_ngcontent-%COMP%]{padding:0 18px 18px}.no-margin[_ngcontent-%COMP%]{margin:0!important}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-b[_ngcontent-%COMP%], .no-padding-t[_ngcontent-%COMP%]{padding-bottom:0!important}.float-left[_ngcontent-%COMP%]{float:left}[_nghost-%COMP%]     .mat-dialog-content{margin:0!important;padding:0!important;max-height:unset}"]}),s})();var k=r(52688),U=r(80484),G=r(67154),Y=r(84130),W=r(44758),z=r(3238),J=r(73546),Q=r(51572),H=r(84385),K=r(10266);const X=["importFile"];function $(s,m){1&s&&(e.\u0275\u0275elementStart(0,"div",38)(1,"div",39),e.\u0275\u0275element(2,"mat-spinner",40),e.\u0275\u0275elementEnd()())}function Z(s,m){1&s&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is required")))}function q(s,m){1&s&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ee(s,m){1&s&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is required")))}function te(s,m){1&s&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ie(s,m){1&s&&(e.\u0275\u0275elementStart(0,"mat-error",41),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ne(s,m){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ng-select",42),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.getDataDelimeter())}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(1,5,"Speciality")),e.\u0275\u0275property("items",i.specialityList)("multiple",!0)("hideSelected",!0)("disabled",!i.isSpecialityOn)}}function se(s,m){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ng-select",42),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.getDataDelimeter())}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(1,5,"Speciality")),e.\u0275\u0275property("items",i.specialityList)("multiple",!0)("hideSelected",!0)("disabled",!i.isSpecialityOn)}}function ae(s,m){if(1&s&&(e.\u0275\u0275elementStart(0,"mat-option",43),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const i=m.$implicit;e.\u0275\u0275property("value",i.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",i.key," ")}}function oe(s,m){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",44),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.submitImport())}),e.\u0275\u0275elementStart(1,"mat-icon",26),e.\u0275\u0275text(2,"cloud_upload"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",i.isWaitingForResponse||!i.importForm.valid||!i.file),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"Save the import")," ")}}function re(s,m){1&s&&(e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275element(1,"mat-progress-spinner",46),e.\u0275\u0275elementEnd())}const le=[{path:"",component:(()=>{class s{constructor(i,t,n,o,l,a,p,h,_,g,me){this.fb=i,this.translate=t,this.userService=n,this.fileUploadService=o,this.candidateService=l,this.pageTitleService=a,this.financeService=p,this.dialog=h,this.cdr=_,this.permissionsService=g,this.permission=me,this.subs=new b.Y,this.templateCSVDownloadName="comma",this.server=M.a.baseApi,this.isAcadir=!1,this.isClose=!1,this.isWaitingForResponse=!1,this.campusList=[],this.listObjective=[],this.titles=[],this.classes=[],this.levels=[],this.scholars=[],this.school=[],this.realCampusList=[],this.realLevelList=[],this.delimeter=[{key:"COMMA [ , ]",value:","},{key:"SEMICOLON [ ; ]",value:";"},{key:"TAB [ ]",value:"tab"}],this.isDelimeterOn=!1,this.isLevelOn=!1,this.isSchoolOn=!1,this.isCampusOn=!1,this.isDirectorAdmission=!1,this.isMemberAdmission=!1,this.templateDonwloaded=!1,this.sectorList=[],this.specialityList=[],this.originalListSectors=[],this.originalListSpeciality=[],this.isSectorsOn=!1,this.isSpecialityOn=!1,this.isDataForListLoading=!1,this.specializationDataLoading=!1,this.isSectorsDataLoading=!1,this.downloadTemplateLoading=!1}ngOnInit(){this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const i=this.currentUser?.entities?.find(t=>t?.type?.name===this.isPermission[0]);this.currentUserTypeId=i?.type?._id,this.isDirectorAdmission=!!this.permissionsService.getPermission("Director of Admissions"),this.isMemberAdmission=!!this.permissionsService.getPermission("Member Admission"),this.getDataScholarSeasons(),this.initImportForm(),this.initDummyImportForm(),this.getDataForList(),"fr"===this.translate.currentLang?this.importForm.get("delimiter").setValue(";"):this.importForm.get("delimiter").setValue(","),this.subs.sink=this.translate.onLangChange.subscribe(()=>{"fr"===this.translate.currentLang?this.importForm.get("delimiter").setValue(";"):this.importForm.get("delimiter").setValue(",")}),this.currentUser=this.userService.getLocalStorageUser(),this.initialForm=d.cloneDeep(this.importForm.value),this.subs.sink=this.importForm.valueChanges.subscribe(t=>{t&&this.dataIsChanged()}),this.getDataForSectors(),this.pageTitleService.setTitle("Platform >> Import of financial N - 1")}getDataForList(){this.subs.sink=this.isDirectorAdmission?this.candidateService.GetDataForImportObjectives(this.currentUser&&this.currentUser.entities&&this.currentUser.entities.length?this.currentUser.entities[0].candidate_school:"",this.currentUserTypeId).subscribe(t=>{t&&(this.listObjective=t)},t=>{this.userService.postErrorLog(t),u().fire({type:"info",title:this.translate.instant("SORRY"),text:t&&t.message?this.translate.instant(t.message.replaceAll("GraphQL error: ","")):t,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.candidateService.GetDataForImportObjectives("",this.currentUserTypeId).subscribe(t=>{t&&(this.listObjective=t)},t=>{this.userService.postErrorLog(t),u().fire({type:"info",title:this.translate.instant("SORRY"),text:t&&t.message?this.translate.instant(t.message.replaceAll("GraphQL error: ","")):t,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getDataScholarSeasons(){this.subs.sink=this.financeService.GetAllScholarSeasons().subscribe(i=>{i&&i.length&&(this.scholars=i)},i=>{this.userService.postErrorLog(i),u().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}initImportForm(){this.importForm=this.fb.group({schools:[null,c.Validators.required],campuses:[null,c.Validators.required],scholarSeasons:[null,c.Validators.required],levels:[null,c.Validators.required],sectors:[null,c.Validators.required],specialities:[null],delimiter:["",c.Validators.required]})}initDummyImportForm(){this.importDummyForm=this.fb.group({schools:[null,c.Validators.required],campuses:[null,c.Validators.required],scholarSeasons:[null,c.Validators.required],levels:[null,c.Validators.required],delimiter:["",c.Validators.required]})}openUploadWindow(){this.importFile.nativeElement.click()}ngAfterViewChecked(){this.cdr.detectChanges()}getDataCampus(){this.levels=[],this.campusList=[],this.sectorList=[],this.specialityList=[],this.importForm.get("campuses").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.isDelimeterOn=!1,this.isCampusOn=!0;let i=this.importForm.get("schools").value;if(i=i.filter(t=>"ALL"===t||"Tous"===t),i&&i.length&&("ALL"===i[0]||"Tous"===i[0])){const t=[],n=this.school.filter(o=>"ALL"!==o._id&&"Tous"!==o._id);if(n.length>0){n.forEach(a=>{t.push(a._id)}),this.importForm.get("schools").patchValue(t);const o=n,l={_id:"ALL",name:this.translate.instant("ALL")};this.campusList.push(l),o.forEach(a=>{a&&a.campuses&&a.campuses.length&&a.campuses.forEach(p=>{this.campusList.push(p),this.realCampusList.push(p)})}),this.campusList=d.uniqBy(this.campusList,"_id")}else this.campusList=[],this.realCampusList=[]}else{i=d.cloneDeep(this.importForm.get("schools").value);const t=this.listObjective.filter(o=>i.includes(o._id)),n={_id:"ALL",name:this.translate.instant("ALL")};this.campusList.push(n),t.filter(o=>{o.campuses&&o.campuses.length&&o.campuses.filter(l=>{this.campusList.push(l),this.realCampusList.push(l)})}),this.campusList=d.uniqBy(this.campusList,"_id")}}getDataSchool(){this.importForm.get("schools").setValue(null),this.importForm.get("campuses").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.isSchoolOn=!0,this.school=[],this.campusList=[],this.levels=[],this.sectorList=[],this.specialityList=[],this.isDelimeterOn=!1;const i={_id:"ALL",short_name:this.translate.instant("ALL")};this.listObjective.length>0?(this.school.push(i),this.school.push(...this.listObjective)):this.school=[]}getDataLevel(){this.levels=[],this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null);let i=d.cloneDeep(this.importForm.get("campuses").value);if(i=i.filter(t=>"ALL"===t||"Tous"===t),i&&i.length&&("ALL"===i[0]||"Tous"===i[0])){const t=[],n=this.realCampusList.filter(a=>"ALL"!==a._id&&"Tous"!==a._id);n.forEach(a=>{t.push(a._id)}),this.importForm.get("campuses").patchValue(t);const o=n,l={_id:"ALL",name:this.translate.instant("ALL")};this.levels.push(l),o.forEach(a=>{a&&a.levels&&a.levels.length&&a.levels.forEach(p=>{this.levels.push(p)})}),this.levels=d.uniqBy(this.levels,"_id")}else{i=d.cloneDeep(this.importForm.get("campuses").value);const t=this.realCampusList.filter(o=>i.includes(o._id)),n={_id:"ALL",name:this.translate.instant("ALL")};this.levels.push(n),t.forEach(o=>{o&&o.levels&&o.levels.length&&o.levels.forEach(l=>{this.levels.push(l)})}),this.levels=d.uniqBy(this.levels,"_id")}}getDataForSectors(){this.isSectorsDataLoading=!0,this.subs.sink=this.financeService.GetAllSectorsDropdownWithoutFilter().subscribe(i=>{i&&(this.originalListSectors=i.map(t=>{const n=t.school_id.map(a=>a._id),o=t.campus_id.map(a=>a._id),l=t.level_id.map(a=>a._id);return{_id:t._id,name:t.name,school_id:n,level_id:l,campus_id:o}}),this.isSectorsDataLoading=!1)},i=>{this.userService.postErrorLog(i),this.originalListSectors=[],this.isSectorsDataLoading=!1,u().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getSectors(){this.isSectorsOn=!0,this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.sectorList=[];let i=d.cloneDeep(this.importForm.get("levels").value);if(i=i.filter(l=>"ALL"===l||"Tous"===l),i&&i.length&&("ALL"===i[0]||"Tous"===i[0])){const l=[];this.levels.filter(p=>"ALL"!==p._id&&"Tous"!==p._id).forEach(p=>{l.push(p._id)}),this.importForm.get("levels").patchValue(l)}const n={scholar_season_id:this.importForm.get("scholarSeasons").value[0],candidate_school_ids:this.importForm.get("schools").value,campuses:this.importForm.get("campuses").value,levels:this.importForm.get("levels").value},o={_id:"ALL",name:this.translate.instant("ALL")};if(this.originalListSectors.length>0){let l=this.originalListSectors.filter(a=>{const p=n.candidate_school_ids.some(g=>a.school_id.includes(g)),h=n.campuses.some(g=>a.campus_id&&a.campus_id.includes(g)),_=n.levels.some(g=>a.level_id.includes(g));if(p&&h&&_)return a});l.length>0?(this.sectorList.push(o),l=l.map(a=>({_id:a._id,name:a.name})),l.forEach(a=>{this.sectorList.push(a)})):this.sectorList=[]}else this.sectorList=[]}getDataDelimeter(){let i=d.cloneDeep(this.importForm.get("specialities").value);if(i=i.filter(t=>"ALL"===t||"Tous"===t),i&&i.length&&("ALL"===i[0]||"Tous"===i[0])){const t=[];this.specialityList.filter(o=>"ALL"!==o._id&&"Tous"!==o._id).forEach(o=>{t.push(o._id)}),this.importForm.get("specialities").patchValue(t)}}getSpeciality(){this.isDelimeterOn=!0,this.isSpecialityOn=!0,this.importForm.get("specialities").setValue(null),this.specialityList=[];let i=d.cloneDeep(this.importForm.get("sectors").value);if(i=i.filter(a=>"ALL"===a||"Tous"===a),i&&i.length&&("ALL"===i[0]||"Tous"===i[0])){const a=[];this.sectorList.filter(h=>"ALL"!==h._id&&"Tous"!==h._id).forEach(h=>{a.push(h._id)}),this.importForm.get("sectors").patchValue(a)}const t=this.importForm.get("scholarSeasons").value,n=this.importForm.get("sectors").value,o={scholar_season_id:t[0],candidate_school_ids:this.importForm.get("schools").value,campuses:this.importForm.get("campuses").value,levels:this.importForm.get("levels").value,sectors:n},l={_id:"ALL",name:this.translate.instant("ALL")};this.specializationDataLoading=!0,this.subs.sink=this.candidateService.GetAllSpecializationsByScholar(o).subscribe(a=>{if(a)if(this.originalListSpeciality=d.cloneDeep(a),this.specializationDataLoading=!1,this.originalListSpeciality.length>0){this.specialityList=[];let p=this.originalListSpeciality;p.length>0?(this.specialityList.push(l),p=p.map(h=>({_id:h._id,name:h.name})),p.forEach(h=>{this.specialityList.push(h)})):this.specialityList=[]}else this.specialityList=[]},a=>{this.userService.postErrorLog(a),this.specializationDataLoading=!1,this.specialityList=[],u().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}resetImport(){this.listObjective=[],this.sectorList=[],this.scholars=[],this.school=[],this.campusList=[],this.levels=[],this.specialityList=[],this.importForm.get("schools").setValue(null),this.importForm.get("campuses").setValue(null),this.importForm.get("scholarSeasons").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.importForm.get("delimiter").setValue(""),"fr"===this.translate.currentLang?this.importForm.get("delimiter").setValue(";"):this.importForm.get("delimiter").setValue(","),this.path="",this.fileName="",this.templateDonwloaded=!1,this.getDataScholarSeasons(),this.getDataForList()}handleInputChange(i){this.dataIsChanged(),this.isWaitingForResponse=!0;const t=i.target.files[0];this.file=i.target.files[0],this.path="",this.fileName="",t&&(this.subs.sink=this.fileUploadService.singleUpload(t).subscribe(n=>{this.isWaitingForResponse=!1,n&&(this.path=n.file_url,this.fileName=n.file_name,u().fire({type:"success",title:this.translate.instant("IMPORT_OBJ_S1.Title"),html:this.translate.instant("IMPORT_OBJ_S1.Text"),confirmButtonText:this.translate.instant("IMPORT_OBJ_S1.Button")}))},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,u().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})),this.resetFileState()}resetFileState(){this.importFile.nativeElement.value=""}submitImport(){this.isWaitingForResponse=!0;const i=d.cloneDeep(this.importForm.value);this.subs.sink=this.financeService.ImportGeneralDashboardFinanceN1({scholar_seasons:i.scholarSeasons,schools:i.schools,campuses:i.campuses,levels:i.levels,file_delimeter:i.delimiter},this.file).subscribe(n=>{this.isWaitingForResponse=!1,n&&(u().fire({type:"success",title:"Bravo !",text:this.translate.instant("import success")}),this.financeService.importOfFinancialN1ValidationStatus=!0,this.resetImport())},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,"GraphQL error: some school / campus / level not found"===n.message?u().fire({type:"info",title:this.translate.instant("REJECT_IMPORT.TITLE"),text:this.translate.instant("REJECT_IMPORT.TEXT")}):u().fire({type:"info",title:this.translate.instant("IMPORT_OBJ_S3.Title"),html:this.translate.instant("IMPORT_OBJ_S3.Text"),confirmButtonText:this.translate.instant("IMPORT_OBJ_S3.Button")})})}csvTypeSelection(){const i=d.cloneDeep(this.importForm.value);i.action="primary",this.subs.sink=this.dialog.open(j,{width:"600px",minHeight:"100px",panelClass:"certification-rule-pop-up",disableClose:!0,data:i}).afterClosed().subscribe(t=>{t&&"downloaded"===t&&(this.templateDonwloaded=!0)})}dataIsChanged(){this.financeService.importOfFinancialN1ValidationStatus=JSON.stringify(this.initialForm)===JSON.stringify(this.importForm.value)}canDeactivate(){return this.financeService.importOfFinancialN1ValidationStatus?(this.financeService.importOfFinancialN1ValidationStatus=!0,!0):new Promise(i=>{u().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(t=>{t.value?i(!1):t.dismiss&&(this.financeService.importOfFinancialN1ValidationStatus=!0,i(!0))})})}ngOnDestroy(){clearTimeout(this.timeOutVal),clearInterval(this.intVal),this.pageTitleService.setTitle(null),this.subs.unsubscribe()}clearSchool(){this.school=[]}clearLevel(){this.getDataCampus()}clearCampus(){this.campusList=[],this.realCampusList=[]}handleRemoveScholarSeason(){0===this.importForm.get("scholarSeasons").value.length&&this.clearSchool()}handleRemoveSchool(){0===this.importForm.get("schools").value.length&&this.clearCampus()}handleRemoveCampus(){0===this.importForm.get("campuses").value.length&&this.clearLevel()}clearSpeciality(){this.specialityList=[]}}return s.\u0275fac=function(i){return new(i||s)(e.\u0275\u0275directiveInject(c.UntypedFormBuilder),e.\u0275\u0275directiveInject(S.sK),e.\u0275\u0275directiveInject(k.e),e.\u0275\u0275directiveInject(U.J),e.\u0275\u0275directiveInject(x.o),e.\u0275\u0275directiveInject(G.Z),e.\u0275\u0275directiveInject(D.N),e.\u0275\u0275directiveInject(v.uw),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Y.YI),e.\u0275\u0275directiveInject(W.$))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["ms-import-previous-finance"]],viewQuery:function(i,t){if(1&i&&e.\u0275\u0275viewQuery(X,5),2&i){let n;e.\u0275\u0275queryRefresh(n=e.\u0275\u0275loadQuery())&&(t.importFile=n.first)}},inputs:{schoolId:"schoolId",selectedRncpTitleId:"selectedRncpTitleId",selectedClassId:"selectedClassId"},decls:128,vars:100,consts:[[1,"p-grid",2,"margin-bottom","5px","border-bottom","1px solid #4e4e4e"],[1,"p-col-12",2,"padding-left","10px"],[2,"width","20px","float","left","padding","4px 0px 0px 0px","margin-right","10px"],[2,"font-size","16px"],[1,"titleImport"],[1,"p-grid"],[1,"p-col-12",2,"padding-left","0px","padding-right","0px"],["class","p-col-12","style","text-align: center !important; display: contents",4,"ngIf"],[3,"formGroup"],[1,"p-col-7"],[1,"p-grid","baseline"],[2,"width","25%"],["bindLabel","scholar_season","bindValue","_id","clearAllText","Clear","formControlName","scholarSeasons",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","change","clear","remove"],["style","margin-bottom: 10px; margin-top: 10px",4,"ngIf"],["bindLabel","short_name","bindValue","_id","clearAllText","Clear","formControlName","schools",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","disabled","change","clear","remove"],["bindLabel","name","bindValue","_id","clearAllText","Clear","formControlName","campuses",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","disabled","change","clear","remove"],["bindLabel","name","bindValue","_id","clearAllText","Clear","formControlName","levels",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","disabled","change"],["bindLabel","name","bindValue","_id","clearAllText","Clear","formControlName","sectors",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","disabled","change","clear"],["style","width: 75%","class","mrgn-btn custom-ngselect-dropdown","bindLabel","name","bindValue","_id","clearAllText","Clear","formControlName","specialities",3,"items","multiple","hideSelected","placeholder","disabled","change",4,"ngIf"],["floatLabel","never",2,"width","75%"],["formControlName","delimiter","panelClass","filterPanel custom-matselect-dropdown",1,"full-width",3,"disabled","disableOptionCentering"],[3,"value",4,"ngFor","ngForOf"],[1,"p-col-7",2,"float","left"],[1,"p-col-8",2,"padding","0.5em 0px","float","left"],[1,"p-col-4",2,"padding","0px","float","left","text-align","right"],["mat-raised-button","","color","accent",1,"margin-right-0",2,"width","200px",3,"disabled","click"],[1,"mat-icon-default"],[1,"p-col-3",2,"padding","0.5em 0px","float","left"],[1,"p-col-5",2,"padding","0.5em 0px","float","left"],["type","file","accept",".csv, .tsv","disableMultipart","true",2,"display","none",3,"change"],["importFile",""],[1,"p-grid","mrgn-t-sm"],[1,"p-col-12",2,"text-align","right","padding","0px"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-raised-button","","color","accent","class","margin-right-0",3,"disabled","click",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[1,"p-col-12",2,"text-align","center !important","display","contents"],[1,"center-spinner","spinner-wrapper"],["color","accent"],[2,"margin-bottom","10px","margin-top","10px"],["bindLabel","name","bindValue","_id","clearAllText","Clear","formControlName","specialities",1,"mrgn-btn","custom-ngselect-dropdown",2,"width","75%",3,"items","multiple","hideSelected","placeholder","disabled","change"],[3,"value"],["mat-raised-button","","color","accent",1,"margin-right-0",3,"disabled","click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(i,t){1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"span")(4,"mat-icon",3),e.\u0275\u0275text(5,"cloud_upload"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"div")(7,"span",4),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(10,"div",5)(11,"div",6),e.\u0275\u0275template(12,$,3,0,"div",7),e.\u0275\u0275elementStart(13,"mat-card")(14,"form",8)(15,"div",5)(16,"div",9)(17,"div",10)(18,"mat-label",11),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"ng-select",12),e.\u0275\u0275listener("change",function(){return t.getDataSchool()})("clear",function(){return t.clearSchool()})("remove",function(){return t.handleRemoveScholarSeason()}),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"div",11),e.\u0275\u0275template(24,Z,3,3,"mat-error",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",5)(26,"div",9)(27,"div",10)(28,"mat-label",11),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"ng-select",14),e.\u0275\u0275listener("change",function(){return t.getDataCampus()})("clear",function(){return t.clearCampus()})("remove",function(){return t.handleRemoveSchool()}),e.\u0275\u0275pipe(32,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"div",11),e.\u0275\u0275template(34,q,3,3,"mat-error",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"div",5)(36,"div",9)(37,"div",10)(38,"mat-label",11),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"ng-select",15),e.\u0275\u0275listener("change",function(){return t.getDataLevel()})("clear",function(){return t.clearLevel()})("remove",function(){return t.handleRemoveCampus()}),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(43,"div",11),e.\u0275\u0275template(44,ee,3,3,"mat-error",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(45,"div",5)(46,"div",9)(47,"div",10)(48,"mat-label",11),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"ng-select",16),e.\u0275\u0275listener("change",function(){return t.getSectors()}),e.\u0275\u0275pipe(52,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(53,"div",11),e.\u0275\u0275template(54,te,3,3,"mat-error",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(55,"div",5)(56,"div",9)(57,"div",10)(58,"mat-label",11),e.\u0275\u0275text(59),e.\u0275\u0275pipe(60,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"ng-select",17),e.\u0275\u0275listener("change",function(){return t.getSpeciality()})("clear",function(){return t.clearSpeciality()}),e.\u0275\u0275pipe(62,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(63,"div",11),e.\u0275\u0275template(64,ie,3,3,"mat-error",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(65,"div",5)(66,"div",9)(67,"div",10)(68,"mat-label",11),e.\u0275\u0275text(69),e.\u0275\u0275pipe(70,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(71,ne,2,7,"ng-select",18),e.\u0275\u0275template(72,se,2,7,"ng-select",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(73,"div",5)(74,"div",9)(75,"div",10)(76,"mat-label",11),e.\u0275\u0275text(77),e.\u0275\u0275pipe(78,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"mat-form-field",19)(80,"mat-select",20),e.\u0275\u0275template(81,ae,2,2,"mat-option",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"mat-error"),e.\u0275\u0275text(83),e.\u0275\u0275pipe(84,"translate"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(85,"div",5)(86,"div",22)(87,"div",23)(88,"label"),e.\u0275\u0275text(89),e.\u0275\u0275pipe(90,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(91,"div",24)(92,"button",25),e.\u0275\u0275listener("click",function(){return t.csvTypeSelection()}),e.\u0275\u0275elementStart(93,"mat-icon",26),e.\u0275\u0275text(94,"cloud_download"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(95),e.\u0275\u0275pipe(96,"translate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(97,"div",5)(98,"div",22)(99,"div",27)(100,"label"),e.\u0275\u0275text(101),e.\u0275\u0275pipe(102,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(103,"div",28)(104,"span"),e.\u0275\u0275text(105),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(106,"div",24)(107,"input",29,30),e.\u0275\u0275listener("change",function(o){return t.handleInputChange(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(109,"button",25),e.\u0275\u0275listener("click",function(){return t.openUploadWindow()}),e.\u0275\u0275elementStart(110,"mat-icon",26),e.\u0275\u0275text(111,"cloud_upload"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(112),e.\u0275\u0275pipe(113,"translate"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(114,"div",31)(115,"div",32)(116,"button",33),e.\u0275\u0275listener("click",function(){return t.resetImport()}),e.\u0275\u0275elementStart(117,"mat-icon",26),e.\u0275\u0275text(118,"cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(119),e.\u0275\u0275pipe(120,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"button",34),e.\u0275\u0275listener("click",function(){return t.resetImport()}),e.\u0275\u0275pipe(122,"translate"),e.\u0275\u0275element(123,"mat-icon",35),e.\u0275\u0275text(124),e.\u0275\u0275pipe(125,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(126,oe,5,4,"button",36),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(127,re,2,0,"div",37)),2&i&&(e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,58,"Import of Finance N - 1")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.isWaitingForResponse),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",t.importForm),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(20,60,"CARDDETAIL.Scholar Season")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("placeholder","",e.\u0275\u0275pipeBind1(22,62,"CARDDETAIL.Scholar Season"),"*"),e.\u0275\u0275property("items",t.scholars)("multiple",!0)("hideSelected",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.importForm.get("scholarSeasons").errors&&(t.importForm.get("scholarSeasons").dirty||t.importForm.get("scholarSeasons").touched)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,64,"School")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("placeholder","",e.\u0275\u0275pipeBind1(32,66,"School"),"*"),e.\u0275\u0275property("items",t.school)("multiple",!0)("hideSelected",!0)("disabled",t.isSchoolOn),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.importForm.get("schools").errors&&(t.importForm.get("schools").dirty||t.importForm.get("schools").touched)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(40,68,"Campus")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("placeholder","",e.\u0275\u0275pipeBind1(42,70,"Campus"),"*"),e.\u0275\u0275property("items",t.campusList)("multiple",!0)("hideSelected",!0)("disabled",!t.isCampusOn),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.importForm.get("campuses").errors&&(t.importForm.get("campuses").dirty||t.importForm.get("campuses").touched)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,72,"Level")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("placeholder","",e.\u0275\u0275pipeBind1(52,74,"Level"),"*"),e.\u0275\u0275property("items",t.levels)("multiple",!0)("hideSelected",!0)("disabled",!t.isLevelOn),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.importForm.get("levels").errors&&(t.importForm.get("levels").dirty||t.importForm.get("levels").touched)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(60,76,"Sector")),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("placeholder","",e.\u0275\u0275pipeBind1(62,78,"Sector"),"*"),e.\u0275\u0275property("items",t.sectorList)("multiple",!0)("hideSelected",!0)("disabled",!t.isSectorsOn),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.importForm.get("sectors").errors&&(t.importForm.get("sectors").dirty||t.importForm.get("sectors").touched)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(70,80,"Speciality")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",0==(null==t.originalListSpeciality?null:t.originalListSpeciality.length)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.originalListSpeciality?null:t.originalListSpeciality.length)>0),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(78,82,"DELIMETER.title")),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!t.isDelimeterOn)("disableOptionCentering",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.delimeter),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(84,84,"This field is required")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(90,86,"DOWNLOAD_TEMPLATE")),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.importForm.invalid||t.isWaitingForResponse),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(96,88,"DOWNLOAD_TEMPLATE")," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(102,90,"DATA_FILE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(t.fileName),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",t.importForm.invalid||t.isWaitingForResponse||!t.templateDonwloaded),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(113,92,"Import Objectives")," "),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(120,94,"CANCEL")," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("matTooltip","",e.\u0275\u0275pipeBind1(122,96,"Reset Filter")," "),e.\u0275\u0275property("disabled",t.isWaitingForResponse),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(125,98,"RESET")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.permission.editImportFinanceN1()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isWaitingForResponse||t.isDataForListLoading||t.specializationDataLoading||t.isSectorsDataLoading||t.downloadTemplateLoading))},dependencies:[L.sg,L.O5,z.ey,E.lW,J.a8,P.Hw,f.TO,f.KE,f.hX,Q.Ou,H.gD,K.gM,c.\u0275NgNoValidate,c.NgControlStatus,c.NgControlStatusGroup,c.FormGroupDirective,c.FormControlName,C.w9,S.X$],styles:[".baseline[_ngcontent-%COMP%]{align-items:baseline}.titleImport[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.fileInfo[_ngcontent-%COMP%]{width:-moz-fit-content!important;width:fit-content!important;margin:5px!important;display:inline-block!important;border:1px solid rgba(0,0,0,.1);z-index:10;box-shadow:inset 1px 1px #0000001a,inset 0 -1px #00000012}.swal2-button[_ngcontent-%COMP%]{line-height:30px;font-size:12px!important;border-radius:2px}  .swal2-label{font-weight:700;font-size:14px}  .swal2-radio label{font-weight:700!important;font-size:14px!important}.spinner-wrapper[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;justify-content:center;align-items:center;top:0;left:0;background-color:#23232380;z-index:998}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}[_nghost-%COMP%]  .filterPanel{margin-top:25px!important}  .custom-ngselect-dropdown ng-dropdown-panel{width:-moz-fit-content!important;width:fit-content!important}"]}),s})(),canActivate:[w.n],canDeactivate:[B.g],data:{}},{path:"**",redirectTo:"",pathMatch:"full"}];let pe=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[y.Bz.forChild(le),y.Bz]}),s})(),ce=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=e.\u0275\u0275defineInjector({imports:[L.ez,V.m,pe,A.ii.forRoot(),C.A0]}),s})()}}]);