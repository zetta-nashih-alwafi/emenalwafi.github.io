"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[8276],{78276:(Mt,F,l)=>{l.r(F),l.d(F,{ImportRegisterModule:()=>Ot});var I=l(36895),M=l(93730),w=l(30160),C=l(610),V=l(36224),N=l(25360),m=l(24006),j=l(35226),g=l.n(j),O=l(68745),P=l(33296),S=l(65938),v=l(15439),Y=l(10830),t=l(94650),T=l(89383),x=l(79710),D=l(52688),R=l(73555),E=l(4859),L=l(99602),B=l(97392),_=l(59549),k=l(284),A=l(51572);function W(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function U(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function G(s,p){1&s&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275element(1,"mat-progress-spinner",21),t.\u0275\u0275elementEnd())}let z=(()=>{class s{constructor(e,i,n,r,o,a){this.dialogRef=e,this.fb=i,this.translate=n,this.candidateService=r,this.data=o,this.authService=a,this.subs=new O.Y,this.isWaitingForResponse=!1}ngOnInit(){if(this.initForm(),"second"===this.data.action){const e={opening:this.data.first_dates?v(this.data.first_dates,"DD-MM-YYYY").format("YYYY-MM-DD"):"",closing:this.data.last_dates?v(this.data.last_dates,"DD-MM-YYYY").format("YYYY-MM-DD"):""};this.importForm.patchValue(e),this.importForm.setErrors(null),this.importForm.updateValueAndValidity()}this.getMaxAndMinDate()}getMaxAndMinDate(){this.subs.sink=this.importForm.get("opening").valueChanges.subscribe(e=>{e&&(this.minDate=v(e).add(1,"d").format("YYYY-MM-DD"))}),this.subs.sink=this.importForm.get("closing").valueChanges.subscribe(e=>{e&&(this.maxDate=v(e).subtract(1,"d").format("YYYY-MM-DD"))})}initForm(){this.importForm=this.fb.group({opening:["",m.Validators.required],closing:["",m.Validators.required]})}downloadFile(){if(this.importForm.invalid)g().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),html:this.translate.instant("Invalid_Form_Warning.TEXT"),confirmButtonText:this.translate.instant("Invalid_Form_Warning.BUTTON")}),this.importForm.markAllAsTouched();else{let e="",i="",n=this.data.scholarSeasons,r="",o="",a="";const c=v(this.importForm.get("opening").value).format("DD-MM-YYYY"),d=v(this.importForm.get("closing").value).format("DD-MM-YYYY");for(const h of this.data.campuses)e+=h+",";e=e.substring(0,e.length-1);for(const h of this.data.levels)i+=h+",";i=i.substring(0,i.length-1);for(const h of this.data.schools)r+=h+",";if(r=r.substring(0,r.length-1),this.data&&this.data.specialities){for(const h of this.data.specialities)o+=h+",";o=o.substring(0,o.length-1)}else o=null;for(const h of this.data.sectors)a+=h+",";a=a.substring(0,a.length-1),this.isWaitingForResponse=!0;const f=v(this.importForm.get("opening").value).format("DD/MM/YYYY");this.subs.sink=this.candidateService.GetFirstDateOfRegisteredCandidate(this.data.scholarSeasons,this.data.schools,this.data.campuses,this.data.levels,this.data.sectors,this.data.specialities,f).subscribe(h=>{h?g().fire({type:"warning",title:this.translate.instant("IMPORT_OBJ_S4.Title"),html:this.translate.instant("IMPORT_OBJ_S4.Text",{start_date_input:f,start_date_response:h.date}),confirmButtonText:this.translate.instant("IMPORT_OBJ_S4.Button1"),showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_OBJ_S4.Button2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(y=>{y.value&&(this.candidateService.downloadTemplateCSV(c,d,this.data.delimiter,n,r,e,i,a,o),this.isWaitingForResponse=!1,this.dialogRef.close("downloaded")),y.dismiss&&(this.isWaitingForResponse=!1)}):(this.candidateService.downloadTemplateCSV(c,d,this.data.delimiter,n,r,e,i,a,o),this.isWaitingForResponse=!1,this.dialogRef.close("downloaded"))},h=>{this.authService.postErrorLog(h),this.isWaitingForResponse=!1,g().fire({type:"info",title:this.translate.instant("SORRY"),text:h&&h.message?this.translate.instant(h.message.replaceAll("GraphQL error: ","")):h,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}downLoadFile(e,i){const n=new Blob([e],{type:i}),r=window.URL.createObjectURL(n),o=window.open(r);(!o||o.closed||typeof o.closed>"u")&&alert("Please disable your Pop-up blocker and try again.")}filterMonday(){return i=>{const n=(i||new Date).getDay();return 0!==n&&2!==n&&3!==n&&4!==n&&5!==n&&6!==n}}filterSunday(){return i=>{const n=(i||new Date).getDay();return 1!==n&&2!==n&&3!==n&&4!==n&&5!==n&&6!==n}}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return s.\u0275fac=function(e){return new(e||s)(t.\u0275\u0275directiveInject(S.so),t.\u0275\u0275directiveInject(m.UntypedFormBuilder),t.\u0275\u0275directiveInject(T.sK),t.\u0275\u0275directiveInject(x.o),t.\u0275\u0275directiveInject(S.WI),t.\u0275\u0275directiveInject(D.e))},s.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["ms-import-objective-dialog"]],features:[t.\u0275\u0275ProvidersFeature([Y.n])],decls:57,vars:32,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-div"],[1,"header-text"],["mat-icon-button","","type","button",1,"header-icon",3,"click"],[1,"header-form",3,"formGroup"],[2,"color","black"],[1,"content-height"],[1,"p-grid"],[1,"p-col-12"],[1,"p-col-3",2,"float","left","margin-top","6px"],[1,"p-col-7",2,"float","left","padding","0px"],["matInput","","required","","readonly","","formControlName","opening",3,"matDatepicker","max","click"],["matSuffix","",3,"for"],["myDatepicker",""],[4,"ngIf"],["matInput","","required","","readonly","","formControlName","closing",3,"matDatepicker","disabled","min","click"],["myDatepickers",""],["align","right"],["mat-raised-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,i){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"mat-icon"),t.\u0275\u0275text(2," cloud_download "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"h4",1),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",2),t.\u0275\u0275listener("click",function(){return i.closeDialog()}),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(9,"hr"),t.\u0275\u0275elementStart(10,"form",3)(11,"div",4)(12,"mat-dialog-content",5)(13,"div",6)(14,"div",7)(15,"b"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(18,"div",6)(19,"div",7)(20,"div",8)(21,"label"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",9)(25,"mat-form-field")(26,"input",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const o=t.\u0275\u0275reference(29);return t.\u0275\u0275resetView(o.open())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(27,"mat-datepicker-toggle",11)(28,"mat-datepicker",null,12),t.\u0275\u0275template(30,W,3,3,"mat-error",13),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(31,"div",6)(32,"div",7)(33,"b"),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(36,"div",6)(37,"div",7)(38,"div",8)(39,"label"),t.\u0275\u0275text(40),t.\u0275\u0275pipe(41,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"div",9)(43,"mat-form-field")(44,"input",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const o=t.\u0275\u0275reference(47);return t.\u0275\u0275resetView(o.open())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(45,"mat-datepicker-toggle",11)(46,"mat-datepicker",null,15),t.\u0275\u0275template(48,U,3,3,"mat-error",13),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(49,"mat-dialog-actions",16)(50,"button",17),t.\u0275\u0275listener("click",function(){return i.closeDialog()}),t.\u0275\u0275text(51),t.\u0275\u0275pipe(52,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"button",18),t.\u0275\u0275listener("click",function(){return i.downloadFile()}),t.\u0275\u0275text(54),t.\u0275\u0275pipe(55,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(56,G,2,0,"div",19)}if(2&e){const n=t.\u0275\u0275reference(29),r=t.\u0275\u0275reference(47);let o;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,18,"Download template of Registration Objectives")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",i.importForm),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,20,"Please select the starting date for registration")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(23,22,"Import_Of.Start Date"),"*"),t.\u0275\u0275advance(4),t.\u0275\u0275property("matDatepicker",n)("max",i.maxDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("for",n),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",i.importForm.get("opening").errors&&(i.importForm.get("opening").dirty||i.importForm.get("opening").touched)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(35,24,"Please select the closing date for registration")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(41,26,"Import_Of.Close Date"),"*"),t.\u0275\u0275advance(4),t.\u0275\u0275property("matDatepicker",r)("disabled",!(null!=i.importForm&&null!=(o=i.importForm.get("opening"))&&o.value))("min",i.minDate),t.\u0275\u0275advance(1),t.\u0275\u0275property("for",r),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",i.importForm.get("opening").errors&&(i.importForm.get("opening").dirty||i.importForm.get("opening").touched)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(52,28,"ASSIGN_CORRECTOR_DIALOG.CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(55,30,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.isWaitingForResponse)}},dependencies:[R.Zt,R.Bh,E.lW,L.Mq,L.hl,L.nW,S.xY,S.H8,B.Hw,_.TO,_.KE,_.R9,k.Nt,A.Ou,m.\u0275NgNoValidate,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.RequiredValidator,m.FormGroupDirective,m.FormControlName,I.O5,T.X$],styles:["[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#00000047!important}.header-form[_ngcontent-%COMP%]{padding:18px}.footer-form[_ngcontent-%COMP%]{padding:0 18px 18px}.no-margin[_ngcontent-%COMP%]{margin:0!important}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-b[_ngcontent-%COMP%], .no-padding-t[_ngcontent-%COMP%]{padding-bottom:0!important}.float-left[_ngcontent-%COMP%]{float:left}[_nghost-%COMP%]     .mat-dialog-content{margin:0!important;padding:0!important;max-height:unset}"]}),s})();var u=l(17489),J=l(68516),H=l(58840),Q=l(50777),$=l(80529),X=l(80484),K=l(67154),Z=l(84130),q=l(94442),tt=l(84075),et=l(44758),it=l(3238),nt=l(73546),st=l(84385),at=l(10266),b=l(88796);const ot=["importFile"];function rt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function lt(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.short_name))}}function pt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ct(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function mt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function dt(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function ht(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ut(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function gt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ft(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function vt(s,p){if(1&s){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ng-select",41),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const n=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(n.getDataDelimeter())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,ft,3,4,"ng-option",15),t.\u0275\u0275elementEnd()}if(2&s){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(1,5,"Speciality")),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",!e.isSpecialityOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.specialityList)}}function _t(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"ng-option",40),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function St(s,p){if(1&s){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ng-select",41),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const n=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(n.getDataDelimeter())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,_t,3,4,"ng-option",15),t.\u0275\u0275elementEnd()}if(2&s){const e=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(1,5,"Speciality")),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",!e.isSpecialityOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.specialityList)}}function It(s,p){if(1&s&&(t.\u0275\u0275elementStart(0,"mat-option",40),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&s){const e=p.$implicit;t.\u0275\u0275property("value",e.value),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.key," ")}}function Tt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function yt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"mat-error",39),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function Ct(s,p){if(1&s){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",42),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const n=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(n.submitImport())}),t.\u0275\u0275elementStart(1,"mat-icon",26),t.\u0275\u0275text(2,"cloud_upload"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&s){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,2,"Save the import")," ")}}function Lt(s,p){1&s&&(t.\u0275\u0275elementStart(0,"div",43),t.\u0275\u0275element(1,"mat-progress-spinner",44),t.\u0275\u0275elementEnd())}const bt=[{path:"",component:(()=>{class s{constructor(e,i,n,r,o,a,c,d,f,h,y,xt,Dt,Rt,Et,Bt,At){this.route=e,this.fb=i,this.studentService=n,this.schoolService=r,this.titleService=o,this.translate=a,this.userService=c,this.httpClient=d,this.fileUploadService=f,this.candidateService=h,this.pageTitleService=y,this.dialog=xt,this.cdr=Dt,this.permissionsService=Rt,this.financeService=Et,this.utilService=Bt,this.permission=At,this.subs=new O.Y,this.templateCSVDownloadName="comma",this.server=P.a.baseApi,this.isAcadir=!1,this.isClose=!1,this.isWaitingForResponse=!1,this.campusList=[],this.listObjective=[],this.titles=[],this.classes=[],this.levels=[],this.scholars=[],this.school=[],this.delimeter=[{key:"COMMA [ , ]",value:","},{key:"SEMICOLON [ ; ]",value:";"},{key:"TAB [ ]",value:"tab"}],this.isDelimeterOn=!1,this.isLevelOn=!1,this.isSchoolOn=!1,this.isCampusOn=!1,this.isDirectorAdmission=!1,this.isMemberAdmission=!1,this.templateDonwloaded=!1,this.realCampusList=[],this.sectorList=[],this.specialityList=[],this.isSectorsOn=!1,this.isSpecialityOn=!1,this.originalListSectors=[],this.originalListSpeciality=[],this.isDataForListLoading=!1,this.specializationDataLoading=!1,this.isSectorsDataLoading=!1,this.downloadTemplateLoading=!1,this.isFileImported=!0,this.isTemplateDownloaded=!0}ngOnInit(){this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const e=this.currentUser?.entities?.find(i=>i?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.isDirectorAdmission=!!this.permissionsService.getPermission("Admission Director"),this.isMemberAdmission=!!this.permissionsService.getPermission("Admission Member"),this.getDataScholarSeasons(),this.initImportForm(),this.getDataForList(),this.importForm.get("delimiter").setValue(";"),this.subs.sink=this.translate.onLangChange.subscribe(i=>{this.importForm.get("delimiter").setValue(";")}),this.currentUser=this.userService.getLocalStorageUser(),this.initialForm=u.cloneDeep(this.importForm.value),this.subs.sink=this.importForm.valueChanges.subscribe(i=>{i&&this.dataIsChanged()}),this.getDataForSectors(),this.pageTitleService.setTitle("Platform >> Import of Registration Objectives")}getDataScholarSeasons(){this.subs.sink=this.financeService.GetAllScholarSeasonsPublished().subscribe(e=>{e&&e.length&&(this.scholars=e,this.scholars=u.uniqBy(this.scholars,"_id"))},e=>{this.userService.postErrorLog(e),g().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getDataForList(){this.isDataForListLoading=!0,this.subs.sink=this.candidateService.GetDataForImportObjectives("",this.currentUserTypeId).subscribe(i=>{i&&(this.isDataForListLoading=!1,this.listObjective=i)},i=>{this.isDataForListLoading=!1,this.userService.postErrorLog(i),g().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}initImportForm(){this.importForm=this.fb.group({schools:[null,m.Validators.required],campuses:[null,m.Validators.required],scholarSeasons:[null,m.Validators.required],levels:[null,m.Validators.required],sectors:[null,m.Validators.required],specialities:[null],delimiter:["",m.Validators.required]})}initDummyImportForm(){this.importDummyForm=this.fb.group({schools:[null,m.Validators.required],campuses:[null,m.Validators.required],scholarSeasons:[null,m.Validators.required],levels:[null,m.Validators.required],delimiter:["",m.Validators.required]})}openUploadWindow(){this.importFile.nativeElement.click()}ngAfterViewChecked(){this.cdr.detectChanges()}getDataCampus(){this.levels=[],this.campusList=[],this.realCampusList=[],this.sectorList=[],this.specialityList=[],this.importForm.get("campuses").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.isDelimeterOn=!1,this.isCampusOn=!0;let e=this.importForm.get("schools").value;if(e=e.filter(i=>"ALL"===i||"Tous"===i),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const i=this.importForm.get("scholarSeasons").value;let n;n=this.isMemberAdmission||this.isDirectorAdmission?this.listObjective:this.listObjective.filter(o=>o.scholar_season_id.find(a=>a._id===i));const r=[];if(n.length>0){const o=n.filter(a=>"ALL"!==a._id&&"Tous"!==a._id);if(o.length>0){o.forEach(d=>{r.push(d._id)}),this.importForm.get("schools").patchValue(r);const a=o;this.campusList.push({_id:"ALL",name:"AllS"}),a.forEach(d=>{d&&d.campuses&&d.campuses.length&&d.campuses.forEach(f=>{this.campusList.push(f),this.realCampusList.push(f)})}),this.campusList=u.uniqBy(this.campusList,"_id")}else this.campusList=[],this.realCampusList=[]}else this.campusList=[],this.realCampusList=[]}else{e=u.cloneDeep(this.importForm.get("schools").value);const i=this.listObjective.filter(r=>e.includes(r._id));this.campusList.push({_id:"ALL",name:"AllS"}),i.filter((r,o)=>{r.campuses&&r.campuses.length&&r.campuses.filter((a,c)=>{this.campusList.push(a),this.realCampusList.push(a)})}),this.campusList=u.uniqBy(this.campusList,"_id")}}getDataSchool(){if(this.importForm.get("schools").setValue(null),this.importForm.get("campuses").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.isSchoolOn=!0,this.school=[],this.campusList=[],this.levels=[],this.specialityList=[],this.sectorList=[],this.isDelimeterOn=!1,this.isDirectorAdmission||this.isMemberAdmission){const e=u.chain(this.currentUser.entities).groupBy("school._id").map((r,o)=>({_id:o,campuses:u.chain(r).groupBy("campus._id").map((a,c)=>({_id:c,levels:a.map(d=>({...d.level}))})).value()})).value(),i=u.chain(this.currentUser.entities).groupBy("school.short_name").map((r,o)=>({short_name:o,campuses:u.chain(r).groupBy("campus.name").map((a,c)=>({name:c,levels:a.map(d=>({...d.level}))})).value()})).value();e.forEach((r,o)=>{r.short_name=i[o].short_name,r.campuses.forEach((a,c)=>{a.name=i[o].campuses[c].name})}),this.listObjective=e;const n={_id:"ALL",short_name:"AllS"};this.listObjective.length>0?(this.school.push(n),this.school.push(...this.listObjective)):this.school=[]}else{const e={_id:"ALL",short_name:"AllS"},i=this.importForm.get("scholarSeasons").value,n=this.listObjective.filter(r=>r.scholar_season_id.find(o=>o._id===i));n.length>0?(this.school.push(e),this.school.push(...n)):this.school=[]}}getDataLevel(){this.levels=[],this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null);let e=u.cloneDeep(this.importForm.get("campuses").value);if(e=e.filter(i=>"ALL"===i||"Tous"===i),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const i=[],n=this.realCampusList.filter(a=>"ALL"!==a._id&&"Tous"!==a._id);n.forEach(a=>{i.push(a._id)}),this.importForm.get("campuses").patchValue(i);const r=n;this.levels.push({_id:"ALL",name:"AllS"}),r.forEach(a=>{a&&a.levels&&a.levels.length&&a.levels.forEach(c=>{this.levels.push(c)})}),this.levels=u.uniqBy(this.levels,"_id")}else{e=u.cloneDeep(this.importForm.get("campuses").value);const i=this.realCampusList.filter(r=>e.includes(r._id));this.levels.push({_id:"ALL",name:"AllS"}),i.forEach(r=>{r&&r.levels&&r.levels.length&&r.levels.forEach(o=>{this.levels.push(o)})}),this.levels=u.uniqBy(this.levels,"_id")}}getDataDelimeter(){let e=u.cloneDeep(this.importForm.get("specialities").value);if(e=e.filter(i=>"ALL"===i||"Tous"===i),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const i=[];this.specialityList.filter(r=>"ALL"!==r._id&&"Tous"!==r._id).forEach(r=>{i.push(r._id)}),this.importForm.get("specialities").patchValue(i)}}getDataForSectors(){this.isSectorsDataLoading=!0,this.subs.sink=this.financeService.GetAllSectorsDropdownWithoutFilter().subscribe(e=>{e&&(this.originalListSectors=e.map(i=>{const n=i.school_id.map(a=>a._id),r=i.campus_id.map(a=>a._id),o=i.level_id.map(a=>a._id);return{_id:i._id,name:i.name,school_id:n,level_id:o,campus_id:r}}),this.isSectorsDataLoading=!1)},e=>{this.originalListSectors=[],this.isSectorsDataLoading=!1,this.userService.postErrorLog(e)})}getSectors(){this.isSectorsOn=!0,this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.sectorList=[];let e=u.cloneDeep(this.importForm.get("levels").value);if(e=e.filter(o=>"ALL"===o||"Tous"===o),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const o=[];this.levels.filter(c=>"ALL"!==c._id&&"Tous"!==c._id).forEach(c=>{o.push(c._id)}),this.importForm.get("levels").patchValue(o)}const n={scholar_season_id:this.importForm.get("scholarSeasons").value,candidate_school_ids:this.importForm.get("schools").value,campuses:this.importForm.get("campuses").value,levels:this.importForm.get("levels").value},r={_id:"ALL",name:"AllS"};if(this.originalListSectors.length>0){let o=this.originalListSectors.filter(a=>{const c=n.candidate_school_ids.some(h=>a.school_id.includes(h)),d=n.campuses.some(h=>a.campus_id&&a.campus_id.includes(h)),f=n.levels.some(h=>a.level_id.includes(h));if(c&&d&&f)return a});o.length>0?(this.sectorList.push(r),o=o.map(a=>({_id:a._id,name:a.name})),o.forEach(a=>{this.sectorList.push(a)})):this.sectorList=[]}else this.sectorList=[]}getSpeciality(){this.isDelimeterOn=!0,this.isSpecialityOn=!0,this.importForm.get("specialities").setValue(null),this.specialityList=[];let e=u.cloneDeep(this.importForm.get("sectors").value);if(e=e.filter(a=>"ALL"===a||"Tous"===a),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const a=[];this.sectorList.filter(d=>"ALL"!==d._id&&"Tous"!==d._id).forEach(d=>{a.push(d._id)}),this.importForm.get("sectors").patchValue(a)}const i=this.importForm.get("scholarSeasons").value,n=this.importForm.get("sectors").value,r={scholar_season_id:i,candidate_school_ids:this.importForm.get("schools").value,campuses:this.importForm.get("campuses").value,levels:this.importForm.get("levels").value,sectors:n},o={_id:"ALL",name:"AllS"};this.specializationDataLoading=!0,this.subs.sink=this.candidateService.GetAllSpecializationsByScholar(r).subscribe(a=>{if(a)if(this.originalListSpeciality=u.cloneDeep(a),this.specializationDataLoading=!1,this.originalListSpeciality.length>0){this.specialityList=[];let c=this.originalListSpeciality;c.length>0?(this.specialityList.push(o),c=c.map(d=>({_id:d._id,name:d.name})),c.forEach(d=>{this.specialityList.push(d)})):this.specialityList=[]}else this.specialityList=[]},a=>{this.specializationDataLoading=!1,this.specialityList=[],this.userService.postErrorLog(a),g().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}resetImport(){this.listObjective=[],this.sectorList=[],this.scholars=[],this.school=[],this.campusList=[],this.levels=[],this.specialityList=[],this.isTemplateDownloaded=!0,this.isFileImported=!0,this.importForm.reset(),this.importForm.get("schools").setValue(null),this.importForm.get("campuses").setValue(null),this.importForm.get("scholarSeasons").setValue(null),this.importForm.get("levels").setValue(null),this.importForm.get("sectors").setValue(null),this.importForm.get("specialities").setValue(null),this.importForm.get("delimiter").setValue(";"),this.isDelimeterOn=!1,this.path="",this.fileName="",this.templateDonwloaded=!1,this.getDataScholarSeasons(),this.getDataForList()}handleInputChange(e){this.isWaitingForResponse=!0;const i=e.target.files[0];this.file=e.target.files[0],this.isFileImported=!0,this.path="",this.fileName="";const n=["csv"];if(i){const r=this.utilService.getFileExtension(i.name);n.includes(r)?this.subs.sink=this.fileUploadService.singleUpload(i).subscribe(o=>{this.isWaitingForResponse=!1,o&&(this.path=o.file_url,this.fileName=o.file_name,g().fire({type:"success",title:this.translate.instant("IMPORT_OBJ_S1.Title"),html:this.translate.instant("IMPORT_OBJ_S1.Text"),confirmButtonText:this.translate.instant("IMPORT_OBJ_S1.Button")}))},o=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(o),g().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):g().fire({type:"info",title:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TITLE"),text:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TEXT",{file_exts:".csv"}),allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1}).then(()=>this.isWaitingForResponse=!1)}this.resetFileState()}resetFileState(){this.importFile.nativeElement.value=""}submitImport(){if(this.importForm.invalid||!this.file)g().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),html:this.translate.instant("Invalid_Form_Warning.TEXT"),confirmButtonText:this.translate.instant("Invalid_Form_Warning.BUTTON")}),this.importForm.markAllAsTouched(),this.isFileImported=!1,this.isTemplateDownloaded=!1;else{this.isTemplateDownloaded=!0,this.isFileImported=!0,this.isWaitingForResponse=!0;const e=u.cloneDeep(this.importForm.value);this.subs.sink=this.candidateService.ImportGeneralDashboardAdmission({scholar_seasons:e.scholarSeasons,schools:e.schools,campuses:e.campuses,levels:e.levels,file_delimeter:e.delimiter,sectors:e.sectors,specialities:e.specialities?e.specialities:[]},this.file).subscribe(n=>{this.isWaitingForResponse=!1,n&&(g().fire({type:"success",title:this.translate.instant("IMPORT_OBJ_S2.Title"),html:this.translate.instant("IMPORT_OBJ_S2.Text"),confirmButtonText:this.translate.instant("IMPORT_OBJ_S2.Button")}),this.financeService.importRegistrationValidationStatus=!0)},n=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(n),"GraphQL error: some school / campus / level not found"===n.message?g().fire({type:"info",title:this.translate.instant("REJECT_IMPORT.TITLE"),text:this.translate.instant("REJECT_IMPORT.TEXT")}):g().fire({type:"info",title:this.translate.instant("IMPORT_OBJ_S3.Title"),html:this.translate.instant("IMPORT_OBJ_S3.Text"),confirmButtonText:this.translate.instant("IMPORT_OBJ_S3.Button")})})}}csvTypeSelection(){if(this.importForm.invalid)g().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),html:this.translate.instant("Invalid_Form_Warning.TEXT"),confirmButtonText:this.translate.instant("Invalid_Form_Warning.BUTTON")}),this.importForm.markAllAsTouched();else{const e=u.cloneDeep(this.importForm.value);console.log("Payload ",e),e.action="primary",this.subs.sink=this.dialog.open(z,{width:"600px",minHeight:"100px",panelClass:"certification-rule-pop-up",disableClose:!0,data:e}).afterClosed().subscribe(i=>{i&&"downloaded"===i&&(this.templateDonwloaded=!0,this.isTemplateDownloaded=!0)})}}dataIsChanged(){this.financeService.importRegistrationValidationStatus=JSON.stringify(this.initialForm)===JSON.stringify(this.importForm.value)}ngOnDestroy(){clearTimeout(this.timeOutVal),clearInterval(this.intVal),this.pageTitleService.setTitle(null),this.subs.unsubscribe()}clearSchool(){this.school=[]}clearLevel(){this.getDataCampus()}clearCampus(){this.campusList=[],this.realCampusList=[]}clearSpeciality(){this.specialityList=[]}clearSectors(){this.sectorList=[]}handleRemoveScholarSeason(){0===this.importForm.get("scholarSeasons").value.length&&this.clearSchool()}handleRemoveSchool(){0===this.importForm.get("schools").value.length&&this.clearCampus()}handleRemoveCampus(){0===this.importForm.get("campuses").value.length&&this.clearLevel()}canDeactivate(){return this.financeService.importRegistrationValidationStatus?(this.financeService.importRegistrationValidationStatus=!0,!0):new Promise((e,i)=>{g().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{n.value?e(!1):n.dismiss&&(this.financeService.importRegistrationValidationStatus=!0,e(!0))})})}}return s.\u0275fac=function(e){return new(e||s)(t.\u0275\u0275directiveInject(C.gz),t.\u0275\u0275directiveInject(m.UntypedFormBuilder),t.\u0275\u0275directiveInject(J.q),t.\u0275\u0275directiveInject(H.E),t.\u0275\u0275directiveInject(Q.r),t.\u0275\u0275directiveInject(T.sK),t.\u0275\u0275directiveInject(D.e),t.\u0275\u0275directiveInject($.eN),t.\u0275\u0275directiveInject(X.J),t.\u0275\u0275directiveInject(x.o),t.\u0275\u0275directiveInject(K.Z),t.\u0275\u0275directiveInject(S.uw),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(Z.YI),t.\u0275\u0275directiveInject(q.N),t.\u0275\u0275directiveInject(tt.t),t.\u0275\u0275directiveInject(et.$))},s.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["ms-import-registration"]],viewQuery:function(e,i){if(1&e&&t.\u0275\u0275viewQuery(ot,5),2&e){let n;t.\u0275\u0275queryRefresh(n=t.\u0275\u0275loadQuery())&&(i.importFile=n.first)}},inputs:{schoolId:"schoolId",selectedRncpTitleId:"selectedRncpTitleId",selectedClassId:"selectedClassId"},decls:130,vars:98,consts:[[1,"p-grid",2,"margin-bottom","5px","border-bottom","1px solid #4e4e4e"],[1,"p-col-12",2,"padding-left","10px"],[2,"width","20px","float","left","padding","4px 0px 0px 0px","margin-right","10px"],[2,"font-size","16px"],[1,"titleImport"],[1,"p-grid"],[1,"p-col-12",2,"padding-left","0px","padding-right","0px"],[3,"formGroup"],[1,"p-col-7"],[1,"p-grid","baseline","custom-ng-select"],[2,"width","25%"],["bindLabel","scholar_season","bindValue","_id","clearAllText","Clear","formControlName","scholarSeasons",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"items","multiple","hideSelected","placeholder","clearable","change","clear","remove"],["style","margin-bottom: 10px; margin-top: 10px",4,"ngIf"],[1,"p-grid","baseline"],["clearAllText","Clear","formControlName","schools",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"multiple","hideSelected","placeholder","disabled","change","clear","remove"],[3,"value",4,"ngFor","ngForOf"],["clearAllText","Clear","formControlName","campuses",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"multiple","hideSelected","placeholder","disabled","change","clear","remove"],["clearAllText","Clear","formControlName","levels",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"multiple","hideSelected","placeholder","disabled","change","clear"],["clearAllText","Clear","formControlName","sectors",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"multiple","hideSelected","placeholder","disabled","change","clear"],["style","width: 75%","class","mrgn-btn custom-ngselect-content","clearAllText","Clear","formControlName","specialities",3,"multiple","hideSelected","placeholder","disabled","change",4,"ngIf"],["floatLabel","never",2,"width","75%"],["formControlName","delimiter","panelClas","custom-matselect-dropdown",1,"full-width",3,"disabled"],[1,"p-col-7",2,"float","left"],[1,"p-col-8",2,"padding","0.5em 0px","float","left"],[1,"p-col-4",2,"padding","0px","float","left","text-align","right"],["mat-raised-button","","color","accent",1,"margin-right-0",2,"width","200px",3,"disabled","click"],[1,"mat-icon-default"],[1,"p-col-3",2,"padding","0.5em 0px","float","left"],[1,"p-col-5",2,"padding","0.5em 0px","float","left"],["type","file","accept",".csv","disableMultipart","true",2,"display","none",3,"change"],["importFile",""],["mat-raised-button","","color","accent",1,"margin-right-0","import-objectives-testing",2,"width","200px",3,"disabled","click"],[1,"p-grid","mrgn-t-sm","m-bot-85"],[1,"p-col-12",2,"text-align","right","padding","0px"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-raised-button","","color","accent","class","margin-right-0",3,"disabled","click",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[2,"margin-bottom","10px","margin-top","10px"],[3,"value"],["clearAllText","Clear","formControlName","specialities",1,"mrgn-btn","custom-ngselect-content",2,"width","75%",3,"multiple","hideSelected","placeholder","disabled","change"],["mat-raised-button","","color","accent",1,"margin-right-0",3,"disabled","click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"span")(4,"mat-icon",3),t.\u0275\u0275text(5,"cloud_upload"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"div")(7,"span",4),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(10,"div",5)(11,"div",6)(12,"mat-card")(13,"form",7)(14,"div",5)(15,"div",8)(16,"div",9)(17,"mat-label",10),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"ng-select",11),t.\u0275\u0275listener("change",function(){return i.getDataSchool()})("clear",function(){return i.clearSchool()})("remove",function(){return i.handleRemoveScholarSeason()}),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(22,"div",10),t.\u0275\u0275template(23,rt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(24,"div",5)(25,"div",8)(26,"div",13)(27,"mat-label",10),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"ng-select",14),t.\u0275\u0275listener("change",function(){return i.getDataCampus()})("clear",function(){return i.clearCampus()})("remove",function(){return i.handleRemoveSchool()}),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275template(32,lt,3,4,"ng-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(33,"div",10),t.\u0275\u0275template(34,pt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(35,"div",5)(36,"div",8)(37,"div",13)(38,"mat-label",10),t.\u0275\u0275text(39),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"ng-select",16),t.\u0275\u0275listener("change",function(){return i.getDataLevel()})("clear",function(){return i.clearLevel()})("remove",function(){return i.handleRemoveCampus()}),t.\u0275\u0275pipe(42,"translate"),t.\u0275\u0275template(43,ct,3,4,"ng-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(44,"div",10),t.\u0275\u0275template(45,mt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(46,"div",5)(47,"div",8)(48,"div",13)(49,"mat-label",10),t.\u0275\u0275text(50),t.\u0275\u0275pipe(51,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"ng-select",17),t.\u0275\u0275listener("change",function(){return i.getSectors()})("clear",function(){return i.clearSectors()}),t.\u0275\u0275pipe(53,"translate"),t.\u0275\u0275template(54,dt,3,4,"ng-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(55,"div",10),t.\u0275\u0275template(56,ht,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(57,"div",5)(58,"div",8)(59,"div",13)(60,"mat-label",10),t.\u0275\u0275text(61),t.\u0275\u0275pipe(62,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(63,"ng-select",18),t.\u0275\u0275listener("change",function(){return i.getSpeciality()})("clear",function(){return i.clearSpeciality()}),t.\u0275\u0275pipe(64,"translate"),t.\u0275\u0275template(65,ut,3,4,"ng-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(66,"div",10),t.\u0275\u0275template(67,gt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(68,"div",5)(69,"div",8)(70,"div",13)(71,"mat-label",10),t.\u0275\u0275text(72),t.\u0275\u0275pipe(73,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(74,vt,3,7,"ng-select",19),t.\u0275\u0275template(75,St,3,7,"ng-select",19),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(76,"div",5)(77,"div",8)(78,"div",13)(79,"mat-label",10),t.\u0275\u0275text(80),t.\u0275\u0275pipe(81,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(82,"mat-form-field",20)(83,"mat-select",21),t.\u0275\u0275template(84,It,2,2,"mat-option",15),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(85,"div",5)(86,"div",22)(87,"div",23)(88,"label"),t.\u0275\u0275text(89),t.\u0275\u0275pipe(90,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(91,"div",24)(92,"button",25),t.\u0275\u0275listener("click",function(){return i.csvTypeSelection()}),t.\u0275\u0275elementStart(93,"mat-icon",26),t.\u0275\u0275text(94,"cloud_download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(95),t.\u0275\u0275pipe(96,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(97,Tt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(98,"div",5)(99,"div",22)(100,"div",27)(101,"label"),t.\u0275\u0275text(102),t.\u0275\u0275pipe(103,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(104,"div",28)(105,"span"),t.\u0275\u0275text(106),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(107,"div",24)(108,"input",29,30),t.\u0275\u0275listener("change",function(r){return i.handleInputChange(r)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(110,"button",31),t.\u0275\u0275listener("click",function(){return i.openUploadWindow()}),t.\u0275\u0275elementStart(111,"mat-icon",26),t.\u0275\u0275text(112,"cloud_upload"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(113),t.\u0275\u0275pipe(114,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(115,yt,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(116,"div",32)(117,"div",33)(118,"button",34),t.\u0275\u0275listener("click",function(){return i.resetImport()}),t.\u0275\u0275elementStart(119,"mat-icon",26),t.\u0275\u0275text(120,"cancel"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(121),t.\u0275\u0275pipe(122,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(123,"button",35),t.\u0275\u0275listener("click",function(){return i.resetImport()}),t.\u0275\u0275pipe(124,"translate"),t.\u0275\u0275element(125,"mat-icon",36),t.\u0275\u0275text(126),t.\u0275\u0275pipe(127,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(128,Ct,5,4,"button",37),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(129,Lt,2,0,"div",38)),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,58,"NAV.SETTINGS.Import of Registration Objectives")),t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",i.importForm),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(19,60,"CARDDETAIL.Scholar Season"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(21,62,"CARDDETAIL.Scholar Season"),"*"),t.\u0275\u0275property("items",i.scholars)("multiple",!1)("hideSelected",!0)("clearable",!1),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",i.importForm.get("scholarSeasons").errors&&(i.importForm.get("scholarSeasons").dirty||i.importForm.get("scholarSeasons").touched)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(29,64,"School"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(31,66,"School"),"*"),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",i.isSchoolOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.school),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.importForm.get("schools").errors&&(i.importForm.get("schools").dirty||i.importForm.get("schools").touched)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(40,68,"Campus"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(42,70,"Campus"),"*"),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",!i.isCampusOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.campusList),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.importForm.get("campuses").errors&&(i.importForm.get("campuses").dirty||i.importForm.get("campuses").touched)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(51,72,"Level"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(53,74,"Level"),"*"),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",!i.isLevelOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.levels),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.importForm.get("levels").errors&&(i.importForm.get("levels").dirty||i.importForm.get("levels").touched)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(62,76,"Sector"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(64,78,"Sector"),"*"),t.\u0275\u0275property("multiple",!0)("hideSelected",!0)("disabled",!i.isSectorsOn),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.sectorList),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.importForm.get("sectors").errors&&(i.importForm.get("sectors").dirty||i.importForm.get("sectors").touched)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(73,80,"Speciality")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0==(null==i.originalListSpeciality?null:i.originalListSpeciality.length)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==i.originalListSpeciality?null:i.originalListSpeciality.length)>0),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(81,82,"DELIMETER.title"),"*"),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",!i.isDelimeterOn),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.delimeter),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(90,84,"DOWNLOAD_TEMPLATE"),"*"),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",i.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(96,86,"DOWNLOAD_TEMPLATE")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!i.isTemplateDownloaded),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(103,88,"DATA_FILE"),"*"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(i.fileName),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",i.importForm.invalid||i.isWaitingForResponse||!i.templateDonwloaded),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(114,90,"Import Objectives")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!i.isFileImported),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(122,92,"CANCEL")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(124,94,"Reset Filter")," "),t.\u0275\u0275property("disabled",i.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(127,96,"RESET")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.permission.editImportObjective()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isWaitingForResponse||i.isDataForListLoading||i.specializationDataLoading||i.isSectorsDataLoading||i.downloadTemplateLoading))},dependencies:[I.sg,I.O5,it.ey,E.lW,nt.a8,B.Hw,_.TO,_.KE,_.hX,A.Ou,st.gD,at.gM,m.\u0275NgNoValidate,m.NgControlStatus,m.NgControlStatusGroup,m.FormGroupDirective,m.FormControlName,b.w9,b.jq,T.X$],styles:[".baseline[_ngcontent-%COMP%]{align-items:baseline}.titleImport[_ngcontent-%COMP%]{font-size:16px}.custom-ng-select[_ngcontent-%COMP%]     .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center;color:#fff}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.fileInfo[_ngcontent-%COMP%]{width:-moz-fit-content!important;width:fit-content!important;margin:5px!important;display:inline-block!important;border:1px solid rgba(0,0,0,.1);z-index:10;box-shadow:inset 1px 1px #0000001a,inset 0 -1px #00000012}.swal2-button[_ngcontent-%COMP%]{line-height:30px;font-size:12px!important;border-radius:2px}  .swal2-label{font-weight:700;font-size:14px}  .swal2-radio label{font-weight:700!important;font-size:14px!important}.spinner-wrapper[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;justify-content:center;align-items:center;top:0;left:0;background-color:#23232380;z-index:998}.m-bot-85[_ngcontent-%COMP%]{margin-bottom:85px}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #ff5722!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container .ng-placeholder{color:#ff5722!important}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}  .custom-ngselect-content .ng-dropdown-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;width:auto!important}  .custom-ngselect-content .ng-dropdown-panel-items .ng-option{white-space:break-spaces!important}  .custom-ngselect-content.ng-dropdown-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;width:auto!important}"]}),s})(),canActivate:[N.n],canDeactivate:[V.g],data:{}},{path:"**",redirectTo:"",pathMatch:"full"}];let Ft=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=t.\u0275\u0275defineInjector({imports:[C.Bz.forChild(bt),C.Bz]}),s})(),Ot=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=t.\u0275\u0275defineInjector({imports:[I.ez,M.m,Ft,w.ii.forRoot(),b.A0]}),s})()}}]);