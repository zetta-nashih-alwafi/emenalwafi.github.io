"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[6354],{8029:(y,E,_)=>{_.d(E,{h:()=>l});var e=_(24006),h=_(65938),v=_(83515),D=_(15439),s=_(17489),i=_(68745),p=_(35226),u=_.n(p),t=_(94650),x=_(54041),C=_(89383),P=_(52688),b=_(73555),S=_(4859),M=_(99602),I=_(97392),T=_(59549),Y=_(284),L=_(51572),O=_(71948),F=_(36895);function A(d,n){1&d&&(t.\u0275\u0275elementStart(0,"div",32),t.\u0275\u0275element(1,"mat-spinner",33),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",36))}function R(d,n){1&d&&(t.\u0275\u0275elementStart(0,"div",34),t.\u0275\u0275element(1,"mat-spinner",33),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",18))}let l=(()=>{class d{constructor(m,o,c,f,g,B,V){this.fb=m,this.localToUTC=o,this.courseSequenceServ=c,this.dialogRef=f,this.dialogData=g,this.translate=B,this.authService=V,this.subs=new i.Y,this.loading=!1}ngOnInit(){this.initForm()}ngOnDestroy(){this.subs.unsubscribe()}get showTypeOfSequenceError(){const m=this.form.get("type_of_sequence");return(m.dirty||m.touched)&&!m.valid&&!m.value}get validateDisabled(){return!this.form.valid||this.loading}initForm(){this.form=this.fb.group({name:[null,[e.Validators.required]],description:[null],type_of_sequence:[null,[e.Validators.required]],start_date:[null,[e.Validators.required]],end_date:[null,[e.Validators.required]],number_of_week:[null,[e.Validators.required]]}),("edit"===this.dialogData.type||"duplicate"===this.dialogData.type)&&this.form.patchValue(this.dialogData.formData)}createPayload(){return{...this.form.value,number_of_week:Number(this.form.get("number_of_week").value),end_date:this.localToUTC.transformJavascriptDate(this.form.get("end_date").value),start_date:this.localToUTC.transformJavascriptDate(this.form.get("start_date").value)}}checkFormValidity(){return!!this.form.invalid&&(u().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.form.markAllAsTouched(),!0)}validate(){if(this.checkFormValidity())return;const m=this.createPayload();this.form.disable(),this.loading=!0,"add"===this.dialogData.type||"duplicate"===this.dialogData.type?(this.dialogData&&this.dialogData.isTemplateBuilder&&this.dialogData.sequenceId?m.template_course_sequence_id=this.dialogData.sequenceId:this.dialogData&&!1===this.dialogData.isTemplateBuilder&&this.dialogData.sequenceId&&(m.program_course_sequence_id=this.dialogData.sequenceId),this.subs.sink=this.courseSequenceServ.createSequence(m).subscribe(o=>{this.loading=!1,this.dialogRef.close("form"===this.dialogData.from?o:"success")},o=>{if(this.authService.postErrorLog(o),this.loading=!1,this.form.enable(),o.message.includes("You cannot overlap the dates of 2 different sequences")){let c=o.message.replace("GraphQL error: ","").split(",");if(c.length){const g=c[0].replaceAll("Date Sequence ","").replace(" is overlapping","").split("and ");u().fire({allowOutsideClick:!1,type:"info",title:this.translate.instant("TEMPLATE_OVERLAP_S1.Title"),html:this.translate.instant("TEMPLATE_OVERLAP_S1.Text",{sequence:g.length>1&&g[1]?g[1]:""}),confirmButtonText:this.translate.instant("TEMPLATE_OVERLAP_S1.Button")}).then(B=>{B.value&&(this.form.get("start_date").setValue(null),this.form.get("end_date").setValue(null))})}}else o&&o.message&&o.message.includes("Network error: Http failure response for")&&u().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1})})):"edit"===this.dialogData.type&&(this.subs.sink=this.courseSequenceServ.updateSequence(this.dialogData.formData._id,m).subscribe(c=>{this.loading=!1,this.dialogRef.close("form"===this.dialogData.from?c:"success")},c=>{this.authService.postErrorLog(c),this.loading=!1,this.form.enable(),c&&c.message&&c.message.includes("Network error: Http failure response for")&&u().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1})}))}changeDate(){let m=[],o=this.form.get("end_date").value,c=this.form.get("start_date").value;if(c&&o){o=o.toLocaleDateString("en-GB"),c=c.toLocaleDateString("en-GB");const f=this.getDaysBetweenDates(c,o);if(f&&f.length){m=f;const g=m.length;if(g){const B=g/7;this.form.get("number_of_week").setValue(this.roundToHalf(B))}}}}roundToHalf(m){const o=parseFloat(m);let c=o-parseInt(o.toString(),10);return c=Math.round(10*c),5===c?parseInt(o.toString(),10)+.5:c<1||c>6?Math.round(o):parseInt(o.toString(),10)+.5}getDaysBetweenDates(m,o){let c=s.cloneDeep(m),f=s.cloneDeep(o);const g=[];for(c=D(c,"DD/MM/YYYY").format("YYYY-MM-DD"),f=D(f,"DD/MM/YYYY").format("YYYY-MM-DD");D(c).isSameOrBefore(f);)g.push(c),c=D(c).add(1,"days"),c=D(c,"YYYY-MM-DD").format("YYYY-MM-DD");return g}}return d.\u0275fac=function(m){return new(m||d)(t.\u0275\u0275directiveInject(e.UntypedFormBuilder),t.\u0275\u0275directiveInject(v.w),t.\u0275\u0275directiveInject(x.z),t.\u0275\u0275directiveInject(h.so),t.\u0275\u0275directiveInject(h.WI),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(P.e))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["ms-add-sequence-dialog"]],outputs:{dateChange:"dateChange"},features:[t.\u0275\u0275ProvidersFeature([v.w])],decls:76,vars:57,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle",""],["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close",""],["mat-dialog-content","",3,"formGroup"],["class","spinner-wrapper",4,"ngIf"],[1,"p-grid"],[1,"p-col-12"],["color","accent"],["for","name"],["matInput","","name","name","formControlName","name"],[1,"p-col-12","p-grid","pad-x-none"],[1,"p-col-fixed"],["for","type-of-sequence"],[1,"p-col"],["name","type-of-sequence","formControlName","type_of_sequence"],["value","enseignement"],["value","period_in_company"],["value","school_exchange"],[1,"p-col-6"],["for","start-date"],["matInput","","formControlName","start_date","readonly","",1,"datepicker-input",3,"max","matDatepicker","dateChange","click"],["matSuffix","",3,"for"],["startDatePicker",""],["for","end-date"],["matInput","","formControlName","end_date","readonly","",1,"datepicker-input",3,"min","matDatepicker","dateChange","click"],["endDatePicker",""],["for","description"],["matInput","","name","description","formControlName","description"],["mat-dialog-actions",""],["mat-button","","mat-raised-button","","mat-dialog-close","","color","warn",3,"disabled"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["class","button-spinner-wrapper",4,"ngIf"],[1,"spinner-wrapper"],["color","accent",3,"diameter"],[1,"button-spinner-wrapper"]],template:function(m,o){if(1&m){const c=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"header",0)(1,"h1",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",2)(5,"mat-icon"),t.\u0275\u0275text(6,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"main",3),t.\u0275\u0275template(8,A,2,1,"div",4),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label",8),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(15,"input",9),t.\u0275\u0275elementStart(16,"mat-error"),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",10)(20,"div",11)(21,"label",12),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",13)(25,"mat-radio-group",14)(26,"mat-radio-button",15),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"mat-radio-button",16),t.\u0275\u0275text(30),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"mat-radio-button",17),t.\u0275\u0275text(33),t.\u0275\u0275pipe(34,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(35,"div",18)(36,"mat-form-field",7)(37,"mat-label",19),t.\u0275\u0275text(38),t.\u0275\u0275pipe(39,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"input",20),t.\u0275\u0275listener("dateChange",function(){return o.changeDate()})("click",function(){t.\u0275\u0275restoreView(c);const g=t.\u0275\u0275reference(43);return t.\u0275\u0275resetView(g.open())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(41,"mat-datepicker-toggle",21)(42,"mat-datepicker",null,22),t.\u0275\u0275elementStart(44,"mat-error"),t.\u0275\u0275text(45),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(47,"div",18)(48,"mat-form-field",7)(49,"mat-label",23),t.\u0275\u0275text(50),t.\u0275\u0275pipe(51,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(52,"input",24),t.\u0275\u0275listener("dateChange",function(){return o.changeDate()})("click",function(){t.\u0275\u0275restoreView(c);const g=t.\u0275\u0275reference(55);return t.\u0275\u0275resetView(g.open())}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(53,"mat-datepicker-toggle",21)(54,"mat-datepicker",null,25),t.\u0275\u0275elementStart(56,"mat-error"),t.\u0275\u0275text(57),t.\u0275\u0275pipe(58,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(59,"div",6)(60,"mat-form-field",7)(61,"mat-label",26),t.\u0275\u0275text(62),t.\u0275\u0275pipe(63,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(64,"input",27),t.\u0275\u0275elementStart(65,"mat-error"),t.\u0275\u0275text(66),t.\u0275\u0275pipe(67,"translate"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(68,"footer",28)(69,"button",29),t.\u0275\u0275text(70),t.\u0275\u0275pipe(71,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(72,"button",30),t.\u0275\u0275listener("click",function(){return o.validate()}),t.\u0275\u0275template(73,R,2,1,"div",31),t.\u0275\u0275text(74),t.\u0275\u0275pipe(75,"translate"),t.\u0275\u0275elementEnd()()}if(2&m){const c=t.\u0275\u0275reference(43),f=t.\u0275\u0275reference(55);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,27,"add"===(null==o.dialogData?null:o.dialogData.type)?"course_sequence.Add sequence":"duplicate"===(null==o.dialogData?null:o.dialogData.type)?"course_sequence.Duplicate Sequence":"course_sequence.Edit Sequence")," "),t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",o.form),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(14,29,"Name")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(18,31,"This field is required")),t.\u0275\u0275advance(4),t.\u0275\u0275classProp("invalid",o.showTypeOfSequenceError),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(23,33,"course_sequence.Type of sequence")," *: "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(28,35,"course_sequence.enseignement")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(31,37,"course_sequence.period_in_company")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(34,39,"course_sequence.school_exchange")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(39,41,"course_sequence.Start date")),t.\u0275\u0275advance(2),t.\u0275\u0275property("max",o.form.get("end_date").value)("matDatepicker",c),t.\u0275\u0275advance(1),t.\u0275\u0275property("for",c),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(46,43,"This field is required")," *"),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(51,45,"course_sequence.End date")),t.\u0275\u0275advance(2),t.\u0275\u0275property("min",o.form.get("start_date").value)("matDatepicker",f),t.\u0275\u0275advance(1),t.\u0275\u0275property("for",f),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(58,47,"This field is required")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(63,49,"Description")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(67,51,"This field is required")),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(71,53,"Cancel")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.loading),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(75,55,"Validate")," ")}},dependencies:[b.Zt,b.Bh,S.lW,M.Mq,M.hl,M.nW,h.ZT,h.uh,h.xY,h.H8,I.Hw,T.TO,T.KE,T.hX,T.R9,Y.Nt,L.Ou,O.VQ,O.U0,e.DefaultValueAccessor,e.NgControlStatus,e.NgControlStatusGroup,e.FormGroupDirective,e.FormControlName,F.O5,C.X$],styles:["[_nghost-%COMP%]     header{display:flex;align-items:center;justify-content:space-between;border-bottom:solid 1px #808080;padding-bottom:1rem}[_nghost-%COMP%]     main{position:relative;margin-top:1rem;margin-bottom:1rem}[_nghost-%COMP%]     footer{display:flex;justify-content:flex-end;align-items:center;gap:4px}[_nghost-%COMP%]     button:has(.button-spinner-wrapper){position:relative}[_nghost-%COMP%]     .spinner-wrapper, [_nghost-%COMP%]     .button-spinner-wrapper{position:absolute;display:flex;align-items:center;justify-content:center;padding:4px;inset:0;background:rgba(255,255,255,.6666666667)}[_nghost-%COMP%]     .mat-dialog-title{font-weight:700;margin:0}[_nghost-%COMP%]     .mat-radio-group .mat-radio-button~.mat-radio-button{margin-left:1rem}[_nghost-%COMP%]     .datepicker-input{cursor:pointer}[_nghost-%COMP%]     .invalid{color:#f44336}[_nghost-%COMP%]     -shadowcsshost  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]     -shadowcsshost  .mat-form-field-underline{background-color:#0000001f!important}"]}),d})()},75223:(y,E,_)=>{_.d(E,{r:()=>R});var e=_(94650),h=_(89383),v=_(36895),D=_(97392);function a(l,d){1&l&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1," , "),e.\u0275\u0275elementEnd())}function s(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,a,2,0,"span",11),e.\u0275\u0275elementContainerEnd()),2&l){const n=d.$implicit,m=d.last;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,n)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!m)}}function r(l,d){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(3),c=o.$implicit,f=o.index,g=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(g.removeFilter(c,f))}),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd()}}function i(l,d){if(1&l&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,s,4,4,"ng-container",7),e.\u0275\u0275template(4,r,2,0,"mat-icon",10),e.\u0275\u0275elementEnd()),2&l){const n=e.\u0275\u0275nextContext(2).$implicit,m=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,3,null==n?null:n.column)," : "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==n?null:n.key),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(m.isReadmission&&"scholar_season"===(null==n?null:n.name)))}}function p(l,d){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(3),c=o.$implicit,f=o.index,g=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(g.removeFilter(c,f))}),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd()}}function u(l,d){if(1&l&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,p,2,0,"mat-icon",10),e.\u0275\u0275elementEnd()),2&l){const n=e.\u0275\u0275nextContext(2).$implicit,m=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(2,3,null==n?null:n.column)," : ",e.\u0275\u0275pipeBind1(3,5,null==n?null:n.key)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!(m.isReadmission&&"scholar_season"===(null==n?null:n.name)))}}function t(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,i,5,5,"span",8),e.\u0275\u0275template(2,u,5,7,"span",8),e.\u0275\u0275elementContainerEnd()),2&l){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n?null:n.isMultiple),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=n&&n.isMultiple))}}function x(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,t,3,2,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&l){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","super_filter"===(null==n?null:n.type))}}function C(l,d){if(1&l&&(e.\u0275\u0275elementStart(0,"div",4)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,x,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&l){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Super Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function P(l,d){1&l&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1," , "),e.\u0275\u0275elementEnd())}function b(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,P,2,0,"span",11),e.\u0275\u0275elementContainerEnd()),2&l){const n=d.$implicit,m=d.last,o=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null!=o&&o.noTranslate?n:e.\u0275\u0275pipeBind1(2,2,n)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!m)}}function S(l,d){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,b,4,4,"ng-container",7),e.\u0275\u0275elementStart(5,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(2),c=o.$implicit,f=o.index,g=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(g.removeFilter(c,f))}),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()}if(2&l){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null!=n&&n.stepColumnName?e.\u0275\u0275pipeBind1(2,2,null==n?null:n.stepColumnName)+" "+(null==n?null:n.column):e.\u0275\u0275pipeBind1(3,4,null==n?null:n.column)," : "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==n?null:n.key)}}function M(l,d){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementStart(5,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(2),c=o.$implicit,f=o.index,g=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(g.removeFilter(c,f))}),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()}if(2&l){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null!=n&&n.stepColumnName?e.\u0275\u0275pipeBind1(2,2,null==n?null:n.stepColumnName)+" "+(null==n?null:n.column):e.\u0275\u0275pipeBind1(3,4,null==n?null:n.column)," : ",!0===(null==n?null:n.noTranslate)?null==n?null:n.key:e.\u0275\u0275pipeBind1(4,6,null==n?null:n.key)," ")}}function I(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,S,7,6,"span",8),e.\u0275\u0275template(2,M,7,8,"span",8),e.\u0275\u0275elementContainerEnd()),2&l){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n?null:n.isMultiple),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=n&&n.isMultiple))}}function T(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,I,3,2,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&l){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_filter"===(null==n?null:n.type))}}function Y(l,d){if(1&l&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,T,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&l){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Table Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function L(l,d){if(1&l){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementStart(4,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const o=e.\u0275\u0275nextContext(),c=o.$implicit,f=o.index,g=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(g.removeFilter(c,f))}),e.\u0275\u0275text(5,"close"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&l){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,null==n?null:n.key)," ")}}function O(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,L,6,3,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&l){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","action_filter"===(null==n?null:n.type))}}function F(l,d){if(1&l&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,O,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&l){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Action Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function A(l,d){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,C,8,5,"div",2),e.\u0275\u0275template(2,Y,8,5,"div",3),e.\u0275\u0275template(3,F,8,5,"div",3),e.\u0275\u0275elementContainerEnd()),2&l){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("super_filter")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("table_filter")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("action_filter"))}}let R=(()=>{class l{constructor(n){this.translate=n,this.removeFilterTrigger=new e.EventEmitter}ngOnInit(){}filterDataExist(n){return!!this.filterBreadcrumbData.find(o=>o?.type===n)}removeFilter(n,m){this.filterBreadcrumbData.splice(m,1),this.removeFilterTrigger.emit(n)}}return l.\u0275fac=function(n){return new(n||l)(e.\u0275\u0275directiveInject(h.sK))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ms-filter-breadcrumb"]],inputs:{filterBreadcrumbData:"filterBreadcrumbData",isReadmission:"isReadmission"},outputs:{removeFilterTrigger:"removeFilterTrigger"},decls:2,vars:1,consts:[[1,"filter-breadcrumb"],[4,"ngIf"],["class","filter-breadcrumb-container mt-10",4,"ngIf"],["class","filter-breadcrumb-container",4,"ngIf"],[1,"filter-breadcrumb-container","mt-10"],[3,"ngClass"],[1,"breadcrumb-value"],[4,"ngFor","ngForOf"],["class","breadcrumb-filter",4,"ngIf"],[1,"breadcrumb-filter"],["class","icon-remove",3,"click",4,"ngIf"],["class","comma",4,"ngIf"],[1,"comma"],[1,"icon-remove",3,"click"],[1,"filter-breadcrumb-container"]],template:function(n,m){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,A,4,3,"ng-container",1),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==m.filterBreadcrumbData?null:m.filterBreadcrumbData.length))},dependencies:[v.mk,v.sg,v.O5,D.Hw,h.X$],styles:[".filter-breadcrumb[_ngcontent-%COMP%]{padding:1rem}.filter-breadcrumb-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.filter-breadcrumb-container[_ngcontent-%COMP%] ~ .filter-breadcrumb-container[_ngcontent-%COMP%]{margin-top:1rem}.breadcrumb-value[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 1rem;gap:4px}.filter-type[_ngcontent-%COMP%]{width:100px}.filter-type-fr[_ngcontent-%COMP%]{width:150px}.breadcrumb-filter[_ngcontent-%COMP%]{background-color:#ffd740;color:#000;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;display:flex;flex-wrap:wrap;align-items:center}.comma[_ngcontent-%COMP%]{margin-right:4px}.icon-remove[_ngcontent-%COMP%]{vertical-align:middle;margin-left:.25rem;font-size:inherit;cursor:pointer}"]}),l})()},22437:(y,E,_)=>{_.d(E,{q:()=>h});var e=_(94650);let h=(()=>{class v{constructor(){this.filterSingle=(a,s,r,i,p="")=>null==s?"":p+a?.find(u=>u[r]===s)?.[i],this.filterSingleBoolean=(a,s,r,i,p="")=>null==s?"":p+a?.find(u=>"boolean"==typeof u[r]?JSON.stringify(u[r])===s:"string"==typeof u[r]?u[r]===s:void 0)?.[i],this.filterMultiple=(a,s,r,i,p="")=>s?.length?null===r&&null===i?a.filter(u=>s?.includes(u)).map(u=>p+u):a.filter(u=>s?.includes(u[r]))?.map(u=>p+u[i]):[],this.isValueObject=a=>"object"==typeof a&&!Array.isArray(a)&&null!==a,this.getNestedObjectValue=(a,s)=>{for(const r in a){if(r===s)return a[s];if(this.isValueObject(a[s]))return this.getNestedObjectValue(a[r],s)}},this.getKey=a=>{if(null===a?.filterValue)return null;const s=null===a?.name?a?.filterValue:"boolean"==typeof a?.filterValue?.[a?.name]?String(a?.filterValue?.[a.name]):a.filterValue?.[a.name],r=a.isMultiple,i=a.isSelectionInput,p=a?.fixedValues,u=a?.translationPrefix??"";if(null==s)return null;if(!i&&this.isValueObject(s)&&a?.nestedKey)return u+this.getNestedObjectValue(s,a.nestedKey);if(!i)return u+s;let t;if(p)if(Array.isArray(s))t=p?.filter(C=>s?.includes(C));else if("string"==typeof s||"boolean"==typeof s)return t=p?.find(C=>s===C),t;const x=r?this.filterMultiple(a.filterList,s,a.savedValue,a.displayKey,a.translationPrefix):"boolean"==typeof a?.filterValue?.[a?.name]||"false"===a?.filterValue?.[a?.name]||"true"===a?.filterValue?.[a?.name]?this.filterSingleBoolean(a.filterList,s,a.savedValue,a.displayKey,a.translationPrefix):this.filterSingle(a.filterList,s,a.savedValue,a.displayKey,a.translationPrefix);return r&&t?x.concat(...p):x}}filterBreadcrumb(a,s){const{type:r,column:i}=a,p=s.findIndex(u=>u?.type===r&&u?.column===i);-1!==p?(s[p]=a,!(Array.isArray(s[p]?.value)?s[p]?.value?.length:s[p]?.value)&&!(Array.isArray(s[p]?.key)?s[p]?.key?.length:s[p]?.key)&&s.splice(p,1)):(-1===p&&Array.isArray(a?.value)?a?.value?.length:a?.value)&&s.push(a)}removeFilterBreadcrumb(a,s,r,i,p=!1){"super_filter"===a.type&&s?s[a.name]=null:"table_filter"===a.type&&r?r[a.name]=null:"action_filter"===a.type&&i&&(i[a.name]=null),a?.filterRef?.patchValue(a?.resetValue??null,{emitEvent:p})}filterBreadcrumbFormat(a,s){const r=[...s];for(const i of a){const p=null===i.name?i?.filterValue:"boolean"==typeof i?.filterValue?.[i.name]?String(i?.filterValue?.[i.name]):i?.filterValue?.[i.name],u={type:i.type,name:i.name,column:i.column,filterList:i?.filterList,value:p||null,isMultiple:i.isMultiple,filterRef:i.filterRef,resetValue:i.resetValue,noTranslate:i?.noTranslate,stepColumnName:i?.stepColumnName,key:this.getKey(i)};this.filterBreadcrumb(u,r)}return r}}return v.\u0275fac=function(a){return new(a||v)},v.\u0275prov=e.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},83515:(y,E,_)=>{_.d(E,{w:()=>D});var e=_(15439),v=_(94650);let D=(()=>{class a{transform(r,i){return r?e(r,"HH:mm").add(-e().utcOffset(),"m").format("HH:mm"):""}transformDate(r,i){return r?e(r+i,"DD/MM/YYYYHH:mm").add(-e().utcOffset(),"m").format("DD/MM/YYYY"):""}transformDateTime(r,i){return r?e(r+i,"DD/MM/YYYYHH:mm").add(-e().utcOffset(),"m").format("DD/MM/YYYYHH:mm"):""}transformJavascriptDate(r){if(r){const i=e(r).format("DD/MM/YYYY"),p=e(r).format("HH:mm"),u=e(i+p,"DD/MM/YYYYHH:mm").add(-e().utcOffset(),"m");return{date:u.format("DD/MM/YYYY"),time:u.format("HH:mm")}}return""}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=v.\u0275\u0275definePipe({name:"parseLocalToUtc",type:a,pure:!0}),a})()},62416:(y,E,_)=>{_.d(E,{t:()=>D});var e=_(15439),v=_(94650);let D=(()=>{class a{transform(r,i){return r?e(r,"HH:mm").subtract(-e().utcOffset(),"m").format("HH:mm"):""}transformAMPM(r,i){return r?e(r,"HH:mm").subtract(-e().utcOffset(),"m").format("HH:mm"):""}transformDate(r,i){if(r&&i)return e(r+i,"DD/MM/YYYYHH:mm").subtract(-e().utcOffset(),"m").format("DD/MM/YYYY")}transformDateInDateFormat(r,i){if(r&&i)return e(r+i,"DD/MM/YYYYHH:mm").subtract(-e().utcOffset(),"m")}fixDateFormat(r){if(r&&r.includes("-")){const i=r.split("-");r=`${i[2]}/${i[1]}/${i[0]}`}return r}fixDateFormatUtc(r){if(r&&r.includes("-")){const i=r.split("-");r=`${i[2].split("T")[0]}/${i[1]}/${i[0]}`}return r}fixTimeFormat(r){return r&&!r.includes(":")&&(r="00:00"),r}transformDateToJavascriptDate(r,i){if(r=this.fixDateFormat(r),i=this.fixTimeFormat(i),r&&i)return e(r+i,"DD/MM/YYYYHH:mm").subtract(-e().utcOffset(),"m").toDate()}transformDateToStringFormat(r,i){if(r&&i)return e(r+i,"DD/MM/YYYYHH:mm").subtract(-e().utcOffset(),"m").format("MMM DD, YYYY")}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=v.\u0275\u0275definePipe({name:"parseUtcToLocal",type:a,pure:!0}),a})()}}]);