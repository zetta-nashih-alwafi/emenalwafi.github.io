"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[3008],{477:(st,B,p)=>{p.d(B,{j:()=>y});var T=p(24006),F=p(65938),E=p(68745),b=p(35226),d=p.n(b),S=p(17489),C=p(1059),O=p(24850),t=p(94650),M=p(89383),e=p(79710),D=p(52688),V=p(97679),U=p(94442),x=p(84130),A=p(36895),I=p(73555),P=p(47957),k=p(3238),W=p(4859),R=p(97392),w=p(59549),K=p(284),L=p(51572);function G(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function H(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",45),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getSchoolDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.scholar_season),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.scholar_season," ")}}function $(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function Y(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",46),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getCampusDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.short_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.short_name," ")}}function Q(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function j(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",47),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getLevelDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.name," ")}}function X(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function Z(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",48),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getSectorDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.name," ")}}function z(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function J(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",49),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getSpecialityDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.name," ")}}function q(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",50),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.getTypeFormationDropdown("none"))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&r&&(t.\u0275\u0275property("value",t.\u0275\u0275pipeBind1(1,2,"None")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"None")," "))}function tt(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",50),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getTypeFormationDropdown(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.name," ")}}function et(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function it(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",51),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.getDevMemberDropdown(null==o?null:o._id,null==o?null:o.type_of_formation))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.type_of_formation),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,"type_formation."+(null==i?null:i.type_of_formation))," ")}}function nt(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",56),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(m.selectOptionContinousFormationManager(o))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",(null!=i&&i.civility&&"neutral"===(null==i?null:i.civility)?"":t.\u0275\u0275pipeBind1(1,4,null==i?null:i.civility))+" "+(null==i?null:i.first_name)+" "+(null==i?null:i.last_name)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate3(" ",null!=i&&i.civility&&"neutral"===(null==i?null:i.civility)?"":t.\u0275\u0275pipeBind1(3,6,null==i?null:i.civility)," ",null==i?null:i.first_name," ",null==i?null:i.last_name," ")}}function at(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function h(r,u){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",11)(2,"mat-form-field",52),t.\u0275\u0275element(3,"input",53),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementStart(5,"mat-autocomplete",15,54),t.\u0275\u0275template(7,nt,4,8,"mat-option",55),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,at,3,3,"mat-error",14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&r){const i=t.\u0275\u0275reference(6),a=t.\u0275\u0275nextContext();let s;t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(4,5,"Continuous Formation Manager"),"*"),t.\u0275\u0275property("matAutocomplete",i),t.\u0275\u0275advance(2),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(8,7,a.filteredManager)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl||null==(s=a.filterFormCtrl.get("continuous_formation_manager_id"))?null:s.errors)}}function v(r,u){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function n(r,u){if(1&r){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",57),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(i).$implicit,m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.selectDevMember(null==o?null:o._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&r){const i=u.$implicit;t.\u0275\u0275property("value",null==i?null:i.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==i?null:i.name," ")}}function l(r,u){1&r&&(t.\u0275\u0275elementStart(0,"div",58),t.\u0275\u0275element(1,"mat-spinner",59),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let y=(()=>{class r{constructor(i,a,s,o,m,c,g,f,N){this.dialogRef=i,this.fb=a,this.translate=s,this.candidateService=o,this.userService=m,this.data=c,this.admissionEntrypointService=g,this.financeService=f,this.permissions=N,this.subs=new E.Y,this.isTitleTrue=!1,this.noUsers=!1,this.correctorName="",this.isUserAdmissionMember=!1,this.userTypes=[],this.devMemberList=[],this.devLeaderList=[],this.userCorrectorList=[],this.userList=[],this.memberAssigned=[],this.isGroupTest=!1,this.isContinous=!1,this.isWaitingForResponse=!1,this.isWaitingForUserList=!0,this.isMultipleSelected=!1,this.isSingleSelected=!0,this.dataMemberAssigned=[],this.candidateAssignedMember=[],this.campusList=[],this.isSameData=!1,this.listCampusTransfer=[],this.selectedCfm="",this.scholarList=[],this.schoolList=[],this.campusesList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.formationList=[],this.memberList=[],this.listContinousManager=[],this.isDisplayNone=!1}ngOnInit(){this.isOPERATORAdmin=!!this.permissions.getPermission("operator_admin"),this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const i=this.currentUser?.entities?.find(a=>a?.type?.name===this.isPermission[0]);this.currentUserTypeId=i?.type?._id,this.isUserAdmissionMember=!!this.permissions.getPermission("Admission Member"),console.log("Candidate Selected is => ",this.data),this.singleCandidate=this.data.data[0],this.initProgramForm(),this.initFilterForm(),this.getScholarSeason()}initForm(){this.assignCampusForm=this.fb.group({campus:["",T.Validators.required]})}checkFormValidity(){return!!this.filterFormCtrl.invalid&&(d().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.filterFormCtrl.markAllAsTouched(),!0)}submitAssignMember(){if(this.isContinous&&!this.assignProgramForm.get("continuous_formation_manager_id").value)this.filterFormCtrl.get("continuous_formation_manager_id").setValidators(T.Validators.required),this.filterFormCtrl.get("continuous_formation_manager_id").updateValueAndValidity(),this.checkFormValidity();else{if(this.filterFormCtrl.get("continuous_formation_manager_id").clearValidators(),this.filterFormCtrl.get("continuous_formation_manager_id").updateValueAndValidity(),this.checkFormValidity())return;const i=S.cloneDeep(this.assignProgramForm.value);console.log("data",i,this.data);const a=!1;a&&d().fire({type:"info",title:this.translate.instant("TransferSameProgram.Title"),html:this.translate.instant("TransferSameProgram.Text"),allowOutsideClick:!1,confirmButtonText:this.translate.instant("TransferSameProgram.Button")}).then(c=>{this.isWaitingForResponse=!1}),(null===i.speciality||""===i.speciality||null==this.selectedSpeciality)&&delete i.speciality,console.log("payload",i),console.log("dev_member",this.selectedMember.name);const s={scholar:this.selectedScholar.scholar_season,school:this.selectedSchool.short_name,campus:this.selectedCampuses.name,level:this.selectedLevel.name,sector:this.selectedSector.name,speciality:this.selectedSpeciality?this.selectedSpeciality.name:this.translate.instant("None"),formation:this.translate.instant("type_formation."+this.selectedFormation.type_of_formation),member:this.selectedMember?.name,cfmName:this.selectedCfm};this.isWaitingForResponse=!0;let o=3,m=!1;if(this.data?.data?.length&&(m=this.data.data.some(c=>"partially_paid"===c?.billing_id?.deposit_status)),m){if(!1===a){const c=`${s?.scholar} ${s?.school.slice(0,3).toUpperCase()}${s?.campus?.slice(0,3).toUpperCase()} ${s?.level} ${s?.sector} ${s?.speciality!==this.translate.instant("None")?s?.speciality:""}`;d().fire({type:"warning",title:this.translate.instant("Transfer_Partialy_Paid_S1.TITLE"),html:this.translate.instant("Transfer_Partialy_Paid_S1.TEXT",{newProgram:c}),allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("Transfer_Partialy_Paid_S1.BUTTON_1"),cancelButtonText:this.translate.instant("Transfer_Partialy_Paid_S1.BUTTON_2"),allowOutsideClick:!1,allowEnterKey:!1}).then(g=>{g.value?(this.isWaitingForResponse=!0,this.subs.sink=this.candidateService.TransferProgramOfCandidate(this.singleCandidate._id,i).subscribe(f=>{this.isWaitingForResponse=!1,f&&d().fire({type:"success",title:this.translate.instant("CANDIDAT_S8.TITLE"),allowOutsideClick:!1,confirmButtonText:this.translate.instant("CANDIDAT_S8.BUTTON")}).then(()=>{this.dialogRef.close("reset")})},f=>{this.userService.postErrorLog(f),this.isWaitingForResponse=!1,"GraphQL error: Legal Entity not found!"===f.message?d().fire({type:"info",title:this.translate.instant("OSCAR_S3.TITLE"),text:this.translate.instant("OSCAR_S3.TEXT"),confirmButtonText:this.translate.instant("OSCAR_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: Program not found!"===f.message?d().fire({type:"info",title:this.translate.instant("Oscar_S5.TITLE"),text:this.translate.instant("Oscar_S5.TEXT"),confirmButtonText:this.translate.instant("Oscar_S5.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: cannot assign the same program with the current program"===f.message?d().fire({type:"info",title:this.translate.instant("TransferSameProgram.Title"),html:this.translate.instant("TransferSameProgram.Text"),confirmButtonText:this.translate.instant("TransferSameProgram.Button"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: There is term that already paid"===f.message?d().fire({type:"info",title:this.translate.instant("TRANSFER_S5.Title"),text:this.translate.instant("TRANSFER_S5.Text"),confirmButtonText:this.translate.instant("TRANSFER_S5.Button 1"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: There is term still pending"===f.message?d().fire({type:"info",title:this.translate.instant("PAY_SUM_S3.Title"),text:this.translate.instant("PAY_SUM_S3.Text"),confirmButtonText:this.translate.instant("PAY_SUM_S3.Button"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):f&&f.message&&f.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:f&&f.message?this.translate.instant(f.message.replaceAll("GraphQL error: ","")):f,confirmButtonText:this.translate.instant("OK")}).then(()=>{this.dialogRef.close("reset")})})):this.isWaitingForResponse=!1})}}else!1===a&&d().fire({type:"question",title:this.translate.instant("TRANSFER_S2.Title"),html:this.translate.instant("TRANSFER_S2.Text",{scholarName:s.scholar,schoolName:s.school,campusName:s.campus,levelName:s.level,sectorName:s.sector,specialityName:s.speciality,formationName:s.formation,devMember:s.member,cfmName:s.cfmName}),allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("TRANSFER_S2.Button 1",{timer:o}),cancelButtonText:this.translate.instant("TRANSFER_S2.Button 2"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{d().disableConfirmButton();const c=d().getConfirmButton();this.intVal=setInterval(()=>{o-=1,c.innerText=this.translate.instant("TRANSFER_S2.Button 1")+` (${o})`},1e3),this.timeOutVal=setTimeout(()=>{c.innerText=this.translate.instant("TRANSFER_S2.Button 1"),d().enableConfirmButton(),clearInterval(this.intVal),clearTimeout(this.timeOutVal)},1e3*o)}}).then(c=>{clearTimeout(this.timeOutVal),this.isWaitingForResponse=!1,c.value?(this.isWaitingForResponse=!0,this.subs.sink=this.candidateService.TransferProgramOfCandidate(this.singleCandidate._id,i).subscribe(g=>{this.isWaitingForResponse=!1,g&&d().fire({type:"success",title:this.translate.instant("CANDIDAT_S8.TITLE"),allowOutsideClick:!1,confirmButtonText:this.translate.instant("CANDIDAT_S8.BUTTON")}).then(()=>{this.dialogRef.close("reset")})},g=>{this.userService.postErrorLog(g),this.isWaitingForResponse=!1,"GraphQL error: Legal Entity not found!"===g.message?d().fire({type:"info",title:this.translate.instant("OSCAR_S3.TITLE"),text:this.translate.instant("OSCAR_S3.TEXT"),confirmButtonText:this.translate.instant("OSCAR_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: Program not found!"===g.message?d().fire({type:"info",title:this.translate.instant("Oscar_S5.TITLE"),text:this.translate.instant("Oscar_S5.TEXT"),confirmButtonText:this.translate.instant("Oscar_S5.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: cannot assign the same program with the current program"===g.message?d().fire({type:"info",title:this.translate.instant("TransferSameProgram.Title"),html:this.translate.instant("TransferSameProgram.Text"),confirmButtonText:this.translate.instant("TransferSameProgram.Button"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: There is term that already paid"===g.message?d().fire({type:"info",title:this.translate.instant("TRANSFER_S5.Title"),text:this.translate.instant("TRANSFER_S5.Text"),confirmButtonText:this.translate.instant("TRANSFER_S5.Button 1"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):"GraphQL error: There is term still pending"===g.message?d().fire({type:"info",title:this.translate.instant("PAY_SUM_S3.Title"),text:this.translate.instant("PAY_SUM_S3.Text"),confirmButtonText:this.translate.instant("PAY_SUM_S3.Button"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("reset")}):g&&g.message&&g.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:g&&g.message?this.translate.instant(g.message.replaceAll("GraphQL error: ","")):g,confirmButtonText:this.translate.instant("OK")}).then(()=>{this.dialogRef.close("reset")})})):this.isWaitingForResponse=!1})}}selectCampus(i){const a=i.value;this.selectedCampus=this.campusList.find(s=>s._id===a),this.subs.sink=this.candidateService.GetDevLeader(this.selectedCampus.name).subscribe(s=>{this.devLeaderList=s},s=>{this.userService.postErrorLog(s),s&&s.message&&s.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}),this.subs.sink=this.candidateService.GetDevMember(this.selectedCampus.name).subscribe(s=>{this.devMemberList=s},s=>{this.userService.postErrorLog(s),s&&s.message&&s.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}messageAfterSelect(){let i="";return i+=this.translate.instant("Single Candidates Selected",{candidateName:this.correctorName}),i}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}getMessage(i){let a="";this.campusList.filter(m=>m.campus===i);let o="";return this.devLeaderList&&this.devLeaderList.length&&(o=("neutral"!==this.devLeaderList[0].civility?this.translate.instant(this.devLeaderList[0].civility)+" ":"")+this.devLeaderList[0].first_name+" "+this.devLeaderList[0].last_name,a+=this.translate.instant("CANDIDATE_POPUP_3.Where Will be",{candidateName:("neutral"!==this.singleCandidate.civility?this.translate.instant(this.singleCandidate.civility)+" ":"")+this.singleCandidate.first_name+" "+this.singleCandidate.last_name+" "})),a+=this.translate.instant("MR"===this.singleCandidate.civility?"CANDIDATE_POPUP_3.transferred":"CANDIDATE_POPUP_3.transferreed"),a+=this.translate.instant("CANDIDATE_POPUP_3.devLeader",{devLeader:o}),a}getDataCampus(){this.singleCandidate&&(console.log("masuk"),this.subs.sink=this.candidateService.getAllCandidateCampus({scholar_season_id:this.singleCandidate.scholar_season&&this.singleCandidate.scholar_season._id?this.singleCandidate.scholar_season._id:"",school_id:this.singleCandidate.school?this.singleCandidate.school._id:""},!0).subscribe(a=>{a&&(this.campusList=a,this.listCampusTransfer=a)},a=>{this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}initProgramForm(){this.assignProgramForm=this.fb.group({scholar_season:["",T.Validators.required],school:["",T.Validators.required],campus:["",T.Validators.required],level:["",T.Validators.required],sector:["",T.Validators.required],type_of_formation_id:["",T.Validators.required],continuous_formation_manager_id:[null],speciality:[""],dev_member:["",T.Validators.required]})}initFilterForm(){this.filterFormCtrl=this.fb.group({scholarSeason:["",T.Validators.required],school:["",T.Validators.required],campus:["",T.Validators.required],level:["",T.Validators.required],sector:["",T.Validators.required],type_of_formation_id:["",T.Validators.required],continuous_formation_manager_id:[null],speciality:[""],devMember:["",T.Validators.required]})}getScholarSeason(){this.isWaitingForResponse=!0,this.subs.sink=this.candidateService.getAllScholarSeasons({is_published:!0}).subscribe(a=>{if(a){const s=this.data?.data[0]?.scholar_season?.scholar_season?this.data?.data[0]?.scholar_season?.scholar_season:"",o=a?.filter(m=>{if(m)return m?.scholar_season>=s});this.scholarList=this.isOPERATORAdmin?S.cloneDeep(a):o,this.isWaitingForResponse=!1,this.initFilter()}},a=>{this.userService.postErrorLog(a),this.isWaitingForResponse=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("OK")})})}initFilter(){this.filteredScholar=this.filterFormCtrl.controls.scholarSeason.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.scholarList.filter(a=>!a||a.scholar_season.toLowerCase().includes(i.toString().toLowerCase())))),this.filteredSchool=this.filterFormCtrl.controls.school.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.schoolList.filter(a=>!a||a.short_name.toLowerCase().includes(i?i?.toLowerCase():"")))),this.filteredCampus=this.filterFormCtrl.controls.campus.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.campusesList.filter(a=>!a||a.name.toLowerCase().includes(i?i?.toLowerCase():"")))),this.filteredLevel=this.filterFormCtrl.controls.level.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>i?this.levelList.filter(a=>!a||a.name.toLowerCase().includes(i.toString().toLowerCase())).sort((a,s)=>a.name-s.name):this.levelList.sort((a,s)=>a.name-s.name))),this.filteredSector=this.filterFormCtrl.controls.sector.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.sectorList.filter(a=>!a||a.name.toLowerCase().includes(i?i?.toLowerCase():"")))),this.filteredSpeciality=this.filterFormCtrl.controls.speciality.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.specialityList.filter(a=>!a||a.name.toLowerCase().includes(i?i?.toLowerCase():"")))),this.filteredFormation=this.filterFormCtrl.controls.type_of_formation_id.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.formationList.filter(a=>!a||this.translate.instant("type_formation."+a.type_of_information).toLowerCase().includes(i?i?.toLowerCase():"")))),this.filteredMember=this.filterFormCtrl.controls.devMember.valueChanges.pipe((0,C.O)(""),(0,O.U)(i=>this.memberList.filter(a=>!a||a.name.toLowerCase().includes(i?i?.toLowerCase():""))))}getUserTypeIdList(){const i=this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type:[],a=[];if(i){const s=i.filter(o=>"operator_dir"===o.name);if(s?.length)a.push(s[0]?._id);else{const o=i.filter(m=>"operator_admin"===m.name);o?.length?a.push(o[0]?._id):i.forEach(m=>{("Admission Director"===m.name||"Admission Member"===m.name||"Academic Director"===m.name||"Continuous formation manager"===m.name)&&a.push(m._id)})}}return a}getSchoolDropdown(i){console.log("scholar id",i),this.isWaitingForResponse=!0,this.isDisplayNone=!1,this.schoolList=[],this.campusesList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.memberList=[],this.formationList=[],this.listContinousManager=[],this.isContinous=!1,this.assignProgramForm.controls.school.patchValue(""),this.assignProgramForm.controls.campus.patchValue(""),this.assignProgramForm.controls.level.patchValue(""),this.assignProgramForm.controls.sector.patchValue(""),this.assignProgramForm.controls.speciality.patchValue(""),this.assignProgramForm.controls.type_of_formation_id.patchValue(""),this.assignProgramForm.controls.continuous_formation_manager_id.patchValue(""),this.filterFormCtrl.controls.school.patchValue(""),this.filterFormCtrl.controls.campus.patchValue(""),this.filterFormCtrl.controls.level.patchValue(""),this.filterFormCtrl.controls.sector.patchValue(""),this.filterFormCtrl.controls.speciality.patchValue(""),this.filterFormCtrl.controls.type_of_formation_id.patchValue(""),this.filterFormCtrl.controls.continuous_formation_manager_id.patchValue(""),this.isUserAdmissionMember||(this.memberList=[],this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue(""));const a=this.getUserTypeIdList();this.selectedScholar=this.scholarList.find(o=>o._id===i),this.assignProgramForm.controls.scholar_season.patchValue(i);const s=`filter: { scholar_season_id:"${i}"}`;console.log(s),this.subs.sink=this.candidateService.GetAllSchoolFilter(i,s,a,!0,!0).subscribe(o=>{o&&(this.schoolList=o,this.initFilter(),this.isWaitingForResponse=!1)},o=>{this.userService.postErrorLog(o),this.isWaitingForResponse=!1,o&&o.message&&o.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getCampusDropdown(i){console.log("school id",i),this.isWaitingForResponse=!0,this.isDisplayNone=!1,this.campusesList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.memberList=[],this.listContinousManager=[],this.formationList=[],this.isContinous=!1,this.assignProgramForm.controls.campus.patchValue(""),this.assignProgramForm.controls.level.patchValue(""),this.assignProgramForm.controls.sector.patchValue(""),this.assignProgramForm.controls.speciality.patchValue(""),this.assignProgramForm.controls.type_of_formation_id.patchValue(""),this.assignProgramForm.controls.continuous_formation_manager_id.patchValue(""),this.filterFormCtrl.controls.campus.patchValue(""),this.filterFormCtrl.controls.level.patchValue(""),this.filterFormCtrl.controls.sector.patchValue(""),this.filterFormCtrl.controls.speciality.patchValue(""),this.filterFormCtrl.controls.type_of_formation_id.patchValue(""),this.filterFormCtrl.controls.continuous_formation_manager_id.patchValue(""),this.isUserAdmissionMember||(this.memberList=[],this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue(""));const a=this.getUserTypeIdList();this.selectedSchool=this.schoolList.find(o=>o._id===i),this.assignProgramForm.controls.school.patchValue(i),this.subs.sink=this.candidateService.GetAllCampuses({scholar_season_id:this.selectedScholar._id,school_id:i},a,!0,!0).subscribe(o=>{o&&(this.campusesList=o,this.initFilter(),this.isWaitingForResponse=!1)},o=>{this.userService.postErrorLog(o),this.isWaitingForResponse=!1,o&&o.message&&o.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getLevelDropdown(i){console.log("campus id",i),this.isWaitingForResponse=!0,this.isDisplayNone=!1,this.levelList=[],this.sectorList=[],this.specialityList=[],this.memberList=[],this.formationList=[],this.listContinousManager=[],this.isContinous=!1,this.assignProgramForm.controls.level.patchValue(""),this.assignProgramForm.controls.sector.patchValue(""),this.assignProgramForm.controls.speciality.patchValue(""),this.assignProgramForm.controls.type_of_formation_id.patchValue(""),this.assignProgramForm.controls.continuous_formation_manager_id.patchValue(""),this.filterFormCtrl.controls.level.patchValue(""),this.filterFormCtrl.controls.sector.patchValue(""),this.filterFormCtrl.controls.speciality.patchValue(""),this.filterFormCtrl.controls.type_of_formation_id.patchValue(""),this.filterFormCtrl.controls.continuous_formation_manager_id.patchValue(""),this.isUserAdmissionMember||(this.memberList=[],this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue(""));const a=this.getUserTypeIdList();this.selectedCampuses=this.campusesList.find(o=>o._id===i),this.assignProgramForm.controls.campus.patchValue(i),this.subs.sink=this.candidateService.GetAllLevels({scholar_season_id:this.selectedScholar._id,school_id:this.selectedSchool._id,campus_id:i},a,!0,!0).subscribe(o=>{o&&(this.levelList=o,this.initFilter(),this.isWaitingForResponse=!1)},o=>{this.userService.postErrorLog(o),this.isWaitingForResponse=!1,o&&o.message&&o.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getSectorDropdown(i){console.log("level id",i),this.isWaitingForResponse=!0,this.isDisplayNone=!1,this.sectorList=[],this.specialityList=[],this.memberList=[],this.formationList=[],this.listContinousManager=[],this.isContinous=!1,this.assignProgramForm.controls.sector.patchValue(""),this.assignProgramForm.controls.speciality.patchValue(""),this.assignProgramForm.controls.type_of_formation_id.patchValue(""),this.assignProgramForm.controls.continuous_formation_manager_id.patchValue(""),this.filterFormCtrl.controls.sector.patchValue(""),this.filterFormCtrl.controls.speciality.patchValue(""),this.filterFormCtrl.controls.type_of_formation_id.patchValue(""),this.filterFormCtrl.controls.continuous_formation_manager_id.patchValue(""),this.isUserAdmissionMember||(this.memberList=[],this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue("")),this.selectedLevel=this.levelList.find(s=>s._id===i),this.assignProgramForm.controls.level.patchValue(i);const a={scholar_season_id:this.selectedScholar._id,candidate_school_ids:[this.selectedSchool._id],campuses:[this.selectedCampuses._id],levels:[i]};console.log(a),this.subs.sink=this.financeService.GetAllSectorsDropdown(a).subscribe(s=>{s&&(this.sectorList=s,this.initFilter(),this.isWaitingForResponse=!1)},s=>{this.userService.postErrorLog(s),this.isWaitingForResponse=!1,s&&s.message&&s.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getSpecialityDropdown(i){console.log("sector id",i),this.isWaitingForResponse=!0,this.specialityList=[],this.memberList=[],this.formationList=[],this.formationList=[],this.listContinousManager=[],this.isContinous=!1,this.assignProgramForm.controls.type_of_formation_id.patchValue(""),this.assignProgramForm.controls.speciality.patchValue(""),this.assignProgramForm.controls.continuous_formation_manager_id.patchValue(""),this.filterFormCtrl.controls.speciality.patchValue(""),this.filterFormCtrl.controls.type_of_formation_id.patchValue(""),this.filterFormCtrl.controls.continuous_formation_manager_id.patchValue(""),this.isUserAdmissionMember||(this.memberList=[],this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue("")),this.selectedSector=this.sectorList.find(s=>s._id===i),this.assignProgramForm.controls.sector.patchValue(i),this.subs.sink=this.candidateService.getAllProgramsToGetSpeciality({scholar_season_id:this.selectedScholar._id,school_id:[this.selectedSchool._id],campus:[this.selectedCampuses._id],level:[this.selectedLevel._id],sector:[i]}).subscribe(s=>{const o=S.cloneDeep(s),m=o.find(g=>!g?.speciality_id?._id),c=[];o.forEach(g=>{g?.speciality_id?._id&&c.push(g?.speciality_id)}),console.log("_speciality",s,m,c),this.isDisplayNone=!!m,c&&c?.length?(this.specialityList=c,this.initFilter(),this.isWaitingForResponse=!1):(this.getTypeFormationDropdown(null),this.isWaitingForResponse=!1)},s=>{this.userService.postErrorLog(s),this.isWaitingForResponse=!1,s&&s.message&&s.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getTypeFormationDropdown(i){console.log("typeFormation id",i),this.isWaitingForResponse=!0,i&&("none"!==i?(this.selectedSpeciality=this.specialityList.find(a=>a._id===i),this.assignProgramForm.controls.speciality.patchValue(i)):(this.selectedSpeciality=null,this.assignProgramForm.controls.speciality.patchValue(null))),this.subs.sink=this.admissionEntrypointService.getAllTypeOfInformationByScholar(this.selectedScholar._id).subscribe(a=>{console.log("typeofformation",a),a&&(console.log("dataaa",this.data),this.data&&this.data.data&&this.data.data.length&&this.data.data[0]&&("pending"===this.data.data[0].payment||"sepa_pending"===this.data.data[0].payment)?this.formationList=a.filter(s=>"classic"===s.type_of_formation):this.data&&this.data.data&&this.data.data.length&&this.data.data[0]&&"pending"!==this.data.data[0].payment&&"sepa_pending"!==this.data.data[0].payment&&(this.formationList=a.filter(s=>s.type_of_formation),console.log("typeofformation",this.formationList)),this.initFilter()),this.isWaitingForResponse=!1},a=>{this.userService.postErrorLog(a),this.isWaitingForResponse=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}displayWithType(i){if(i){const a=this.formationList.find(s=>s.type_of_formation.toLowerCase().trim().includes(i));return a?this.translate.instant("type_formation."+a.type_of_formation):i}return i}getDevMemberDropdown(i,a){console.log("FORMATION id",i),"classic"!==a?this.isContinous=!0:(this.isContinous=!1,this.selectedCfm=""),this.isWaitingForResponse=!0,this.memberList=[],this.assignProgramForm.get("continuous_formation_manager_id").setValue(null),this.filterFormCtrl.get("continuous_formation_manager_id").setValue(null),this.isUserAdmissionMember||(this.assignProgramForm.controls.dev_member.patchValue(""),this.filterFormCtrl.controls.devMember.patchValue("")),"none"!==i?(this.selectedFormation=this.formationList.find(c=>c._id===i),this.assignProgramForm.controls.type_of_formation_id.patchValue(i)):(this.selectedFormation=null,this.assignProgramForm.controls.type_of_formation_id.patchValue(null));const s=this.assignProgramForm.controls.school.value,o=this.assignProgramForm.controls.campus.value,m=this.assignProgramForm.controls.level.value;this.subs.sink="readmission-transfer"!==this.data.from?this.candidateService.getDevMemberDropdown(o,s,m).subscribe(c=>{console.log("_devMember",c),c&&(S.cloneDeep(c).forEach(f=>{if(f&&f._id){const N={_id:f._id,name:("neutral"!==f.civility?this.translate.instant(f.civility)+" ":"")+f.last_name.toUpperCase()+" "+f.first_name};this.memberList.push(N)}}),this.isUserAdmissionMember&&this.selectDevMember(this.currentUser._id),this.isWaitingForResponse=!1,this.initFilter(),this.getContinuousFormationManagerList(o,s,m))},c=>{this.userService.postErrorLog(c),this.isWaitingForResponse=!1,c&&c.message&&c.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.candidateService.getAcadMemberDropdown(o,s,m).subscribe(c=>{console.log("_devMember",c),c&&(S.cloneDeep(c).forEach(f=>{if(f&&f._id){const N={_id:f._id,name:("neutral"!==f.civility?this.translate.instant(f.civility)+" ":"")+f.last_name.toUpperCase()+" "+f.first_name};this.memberList.push(N)}}),this.isUserAdmissionMember&&this.selectDevMember(this.currentUser._id),this.isWaitingForResponse=!1,this.initFilter(),this.getContinuousFormationManagerList(o,s,m))},c=>{this.userService.postErrorLog(c),this.isWaitingForResponse=!1,c&&c.message&&c.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}),console.log("devMember list",this.memberList)}selectDevMember(i){console.log("_devMember id",i),this.selectedMember=this.memberList.find(a=>a._id===i),this.selectedMember&&(this.assignProgramForm.get("dev_member").setValue(this.selectedMember?._id),this.filterFormCtrl.get("devMember").setValue(this.selectedMember?.name))}getContinuousFormationManagerList(i,a,s){this.subs.sink=this.candidateService.getUserContinuousFormationManager(["61ceb560688f572138e023b2"],i,a,s).subscribe(m=>{m&&(this.listContinousManager=m,this.filteredManager=this.filterFormCtrl.get("continuous_formation_manager_id").valueChanges.pipe((0,C.O)(""),(0,O.U)(c=>this.listContinousManager.filter(g=>!g||g.first_name.toLowerCase().includes(c?c.toString().toLowerCase():"")))))},m=>{this.userService.postErrorLog(m),m&&m.message&&m.message.includes("Network error: Http failure response for")?d().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):d().fire({type:"info",title:this.translate.instant("SORRY"),text:m&&m.message?this.translate.instant(m.message.replaceAll("GraphQL error: ","")):m,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectOptionContinousFormationManager(i){this.assignProgramForm.get("continuous_formation_manager_id").setValue(i._id),console.log("selectOptionContinousFormationManager",i,this.assignProgramForm.get("continuous_formation_manager_id").value);const a=(i.civility&&"neutral"===i.civility?"":this.translate.instant(i.civility))+" "+i.first_name+" "+i.last_name;this.selectedCfm=a,this.filterFormCtrl.get("continuous_formation_manager_id").patchValue(a)}}return r.\u0275fac=function(i){return new(i||r)(t.\u0275\u0275directiveInject(F.so),t.\u0275\u0275directiveInject(T.FormBuilder),t.\u0275\u0275directiveInject(M.sK),t.\u0275\u0275directiveInject(e.o),t.\u0275\u0275directiveInject(D.e),t.\u0275\u0275directiveInject(F.WI),t.\u0275\u0275directiveInject(V.l),t.\u0275\u0275directiveInject(U.N),t.\u0275\u0275directiveInject(x.YI))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ms-transfer-fc-program-candidate-dialog"]],decls:96,vars:85,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"w-30","no-padding"],["mat-icon-button","","svgIcon","bank-transfer",1,"mt-2px"],[1,"p-col-10","no-padding"],["data-cy","title-transfer",1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",3,"formGroup"],[1,"p-grid","dropdown-pad"],[1,"p-col-6","pad-y-none"],[1,"full-wid"],["data-cy","input-scholar-season","matInput","","formControlName","scholarSeason","required","",3,"placeholder","matAutocomplete"],[4,"ngIf"],[3,"panelWidth"],["autoScholar","matAutocomplete"],["data-cy","input-scholar-season-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-school","matInput","","formControlName","school","required","",3,"placeholder","matAutocomplete"],["autoSchool","matAutocomplete"],["data-cy","input-school-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-campus","matInput","","formControlName","campus","required","",3,"placeholder","matAutocomplete"],["autoCampus","matAutocomplete"],["data-cy","input-campus-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-level","matInput","","formControlName","level","required","",3,"placeholder","matAutocomplete"],["autoLevel","matAutocomplete"],["data-cy","input-level-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-sector","matInput","","formControlName","sector","required","",3,"placeholder","matAutocomplete"],["autoSector","matAutocomplete"],["data-cy","input-sector-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-speciality","matInput","","formControlName","speciality",3,"placeholder","matAutocomplete"],["autoSpeciality","matAutocomplete"],["data-cy","input-speciality-option",3,"value","click",4,"ngIf"],["data-cy","input-speciality-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-type-of-formation","matInput","","formControlName","type_of_formation_id",3,"placeholder","matAutocomplete"],[3,"displayWith","panelWidth"],["autoFormation","matAutocomplete"],["data-cy","input-type-of-formation-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-dev-member","matInput","","formControlName","devMember","required","",3,"placeholder","matAutocomplete"],["autoMember","matAutocomplete"],["data-cy","input-dev-member-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","spinner-dialog","class","inner-loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["data-cy","button-cancel","mat-raised-button","","color","warn","type","button",3,"click"],["data-cy","button-validate","mat-raised-button","","color","primary","type","button",1,"mr-0",3,"click"],["data-cy","input-scholar-season-option",3,"value","click"],["data-cy","input-school-option",3,"value","click"],["data-cy","input-campus-option",3,"value","click"],["data-cy","input-level-option",3,"value","click"],["data-cy","input-sector-option",3,"value","click"],["data-cy","input-speciality-option",3,"value","click"],["data-cy","input-type-of-formation-option",3,"value","click"],["floatLabel","auto"],["data-cy","input-continous-formation-manager","matInput","","formControlName","continuous_formation_manager_id",3,"placeholder","matAutocomplete"],["autoContinuousManager","matAutocomplete"],["data-cy","input-continous-formation-manager-option",3,"value","click",4,"ngFor","ngForOf"],["data-cy","input-continous-formation-manager-option",3,"value","click"],["data-cy","input-dev-member-option",3,"value","click"],["data-cy","spinner-dialog",1,"inner-loading-indicator"],["color","accent",3,"diameter"]],template:function(i,a){if(1&i&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.\u0275\u0275element(4,"mat-icon",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",5)(6,"h3",6),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",7)(10,"button",8),t.\u0275\u0275listener("click",function(){return a.closeDialog()}),t.\u0275\u0275elementStart(11,"mat-icon"),t.\u0275\u0275text(12,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(13,"div",9)(14,"div",10)(15,"div",11)(16,"mat-form-field",12),t.\u0275\u0275element(17,"input",13),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275template(19,G,3,3,"mat-error",14),t.\u0275\u0275elementStart(20,"mat-autocomplete",15,16),t.\u0275\u0275template(22,H,2,2,"mat-option",17),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(24,"div",11)(25,"mat-form-field",12),t.\u0275\u0275element(26,"input",18),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275template(28,$,3,3,"mat-error",14),t.\u0275\u0275elementStart(29,"mat-autocomplete",15,19),t.\u0275\u0275template(31,Y,2,2,"mat-option",20),t.\u0275\u0275pipe(32,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(33,"div",11)(34,"mat-form-field",12),t.\u0275\u0275element(35,"input",21),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275template(37,Q,3,3,"mat-error",14),t.\u0275\u0275elementStart(38,"mat-autocomplete",15,22),t.\u0275\u0275template(40,j,2,2,"mat-option",23),t.\u0275\u0275pipe(41,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(42,"div",11)(43,"mat-form-field",12),t.\u0275\u0275element(44,"input",24),t.\u0275\u0275pipe(45,"translate"),t.\u0275\u0275template(46,X,3,3,"mat-error",14),t.\u0275\u0275elementStart(47,"mat-autocomplete",15,25),t.\u0275\u0275template(49,Z,2,2,"mat-option",26),t.\u0275\u0275pipe(50,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(51,"div",11)(52,"mat-form-field",12),t.\u0275\u0275element(53,"input",27),t.\u0275\u0275pipe(54,"translate"),t.\u0275\u0275template(55,z,3,3,"mat-error",14),t.\u0275\u0275elementStart(56,"mat-autocomplete",15,28),t.\u0275\u0275template(58,J,2,2,"mat-option",29),t.\u0275\u0275pipe(59,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(60,"div",11)(61,"mat-form-field",12),t.\u0275\u0275element(62,"input",30),t.\u0275\u0275pipe(63,"translate"),t.\u0275\u0275elementStart(64,"mat-autocomplete",15,31),t.\u0275\u0275template(66,q,4,6,"mat-option",32),t.\u0275\u0275template(67,tt,2,2,"mat-option",33),t.\u0275\u0275pipe(68,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(69,"div",11)(70,"mat-form-field",12),t.\u0275\u0275element(71,"input",34),t.\u0275\u0275pipe(72,"translate"),t.\u0275\u0275template(73,et,3,3,"mat-error",14),t.\u0275\u0275elementStart(74,"mat-autocomplete",35,36),t.\u0275\u0275template(76,it,3,4,"mat-option",37),t.\u0275\u0275pipe(77,"async"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(78,h,10,9,"ng-container",14),t.\u0275\u0275elementStart(79,"div",11)(80,"mat-form-field",12),t.\u0275\u0275element(81,"input",38),t.\u0275\u0275pipe(82,"translate"),t.\u0275\u0275template(83,v,3,3,"mat-error",14),t.\u0275\u0275elementStart(84,"mat-autocomplete",15,39),t.\u0275\u0275template(86,n,2,2,"mat-option",40),t.\u0275\u0275pipe(87,"async"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(88,l,2,1,"div",41),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(89,"div",42)(90,"button",43),t.\u0275\u0275listener("click",function(){return a.closeDialog()}),t.\u0275\u0275text(91),t.\u0275\u0275pipe(92,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(93,"button",44),t.\u0275\u0275listener("click",function(){return a.submitAssignMember()}),t.\u0275\u0275text(94),t.\u0275\u0275pipe(95,"translate"),t.\u0275\u0275elementEnd()()),2&i){const s=t.\u0275\u0275reference(21),o=t.\u0275\u0275reference(30),m=t.\u0275\u0275reference(39),c=t.\u0275\u0275reference(48),g=t.\u0275\u0275reference(57),f=t.\u0275\u0275reference(65),N=t.\u0275\u0275reference(75),ot=t.\u0275\u0275reference(85);t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,47,"CANDIDATE_POPUP_3.TITLE")),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",a.filterFormCtrl),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(18,49,"Scholar Season")),t.\u0275\u0275property("matAutocomplete",s),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("scholarSeason").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(23,51,a.filteredScholar)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(27,53,"INTERN_FOLLOW_UP.School")),t.\u0275\u0275property("matAutocomplete",o),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("school").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(32,55,a.filteredSchool)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(36,57,"ADMISSION.TABLE_ADMISSION_CHANNEL.Campus")),t.\u0275\u0275property("matAutocomplete",m),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("campus").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(41,59,a.filteredCampus)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(45,61,"ADMISSION.TABLE_ADMISSION_CHANNEL.Level")),t.\u0275\u0275property("matAutocomplete",c),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("level").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(50,63,a.filteredLevel)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(54,65,"Sector")),t.\u0275\u0275property("matAutocomplete",g),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("sector").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(59,67,a.filteredSector)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(63,69,"Speciality")),t.\u0275\u0275property("matAutocomplete",f),t.\u0275\u0275advance(2),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",a.isDisplayNone),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(68,71,a.filteredSpeciality)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(72,73,"ADMISSION.Type Of formation")),t.\u0275\u0275property("matAutocomplete",N),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("type_of_formation_id").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("displayWith",a.displayWithType.bind(a))("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(77,75,a.filteredFormation)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",a.isContinous),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(82,77,"readmission-transfer"===(null==a.data?null:a.data.from)?"Academic Member":"Dev Member")),t.\u0275\u0275property("matAutocomplete",ot),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==a.filterFormCtrl?null:a.filterFormCtrl.get("devMember").errors),t.\u0275\u0275advance(1),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(87,79,a.filteredMember)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",a.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(92,81,"ASSIGN_CORRECTOR_DIALOG.CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(95,83,"Validate")," ")}},dependencies:[A.sg,A.O5,I.Zt,I.Bh,P.XC,P.ZL,k.ey,W.lW,F.xY,F.H8,R.Hw,w.TO,w.KE,K.Nt,L.Ou,T.DefaultValueAccessor,T.NgControlStatus,T.NgControlStatusGroup,T.RequiredValidator,T.FormGroupDirective,T.FormControlName,A.Ov,M.X$],styles:["[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-2px[_ngcontent-%COMP%]{margin-top:2px}"]}),r})()},29481:(st,B,p)=>{p.d(B,{p:()=>at});var T=p(49671),F=p(65938),E=p(24006),b=p(17489),S=p(35226),_=p.n(S),C=p(62416),O=p(68745),t=p(1059),M=p(24850),e=p(94650),D=p(89383),V=p(79710),U=p(52688),x=p(73555),A=p(47957),I=p(3238),P=p(4859),k=p(56709),W=p(97392),R=p(59549),w=p(284),K=p(51572),L=p(36895);function G(h,v){if(1&h&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",14)(2,"b"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()()()),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate4("",e.\u0275\u0275pipeBind1(4,4,"Which member do you want to change for")," ",e.\u0275\u0275pipeBind1(5,6,"the Student")," ",null==n.singleCandidate?null:n.singleCandidate.first_name," ",null==n.singleCandidate?null:n.singleCandidate.last_name,": ")}}function H(h,v){1&h&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",15)(2,"b"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()()()),2&h&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(4,2,"Which member do you want to change for")," ",e.\u0275\u0275pipeBind1(5,4,"selected student")," "))}function $(h,v){1&h&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&h&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function Y(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.selectDevMember(null==r?null:r._id))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&h){const n=v.$implicit;e.\u0275\u0275property("value",(null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(1,4,null==n?null:n.civility))+" "+(null==n?null:n.first_name)+" "+(null==n?null:n.last_name)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate3(" ",null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(3,6,null==n?null:n.civility)," ",null==n?null:n.first_name," ",null==n?null:n.last_name," ")}}function Q(h,v){if(1&h&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",17),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,$,3,3,"mat-error",9),e.\u0275\u0275elementStart(5,"mat-autocomplete",18,19),e.\u0275\u0275template(7,Y,4,8,"mat-option",20),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&h){const n=e.\u0275\u0275reference(6),l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"Select a member of admission")),e.\u0275\u0275property("matAutocomplete",n),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.assignMemberForm.get("member_id").errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("panelWidth","fit"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,7,l.filteredMember))}}function j(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",14)(2,"mat-checkbox",16),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onSelectMemberAdmission(y))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Q,9,9,"ng-container",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",n.isMemberAdmission),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,"Member of admission")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isMemberAdmission)}}function X(h,v){1&h&&(e.\u0275\u0275elementStart(0,"mat-error"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&h&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"This field is mandatory")))}function Z(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.selectDevMember(null==r?null:r._id))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&h){const n=v.$implicit;e.\u0275\u0275property("value",(null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(1,4,null==n?null:n.civility))+" "+(null==n?null:n.first_name)+" "+(null==n?null:n.last_name)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate3(" ",null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(3,6,null==n?null:n.civility)," ",null==n?null:n.first_name," ",null==n?null:n.last_name," ")}}function z(h,v){if(1&h&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",17),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,X,3,3,"mat-error",9),e.\u0275\u0275elementStart(5,"mat-autocomplete",18,19),e.\u0275\u0275template(7,Z,4,8,"mat-option",20),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&h){const n=e.\u0275\u0275reference(6),l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"USER_TYPES.Academic Member")),e.\u0275\u0275property("matAutocomplete",n),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.assignMemberForm.get("member_id").errors),e.\u0275\u0275advance(1),e.\u0275\u0275property("panelWidth","fit"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(8,7,l.filteredMember))}}function J(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",14)(2,"mat-checkbox",16),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onSelectMemberAdmission(y))}),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,z,9,9,"ng-container",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("checked",n.isMemberAdmission),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,"USER_TYPES.Academic Member")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isMemberAdmission)}}function q(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-option",21),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,u=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(u.selectOptionContinousFormationManager(r))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&h){const n=v.$implicit;e.\u0275\u0275property("value",(null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(1,4,null==n?null:n.civility))+" "+(null==n?null:n.first_name)+" "+(null==n?null:n.last_name)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate3(" ",null!=n&&n.civility&&"neutral"===(null==n?null:n.civility)?"":e.\u0275\u0275pipeBind1(3,6,null==n?null:n.civility)," ",null==n?null:n.first_name," ",null==n?null:n.last_name," ")}}function tt(h,v){if(1&h&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-form-field"),e.\u0275\u0275element(2,"input",22),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementStart(4,"mat-autocomplete",18,23),e.\u0275\u0275template(6,q,4,8,"mat-option",20),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&h){const n=e.\u0275\u0275reference(5),l=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(3,5,"Select a continuous formation manager")),e.\u0275\u0275property("formControl",l.continuousManagerFilter)("matAutocomplete",n),e.\u0275\u0275advance(2),e.\u0275\u0275property("panelWidth","fit"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(7,7,l.filteredManager))}}function et(h,v){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",8)(2,"div",14)(3,"mat-checkbox",16),e.\u0275\u0275listener("click",function(y){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onSelectContinuousFormationManager(y))}),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,tt,8,9,"ng-container",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("checked",n.isContinousFormationManager),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,"Continuous Formation Manager")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isContinousFormationManager)}}function it(h,v){if(1&h&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div",15)(2,"b"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()()),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.messageAfterSelect())}}function nt(h,v){1&h&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"mat-progress-spinner",25),e.\u0275\u0275elementEnd())}let at=(()=>{class h{constructor(n,l,y,r,u,i){this.dialogRef=n,this.fb=l,this.translate=y,this.candidateService=r,this.parentData=u,this.authService=i,this.subs=new O.Y,this.isTitleTrue=!1,this.noUsers=!1,this.correctorName="",this.userTypes=[],this.userCorrectorList=[],this.userList=[],this.memberAssigned=[],this.isGroupTest=!1,this.isWaitingForResponse=!1,this.isWaitingForUserList=!0,this.isMultipleSelected=!1,this.isSingleSelected=!0,this.dataMemberAssigned=[],this.dataCFAssigned=[],this.candidateAssignedMember=[],this.isMemberAdmission=!1,this.isContinousFormationManager=!1,this.listContinousManager=[],this.continuousManagerFilter=new E.UntypedFormControl(""),this.isShowFC=!0}ngOnInit(){this.parentData&&this.parentData.data&&this.parentData.data.length>0&&this.parentData.type&&"re-admission"===this.parentData.type&&this.parentData.data.find(l=>l.type_of_formation_id&&"classic"===l.type_of_formation_id.type_of_formation)&&(this.isShowFC=!1),this.initForm(),this.getDataMember(),this.getDataCandidate(),this.hideDataCFFromCandidate(),this.getContinuousFormationManagerList()}getSchoolCampusLevelId(){this.schoolSelected=[],this.campusSelected=[],this.levelSelected=[],this.parentData&&this.parentData.data&&this.parentData.data.length>0&&this.parentData.data.forEach(n=>{n&&n.school&&n.school._id&&this.schoolSelected.push(n.school._id),n&&n.campus&&n.campus._id&&this.campusSelected.push(n.campus._id),n&&n.level&&n.level._id&&this.levelSelected.push(n.level._id)})}initForm(){this.assignMemberForm=this.fb.group({member_id:[""],memberFilterCtrl:[""],continous_formation_manager_id:[""]})}initFilter(){this.filteredMember=this.assignMemberForm.controls.memberFilterCtrl.valueChanges.pipe((0,t.O)(""),(0,M.U)(n=>this.userCorrectorList.filter(l=>!l||l.first_name.toLowerCase().includes(n.toString().toLowerCase()))))}getDataCandidate(){this.candidateAssignedMember=this.parentData.data.filter(n=>n.admission_member_id&&n.admission_member_id._id),this.candidateAssignedMember&&this.candidateAssignedMember.length&&(this.isTitleTrue=!0),this.totalCandidate=this.parentData.data.length,this.parentData.data.length>1?(this.isMultipleSelected=!0,this.isSingleSelected=!1):(this.isMultipleSelected=!1,this.isSingleSelected=!0,this.singleCandidate=this.parentData.data[0])}getDataMember(){this.hideDataMemberFromCandidate(),this.isWaitingForResponse=!0,this.parentData&&this.parentData.type&&"re-admission"===this.parentData.type?(this.getSchoolCampusLevelId(),this.subs.sink=this.candidateService.getAcademicMemberDropdown(this.campusSelected,this.schoolSelected,this.levelSelected).subscribe(n=>{n&&n.length>0?(this.isWaitingForResponse=!1,this.userList=n,this.userCorrectorList=n,this.userCorrectorList=this.userCorrectorList.filter(l=>!this.dataMemberAssigned.includes(l._id)),this.isNoMemberWithSimilarIntakeChannel(),this.initFilter()):(n&&0===n.length||!n)&&(this.isWaitingForResponse=!1,_().fire({type:"info",title:this.translate.instant("ReAdmission_S6.Title"),html:this.translate.instant("ReAdmission_S6.Text"),confirmButtonText:this.translate.instant("ReAdmission_S6.Button")}).then(()=>this.dialogRef.close()))},n=>{this.isWaitingForResponse=!1,this.userList=[],this.userCorrectorList=[],this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?_().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):_().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})):this.subs.sink=this.candidateService.getDevMemberDropdown("","","").subscribe(n=>{n?(this.isWaitingForResponse=!1,this.userList=n,this.userCorrectorList=n,this.userCorrectorList=this.userCorrectorList.filter(l=>!this.dataMemberAssigned.includes(l._id)),this.isNoMemberWithSimilarIntakeChannel(),this.initFilter()):this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.userList=[],this.userCorrectorList=[],this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?_().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):_().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}hideDataMemberFromCandidate(){this.parentData.data&&this.parentData.data.length&&(this.dataMemberAssigned=this.parentData.data.map(n=>n.admission_member_id?n.admission_member_id._id:""))}hideDataCFFromCandidate(){this.parentData.data&&this.parentData.data.length&&(this.dataCFAssigned=this.parentData.data.map(n=>n.continuous_formation_manager_id?n.continuous_formation_manager_id._id:""))}checkFormValidity(){var n=this;return(0,T.Z)(function*(){return!n.assignMemberForm.invalid||(n.isWaitingForResponse=!1,yield _().fire({type:"warning",title:n.translate.instant("FormSave_S1.TITLE"),html:n.translate.instant("FormSave_S1.TEXT"),confirmButtonText:n.translate.instant("FormSave_S1.BUTTON")}),n.assignMemberForm.markAllAsTouched(),!1)})()}submitAssignMember(){if(!(this.isMemberAdmission&&this.memberAssigned.length>0)&&(!this.isContinousFormationManager||!this.selectedContinuousManager)||this.isMemberAdmission&&0===this.memberAssigned.length||this.isContinousFormationManager&&!this.selectedContinuousManager)_().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")});else{let y=[];y=this.parentData.data.map(s=>s._id);let r="";if(this.parentData&&this.parentData.type&&"re-admission"===this.parentData.type)for(const s of this.memberAssigned)r+=(s&&s.member&&s.member.civility&&"neutral"!==s.member.civility?this.translate.instant("USER_TYPES.Academic Member")+": "+this.translate.instant(s.member.civility)+" ":"")+s.member.first_name+" "+s.member.last_name;else for(const s of this.memberAssigned)r+=(s&&s.member&&s.member.civility&&"neutral"!==s.member.civility?this.translate.instant("Member of admission")+": "+this.translate.instant(s.member.civility)+" ":"")+s.member.first_name+" "+s.member.last_name;this.selectedContinuousManager&&(r=this.memberAssigned.length>0&&r?r+" and "+this.translate.instant("Continuous Formation Manager")+": "+("neutral"!==this.selectedContinuousManager.civility?this.translate.instant(this.selectedContinuousManager.civility)+" ":"")+this.selectedContinuousManager.first_name+" "+this.selectedContinuousManager.last_name:this.translate.instant("Continuous Formation Manager")+": "+("neutral"!==this.selectedContinuousManager.civility?this.translate.instant(this.selectedContinuousManager.civility)+" ":"")+this.selectedContinuousManager.first_name+" "+this.selectedContinuousManager.last_name);const u=[],i=[];this.assignMemberForm.get("continous_formation_manager_id").value&&i.push(this.assignMemberForm.get("continous_formation_manager_id").value),this.assignMemberForm.controls.member_id.value&&u.push(this.assignMemberForm.controls.member_id.value),this.isWaitingForResponse=!0;let a=3;_().fire({type:"question",title:this.translate.instant("TRANSFER_S1.Title"),html:this.translate.instant("TRANSFER_S1.Text",{memberName:r}),allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("TRANSFER_S1.Button 1",{timer:a}),cancelButtonText:this.translate.instant("TRANSFER_S1.Button 2"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{_().disableConfirmButton();const s=_().getConfirmButton();this.intVal=setInterval(()=>{a-=1,s.innerText=this.translate.instant("TRANSFER_S1.Button 1")+` (${a})`},1e3),this.timeOutVal=setTimeout(()=>{s.innerText=this.translate.instant("TRANSFER_S1.Button 1"),_().enableConfirmButton(),clearInterval(this.intVal),clearTimeout(this.timeOutVal)},1e3*a)}}).then(s=>{clearTimeout(this.timeOutVal),s.value?this.subs.sink=this.candidateService.ChangeAdmissionMemberToManyCandidateFC(y,u,i).subscribe(o=>{o?(this.isWaitingForResponse=!1,_().fire({type:"success",title:this.translate.instant("CANDIDAT_S6.TITLE"),html:this.translate.instant("CANDIDAT_S6.TEXT",{memberName:r,them:this.translate.instant(this.memberAssigned&&this.memberAssigned.length>1?"thems":"To inform with all the necessary information")}),allowOutsideClick:!1,confirmButtonText:this.translate.instant("CANDIDAT_S6.BUTTON")}).then(()=>{this.dialogRef.close("reset")})):this.isWaitingForResponse=!1},o=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(o),o&&o.message&&o.message.includes("Network error: Http failure response for")?_().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):_().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.isWaitingForResponse=!1})}}selectMember(n){this.memberAssigned=[],this.filterMember(n.value)}filterMember(n){if(n){const l=n,y=Math.ceil(this.totalCandidate/l.length);let r=this.totalCandidate;const u=b.find(this.userCorrectorList,a=>a._id===l);this.memberAssigned.push({member:u,candidate:y<=r?y:r}),r-=y<=r?y:r;const i=this.userList.filter(a=>a._id===l[0]);this.correctorName=i&&i[0]?"neutral"!==i[0].civility?this.translate.instant(i[0].civility)+" "+i[0].first_name+" "+i[0].last_name:i[0].first_name+" "+i[0].last_name:""}}messageAfterSelect(){let n="";return n+=this.translate.instant("Single Candidates Selected",{candidateName:this.correctorName}),n}isNoMemberWithSimilarIntakeChannel(){let n=!1;return this.userCorrectorList.length<1&&(n=!0),n}selectDevMember(n){this.assignMemberForm.controls.member_id.patchValue(n),this.memberAssigned=[],this.filterMember(n)}closeDialog(){this.dialogRef.close()}onSelectContinuousFormationManager(n){n.preventDefault(),this.isContinousFormationManager=!this.isContinousFormationManager,this.selectedContinuousManager=null,this.assignMemberForm.get("continous_formation_manager_id").setValue(""),this.continuousManagerFilter.setValue("")}onSelectMemberAdmission(n){n.preventDefault(),this.isMemberAdmission=!this.isMemberAdmission,this.memberAssigned=[],this.assignMemberForm.get("member_id").setValue(""),this.assignMemberForm.get("memberFilterCtrl").setValue("")}selectOptionContinousFormationManager(n){this.assignMemberForm.get("continous_formation_manager_id").patchValue(n._id),this.selectedContinuousManager=n}getContinuousFormationManagerList(){this.subs.sink=this.candidateService.getUserContinuousFormationManager(["61ceb560688f572138e023b2"]).subscribe(l=>{if(l){const y=b.cloneDeep(l);this.listContinousManager=y.filter(r=>!this.dataCFAssigned.includes(r._id)),this.filteredManager=this.continuousManagerFilter.valueChanges.pipe((0,t.O)(""),(0,M.U)(r=>this.listContinousManager.filter(u=>!u||u.first_name.toLowerCase().includes(r.toString().toLowerCase()))))}},l=>{this.listContinousManager=[],this.authService.postErrorLog(l),l&&l.message&&l.message.includes("Network error: Http failure response for")?_().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):_().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnDestroy(){this.subs.unsubscribe()}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(F.so),e.\u0275\u0275directiveInject(E.UntypedFormBuilder),e.\u0275\u0275directiveInject(D.sK),e.\u0275\u0275directiveInject(V.o),e.\u0275\u0275directiveInject(F.WI),e.\u0275\u0275directiveInject(U.e))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["ms-assign-member-fc-dialog"]],features:[e.\u0275\u0275ProvidersFeature([C.t])],decls:29,vars:17,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-container"],["svgIcon","account-switch"],[1,"header-text"],["mat-icon-button","","type","button",1,"header-icon",3,"click"],[1,"header-form",3,"formGroup"],[2,"color","black"],[1,"content-height"],["class","p-grid",4,"ngIf"],[1,"p-grid"],[4,"ngIf"],["align","right"],["mat-raised-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"p-col-12"],[1,"p-col-12","no-padding-t"],[1,"example-margin",3,"checked","click"],["matInput","","formControlName","memberFilterCtrl",3,"placeholder","matAutocomplete"],[3,"panelWidth"],["autoMember","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["matInput","",3,"placeholder","formControl","matAutocomplete"],["autoContinuousManager","matAutocomplete"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(n,l){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-icon",1),e.\u0275\u0275text(2," account_switch "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h3",2),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return l.closeDialog()}),e.\u0275\u0275elementStart(7,"mat-icon"),e.\u0275\u0275text(8,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(9,"hr"),e.\u0275\u0275elementStart(10,"form",4)(11,"div",5)(12,"mat-dialog-content",6),e.\u0275\u0275template(13,G,6,8,"div",7),e.\u0275\u0275template(14,H,6,6,"div",7),e.\u0275\u0275element(15,"br"),e.\u0275\u0275elementStart(16,"div",8),e.\u0275\u0275template(17,j,6,5,"ng-container",9),e.\u0275\u0275template(18,J,6,5,"ng-container",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,et,7,5,"ng-container",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,it,4,1,"div",7),e.\u0275\u0275elementStart(21,"mat-dialog-actions",10)(22,"button",11),e.\u0275\u0275listener("click",function(){return l.closeDialog()}),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",12),e.\u0275\u0275listener("click",function(){return l.submitAssignMember()}),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(28,nt,2,0,"div",13)),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,11,"Transfer to another Member")," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",l.assignMemberForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",l.isSingleSelected),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.isMultipleSelected),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf","re-admission"!==(null==l.parentData?null:l.parentData.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","re-admission"===(null==l.parentData?null:l.parentData.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.isShowFC),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1===l.assignMemberForm.get("member_id").value.length),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,13,"ASSIGN_CORRECTOR_DIALOG.CANCEL")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,15,"Validate")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.isWaitingForResponse))},dependencies:[x.Zt,x.Bh,A.XC,A.ZL,I.ey,P.lW,k.oG,F.xY,F.H8,W.Hw,R.TO,R.KE,w.Nt,K.Ou,E.\u0275NgNoValidate,E.DefaultValueAccessor,E.NgControlStatus,E.NgControlStatusGroup,E.FormControlDirective,E.FormGroupDirective,E.FormControlName,L.sg,L.O5,D.X$,L.Ov],styles:["[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-bottom:solid 1px black}.header-form[_ngcontent-%COMP%]{padding:18px}.footer-form[_ngcontent-%COMP%]{padding:0 18px 18px}.no-margin[_ngcontent-%COMP%]{margin:0!important}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-b[_ngcontent-%COMP%], .no-padding-t[_ngcontent-%COMP%]{padding-bottom:0!important}.float-left[_ngcontent-%COMP%]{float:left}[_nghost-%COMP%]     .mat-dialog-content{margin:0!important;padding:0!important;max-height:unset}"]}),h})()},17865:(st,B,p)=>{p.d(B,{j:()=>F});var T=p(43489);function F(S,_=null){return function(O){return O.lift(new E(S,_))}}class E{constructor(_,C){this.bufferSize=_,this.startBufferEvery=C,this.subscriberClass=C&&_!==C?d:b}call(_,C){return C.subscribe(new this.subscriberClass(_,this.bufferSize,this.startBufferEvery))}}class b extends T.L{constructor(_,C){super(_),this.bufferSize=C,this.buffer=[]}_next(_){const C=this.buffer;C.push(_),C.length==this.bufferSize&&(this.destination.next(C),this.buffer=[])}_complete(){const _=this.buffer;_.length>0&&this.destination.next(_),super._complete()}}class d extends T.L{constructor(_,C,O){super(_),this.bufferSize=C,this.startBufferEvery=O,this.buffers=[],this.count=0}_next(_){const{bufferSize:C,startBufferEvery:O,buffers:t,count:M}=this;this.count++,M%O==0&&t.push([]);for(let e=t.length;e--;){const D=t[e];D.push(_),D.length===C&&(t.splice(e,1),this.destination.next(D))}}_complete(){const{buffers:_,destination:C}=this;for(;_.length>0;){let O=_.shift();O.length>0&&C.next(O)}super._complete()}}}}]);