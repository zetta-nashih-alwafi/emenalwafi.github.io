"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[1135],{91135:(Y,D,c)=>{c.d(D,{O:()=>wt});var m=c(24006),C=c(65938),v=c(62395),I=c(68745),T=c(35226),i=c.n(T),_=c(17489),R=c(25508),O=c(8929),P=c(61715),y=c(7625),M=c(80013),f=c(34318),t=c(94650),B=c(87746),L=c(58840),U=c(89383),N=c(65884),w=c(84075),E=c(52688),S=c(84130),h=c(610),g=c(12334),b=c(73555),F=c(3238),k=c(4859),W=c(97392),K=c(59549),X=c(284),z=c(51572),Q=c(71948),$=c(84385),J=c(10266),Z=c(24784),V=c(36895),G=c(88796),j=c(30160);const q=["exportSwal"],tt=["errorSwal"];function et(r,d){1&r&&(t.\u0275\u0275elementStart(0,"div",45),t.\u0275\u0275element(1,"mat-progress-spinner",46),t.\u0275\u0275elementEnd())}function nt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"h2",47),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(2,2,"COMPANY.Add Company Staff for")," ",e.companyName,"")}}function it(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"h2",47),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(2,2,"COMPANY.Edit Company Staff for")," ",e.companyName,"")}}function at(r,d){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"Invalid email format")," "))}function ot(r,d){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function st(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-icon",52),t.\u0275\u0275text(1,"check_circle"),t.\u0275\u0275elementEnd())}function rt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-icon",53),t.\u0275\u0275text(1,"cancel"),t.\u0275\u0275elementEnd())}function lt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"span",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Email is available")))}function ct(r,d){1&r&&(t.\u0275\u0275elementStart(0,"span",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Email is not available")))}function dt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"span",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"User found")))}function pt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",48),t.\u0275\u0275template(1,st,2,0,"mat-icon",49),t.\u0275\u0275template(2,rt,2,0,"mat-icon",50),t.\u0275\u0275template(3,lt,3,3,"span",51),t.\u0275\u0275template(4,ct,3,3,"span",51),t.\u0275\u0275template(5,dt,3,3,"span",51),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","yes"===e.emailValidated||"registered"===e.emailValidated),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","no"===e.emailValidated),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","yes"===e.emailValidated),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","no"===e.emailValidated),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","registered"===e.emailValidated)}}function mt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ht(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function gt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function _t(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ut(r,d){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"must contain number only")," "))}function ft(r,d){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"must contain number only")," "))}function Ct(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"span",57),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext().item;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("+",null==e?null:e.dialCode,"")}}function Et(r,d){if(1&r&&(t.\u0275\u0275element(0,"img",55),t.\u0275\u0275template(1,Ct,2,1,"span",56)),2&r){const e=d.item,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("src",n.flagsIconPath+(null==e?null:e.flagIcon)+".svg",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e?null:e.flagIcon)}}function yt(r,d){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"img",59),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementContainerEnd()),2&r){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("src",n.flagsIconPath+(null==e?null:e.flagIcon)+".svg",t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind1(3,3,null==e?null:e.name)," +",null==e?null:e.dialCode," ")}}function Tt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"ng-option",58),t.\u0275\u0275template(1,yt,4,5,"ng-container",10),t.\u0275\u0275elementEnd()),2&r){const e=d.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e?null:e.name)}}function Ot(r,d){1&r&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"must contain number only")," "))}function bt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function vt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-option",58),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("value",e.companies._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.companies.company_name," ")}}function Mt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-option",69),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=d.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("value",null==e?null:e.value)("disabled",n.selectedUsertype.includes(null==e?null:e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"USER_TYPES."+(null==e?null:e.label))," ")}}function xt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function St(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",61)(1,"mat-select",67),t.\u0275\u0275listener("selectionChange",function(a){t.\u0275\u0275restoreView(e);const s=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(s.userTypeValidate(a))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275template(3,Mt,3,5,"mat-option",68),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,xt,3,3,"mat-error",10),t.\u0275\u0275elementEnd()}if(2&r){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(2,5,"Select User Type")," "),t.\u0275\u0275property("disabled",n.disableForm&&"edit"!==n.operation&&!n.isCase3)("disableOptionCentering",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.userTypes),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.get("type").hasError("required")&&(e.get("type").touched||e.get("type").dirty))}}function Pt(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-option",69),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r){const e=d.$implicit,n=t.\u0275\u0275nextContext(4);t.\u0275\u0275property("value",null==e?null:e.value)("disabled",n.selectedUsertype.includes(null==e?null:e.value)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"USER_TYPES."+(null==e?null:e.label))," ")}}function Dt(r,d){1&r&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&r&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function It(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"mat-form-field",61)(1,"mat-select",70),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275template(3,Pt,3,5,"mat-option",68),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,Dt,3,3,"mat-error",10),t.\u0275\u0275elementEnd()),2&r){const e=t.\u0275\u0275nextContext(2).$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(2,4,"Select User Type")," "),t.\u0275\u0275property("disabled",n.disableForm&&"edit"!==n.operation&&!n.isCase3),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.userTypes),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.get("type").hasError("required")&&(e.get("type").touched||e.get("type").dirty))}}function Rt(r,d){if(1&r&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",21)(2,"mat-form-field",61)(3,"mat-select",62),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementStart(5,"mat-option",63),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,bt,3,3,"mat-error",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",21)(10,"mat-form-field",61)(11,"mat-select",64),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275template(13,vt,2,2,"mat-option",65),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(14,"div",21),t.\u0275\u0275template(15,St,5,7,"mat-form-field",66),t.\u0275\u0275template(16,It,5,6,"mat-form-field",66),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&r){const e=t.\u0275\u0275nextContext(),n=e.$implicit,a=e.index,s=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(4,11,"Select Entity")," "),t.\u0275\u0275property("disabled",s.disableForm&&"edit"!==s.operation)("disableOptionCentering",!0),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,13,"COMPANY.COMPANY")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.get("entity_name").hasError("required")&&(n.get("entity_name").touched||n.get("entity_name").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(12,15,"Select Company")," "),t.\u0275\u0275property("disabled",s.disableForm&&"edit"!==s.operation)("disableOptionCentering",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",s.companies),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0===a),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a>=1)}}function Ut(r,d){if(1&r&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275template(1,Rt,17,17,"ng-container",10),t.\u0275\u0275elementEnd()),2&r){const e=d.$implicit;t.\u0275\u0275property("formGroupName",d.index),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","company"===e.get("entity_name").value)}}const At=function(r,d,e){return{nameMentor:r,current:d,NewCompanyName:e}};function Bt(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",71),t.\u0275\u0275element(1,"p",72),t.\u0275\u0275elementStart(2,"div",73)(3,"button",74),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.swalMent4())}),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",75),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.openRevisionMentor())}),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"button",76),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.closeSwal())}),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("translate","NEW_MENT_S4.TEXT")("translateParams",t.\u0275\u0275pureFunction3(12,At,(null==e.dataSwal?null:e.dataSwal.civility)+" "+(null==e.dataSwal?null:e.dataSwal.first_name)+" "+(null==e.dataSwal?null:e.dataSwal.last_name),null==e.dataSwal||null==e.dataSwal.entities[0]||null==e.dataSwal.entities[0].companies[0]?null:e.dataSwal.entities[0].companies[0].company_name,e.companyName)),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",e.secondsToHms(e.time)!==t.\u0275\u0275pipeBind1(4,6,"NEW_MENT_S4.BUTTON1")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.secondsToHms(e.time)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,8,"NEW_MENT_S4.BUTTON2")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,10,"NEW_MENT_S4.BUTTON3")," ")}}function Lt(r,d){if(1&r){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",71),t.\u0275\u0275element(1,"p",77)(2,"p",77),t.\u0275\u0275elementStart(3,"div",73)(4,"button",74),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.registerExistingUser())}),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",75),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.openUpdateUser())}),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"button",76),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.closeSwal())}),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd()()()}if(2&r){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("translate","USER_REGISTERED.TEXT"),t.\u0275\u0275advance(1),t.\u0275\u0275property("translate","USER_REGISTERED.TEXT1"),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",e.secondsToHms(e.time)!==t.\u0275\u0275pipeBind1(5,6,"NEW_MENT_S4.BUTTON1")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",e.secondsToHms(e.time)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,8,"USER_REGISTERED.BUTTON2")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,10,"USER_REGISTERED.BUTTON3")," ")}}const Nt=function(r,d){return{"width-220":r,"width-280":d}};let wt=(()=>{class r{constructor(e,n,a,s,o,l,p,u,x,H,Ft,kt,Wt){this.parentData=e,this.fb=n,this.dialogRef=a,this.userService=s,this.schoolService=o,this.translate=l,this.companyService=p,this.utilService=u,this.CurUserService=x,this.dialog=H,this.permission=Ft,this.router=kt,this.countryService=Wt,this.subs=new I.Y,this.isLoading=!0,this.companySelect=[],this.schools=[],this.userTypes=[],this.isUserAdmtc=!1,this.isUserAcadir=!1,this.isUserAcadAdmin=!1,this.isSubmit=!0,this.disableForm=!0,this.countdownHabis=!1,this.isDisabled=!0,this.isCase3=!1,this.userTypeList=[],this.ispause=new O.xQ,this.time=120,this.isTypeEmail=!1,this.selectedUsertype=[],this.flagsIconPath="../../../../../assets/icons/flags-nationality/",this.countryCodeList=[],this.dialCodeControl=new m.UntypedFormControl(null)}ngOnInit(){if(this.isRegistered=!1,this.selectedEntity="company",this.initUserForm(),this.getUserTypesByEntity(),this.parentData)if(this.parentData?.countryCodeList?.length&&(this.countryCodeList=this.parentData?.countryCodeList),this.currentUser=this.parentData.userData,this.operation=this.parentData.operation,this.companyId=this.parentData.companyId,"edit"===this.operation)this.companyPass=this.parentData.companyData,this.tempEmail=this.companyPass&&this.companyPass.email?this.companyPass.email:"",this.addEntitiesForm();else{this.disableFormField();const a={entity_name:"company",companies:this.companyId};this.entities.get("0").patchValue(a),this.isLoading=!1}this.keyupEmail(),this.getCompanyData(),this.CurUser=this.CurUserService.getLocalStorageUser(),this.entityData=this.CurUser?.entities.find(a=>"Academic Director"===a?.type?.name);const e=this.CurUserService.getPermission(),n=this.CurUser?.entities?.find(a=>a?.type?.name===e[0]);this.currentUserTypeId=n?.type?._id,this.isUserAcadir=!!this.permission.getPermission("Academic Director"),this.isUserAcadAdmin=!!this.permission.getPermission("Academic Admin"),this.isUserAdmtc=this.utilService.isUserEntityADMTC(),this.timer=(0,P.F)(1e3).pipe((0,y.R)(this.ispause)),this.timerObserver={next:a=>{0===this.time&&this.ispause.next(),this.time-=1}}}selectionDialCode(e){this.userForm?.get("phone_number_indicative")?.reset(),this.userForm?.get("phone_number_indicative")?.patchValue(e?.dialCode)}addEntitiesForm(){let e=[];this.companyPass.entities.forEach(n=>{n.companies.forEach(a=>{a._id===this.companyId&&e.push(n)})}),e=_.uniqBy(e,"type._id");for(let n=0;n<e.length;n++)n>0&&this.addEntities();this.getEntitiesData()}getEntitiesData(){this.subs.sink=this.userService.getUserDialogData(this.companyPass._id).subscribe(e=>{this.currentUser=e;const n=_.cloneDeep(e);let a=[];if(n.entities.forEach(o=>{o.companies.forEach(l=>{l._id===this.companyId&&a.push(o)})}),a=_.uniqBy(a,"type._id"),n.entities=a,this.userForm.patchValue(n),n?.phone_number_indicative){const o=this.countryCodeList?.findIndex(l=>l?.dialCode===n?.phone_number_indicative);o>=0&&this.dialCodeControl?.patchValue(this.countryCodeList[o])}const s=a.map(o=>{const l={};return l.entity_name=o.entity_name,o.type&&(l.type=o.type._id),o.group_of_school&&(l.group_of_school=o.group_of_school._id),o.school&&(l.school=o.school._id),o.assigned_rncp_title&&(l.assigned_rncp_title=o.assigned_rncp_title._id),o.class&&(l.class=o.class._id),l.school_type=o.school_type,l});for(let o=0;o<s.length;o++)this.schools.push([]),this.entities.get(o.toString()).patchValue(s[o]),this.entities.get(o.toString()).get("companies").setValue(this.companyId),this.getUserTypes(s[o].entity_name,o.toString());s.length>1&&(this.userTypeList[0]=_.filter(this.userTypes,function(o){return o.value===s[0].type})),this.userTypeList[1]=_.filter(this.userTypes,function(o){return o.value!==s[0].type}),s&&s.length&&s.forEach(o=>{console.log("ini entity",o),this.selectedUsertype.push(o.type)}),this.isLoading=!1},e=>{this.CurUserService.postErrorLog(e),console.log("[Response BE][Error] : ",e),i().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}),this.isLoading=!1})}initUserForm(){this.userForm=this.fb.group({entities:this.fb.array([this.initEntitiesFormGroup()]),civility:[null,m.Validators.required],first_name:[null,[m.Validators.required,f.I8]],last_name:[null,[m.Validators.required,f.I8]],email:[null,[v.dN.email,m.Validators.required,f.I8]],position:[null,[f.I8]],office_phone:["",[m.Validators.maxLength(11),v.dN.number,f.I8]],direct_line:["",[v.dN.number,f.I8]],portable_phone:["",[m.Validators.maxLength(11),v.dN.number,f.I8]],phone_number_indicative:[null]})}initEntitiesFormGroup(){return this.fb.group({entity_name:[this.selectedEntity,m.Validators.required],companies:[this.parentData.companyId],type:[null,m.Validators.required],school_type:[null],assigned_rncp_title:[null],school:[null],class:[null],group_of_school:[null]})}addEntities(){const e=this.userForm.get("entities").get("0").get("type").value;this.userTypeList[1]=_.filter(this.userTypes,function(a){return a.value!==e});const n=_.filter(this.userTypes,function(a){return a.value!==e});this.userTypeList[0]=_.filter(this.userTypes,function(a){return a.value===e}),console.log(n),this.entities.push(this.initEntitiesFormGroup()),this.userForm.get("entities").get("0").get("type").setValue(e),this.userForm.get("entities").get("1").get("type").setValue(n&&n.length?n[0].value:n)}addEntitiesCheck(){this.entities.push(this.initEntitiesFormGroup())}removeEntities(e){let n=3;i().fire({title:this.translate.instant("DASHBOARD_DELETE.deletedTitle"),html:this.translate.instant("this action will delete entity !"),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("THUMBSUP.SWEET_ALERT.CONFIRM",{timer:n}),cancelButtonText:this.translate.instant("DASHBOARD_DELETE.NO"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{i().disableConfirmButton();const a=i().getConfirmButton();this.intVal=setInterval(()=>{n-=1,a.innerText=this.translate.instant("DELETE_ITEM_TEMPLATE.BUTTON_1")+` (${n})`},1e3),clearInterval(this.timeOutVal),this.timeOutVal=setTimeout(()=>{a.innerText=this.translate.instant("DELETE_ITEM_TEMPLATE.BUTTON_1"),i().enableConfirmButton(),clearInterval(this.intVal),clearTimeout(this.timeOutVal)},1e3*n)}}).then(a=>{clearTimeout(this.timeOutVal),a.value&&(this.userTypeList[0]=this.userTypes,this.entities.removeAt(e),i().fire({type:"success",title:this.translate.instant("EVENT_S1.TITLE"),html:this.translate.instant("entity deleted"),confirmButtonText:this.translate.instant("ERROR_HANDLER.OK"),allowOutsideClick:!1}))})}get entities(){return this.userForm.get("entities")}disableFormField(){this.userForm.get("first_name").disable(),this.userForm.get("last_name").disable(),this.userForm.get("position").disable(),this.userForm.get("office_phone").disable(),this.userForm.get("direct_line").disable(),this.userForm.get("portable_phone").disable(),this.userForm.get("phone_number_indicative").disable(),this.dialCodeControl.disable()}enableFormField(){this.userForm.get("first_name").enable(),this.userForm.get("last_name").enable(),this.userForm.get("position").enable(),this.userForm.get("office_phone").enable(),this.userForm.get("direct_line").enable(),this.userForm.get("portable_phone").enable(),this.userForm.get("phone_number_indicative").enable(),this.dialCodeControl.enable()}validateEmail(){this.isLoading=!0;const a=this.userForm.getRawValue().email;this.subs.sink=this.companyService.validateEmailMentor(this.companyId,a).subscribe(s=>{if(s)if(this.isLoading=!1,this.dataSwal=s.mentor,"case 1"===s.message)this.emailValidated="no",this.isUserAcadir||this.isUserAcadAdmin?this.swalMent1():this.isUserAdmtc&&this.swalMent2();else if("case 4"===s.message)this.emailValidated="no",this.swalMent5(s),this.isSubmit=!0;else if("case 2"===s.message)this.emailValidated="no",this.swalMent3(s);else if("case 3"===s.message){this.emailValidated="registered",this.isCase3=!0,this.disableForm=!0,this.isSubmit=!0,this.isDisabled=!0;const o=_.cloneDeep(s&&s.mentor?s.mentor:null),l=_.omitBy(o,_.isNil);l&&(delete l.entities,delete l.email),this.userForm.patchValue(l),this.disableFormField()}else this.emailValidated="yes",i().fire({type:"success",title:"Bravo!",html:this.translate.instant("EMAIL_VALID"),confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3"),allowOutsideClick:!1}),this.tempEmail?(this.userForm.get("email").setValue(a),this.tempEmail=a,this.isSubmit=!0):(this.tempEmail=a,this.isSubmit=!0),this.isDisabled=!0,this.disableForm=!1,this.enableFormField();else this.emailValidated="yes",this.isSubmit=!0,this.isLoading=!1,this.isDisabled=!0,this.disableForm=!1,this.enableFormField()},s=>{this.emailValidated="",this.CurUserService.postErrorLog(s),i().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}),console.log("[Response BE][Error] : ",s)}),this.isTypeEmail=!1}makeUserAsCompanyMemberForCase2(e){if(e){const n=e?.mentor?e.mentor:"",a=n?.entities[0]?.companies[0]?.company_name?n.entities[0].companies[0].company_name:"";i().fire({title:this.translate.instant("NEW_MENT_S5.TITLE",{companyName:a}),html:this.translate.instant("NEW_MENT_S5.TEXT",{userCivility:n&&n.civility?this.translate.instant(n.civility):"",userFirstName:n&&n.first_name?n.first_name:"",userLastName:n&&n.last_name?n.last_name:"",userType:n&&n.entities[0]&&n.entities[0].type.name?this.translate.instant("USER_TYPES."+n.entities[0].type.name):"",companyName:a}),type:"warning",confirmButtonText:this.translate.instant("NEW_MENT_S5.BUTTON1"),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_MENT_S5.BUTTON2"),allowOutsideClick:!1}).then(s=>{s.value&&(this.subs.sink=this.userService.MakeUserAsCompanyMember(e?.mentor?._id,[{entity_name:"company",type:"6278e027b97bfb30674e76af",companies:[this.parentData?.companyId]}]).subscribe(l=>console.log(l)),this.dialogRef.close())})}}validateMentor(){if(this.isLoading=!0,this.checkFormValidity())this.isLoading=!1;else if("edit"!==this.operation){const e=this.userForm.getRawValue(),n=this.companyId,a=e.first_name,s=e.last_name,o=e.email;this.nameMentor=e.civility+" "+a+" "+s,this.subs.sink=this.companyService.validateMentor(n,a,s,o).subscribe(p=>{p&&null!==p.message?(null!==p.mentor&&(this.dataSwal=p.mentor,this.nameMentor=p.mentor.civility+" "+p.mentor.first_name+" "+p.mentor.last_name,this.mentorData=p.mentor),"case 1"===p.message?this.isUserAcadir||this.isUserAcadAdmin?this.swalMent1():this.isUserAdmtc&&this.swalMent2():"case 2"===p.message?this.isUserAdmtc?this.swalMent3(p):(this.isUserAcadir||this.isUserAcadAdmin)&&(this.timer.subscribe(this.timerObserver),this.exportSwal.show()):"case 3"===p.message?this.submitCase3(p):this.submit()):this.submit()},p=>{this.CurUserService.postErrorLog(p),i().fire({type:"info",title:this.translate.instant("SORRY"),text:p&&p.message?this.translate.instant(p.message.replaceAll("GraphQL error: ","")):p,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}else this.submit()}swalMent1(){this.isLoading=!1,i().fire({title:this.translate.instant("NEW_MENT_S1.TITLE"),html:this.translate.instant("NEW_MENT_S1.TEXT",{nameMentor:this.nameMentor}),type:"warning",confirmButtonText:this.translate.instant("NEW_MENT_S1.BUTTON1"),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_MENT_S1.BUTTON2"),allowOutsideClick:!1}).then(e=>{e&&e.value&&this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!0,dataMentor:this.mentorData})})}swalMent2(){this.isLoading=!1;let e=3;i().fire({title:this.translate.instant("NEW_MENT_S2.TITLE"),html:this.translate.instant("NEW_MENT_S2.TEXT"),type:"info",allowOutsideClick:!1,confirmButtonText:this.translate.instant("NEW_MENT_S2.BUTTON",{timer:e}),onOpen:()=>{i().disableConfirmButton();const n=i().getConfirmButton(),a=setInterval(()=>{e-=1,n.innerText=this.translate.instant("NEW_MENT_S2.BUTTON")+" in "+e+" sec"},1e3);setTimeout(()=>{n.innerText=this.translate.instant("NEW_MENT_S2.BUTTON"),i().enableConfirmButton(),clearTimeout(a)},1e3*e)}}).then(n=>{this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})})}swalMent3(e){const n=e&&e.mentor?e.mentor:"",a=n&&n.entities&&n.entities[0]&&n.entities[0].companies&&n.entities[0].companies[0]&&n.entities[0].companies[0].company_name?n.entities[0].companies[0].company_name:"",s=a?this.translate.instant("NEW_MENT_S3.TEXT",{nameMentor:(n&&n.civility?this.translate.instant(n.civility):"")+" "+(n&&n.last_name?n.last_name?.toUpperCase():"")+" "+(n&&n.first_name?n.first_name:""),current:a,NewCompanyName:this.companyName}):this.translate.instant("NEW_MENT_S3B.TEXT",{nameMentor:(n&&n.civility?this.translate.instant(n.civility):"")+" "+(n&&n.last_name?n.last_name?.toUpperCase():"")+" "+(n&&n.first_name?n.first_name:""),NewCompanyName:this.companyName});this.isLoading=!1,i().fire({title:this.translate.instant("NEW_MENT_S3.TITLE"),html:s,type:"question",confirmButtonText:this.translate.instant("NEW_MENT_S3.BUTTON1"),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_MENT_S3.BUTTON2"),allowOutsideClick:!1}).then(o=>{if(o.value){const p=this.userForm.getRawValue().email;this.isLoading=!1,this.subs.sink=this.companyService.getOneMentorId(p).subscribe(u=>{this.subs.sink=this.companyService.connectSchoolToMentorADMTC(u._id,this.companyId).subscribe(x=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})},x=>{this.isLoading=!1,this.CurUserService.postErrorLog(x),i().fire({type:"info",title:this.translate.instant("SORRY"),text:x&&x.message?this.translate.instant(x.message.replaceAll("GraphQL error: ","")):x,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})},u=>{this.isLoading=!1,this.CurUserService.postErrorLog(u),i().fire({type:"info",title:this.translate.instant("SORRY"),text:u&&u.message?this.translate.instant(u.message.replaceAll("GraphQL error: ","")):u,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}})}swalMent4(){i().close();const n=this.userForm.getRawValue().email;this.isLoading=!1,this.subs.sink=this.companyService.getOneMentorId(n).subscribe(a=>{this.subs.sink=this.companyService.connectSchoolToMentor(a._id,this.companyId,this.entityData.school._id).subscribe(s=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})},s=>{this.isLoading=!1,this.CurUserService.postErrorLog(s),i().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})},a=>{this.isLoading=!1,this.CurUserService.postErrorLog(a),i().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}swalMent5(e){this.isSubmit=!0,this.isLoading=!1;const n=e&&e.mentor?e.mentor:"",s=n.entities.filter(l=>l?.companies[0]?.company_name===this.companyName),o=s[0]?.companies[0]?.company_name?s[0]?.companies[0]?.company_name:"";i().fire({title:this.translate.instant("NEW_MENT_S5.TITLE",{companyName:o}),html:this.translate.instant("NEW_MENT_S5.TEXT",{userCivility:n&&n.civility?this.translate.instant(n.civility):"",userFirstName:n&&n.first_name?n.first_name:"",userLastName:n&&n.last_name?n.last_name:"",userType:n&&n.entities[0]&&n.entities[0].type.name?this.translate.instant("USER_TYPES."+n.entities[0].type.name):"",companyName:o}),type:"warning",confirmButtonText:this.translate.instant("NEW_MENT_S5.BUTTON1"),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_MENT_S5.BUTTON2"),allowOutsideClick:!1}).then(l=>{l.value&&this.dialogRef.close()})}swalMent6(){this.isLoading=!1,i().fire({title:this.translate.instant("NEW_MENT_S6.TITLE"),type:"info",confirmButtonText:this.translate.instant("NEW_MENT_S6.BUTTON1"),allowOutsideClick:!1}).then(e=>{this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})})}swalMent7(e){const n=e&&e.mentor?e.mentor:"";this.isLoading=!1,i().fire({title:this.translate.instant("NEW_MENT_S7.TITLE"),html:this.translate.instant("NEW_MENT_S7.TEXT",{nameMentor:(n&&n.civility?n.civility:"")+" "+(n&&n.first_name?n.first_name:"")+" "+(n&&n.last_name?n.last_name:"")}),type:"info",confirmButtonText:this.translate.instant("NEW_MENT_S7.BUTTON1"),allowOutsideClick:!1}).then(a=>{this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})})}getAllMentorFromSchool(){this.subs.sink=this.companyService.populateDataMentor(this.companyId,this.entityData.school._id).subscribe(e=>{e.map(a=>a._id)},e=>{this.CurUserService.postErrorLog(e),i().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}submit(){this.isLoading=!0;let n,e=this.userForm.getRawValue();const a=this.parentData?.logginUserId&&"financement"===this.parentData?.from?this.parentData.logginUserId:null;if("edit"===this.operation){n=this.userForm.getRawValue(),this.currentUser.entities.forEach(o=>{o.companies.forEach(l=>{let p=!1;if(l._id===this.companyId&&(p=!0),!p){const u={};u.entity_name=o.entity_name,o.type&&(u.type=o.type._id),o.group_of_school&&(u.group_of_school=o.group_of_school._id),o.school&&(u.school=o.school._id),o.assigned_rncp_title&&(u.assigned_rncp_title=o.assigned_rncp_title._id),o.class&&(u.class=o.class._id),o.companies&&(console.log("element",l._id),u.companies=[l._id]),u.school_type=o.school_type,n.entities.push(u)}})}),e=n;const s=this.parentData&&this.parentData.companyData?this.parentData.companyData:null;e&&e.entities&&e.entities.length&&s&&e.entities.forEach(o=>{if(o&&"company"===o.entity_name&&o.companies&&"string"==typeof o.companies){const l=[o.companies];s.entities&&s.entities.length&&s.entities.forEach(p=>{p&&"company"===p.entity_name&&p.type&&o.type===p.type._id&&p.companies&&p.companies.length&&p.companies.forEach(u=>{l.includes(u._id)||l.push(u._id)})}),o.companies=l}})}if(e.entities.length>1){const s=_.uniqBy(e.entities,"companies");if(_.uniqBy(e.entities,"type").length<e.entities.length&&s.length!==e.entities.length)this.isLoading=!1,i().fire({type:"info",title:this.translate.instant("DUPLICATE_USER_TYPE.TITLE"),text:this.translate.instant("DUPLICATE_USER_TYPE.TEXT"),confirmButtonText:this.translate.instant("DUPLICATE_USER_TYPE.BUTTON")});else{for(let l=0;l<e.entities.length;l++)e.entities[l].school_type||delete e.entities[l].school_type;this.subs.sink="edit"===this.operation?this.userService.updateUser(this.currentUser._id,e,this.currentUserTypeId).subscribe(l=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})},l=>{this.isLoading=!1,this.CurUserService.postErrorLog(l),"GraphQL error: Selected Class Already Have Academic Director"===l.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):i().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.userService.registerUser(e,a,this.currentUserTypeId).subscribe(l=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_S9.TITLE"),text:this.translate.instant("USER_S9.TEXT",{civility:this.translate.instant(l.civility),lastName:l.first_name,firstName:l.last_name}),confirmButtonText:this.translate.instant("USER_S9.OK")}).then(()=>{this.isRegistered=!0;const p={regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1,mentorResp:l};(this.isUserAcadir||this.isUserAcadAdmin)&&(p.connectToCompany=!0,p.dataMentor=l),console.log("ini data user yang di register",p),this.dialogRef.close(p)})},l=>{this.isLoading=!1,this.CurUserService.postErrorLog(l),"GraphQL error: Selected Class Already Have Academic Director"===l.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):"GraphQL error: Email Exist"===l.message?i().fire({title:this.translate.instant("USER_S16.TITLE"),html:this.translate.instant("USER_S16.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S16.OK")}):"GraphQL error: user was already created but the status is deleted"===l.message?this.registerExistingUser():i().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}else{for(let s=0;s<e.entities.length;s++)e.entities[s].school_type||delete e.entities[s].school_type;this.subs.sink="edit"===this.operation?this.userService.updateUser(this.currentUser._id,e,this.currentUserTypeId).subscribe(s=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})},s=>{this.isLoading=!1,this.CurUserService.postErrorLog(s),"GraphQL error: Selected Class Already Have Academic Director"===s.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):i().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.userService.registerUser(e,a,this.currentUserTypeId).subscribe(s=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_S9.TITLE"),text:this.translate.instant("USER_S9.TEXT",{civility:this.translate.instant(s.civility),lastName:s.first_name,firstName:s.last_name}),confirmButtonText:this.translate.instant("USER_S9.OK")}).then(()=>{this.isRegistered=!0;const o={regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1,mentorResp:s};(this.isUserAcadir||this.isUserAcadAdmin)&&(o.connectToCompany=!0,o.dataMentor=s),this.dialogRef.close(o)})},s=>{this.isLoading=!1,this.CurUserService.postErrorLog(s),console.log("ini err",s),"GraphQL error: Selected Class Already Have Academic Director"===s.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):"GraphQL error: Email Exist"===s.message?i().fire({title:this.translate.instant("USER_S16.TITLE"),html:this.translate.instant("USER_S16.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S16.OK")}):"GraphQL error: user was already created but the status is deleted"===s.message?this.registerExistingUser():i().fire({type:"info",title:this.translate.instant("SORRY"),text:s&&s.message?this.translate.instant(s.message.replaceAll("GraphQL error: ","")):s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}checkFormValidity(){return console.log(this.userForm.value),!!this.userForm.invalid&&(i().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}),this.userForm.markAllAsTouched(),!0)}submitCase3(e){const n=this.userForm.getRawValue();if(e&&e.mentor){const a=_.cloneDeep(e.mentor),s=[];n&&n.entities&&n.entities.length&&n.entities.forEach(l=>{s.push(_.omitBy(l,_.isNil))}),this.subs.sink=this.userService.MakeUserAsCompanyMember(a._id,s).subscribe(l=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}).then(()=>{this.isRegistered=!0;const p={regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1};(this.isUserAcadir||this.isUserAcadAdmin)&&(p.connectToCompany=!0,p.dataMentor=l),this.dialogRef.close(p)})},l=>{this.isLoading=!1,this.CurUserService.postErrorLog(l),i().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}closeDialog(){this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!0})}getUserTypes(e,n){this.selectedEntity=e,"company"===this.selectedEntity&&(this.subs.sink=this.schoolService.getAllSchoolIdAndShortName().subscribe(a=>{const s=a.map(o=>({value:o._id,label:o.short_name}));this.schools=s},a=>{console.log("[Response BE][Error] : ",a),this.CurUserService.postErrorLog(a),i().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}getCompanyData(){this.subs.sink=this.companyService.getOneCompany(this.companyId).subscribe(e=>{this.companies=e,this.companyName=e.company_name?e.company_name:""},e=>{console.log("[Response BE][Error] : ",e),this.CurUserService.postErrorLog(e),i().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getUserTypesByEntity(){this.isLoading=!0,this.subs.sink=this.companyService.getUserTypesByEntity(this.selectedEntity).subscribe(e=>{const a=e.filter(s=>"CEO"!==s.name).map(s=>({value:s?._id,label:s?.name}));this.userTypes=a,this.userForm.get("entities").get("0").get("type").setValue(this.userTypes[0].value),this.userTypeList[0]=a,this.userTypeList[1]=a,this.isLoading=!1},e=>{console.log("[Response BE][Error] : ",e),this.CurUserService.postErrorLog(e),i().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}patchMentorData(e,n){this.subs.sink=this.companyService.getOneMentor(e,n).subscribe(a=>{this.currentUser=a;const s=a.entities.map(o=>{const l={};return l.entity_name=o.entity_name,o.type&&(l.type=o.type._id),l});s.length>1&&this.addEntitiesCheck(),this.userForm.patchValue(a);for(let o=0;o<s.length;o++)this.entities.get(o.toString()).patchValue(s[o]),this.entities.get(o.toString()).get("companies").setValue(this.companyId),this.getUserTypes(s[o].entity_name,o.toString());this.isLoading=!1,this.disableForm=!1,this.enableFormField()},a=>{console.log("[Response BE][Error] : ",a),this.CurUserService.postErrorLog(a),i().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}keyupEmail(){this.subs.sink=this.userForm.get("email").valueChanges.pipe((0,M.b)(200)).subscribe(e=>{this.isTypeEmail=!0,e&&e.length>=3?(this.isDisabled=!1,this.tempEmail&&this.tempEmail===e?(this.isTypeEmail=!1,this.enableFormField(),this.isSubmit=!0,this.disableForm=!1,this.isDisabled=!0):(this.isDisabled=!1,this.disableForm=!0,this.disableFormField())):(this.isDisabled=!0,this.disableForm=!0,this.disableFormField())})}ngOnDestroy(){clearTimeout(this.timeOutVal),this.subs.unsubscribe()}showErrors(){console.log("error",this.userForm.get("office_phone")),console.log("error",this.userForm.get("office_phone").errors)}closeSwal(){i().close(),this.isLoading=!1,this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})}openRevisionMentor(){i().close();const n=this.userForm.getRawValue().email;this.isLoading=!1,this.subs.sink=this.companyService.getOneMentorId(n).subscribe(a=>{this.dialog.open(R.b,{minWidth:"505px",width:"590px",minHeight:"100px",panelClass:"certification-rule-pop-up",disableClose:!0,data:{reqNumber:"_2",companyId:this.companyId,userLogin:this.CurUser._id,dataMentor:a}}).afterClosed().subscribe(s=>{this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})})},a=>{this.CurUserService.postErrorLog(a)})}secondsToHms(e){e=Number(e);const n=Math.floor(e%25%5);let a=n>0?n+"":"5";return a+="s",1===n&&(this.countdownHabis=!0),this.countdownHabis&&(a=this.translate.instant("NEW_MENT_S4.BUTTON1")),a}userTypeValidate(e){this.userTypeList[1]=_.filter(this.userTypes,function(n){return n.value!==e.value})}registerExistingUser(){const e=this.entities.value;let a=!1;if(this.entities.value.forEach(o=>{a=JSON.stringify(e)===JSON.stringify(o)}),a)return void i().fire({type:"warning",title:this.translate.instant("ENTITY_EXIST")});const s=this.userForm.getRawValue();for(let o=0;o<s.entities.length;o++)s.entities[o].school_type||delete s.entities[o].school_type;this.isWaitingForResponse=!0,this.subs.sink=this.userService.registerUserExisting(s,null,this.currentUserTypeId).subscribe(o=>{i().fire({type:"success",title:this.translate.instant("USER_S9.TITLE"),text:this.translate.instant("USER_S9.TEXT",{civility:this.translate.instant(o.civility),lastName:o.first_name,firstName:o.last_name}),confirmButtonText:this.translate.instant("USER_S9.OK")}),this.isWaitingForResponse=!1,this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1,mentorResp:o})},o=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(o),"GraphQL error: Selected Class Already Have Academic Director"===o.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):"GraphQL error: Email Exist"===o.message?i().fire({title:this.translate.instant("USER_S16.TITLE"),html:this.translate.instant("USER_S16.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S16.OK")}):"GraphQL error: user was already created but the status is deleted"===o.message?this.registerExistingUser():i().fire({type:"info",title:this.translate.instant("SORRY"),text:o&&o.message?this.translate.instant(o.message.replaceAll("GraphQL error: ","")):o,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}openUpdateUser(){const n=_.cloneDeep(this.dataUserExisting);n.status="active",delete n._id,delete n.entities,this.isWaitingForResponse=!0,this.subs.sink=this.userService.updateUserExisting(this.dataUserExisting._id,n,this.currentUserTypeId).subscribe(a=>{i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isWaitingForResponse=!1,this.isRegistered=!0;const s={regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1};this.isUserAcadir||this.isUserAcadAdmin?(s.connectToCompany=!0,s.dataMentor=a,this.dialogRef.close(s)):this.subs.sink=this.companyService.connectSchoolToMentorADMTC(a._id,this.companyId).subscribe(o=>{this.isLoading=!1,i().fire({type:"success",title:this.translate.instant("USER_UPDATED.TITLE"),text:this.translate.instant("USER_UPDATED.TEXT"),confirmButtonText:this.translate.instant("USER_UPDATED.OK")}),this.isRegistered=!0,this.dialogRef.close({regitered:this.isRegistered,connectToCompany:!1,dataMentor:null,cancel:!1})},o=>{this.CurUserService.postErrorLog(o)})},a=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(a),"GraphQL error: Selected Class Already Have Academic Director"===a.message?i().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("USER_S15.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):i().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getDataUser(){this.subs.sink=this.userService.getUserDialogData(this.currentUser._id).subscribe(e=>{this.dataUserExisting=e,this.timer.subscribe(this.timerObserver),this.errorSwal.show()},e=>{this.CurUserService.postErrorLog(e),i().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}return r.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(C.WI),t.\u0275\u0275directiveInject(m.UntypedFormBuilder),t.\u0275\u0275directiveInject(C.so),t.\u0275\u0275directiveInject(B.K),t.\u0275\u0275directiveInject(L.E),t.\u0275\u0275directiveInject(U.sK),t.\u0275\u0275directiveInject(N.J),t.\u0275\u0275directiveInject(w.t),t.\u0275\u0275directiveInject(E.e),t.\u0275\u0275directiveInject(C.uw),t.\u0275\u0275directiveInject(S.YI),t.\u0275\u0275directiveInject(h.F0),t.\u0275\u0275directiveInject(g.T))},r.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["ms-add-company-staff-dialog"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(q,7),t.\u0275\u0275viewQuery(tt,7)),2&e){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(n.exportSwal=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(n.errorSwal=a.first)}},decls:100,vars:78,consts:[["class","logo-spinner-wrapper spinner-transparent",4,"ngIf"],["mat-dialog-title","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],["class","dialogTitle",4,"ngIf"],[1,"icon-close"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",3,"formGroup"],[1,"p-grid"],[1,"p-col-3","text-left"],["color","accent",1,"full-wid"],["matInput","","formControlName","email","type","text",3,"placeholder"],[4,"ngIf"],[1,"p-col-3",3,"ngClass"],["mat-raised-button","","color","accent","aria-hidden","true",1,"mt-4",3,"disabled","matTooltip","click"],["svgIcon","check-revise",1,"mat-icon-svgIcon"],[1,"p-col-4"],["class","status-email",4,"ngIf"],[1,"p-grid","black-color"],[1,"p-col-3","pad-top-18"],["formControlName","civility","required","",1,"black-color",3,"disabled"],["value","MR",1,"radio-marging-left"],["value","MRS",1,"radio-marging-left"],[1,"p-col-3"],["matInput","","formControlName","first_name","required","",3,"placeholder"],["matInput","","formControlName","last_name","type","text","required","",3,"placeholder"],["matInput","","formControlName","position","type","text",3,"placeholder"],["matInput","","formControlName","office_phone","type","text","maxlength","10",3,"placeholder","keyup"],["matInput","","formControlName","direct_line","type","text","maxlength","10",3,"placeholder"],[1,"no-padding-y","p-grid",2,"position","relative"],[1,"label-for-phone"],[1,"phone-number","p-col-5"],["bindLabel","name",1,"custom-dropdownpanel-dialcode",3,"formControl","clearable","appendTo","change"],["ng-label-tmp",""],[3,"value",4,"ngFor","ngForOf"],[1,"phone-number","p-col-7"],["matInput","","formControlName","portable_phone","type","text"],["formArrayName","entities",1,"entities-content-container"],["class","p-grid",3,"formGroupName",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"justify-content-center","mt-1rem"],["mat-button","","mat-raised-button","","type","button","color","warn",1,"white-color",3,"click"],["mat-button","","mat-raised-button","","type","submit","color","primary",1,"white-color",3,"click"],["type","question",3,"title","showConfirmButton","allowOutsideClick"],["exportSwal",""],["class","",4,"swalPartial"],["type","warning",3,"title","showConfirmButton","allowOutsideClick"],["errorSwal",""],[1,"logo-spinner-wrapper","spinner-transparent"],["mode","indeterminate","color","accent",1,"spinner-margin"],[1,"dialogTitle"],[1,"status-email"],["class","green-success margin-icon",4,"ngIf"],["class","red-icon margin-icon",4,"ngIf"],["class","status-text",4,"ngIf"],[1,"green-success","margin-icon"],[1,"red-icon","margin-icon"],[1,"status-text"],[1,"flag-icon-trigger",3,"src"],["class","ml-4",4,"ngIf"],[1,"ml-4"],[3,"value"],[1,"flag-icon",3,"src"],[1,"p-grid",3,"formGroupName"],[1,"full-wid"],["formControlName","entity_name","panelClass","filterPanel custom-matselect-dropdown",3,"disabled","disableOptionCentering","placeholder"],["value","company"],["formControlName","companies","panelClass","filterPanel custom-matselect-dropdown",3,"disabled","disableOptionCentering","placeholder"],[3,"value",4,"ngIf"],["class","full-wid",4,"ngIf"],["formControlName","type","panelClass","filterPanel custom-matselect-dropdown",3,"disabled","disableOptionCentering","placeholder","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["formControlName","type",3,"disabled","placeholder"],[1,""],[1,"text",3,"translate","translateParams"],[1,"button-action"],["mat-raised-button","","color","accent",1,"button-swal",3,"disabled","click"],["mat-raised-button","","color","accent",1,"button-swal",3,"click"],["mat-raised-button","","color","warn",1,"button-swal",3,"click"],[1,"text",3,"translate"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,et,2,0,"div",0),t.\u0275\u0275elementStart(1,"div",1)(2,"mat-icon"),t.\u0275\u0275text(3,"person_add "),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,nt,3,4,"h2",2),t.\u0275\u0275template(5,it,3,4,"h2",2),t.\u0275\u0275elementStart(6,"div",3)(7,"button",4),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(8,"mat-icon"),t.\u0275\u0275text(9,"close"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(10,"div",5)(11,"div",6)(12,"div",7)(13,"mat-form-field",8),t.\u0275\u0275element(14,"input",9),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementStart(16,"mat-error"),t.\u0275\u0275template(17,at,3,3,"p",10),t.\u0275\u0275template(18,ot,3,3,"p",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",11)(20,"button",12),t.\u0275\u0275listener("click",function(){return n.validateEmail()}),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275element(22,"mat-icon",13),t.\u0275\u0275text(23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div",14),t.\u0275\u0275template(26,pt,6,5,"div",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(27,"div",16)(28,"div",17)(29,"mat-radio-group",18)(30,"span"),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"mat-radio-button",19),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"mat-radio-button",20),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(39,mt,3,3,"mat-error",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(40,"div",21)(41,"mat-form-field",8),t.\u0275\u0275element(42,"input",22),t.\u0275\u0275pipe(43,"translate"),t.\u0275\u0275template(44,ht,3,3,"mat-error",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(45,"div",21)(46,"mat-form-field",8),t.\u0275\u0275element(47,"input",23),t.\u0275\u0275pipe(48,"translate"),t.\u0275\u0275template(49,gt,3,3,"mat-error",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(50,"div",21)(51,"mat-form-field",8),t.\u0275\u0275element(52,"input",24),t.\u0275\u0275pipe(53,"translate"),t.\u0275\u0275template(54,_t,3,3,"mat-error",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(55,"div",16)(56,"div",21)(57,"mat-form-field",8)(58,"input",25),t.\u0275\u0275listener("keyup",function(){return n.showErrors()}),t.\u0275\u0275pipe(59,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(60,"mat-error"),t.\u0275\u0275template(61,ut,3,3,"p",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(62,"div",21)(63,"mat-form-field",8),t.\u0275\u0275element(64,"input",26),t.\u0275\u0275pipe(65,"translate"),t.\u0275\u0275elementStart(66,"mat-error"),t.\u0275\u0275template(67,ft,3,3,"p",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(68,"div",21)(69,"div",6)(70,"div",27)(71,"mat-label",28),t.\u0275\u0275text(72),t.\u0275\u0275pipe(73,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(74,"div",29)(75,"ng-select",30),t.\u0275\u0275listener("change",function(s){return n.selectionDialCode(s)}),t.\u0275\u0275template(76,Et,2,2,"ng-template",31),t.\u0275\u0275template(77,Tt,2,2,"ng-option",32),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(78,"div",33)(79,"mat-form-field"),t.\u0275\u0275element(80,"input",34),t.\u0275\u0275elementStart(81,"mat-error"),t.\u0275\u0275template(82,Ot,3,3,"p",10),t.\u0275\u0275elementEnd()()()()()()(),t.\u0275\u0275elementStart(83,"div",35),t.\u0275\u0275template(84,Ut,2,2,"div",36),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(85,"div",37)(86,"button",38),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(87),t.\u0275\u0275pipe(88,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(89,"button",39),t.\u0275\u0275listener("click",function(){return n.validateMentor()}),t.\u0275\u0275text(90),t.\u0275\u0275pipe(91,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(92,"swal",40,41),t.\u0275\u0275pipe(94,"translate"),t.\u0275\u0275template(95,Bt,12,16,"div",42),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(96,"swal",43,44),t.\u0275\u0275pipe(98,"translate"),t.\u0275\u0275template(99,Lt,13,12,"div",42),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngIf",n.isLoading),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf","edit"!==n.operation),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","edit"===n.operation),t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",n.userForm),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(15,43,"Mail")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.userForm.get("email").hasError("email")&&(n.userForm.get("email").dirty||n.userForm.get("email").touched)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.userForm.get("email").hasError("required")&&(n.userForm.get("email").dirty||n.userForm.get("email").touched)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(75,Nt,"en"===n.translate.currentLang,"fr"===n.translate.currentLang)),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(21,45,"COMPANY.Check Email Availability")),t.\u0275\u0275property("disabled",n.isDisabled||n.userForm.get("email").invalid),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(24,47,"COMPANY.Check Email Availability")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","no"!==n.emailValidated&&n.userForm.get("email").valid&&!n.isTypeEmail),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",n.disableForm&&"edit"!==n.operation),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(32,49,"Civility")," *"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(35,51,"MR")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(38,53,"MRS")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.userForm.get("civility").hasError("required")&&(n.userForm.get("civility").touched||n.userForm.get("civility").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(43,55,"First Name")),t.\u0275\u0275attribute("disabled",n.disableForm&&"edit"!==n.operation?"":null),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.userForm.get("first_name").hasError("required")&&(n.userForm.get("first_name").touched||n.userForm.get("first_name").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(48,57,"Last Name")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.userForm.get("last_name").hasError("required")&&(n.userForm.get("last_name").touched||n.userForm.get("last_name").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(53,59,"Position")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.userForm.get("position").hasError("required")&&(n.userForm.get("position").touched||n.userForm.get("position").dirty)),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(59,61,"Office Phone")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.userForm.get("office_phone").hasError("number")&&(n.userForm.get("office_phone").touched||n.userForm.get("office_phone").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(65,63,"Direct Line")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.userForm.get("direct_line").hasError("number")&&(n.userForm.get("direct_line").touched||n.userForm.get("direct_line").dirty)),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(73,65,"CARDDETAIL.Phone")),t.\u0275\u0275advance(3),t.\u0275\u0275property("formControl",n.dialCodeControl)("clearable",!1)("appendTo","body"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.countryCodeList),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.userForm.get("portable_phone").hasError("number")&&(n.userForm.get("portable_phone").touched||n.userForm.get("portable_phone").dirty)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.entities.controls),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(88,67,"Cancel")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(91,69,"Submit")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("title",t.\u0275\u0275pipeBind1(94,71,"NEW_MENT_S4.TITLE")),t.\u0275\u0275property("showConfirmButton",!1)("allowOutsideClick",!1),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("title",t.\u0275\u0275pipeBind1(98,73,"USER_REGISTERED.TITLE")),t.\u0275\u0275property("showConfirmButton",!1)("allowOutsideClick",!1))},dependencies:[b.Zt,b.Bh,F.ey,k.lW,C.uh,C.xY,C.H8,W.Hw,K.TO,K.KE,K.hX,X.Nt,z.Ou,Q.VQ,Q.U0,$.gD,J.gM,U.Pi,m.DefaultValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.RequiredValidator,m.MaxLengthValidator,m.FormControlDirective,m.FormGroupDirective,m.FormControlName,m.FormGroupName,m.FormArrayName,Z.oO,V.mk,V.sg,V.O5,G.w9,G.jq,G.mR,j.q1,j.sC,U.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.h1[_ngcontent-%COMP%]{color:#000}.plus_button[_ngcontent-%COMP%]{margin-top:15px;margin-right:5px;height:250%;width:35px}.negativ_button[_ngcontent-%COMP%]{margin-top:15px;margin-left:5px;height:25%;width:35px}.status-email[_ngcontent-%COMP%]{margin-top:5px}.green-success[_ngcontent-%COMP%]{color:#45b745;font-size:25px;width:30px}.width-220[_ngcontent-%COMP%]{width:220px!important}.width-280[_ngcontent-%COMP%]{width:280px!important}.status-text[_ngcontent-%COMP%]{display:inline-block;position:relative;top:-7px}.hide-field[_ngcontent-%COMP%]{display:none}.mat-icon[_ngcontent-%COMP%]{height:32px;width:32px}.align-sub[_ngcontent-%COMP%]{vertical-align:sub}.black-color[_ngcontent-%COMP%]{color:#000}.white-color[_ngcontent-%COMP%]{color:#fff}.radio-marging-left[_ngcontent-%COMP%]{margin-left:2em}.entities-content-container[_ngcontent-%COMP%]{overflow:scroll;max-height:275px}.icon-size[_ngcontent-%COMP%]{width:35px;height:35px}.dialogTitle[_ngcontent-%COMP%]{top:-4px;position:relative;margin-bottom:0;display:inline-block;width:90%!important;vertical-align:middle}.dialogTitleWrapper[_ngcontent-%COMP%]{vertical-align:middle;color:#000;border-bottom:2px solid #808080;margin-bottom:20px}.dialogTitleWrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem;display:inline-block;vertical-align:middle;height:100%}.margin-icon[_ngcontent-%COMP%]{margin-right:.5rem}.accent[_ngcontent-%COMP%]{color:#000}.p-col-5[_ngcontent-%COMP%], .p-col-7[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]     .ng-value-label.ng-star-inserted{background:grey;color:#fff;white-space:nowrap}[_nghost-%COMP%]     .mat-dialog-content{overflow:hidden}[_nghost-%COMP%]     .ng-value-icon.left.ng-star-inserted{background:grey;color:#fff;white-space:nowrap}.basic-height[_ngcontent-%COMP%]{height:255px}[_nghost-%COMP%]     .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]     .mat-form-field-underline{background-color:#0000001f!important}.logo-spinner-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.spinner-margin[_ngcontent-%COMP%]{margin:0 auto}.pad-top-18[_ngcontent-%COMP%]{padding-top:18px}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.spinner-transparent[_ngcontent-%COMP%]{position:absolute;z-index:999;height:405px;width:955px}.icon-close[_ngcontent-%COMP%]{display:inline-block;float:right;position:relative}.button-swal[_ngcontent-%COMP%]{line-height:44px;height:38px!important;padding-left:20px;padding-right:20px}.button-action[_ngcontent-%COMP%]{margin-top:20px}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}  .filterPanel{margin-top:25px!important}.flag-icon[_ngcontent-%COMP%]{vertical-align:text-top;margin-right:12px;height:14px;width:20px;display:inline-block}.flag-icon-trigger[_ngcontent-%COMP%]{vertical-align:text-top;margin-right:2px;height:16px;width:16px;display:inline-block}.border-button[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}.phone-number.p-col-5[_ngcontent-%COMP%], .phone-number.p-col-7[_ngcontent-%COMP%]{padding:0!important;margin:0!important}.phone-number.p-col-5[_ngcontent-%COMP%]{padding-right:0!important}.phone-number.p-col-7[_ngcontent-%COMP%]{padding-left:12px!important}[_nghost-%COMP%]  .phone-number .mat-select-value-text{margin-left:0!important}.label-for-phone[_ngcontent-%COMP%]{position:absolute;font-size:13px;color:#000;font-weight:700;bottom:42px}.ml-4[_ngcontent-%COMP%]{margin-left:4px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid rgba(172,172,172,.4)!important;box-shadow:unset;min-height:36px;align-items:center}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-placeholder{color:#f44336!important}[_nghost-%COMP%]  .ng-select{margin-bottom:16px;padding-top:3px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;padding-left:0!important;width:100%}[_nghost-%COMP%]  .ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{padding-left:0!important;margin-top:6px!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container{padding-left:0!important;margin-top:8px!important}[_nghost-%COMP%]  .ng-select.ng-select-single .ng-select-container .ng-value-container, .ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-value[_ngcontent-%COMP%]{font-size:14px!important}[_nghost-%COMP%]  .ng-select .ng-dropdown-panel{text-align:left!important;font-size:15px!important}[_nghost-%COMP%]  .ng-select.ng-select-single .ng-select-container .ng-value-container .ng-placeholder{font-size:16px}  .ng-dropdown-panel.custom-dropdownpanel-dialcode{width:-moz-fit-content!important;width:fit-content!important}"]}),r})()},25508:(Y,D,c)=>{c.d(D,{b:()=>w});var m=c(65938),C=c(24006),v=c(68745),I=c(35226),T=c.n(I),i=c(94650),_=c(89383),A=c(65884),R=c(52688),O=c(36895),P=c(73555),y=c(4859),M=c(97392),f=c(59549),t=c(284),B=c(51572);function L(E,S){1&E&&(i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275element(1,"mat-progress-spinner",3),i.\u0275\u0275elementEnd())}function U(E,S){1&E&&(i.\u0275\u0275elementStart(0,"span",22),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&E&&(i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"This field is required")))}function N(E,S){if(1&E){const h=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",6)(5,"div",8),i.\u0275\u0275element(6,"mat-icon",9),i.\u0275\u0275elementStart(7,"h2",10),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"translate"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(10,"div",11)(11,"button",12),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(h);const b=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(b.onClose())}),i.\u0275\u0275elementStart(12,"mat-icon"),i.\u0275\u0275text(13,"close"),i.\u0275\u0275elementEnd()()()()()()(),i.\u0275\u0275elementStart(14,"div",13)(15,"div",14)(16,"p",15),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"mat-form-field")(20,"div",16),i.\u0275\u0275element(21,"textarea",17),i.\u0275\u0275pipe(22,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(23,U,3,3,"span",18),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(24,"div",6)(25,"div",19)(26,"button",20),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(h);const b=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(b.submitData())}),i.\u0275\u0275text(27),i.\u0275\u0275pipe(28,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(29,"button",21),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(h);const b=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(b.onClose())}),i.\u0275\u0275text(30),i.\u0275\u0275pipe(31,"translate"),i.\u0275\u0275elementEnd()()()()}if(2&E){const h=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",h.askReviewForm),i.\u0275\u0275advance(8),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(9,8,"COMPANY.REQUEST"+h.whoIsIt)," "),i.\u0275\u0275advance(9),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(18,10,"COMPANY.REQUEST_INFO"+h.whoIsIt)),i.\u0275\u0275advance(4),i.\u0275\u0275propertyInterpolate("placeholder",i.\u0275\u0275pipeBind1(22,12,"COMPANY.REQ_DESCRIPTION")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",h.askReviewForm.get("description").hasError("required")&&(h.askReviewForm.get("description").dirty||h.askReviewForm.get("description").touched)),i.\u0275\u0275advance(3),i.\u0275\u0275property("disabled",!h.askReviewForm.valid||h.isWaitingForResponse),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(28,14,"COMPANY.SUBMIT")," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(31,16,"COMPANY.CANCEL"))}}let w=(()=>{class E{constructor(h,g,b,F,k,W){this.matDialogRef=h,this.fb=g,this.data=b,this.translate=F,this.companyService=k,this.authService=W,this.subs=new v.Y,this.isWaitingForResponse=!1}ngOnInit(){this.initForm(),this.whoIsIt=this.data.reqNumber,this.companyId=this.data.companyId,this.userId=this.data.userLogin,this.currentLang=this.translate.currentLang.toLowerCase()}initForm(){this.askReviewForm=this.fb.group({description:[null,C.Validators.required]})}submitData(){this.isWaitingForResponse=!0,"_1"===this.whoIsIt?this.revisionCompany():"_2"===this.whoIsIt&&(this.dataMentor=this.data.dataMentor,this.revisionMentor())}revisionCompany(){const h=this.askReviewForm.get("description").value;this.subs.sink=this.companyService.sendRevisionCompany(this.companyId,this.userId,h,this.currentLang).subscribe(g=>{this.isWaitingForResponse=!1,T().fire({type:"success",title:"Bravo!",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}),this.matDialogRef.close()},g=>{this.isWaitingForResponse=!1,console.log("[Response BE][Error] : ",g),this.authService.postErrorLog(g),T().fire({type:"info",title:this.translate.instant("SORRY"),text:g&&g.message?this.translate.instant(g.message.replaceAll("GraphQL error: ","")):g,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.matDialogRef.close()})})}revisionMentor(){const h=this.askReviewForm.get("description").value;this.subs.sink=this.companyService.sendRevisionMentor(this.dataMentor._id,this.companyId,this.userId,h,this.currentLang).subscribe(g=>{this.isWaitingForResponse=!1,T().fire({type:"success",title:"Bravo!",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}),this.matDialogRef.close()},g=>{this.isWaitingForResponse=!1,console.log("[Response BE][Error] : ",g),this.authService.postErrorLog(g),T().fire({type:"info",title:this.translate.instant("SORRY"),text:g&&g.message?this.translate.instant(g.message.replaceAll("GraphQL error: ","")):g,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.matDialogRef.close()})})}onClose(){this.matDialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return E.\u0275fac=function(h){return new(h||E)(i.\u0275\u0275directiveInject(m.so),i.\u0275\u0275directiveInject(C.UntypedFormBuilder),i.\u0275\u0275directiveInject(m.WI),i.\u0275\u0275directiveInject(_.sK),i.\u0275\u0275directiveInject(A.J),i.\u0275\u0275directiveInject(R.e))},E.\u0275cmp=i.\u0275\u0275defineComponent({type:E,selectors:[["ms-ask-revision-dialog"]],decls:2,vars:2,consts:[["class","loading-indicator",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[3,"formGroup"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"p-grid"],[1,"p-col-12","adjust-dialog-header"],[1,"p-col-10","adjust-dialog-title"],["svgIcon","check-revise",1,"mat-icon-svgIcon","dialog-icon"],[1,"dialog-title-text"],[1,"p-col-2","no-padding-bottom"],["mat-icon-button","","tabindex","-1",1,"close-icon",3,"click"],[1,"p-grid","p-justify-center"],[1,"p-col-11","specialeTextArea"],[1,"request_description"],[1,"text-area-border"],["matInput","","required","","formControlName","description","cols","50","rows","4","tabindex","-1",1,"black-color",3,"placeholder"],["style","color: #dc3545",4,"ngIf"],[1,"p-col-12"],["mat-raised-button","","color","primary",1,"btn-standard","float-right",3,"disabled","click"],["mat-raised-button","","color","red",1,"btn-standard","float-right",3,"click"],[2,"color","#dc3545"]],template:function(h,g){1&h&&(i.\u0275\u0275template(0,L,2,0,"div",0),i.\u0275\u0275template(1,N,32,18,"div",1)),2&h&&(i.\u0275\u0275property("ngIf",g.isWaitingForResponse),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!g.isWaitingForResponse))},dependencies:[O.O5,P.Zt,P.Bh,y.lW,M.Hw,f.KE,t.Nt,B.Ou,C.DefaultValueAccessor,C.NgControlStatus,C.NgControlStatusGroup,C.RequiredValidator,C.FormGroupDirective,C.FormControlName,_.X$],styles:['.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.adjust-dialog-header[_ngcontent-%COMP%]{padding-left:23px;padding-bottom:0}.adjust-dialog-title[_ngcontent-%COMP%]{padding-bottom:0;display:flex}.dialog-icon[_ngcontent-%COMP%]{float:left;margin-top:17px!important;color:#000}.icon-size[_ngcontent-%COMP%]{width:24px;height:24px}.dialog-title-text[_ngcontent-%COMP%]{color:#000;padding-left:10px;padding-top:10px;float:left}.no-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0}.close-icon[_ngcontent-%COMP%]{float:right;color:#000}.btn-standard[_ngcontent-%COMP%]{font-size:12px;line-height:30px;border-radius:2px}.request_description[_ngcontent-%COMP%]{font-weight:700;color:#000;margin-bottom:6px;margin-top:10px;font-size:13.5px}.specialeTextArea[_ngcontent-%COMP%]{padding-top:15px}.text-area-border[_ngcontent-%COMP%]{border:2px solid #484848;padding:5px}.black-color[_ngcontent-%COMP%]{color:#000}.float-right[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-underline{height:0px}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{padding-top:5px;padding-left:5px}[_nghost-%COMP%]     .mat-form-field-infix{padding-top:5px;padding-bottom:0;border-top:0px}[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0px}.loading-indicator[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0000004d}.logo-spinner-wrapper[_ngcontent-%COMP%]{padding-top:25px;height:150px;background-color:#6f6f6f21}.spinner-margin[_ngcontent-%COMP%]{margin:0 auto}']}),E})()},12334:(Y,D,c)=>{c.d(D,{T:()=>R});var m=c(24850),C=c(591),v=c(13125),I=c(68745),T=c(94650),i=c(18497),_=c(84075),A=c(89383);let R=(()=>{class O{constructor(y,M,f){this.apollo=y,this.utilService=M,this.translate=f,this.subs=new I.Y,this.isAllCountryAlreadyPopulated=new C.X(!1),this.isAllCountryAlreadyPopulated$=this.isAllCountryAlreadyPopulated.asObservable()}getAllCountriesNationality(){let y=[];return this.isAllCountryAlreadyPopulated.next(!1),this.subs.sink=this.getAllCountries().subscribe(M=>{M?.length&&(M?.map(f=>{y.push({name:f?.country_id?.country,flagIcon:f?.nationality_id?.nationality_en,dialCode:f?.country_id?.phone_number_indicative})}),y.sort((f,t)=>this.utilService.simplifyRegex(this.translate.instant(f?.name))<this.utilService.simplifyRegex(this.translate.instant(t?.name))?-1:this.utilService.simplifyRegex(this.translate.instant(f?.name))>this.utilService.simplifyRegex(this.translate.instant(t?.name))?1:0),this.isAllCountryAlreadyPopulated.next(!0))}),y}getAllCountries(){return this.apollo.query({query:v.ZP`
          query GetAllVisaPermits {
            GetAllVisaPermits {
              country_id {
                country
                phone_number_indicative
              }
              nationality_id {
                nationality_en
              }
            }
          }
        `,fetchPolicy:"network-only"}).pipe((0,m.U)(y=>y.data.GetAllVisaPermits))}ngOnDestroy(){this.subs.unsubscribe()}}return O.\u0275fac=function(y){return new(y||O)(T.\u0275\u0275inject(i._M),T.\u0275\u0275inject(_.t),T.\u0275\u0275inject(A.sK))},O.\u0275prov=T.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()}}]);