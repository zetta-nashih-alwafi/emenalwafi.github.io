"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[8770],{58770:(Ie,H,s)=>{s.r(H),s.d(H,{HomepageComponent:()=>Ee});var x=s(73555),p=s(36895),t=s(94650),_=s(24006),M=s(4859),W=s(3238),S=s(59549),f=s(97392),Y=s(284),L=s(51572),V=s(84385),A=s(23267),C=s(10266),m=s(89383),U=s(67154),O=s(52688),G=s(96334),Q=s(87746),E=s(84075),u=s(15439),$=s(8929),F=s(591),z=s(23426),K=s(68896),X=s(36787),J=s(61715),Z=s(80013),b=s(1059),q=s(92198),v=s(22868),tt=s(87545),y=s(24850),g=s(7625),et=s(72986),nt=s(43489);class at{constructor(o){this.predicate=o}call(o,e){return e.subscribe(new ot(o,this.predicate))}}class ot extends nt.L{constructor(o,e){super(o),this.predicate=e,this.skipping=!0,this.index=0}_next(o){const e=this.destination;this.skipping&&this.tryCallPredicate(o),this.skipping||e.next(o)}tryCallPredicate(o){try{const e=this.predicate(o,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var N=s(23514),P=s(610);function lt(n,o){if(1&n&&t.\u0275\u0275element(0,"mat-icon",9),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("svgIcon",e.widget.icon)}}function rt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"mat-icon"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.widget.icon)}}function st(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.toggleSize())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"fullscreen_exit"),t.\u0275\u0275elementEnd()()}2&n&&t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(1,1,"ERP_072.Half Size"))}function dt(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",10),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.toggleSize())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"fullscreen"),t.\u0275\u0275elementEnd()()}2&n&&t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(1,1,"ERP_072.Full Size"))}const pt=["*"];let ct=(()=>{class n{constructor(){this._homepageService=(0,t.inject)(N.g),this._router=(0,t.inject)(P.F0),this._route=(0,t.inject)(P.gz)}get widgetLocalizationKey(){return`WIDGET_NAME.${this.widget.widget_name}`}ngOnInit(){}toggleSize(){this.widget.size="full"===this.widget.size?"half":"full",this._homepageService.triggerWidgetUpdateManually()}viewMoreResult(){"email"===this.widget.widget_name?this._router.navigate(["/mailbox/inbox"]):"pending_task"===this.widget.widget_name||"overdue_task"===this.widget.widget_name?this._router.navigate(["/task"],{relativeTo:this._route}):"news"===this.widget.widget_name&&this._router.navigate(["/news/all-news"],{relativeTo:this._route})}remove(){this._homepageService.removeWidget(this.widget.widget_name),this._homepageService.triggerWidgetUpdateManually()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-base-homepage-widget"]],inputs:{widget:"widget"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],ngContentSelectors:pt,decls:18,vars:13,consts:[[1,"tw-flex","tw-items-center","tw-gap-2"],[3,"svgIcon",4,"ngIf"],[4,"ngIf"],[1,"tw-flex-1","tw-font-bold"],[1,"action-buttons","tw-flex","tw-items-center","tw-gap-2","tw-opacity-0","tw-transition-opacity"],[1,"hover:tw-opacity-75","tw-transition-opacity","tw-cursor-pointer",3,"click"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltipPosition","above",3,"matTooltip","click"],[1,"tw-mt-4","tw-flex-1","tw-overflow-x-auto"],[3,"svgIcon"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.\u0275\u0275projectionDef(),t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,lt,1,1,"mat-icon",1),t.\u0275\u0275template(2,rt,2,1,"mat-icon",2),t.\u0275\u0275elementStart(3,"span",3),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"span",4)(7,"span",5),t.\u0275\u0275listener("click",function(){return i.viewMoreResult()}),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,st,4,3,"button",6),t.\u0275\u0275template(11,dt,4,3,"button",6),t.\u0275\u0275elementStart(12,"button",7),t.\u0275\u0275listener("click",function(){return i.remove()}),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementStart(14,"mat-icon"),t.\u0275\u0275text(15,"close"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(16,"div",8),t.\u0275\u0275projection(17),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"===i.widget.iconType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","mat"===i.widget.iconType),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,7,"WIDGET_NAME."+i.widget.widget_name)," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,9,"View More")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","full"===i.widget.size),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","half"===i.widget.size),t.\u0275\u0275advance(1),t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(13,11,"Remove")))},dependencies:[p.ez,p.O5,M.ot,M.lW,f.Ps,f.Hw,C.AV,C.gM,m.aw,m.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]:hover   .action-buttons[_ngcontent-%COMP%]{opacity:1}.view-more[_ngcontent-%COMP%]{font-size:14px;opacity:.75;cursor:pointer;position:relative;top:3px;right:10px}"]}),n})();var k=s(93730),T=s(68745),I=s(17489),mt=s(35226),h=s.n(mt),ut=s(91013),D=s(44850);function _t(n,o){1&n&&t.\u0275\u0275element(0,"mat-divider",14)}function gt(n,o){1&n&&(t.\u0275\u0275elementStart(0,"mat-icon",15),t.\u0275\u0275text(1,"star_outline"),t.\u0275\u0275elementEnd())}function ft(n,o){1&n&&(t.\u0275\u0275elementStart(0,"mat-icon",15),t.\u0275\u0275text(1,"star"),t.\u0275\u0275elementEnd())}function ht(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",3)(1,"li",4),t.\u0275\u0275template(2,_t,1,0,"mat-divider",5),t.\u0275\u0275elementStart(3,"div",6)(4,"div",7),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e),l=a.index,r=a.$implicit,d=t.\u0275\u0275nextContext(2);return d.clickedIndex=l,t.\u0275\u0275resetView(d.emailDetails(r))}),t.\u0275\u0275elementStart(5,"span",8),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",9)(8,"span",10),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"span",11)(11,"button",12),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.setAsImportant(l))}),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275template(13,gt,2,0,"mat-icon",13),t.\u0275\u0275template(14,ft,2,0,"mat-icon",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",12),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onDeleteMail(l))}),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementStart(17,"mat-icon"),t.\u0275\u0275text(18,"delete"),t.\u0275\u0275elementEnd()()()()()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.\u0275\u0275nextContext(2);let l,r;t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i>=1),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.subject," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.getTranslatedDate(null==e?null:e.created_at)),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(12,7,"Set As Important")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(null!=(l=a.getRecipientStatus(i))&&l.is_starred)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==(r=a.getRecipientStatus(i))?null:r.is_starred),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(16,9,"Delete"))}}function xt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,ht,19,11,"ul",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.recentMails)}}function Ct(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",16)(1,"mat-icon",17),t.\u0275\u0275text(2,"error_outline"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"h4",18),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,1,"ERP_072.NO_RECENT_MAIL")," "))}let vt=(()=>{class n{constructor(e,i,a,l){this.mailboxService=e,this.translate=i,this.userService=a,this.router=l,this.recentMails=[],this.subs=new T.Y,this.currentUser=JSON.parse(localStorage.getItem("userProfile")),this.filteredValues={date:"",from:"",to:"",subject:""},this.isWaitingForResponse=!1,this.is_starred=!1}ngOnInit(){this.getRecentMails()}getRecentMails(){const r=this.cleanFilterData();this.subs.sink=this.mailboxService.getMainMail({page:0,limit:5},{latest_email:"asc"},"inbox",!0,r,null,this.currentUser._id).subscribe(d=>{Array.isArray(d)&&d[0]&&(this.dataLength=d[0].count_document,this.recentMails=(0,I.cloneDeep)(d).map(c=>(c.message=c.message?c.message.replace(/\&nbsp;/g," "):null,c.is_read=c.recipient_properties.some(R=>"a"===R.rank&&R.is_read),c)))})}cleanFilterData(){const e=(0,I.cloneDeep)(this.filteredValues);let i="";return Object.keys(e).forEach(a=>{e[a]&&(i+=` ${a}:"${e[a]}"`)}),i}getTranslatedDate(e){return e?(this.datePipe=new p.uU(this.translate.currentLang),this.datePipe&&this.datePipe.locale?this.datePipe.transform(e,"MMM dd"):""):""}emailDetails(e){const i=e._id,l=this.recentMails.findIndex(d=>d._id===e._id),r={...e,recipient_properties:e.recipient_properties.map(d=>"a"===d.rank?{...d,is_read:!0}:d)};this.isWaitingForResponse=!0,this.recentMails[l]=r,this.subs.sink=this.mailboxService.updateMultipleMailRecipient([i],{is_read:!0}).subscribe(d=>{d&&this.router.navigate(["/mailbox/inbox"],{queryParams:{selectedEmailId:e._id}}),this.isWaitingForResponse=!1})}mailMoveTo(e,i){const l=e?._id;this.subs.sink=this.mailboxService.updateMultipleMailRecipient(l,{mail_type:i}).subscribe(()=>{},r=>{this.userService.postErrorLog(r),r&&r.message&&(r.message.includes("jwt expired")||r.message.includes("str & salt required")||r.message.includes("Authorization header is missing")||r.message.includes("salt"))?this.userService.handlerSessionExpired():h().fire({type:"info",title:this.translate.instant("SORRY"),text:r&&r.message?this.translate.instant(r.message.replaceAll("GraphQL error: ","")):r,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getRecipientStatus(e){return this.recentMails[e].recipient_properties.find(i=>"a"===i.rank)}setAsImportant(e){"important"===e?.recipient_properties[0]?.mail_type?this.mailMoveTo(e,"inbox"):"inbox"===e?.recipient_properties[0]?.mail_type&&this.mailMoveTo(e,"important")}onDeleteMail(e){const i={mail_type:"trash"};let r=3;h().fire({title:this.translate.instant("MailBox.MESSAGES.ATTENTION"),text:this.translate.instant("MailBox.MESSAGES.ASKMSG"),type:"warning",showCancelButton:!0,allowEscapeKey:!0,confirmButtonText:this.translate.instant("SWEET_ALERT.DELETE.CONFIRM",{timer:r}),cancelButtonText:this.translate.instant("SWEET_ALERT.DELETE.CANCEL"),onOpen:()=>{h().disableConfirmButton();const d=h().getConfirmButton(),c=setInterval(()=>{r-=1,d.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM")+" in "+r+" sec"},1e3);this.timeOutVal=setTimeout(()=>{d.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM"),h().enableConfirmButton(),clearInterval(c),clearTimeout(this.timeOutVal)},1e3*r)}}).then(d=>{clearTimeout(this.timeOutVal),d.value&&(this.subs.sink=this.mailboxService.updateMultipleMailRecipient(e._id,i).subscribe(c=>{h().fire({type:"info",title:this.translate.instant("MailBox.MESSAGES.DELMSG"),text:"",confirmButtonText:this.translate.instant("MailBox.MESSAGES.THANK")}),c&&this.getRecentMails()},c=>{this.userService.postErrorLog(c),h().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))})}ngOnDestroy(){clearTimeout(this.timeOutVal),this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ut.e),t.\u0275\u0275directiveInject(m.sK),t.\u0275\u0275directiveInject(O.e),t.\u0275\u0275directiveInject(P.F0))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-mailbox-homepage-widget"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:2,vars:2,consts:[[4,"ngIf"],["class","tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-full tw-opacity-75",4,"ngIf"],["class","mail-list p-grid",4,"ngFor","ngForOf"],[1,"mail-list","p-grid"],[1,"p-col-12"],["style","padding-bottom: 20px",4,"ngIf"],[1,"mail-container"],[1,"left-container",3,"click"],[1,"mail-subject"],[1,"right-container","text-right"],[1,"mail-date","color-warn"],[1,"mail-actions","background-color-second"],["mat-icon-button","",3,"matTooltip","click"],["class","fade-in",4,"ngIf"],[2,"padding-bottom","20px"],[1,"fade-in"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-h-full","tw-opacity-75"],[1,"!tw-text-[48px]","!tw-h-[48px]","!tw-w-[48px]","!tw-max-w-[48px]","!tw-max-h-[48px]"],[1,"tw-mt-4"]],template:function(e,i){1&e&&(t.\u0275\u0275template(0,xt,2,1,"div",0),t.\u0275\u0275template(1,Ct,6,3,"div",1)),2&e&&(t.\u0275\u0275property("ngIf",null==i.recentMails?null:i.recentMails.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=i.recentMails&&i.recentMails.length)))},dependencies:[p.ez,p.sg,p.O5,k.m,M.lW,D.d,f.Hw,C.gM,m.X$],styles:[".mailbox-container[_ngcontent-%COMP%]{width:100%}.mailbox-container.half[_ngcontent-%COMP%]{width:50%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;gap:.5rem}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.header[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]{font-size:12px;opacity:.75;cursor:pointer}.header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex}.no-data-wrapper[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{padding-left:10px}.text-right[_ngcontent-%COMP%]{text-align:right}ul.mail-list[_ngcontent-%COMP%]{list-style:none;padding-left:0;font-size:16px;cursor:pointer}ul.mail-list[_ngcontent-%COMP%]   .mail-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ul.mail-list[_ngcontent-%COMP%]   .mail-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{width:80%}ul.mail-list[_ngcontent-%COMP%]   .mail-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{width:20%;display:flex;align-items:flex-end;flex-direction:column;font-size:.85rem}ul.mail-list[_ngcontent-%COMP%]   .mail-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .mail-date[_ngcontent-%COMP%]{flex-shrink:0;margin-right:10px;display:block}ul.mail-list[_ngcontent-%COMP%]   .mail-subject[_ngcontent-%COMP%], ul.mail-list[_ngcontent-%COMP%]   .mail-sender[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-weight:700}.mail-date[_ngcontent-%COMP%]{flex-shrink:0}.mail-actions[_ngcontent-%COMP%]{visibility:hidden;display:flex;gap:.5rem;align-items:center;position:relative;top:0;bottom:0;opacity:0;transform:translateY(10px);transition:opacity .15s ease-out}.mail-list[_ngcontent-%COMP%]:hover   .mail-actions[_ngcontent-%COMP%]{visibility:visible;opacity:1}.mail-list[_ngcontent-%COMP%]:hover   .mail-date[_ngcontent-%COMP%]{transform:translateY(0)}.mail-date[_ngcontent-%COMP%]{transform:translateY(5px)}"]}),n})();var w=s(62416),j=s(87791);function wt(n,o){1&n&&t.\u0275\u0275element(0,"mat-divider",13)}function bt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,10,"Step validation required")," - ",null==e?null:e.admission_process_step_name,""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,14,"Step validation required")," - ",null==e?null:e.admission_process_step_name," ")}}function yt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"PENDING_TASK_TYPE.Validate Student Admission Process"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"PENDING_TASK_TYPE.Validate Student Admission Process")," ")}}function Mt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.form_process_id?null:e.form_process_id.last_name)," ",null==e||null==e.form_process_id?null:e.form_process_id.first_name," ",null!=e&&null!=e.form_process_id&&e.form_process_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate Contract Process Step"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.form_process_id?null:e.form_process_id.last_name)," ",null==e||null==e.form_process_id?null:e.form_process_id.first_name," ",null!=e&&null!=e.form_process_id&&e.form_process_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate Contract Process Step")," ")}}function Ot(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate FC Contract"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate FC Contract")," ")}}function Pt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate One Time Form"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate One Time Form")," ")}}function kt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name),"\n            ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,8,null==e?null:e.description),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,12,null==e?null:e.description)," ")}}function Tt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ","neutral"===(null==e||null==e.contract_process?null:e.contract_process.civility)?"":t.\u0275\u0275pipeBind1(1,8,null==e||null==e.contract_process?null:e.contract_process.civility),"\n            ",null==e||null==e.contract_process?null:e.contract_process.first_name," ",null==e||null==e.contract_process?null:e.contract_process.last_name,": ",t.\u0275\u0275pipeBind1(2,10,"Validate Contract Process Step"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ","neutral"===(null==e||null==e.contract_process?null:e.contract_process.civility)?"":t.\u0275\u0275pipeBind1(4,12,null==e||null==e.contract_process?null:e.contract_process.civility)," ",null==e||null==e.contract_process?null:e.contract_process.first_name," ",null==e||null==e.contract_process?null:e.contract_process.last_name,": ",t.\u0275\u0275pipeBind1(5,14,"Validate Contract Process Step")," ")}}function St(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",t.\u0275\u0275pipeBind1(2,8,"Signing the contract"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",t.\u0275\u0275pipeBind1(5,12,"Signing the contract")," ")}}function Et(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,8,"Complete contract/convention form"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,12,"Complete contract/convention form")," ")}}function It(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,null==e?null:e.description)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.description," ")}}function Dt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"span",16),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,2,null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)," ")}}function Bt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",17),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275pipe(4,"date"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind2(2,2,i.getLocalDate(null==e?null:e.due_date),"dd")," ",t.\u0275\u0275pipeBind1(3,5,t.\u0275\u0275pipeBind2(4,7,i.getLocalDate(null==e?null:e.due_date),"MMMM"))," ")}}function Ht(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",3),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onOpenTask(l))}),t.\u0275\u0275elementStart(1,"li",4),t.\u0275\u0275template(2,wt,1,0,"mat-divider",5),t.\u0275\u0275elementStart(3,"div",6)(4,"div",7),t.\u0275\u0275template(5,bt,6,16,"span",8),t.\u0275\u0275template(6,yt,6,16,"span",9),t.\u0275\u0275template(7,Mt,6,16,"span",9),t.\u0275\u0275template(8,Ot,6,16,"span",9),t.\u0275\u0275template(9,Pt,6,16,"span",9),t.\u0275\u0275template(10,kt,6,14,"span",8),t.\u0275\u0275template(11,Tt,6,16,"span",8),t.\u0275\u0275template(12,St,6,14,"span",8),t.\u0275\u0275template(13,Et,6,14,"span",8),t.\u0275\u0275template(14,It,3,4,"span",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,Dt,5,6,"div",0),t.\u0275\u0275elementStart(16,"div",10),t.\u0275\u0275template(17,Bt,5,10,"span",11),t.\u0275\u0275elementStart(18,"span",12),t.\u0275\u0275text(19),t.\u0275\u0275elementEnd()()()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i>=1),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","validate_student_admission_process"===(null==e?null:e.type)&&"Step validation required"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"Validate Student Admission Process"===(null==e?null:e.description)&&"student_admission"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)||"validate_form_process"===(null==e?null:e.type)&&"student_admission"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)||"validate_form_process"===(null==e?null:e.type)&&"admission_document"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"teacher_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"fc_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"one_time_form"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Validate Financement"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_contract_process"===(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","fc_contract_process"===(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","complete_form_process"===(null==e?null:e.type)&&"fc_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)&&"Complete contract/convention form"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"!==(null==e?null:e.type)&&"validate_contract_process"!==(null==e?null:e.type)&&"Validate Financement"!==(null==e?null:e.description)&&"validate_student_admission_process"!==(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.description)&&(null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==e||null==e.due_date?null:e.due_date.date)&&"Due today"!==a.getLocalDate(null==e?null:e.due_date)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e||null==e.school?null:e.school.short_name)}}function Wt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Ht,20,14,"ul",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.tasks)}}function Lt(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",18)(1,"mat-icon",19),t.\u0275\u0275text(2,"error_outline"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"h4",20),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,1,"ERP_072.NO_OVERDUE_TASK")," "))}let Vt=(()=>{class n{constructor(e,i,a,l,r){this.taskService=e,this.authService=i,this.translate=a,this.parseUTCtoLocal=l,this.utilityService=r,this.tasks=[],this.subs=new T.Y,this.juryProcessName=""}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const e=this.currentUser?.entities?.find(i=>i?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.getOverDueTaskData()}get currentLang(){return this.translate.currentLang.toLowerCase()}getOverDueTaskData(){this.subs.sink=this.taskService.getMyTask({limit:5,page:0},{due_date:"desc"},{task_status:"todo",is_not_parent_task:!0,over_due_date:!0},this.currentUserTypeId).subscribe(l=>{this.tasks=l})}translateDate(e){let i=e;return e&&"object"==typeof e&&e.time&&e.date?this.parseUTCtoLocal.transformDate(e.date,e.time):e&&"object"==typeof e&&!e.time&&e.date?this.parseUTCtoLocal.transformDate(e.date,"15:59"):("number"==typeof e&&(i=e.toString()),8!==i.length||i.includes("-")?void 0:[+i.substring(0,4),+i.substring(4,6),+i.substring(6,8)].join("-"))}getLocalDate(e){if(e&&e.date&&e.time){const i=new Date,a=u(i).format("MM/DD/YYYY"),l=this.parseUTCtoLocal.transformDate(e.date,e.time),r=u(l,"DD/MM/YYYY").format("MM/DD/YYYY");return r===a?"Due today":r}if(e&&e.date&&!e.time){const i=this.parseUTCtoLocal.transformDate(e.date,"15:59");return u(i,"DD/MM/YYYY").format("MM/DD/YYYY")}}onOpenTask(e){this.taskService.openTask(e)}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(j.M),t.\u0275\u0275directiveInject(O.e),t.\u0275\u0275directiveInject(m.sK),t.\u0275\u0275directiveInject(w.t),t.\u0275\u0275directiveInject(E.t))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-overdue-task-homepage-widget"]],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([w.t]),t.\u0275\u0275StandaloneFeature],decls:2,vars:2,consts:[[4,"ngIf"],["class","tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-full tw-opacity-75",4,"ngIf"],["class","task-list p-grid",3,"click",4,"ngFor","ngForOf"],[1,"task-list","p-grid",3,"click"],[1,"p-col-12"],["style","padding-bottom: 20px",4,"ngIf"],[1,"task-container"],[1,"left-container"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"matTooltip",4,"ngIf"],[1,"right-container","text-right",2,"font-size","15px"],["class","task-due-date",4,"ngIf"],[1,"school"],[2,"padding-bottom","20px"],["matTooltipPosition","above",3,"matTooltip"],[3,"matTooltip"],[1,"task-name",3,"matTooltip"],[1,"task-due-date"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-h-full","tw-opacity-75"],[1,"!tw-text-[48px]","!tw-h-[48px]","!tw-w-[48px]","!tw-max-w-[48px]","!tw-max-h-[48px]"],[1,"tw-mt-4"]],template:function(e,i){1&e&&(t.\u0275\u0275template(0,Wt,2,1,"div",0),t.\u0275\u0275template(1,Lt,6,3,"div",1)),2&e&&(t.\u0275\u0275property("ngIf",i.tasks.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=i.tasks&&i.tasks.length)))},dependencies:[p.ez,p.sg,p.O5,p.gd,p.uU,k.m,D.d,f.Hw,C.gM,m.X$],styles:[".pending-container[_ngcontent-%COMP%]{width:100%}.pending-container.half[_ngcontent-%COMP%]{width:50%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;gap:.5rem}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.header[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]{font-size:12px;opacity:.75;cursor:pointer}.header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex}.no-data-wrapper[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{padding-left:10px}.text-right[_ngcontent-%COMP%]{text-align:right}ul.task-list[_ngcontent-%COMP%]{list-style:none;padding-left:0;font-size:16px;cursor:pointer}ul.task-list[_ngcontent-%COMP%]   .task-due-date[_ngcontent-%COMP%]{background-color:#ff4e00;color:#fff;border-radius:4px;padding:4px 8px;flex-shrink:0;right:10px;min-width:max-content}ul.task-list[_ngcontent-%COMP%]   .school[_ngcontent-%COMP%]{background-color:#ffd740;color:#000;display:inline-block;padding:4px 8px;border-radius:5px;margin-top:6px}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;column-gap:20px}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{width:80%}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{width:20%;display:flex;align-items:flex-end;flex-direction:column;font-size:.85rem}"]}),n})();function $t(n,o){1&n&&t.\u0275\u0275element(0,"mat-divider",13)}function Ft(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,10,"Step validation required")," - ",null==e?null:e.admission_process_step_name,""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,14,"Step validation required")," - ",null==e?null:e.admission_process_step_name," ")}}function zt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"PENDING_TASK_TYPE.Validate Student Admission Process"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"PENDING_TASK_TYPE.Validate Student Admission Process")," ")}}function Nt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.form_process_id?null:e.form_process_id.last_name)," ",null==e||null==e.form_process_id?null:e.form_process_id.first_name," ",null!=e&&null!=e.form_process_id&&e.form_process_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate Contract Process Step"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.form_process_id?null:e.form_process_id.last_name)," ",null==e||null==e.form_process_id?null:e.form_process_id.first_name," ",null!=e&&null!=e.form_process_id&&e.form_process_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate Contract Process Step")," ")}}function jt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate FC Contract"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate FC Contract")," ")}}function Rt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",15),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","",t.\u0275\u0275pipeBind1(1,8,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(2,10,"Validate One Time Form"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ",t.\u0275\u0275pipeBind1(4,12,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",null!=e&&null!=e.candidate_id&&e.candidate_id.civility?" - ":""," ",t.\u0275\u0275pipeBind1(5,14,"Validate One Time Form")," ")}}function Yt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name),"\n            ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,8,null==e?null:e.description),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,12,null==e?null:e.description)," ")}}function At(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate4("matTooltip","\n            ","neutral"===(null==e||null==e.contract_process?null:e.contract_process.civility)?"":t.\u0275\u0275pipeBind1(1,8,null==e||null==e.contract_process?null:e.contract_process.civility),"\n            ",null==e||null==e.contract_process?null:e.contract_process.first_name," ",null==e||null==e.contract_process?null:e.contract_process.last_name,": ",t.\u0275\u0275pipeBind1(2,10,"Validate Contract Process Step"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate4(" ","neutral"===(null==e||null==e.contract_process?null:e.contract_process.civility)?"":t.\u0275\u0275pipeBind1(4,12,null==e||null==e.contract_process?null:e.contract_process.civility)," ",null==e||null==e.contract_process?null:e.contract_process.first_name," ",null==e||null==e.contract_process?null:e.contract_process.last_name,": ",t.\u0275\u0275pipeBind1(5,14,"Validate Contract Process Step")," ")}}function Ut(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",t.\u0275\u0275pipeBind1(2,8,"Signing the contract"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," ",t.\u0275\u0275pipeBind1(5,12,"Signing the contract")," ")}}function Gt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","\n            ",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(2,8,"Complete contract/convention form"),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.candidate_id?null:e.candidate_id.last_name)," ",null==e||null==e.candidate_id?null:e.candidate_id.first_name," - ",t.\u0275\u0275pipeBind1(5,12,"Complete contract/convention form")," ")}}function Qt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,null==e?null:e.description)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.description," ")}}function Kt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"span",16),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,2,null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)," ")}}function Xt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"span",17),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"date"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275pipe(4,"date"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",t.\u0275\u0275pipeBind2(2,2,i.getLocalDate(null==e?null:e.due_date),"dd")," ",t.\u0275\u0275pipeBind1(3,5,t.\u0275\u0275pipeBind2(4,7,i.getLocalDate(null==e?null:e.due_date),"MMMM"))," ")}}function Jt(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ul",3),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(r.onOpenTask(l))}),t.\u0275\u0275elementStart(1,"li",4),t.\u0275\u0275template(2,$t,1,0,"mat-divider",5),t.\u0275\u0275elementStart(3,"div",6)(4,"div",7),t.\u0275\u0275template(5,Ft,6,16,"span",8),t.\u0275\u0275template(6,zt,6,16,"span",9),t.\u0275\u0275template(7,Nt,6,16,"span",9),t.\u0275\u0275template(8,jt,6,16,"span",9),t.\u0275\u0275template(9,Rt,6,16,"span",9),t.\u0275\u0275template(10,Yt,6,14,"span",8),t.\u0275\u0275template(11,At,6,16,"span",8),t.\u0275\u0275template(12,Ut,6,14,"span",8),t.\u0275\u0275template(13,Gt,6,14,"span",8),t.\u0275\u0275template(14,Qt,3,4,"span",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,Kt,5,6,"div",0),t.\u0275\u0275elementStart(16,"div",10),t.\u0275\u0275template(17,Xt,5,10,"span",11),t.\u0275\u0275elementStart(18,"span",12),t.\u0275\u0275text(19),t.\u0275\u0275elementEnd()()()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i>=1),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","validate_student_admission_process"===(null==e?null:e.type)&&"Step validation required"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"Validate Student Admission Process"===(null==e?null:e.description)&&"student_admission"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)||"validate_form_process"===(null==e?null:e.type)&&"student_admission"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)||"validate_form_process"===(null==e?null:e.type)&&"admission_document"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"teacher_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"fc_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"===(null==e?null:e.type)&&"one_time_form"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Validate Financement"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_contract_process"===(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","fc_contract_process"===(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","complete_form_process"===(null==e?null:e.type)&&"fc_contract"===(null==e||null==e.form_process_id||null==e.form_process_id.form_builder_id?null:e.form_process_id.form_builder_id.template_type)&&"Complete contract/convention form"===(null==e?null:e.description)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","validate_form_process"!==(null==e?null:e.type)&&"validate_contract_process"!==(null==e?null:e.type)&&"Validate Financement"!==(null==e?null:e.description)&&"validate_student_admission_process"!==(null==e?null:e.type)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.description)&&(null==e||null==e.test||null==e.test.evaluation_id?null:e.test.evaluation_id.evaluation)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==e||null==e.due_date?null:e.due_date.date)&&"Due today"!==a.getLocalDate(null==e?null:e.due_date)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e||null==e.school?null:e.school.short_name)}}function Zt(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Jt,20,14,"ul",2),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.tasks)}}function qt(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",18)(1,"mat-icon",19),t.\u0275\u0275text(2,"error_outline"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"h4",20),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,1,"NO_PENDING_DATA")," "))}let te=(()=>{class n{constructor(e,i,a,l,r){this.taskService=e,this.authService=i,this.translate=a,this.parseUTCtoLocal=l,this.utilityService=r,this.tasks=[],this.subs=new T.Y,this.juryProcessName=""}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const e=this.currentUser?.entities?.find(i=>i?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.getPendingTaskData()}get currentLang(){return this.translate.currentLang.toLowerCase()}getPendingTaskData(){this.subs.sink=this.taskService.getMyTask({limit:5,page:0},{due_date:"desc"},{task_status:"todo",is_not_parent_task:!0,pending_due_date:!0},this.currentUserTypeId).subscribe(l=>{this.tasks=l})}translateDate(e){let i=e;return e&&"object"==typeof e&&e.time&&e.date?this.parseUTCtoLocal.transformDate(e.date,e.time):e&&"object"==typeof e&&!e.time&&e.date?this.parseUTCtoLocal.transformDate(e.date,"15:59"):("number"==typeof e&&(i=e.toString()),8!==i.length||i.includes("-")?void 0:[+i.substring(0,4),+i.substring(4,6),+i.substring(6,8)].join("-"))}getLocalDate(e){if(e&&e.date&&e.time){const i=new Date,a=u(i).format("MM/DD/YYYY"),l=this.parseUTCtoLocal.transformDate(e.date,e.time),r=u(l,"DD/MM/YYYY").format("MM/DD/YYYY");return r===a?"Due today":r}if(e&&e.date&&!e.time){const i=this.parseUTCtoLocal.transformDate(e.date,"15:59");return u(i,"DD/MM/YYYY").format("MM/DD/YYYY")}}onOpenTask(e){this.taskService.openTask(e)}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(j.M),t.\u0275\u0275directiveInject(O.e),t.\u0275\u0275directiveInject(m.sK),t.\u0275\u0275directiveInject(w.t),t.\u0275\u0275directiveInject(E.t))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-pending-task-homepage-widget"]],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([w.t]),t.\u0275\u0275StandaloneFeature],decls:2,vars:2,consts:[[4,"ngIf"],["class","tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-full tw-opacity-75",4,"ngIf"],["class","task-list p-grid",3,"click",4,"ngFor","ngForOf"],[1,"task-list","p-grid",3,"click"],[1,"p-col-12"],["style","padding-bottom: 20px",4,"ngIf"],[1,"task-container"],[1,"left-container"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"matTooltip",4,"ngIf"],[1,"right-container","text-right",2,"font-size","15px"],["class","task-due-date",4,"ngIf"],[1,"school"],[2,"padding-bottom","20px"],["matTooltipPosition","above",3,"matTooltip"],[3,"matTooltip"],[1,"task-name",3,"matTooltip"],[1,"task-due-date"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-h-full","tw-opacity-75"],[1,"!tw-text-[48px]","!tw-h-[48px]","!tw-w-[48px]","!tw-max-w-[48px]","!tw-max-h-[48px]"],[1,"tw-mt-4"]],template:function(e,i){1&e&&(t.\u0275\u0275template(0,Zt,2,1,"div",0),t.\u0275\u0275template(1,qt,6,3,"div",1)),2&e&&(t.\u0275\u0275property("ngIf",i.tasks.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=i.tasks&&i.tasks.length)))},dependencies:[p.ez,p.sg,p.O5,p.gd,p.uU,k.m,D.d,f.Hw,C.gM,m.X$],styles:[".pending-container[_ngcontent-%COMP%]{width:100%}.pending-container.half[_ngcontent-%COMP%]{width:50%}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;gap:.5rem}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.header[_ngcontent-%COMP%]   .view-more[_ngcontent-%COMP%]{font-size:12px;opacity:.75;cursor:pointer}.header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex}.no-data-wrapper[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{padding-left:10px}.text-right[_ngcontent-%COMP%]{text-align:right}ul.task-list[_ngcontent-%COMP%]{list-style:none;padding-left:0;font-size:16px;cursor:pointer}ul.task-list[_ngcontent-%COMP%]   .task-due-date[_ngcontent-%COMP%]{background-color:green;color:#fff;border-radius:4px;padding:4px 8px;flex-shrink:0;right:10px;min-width:max-content}ul.task-list[_ngcontent-%COMP%]   .task-due-date.due-today[_ngcontent-%COMP%]{background-color:#ff4e00}ul.task-list[_ngcontent-%COMP%]   .school[_ngcontent-%COMP%]{background-color:#ffd740;color:#000;display:inline-block;padding:4px 8px;border-radius:5px;margin-top:6px}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;column-gap:20px}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{width:80%}ul.task-list[_ngcontent-%COMP%]   .task-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{width:20%;display:flex;align-items:flex-end;flex-direction:column;font-size:.85rem}"]}),n})();var B=s(90782),ee=s(47063),ne=s(18497);function ie(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275listener("click",function(){const l=t.\u0275\u0275restoreView(e).$implicit,r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.openNews(null==l?null:l._id))}),t.\u0275\u0275elementStart(1,"div",5)(2,"p",6),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"p",7),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"p",8),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",9),t.\u0275\u0275element(10,"div",10),t.\u0275\u0275elementEnd()()}if(2&n){const e=o.$implicit;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e||null==e.published_date?null:e.published_date.date),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.title),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate3("",t.\u0275\u0275pipeBind1(8,6,"NEWS.by")," ",null==e||null==e.created_by?null:e.created_by.last_name," ",null==e||null==e.created_by?null:e.created_by.first_name,""),t.\u0275\u0275advance(3),t.\u0275\u0275property("innerHTML",null==e?null:e.description,t.\u0275\u0275sanitizeHtml)}}function ae(n,o){1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",11),t.\u0275\u0275element(2,"mat-spinner",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function oe(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",13)(1,"h4",14),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"NEWS.no news")," "))}let le=(()=>{class n{constructor(e,i,a,l,r,d){this.newsService=e,this.apollo=i,this.router=a,this.translate=l,this.crd=r,this.parseUTCToLocalPipe=d,this.subs=new T.Y,this.isWaitingForResponse=!1}ngOnInit(){this.getDataFromGraph(),this.subs.sink=this.translate.onLangChange.subscribe(e=>{this.dataAllNews?.length&&this.dataAllNews.map(i=>i.published_date.date=this.getTranslatedDate(i?.published_date?.date))})}getDataFromGraph(){const i={is_published:!0};i.offset=u().utcOffset(),this.isWaitingForResponse=!0,this.subs.sink=this.newsService.getAllNews({limit:5,page:0},i,{published_date:"desc"}).subscribe(l=>{this.isWaitingForResponse=!1,this.dataAllNews=I.cloneDeep(l),l&&this.dataAllNews.forEach(r=>{const c=u(r?.published_date?.date,"DD/MM/YYYY").format("MMMM, DD YYYY");r.published_date.time=this.parseUTCToLocalPipe.transform(r.published_date?.time),r.published_date.date=this.getTranslatedDate(c)})})}getTranslatedDate(e){return e?(this.datePipe=new p.uU(this.translate.currentLang),this.datePipe&&this.datePipe.locale?this.datePipe.transform(e,"MMMM, d y"):""):""}openNews(e){this.router.navigate(["news/all-news"],{queryParams:{id:e}})}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(ee.Y),t.\u0275\u0275directiveInject(ne._M),t.\u0275\u0275directiveInject(P.F0),t.\u0275\u0275directiveInject(m.sK),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(w.t))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-news-homepage-widget"]],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([w.t]),t.\u0275\u0275StandaloneFeature],decls:4,vars:3,consts:[[1,"news-widget-container"],["class","news-widget-card tw-mb-2 tw-bg-app-primary",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","tw-flex tw-flex-col tw-items-center tw-justify-center tw-h-full tw-opacity-75",4,"ngIf"],[1,"news-widget-card","tw-mb-2","tw-bg-app-primary",3,"click"],[1,"header"],[1,"tw-bg-app-secondary"],[1,"title-news","tw-font-bold"],[1,"tw-w-full","tw-contents"],[1,"content"],[1,"text","content-inner","tw-line-clamp-1","tw-gap-1",3,"innerHTML"],[1,"center-spinner","inner-loading-indicator","tw-w-full","tw-h-full","tw-flex","tw-justify-center","tw-items-center"],["color","accent"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-h-full","tw-opacity-75"],[1,"tw-mt-4","tw-text-center"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,ie,11,8,"div",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,ae,3,0,"ng-container",2),t.\u0275\u0275template(3,oe,4,3,"div",3)),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.dataAllNews),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=i.dataAllNews&&i.dataAllNews.length||i.isWaitingForResponse)))},dependencies:[p.ez,p.sg,p.O5,k.m,L.Ou,m.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.news-widget-card[_ngcontent-%COMP%]{padding:10px;border-radius:5px;width:100%;height:4.4rem}.news-widget-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .news-widget-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]{display:flex;gap:7px;align-items:center}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{width:100%;text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(1){min-width:-moz-fit-content;min-width:fit-content;padding:1px 10px;border-radius:10px;font-size:small}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(3){font-size:small;text-wrap:nowrap;text-overflow:ellipsis;overflow:hidden}.title-news[_ngcontent-%COMP%]{max-width:75%!important}[_nghost-%COMP%]     .content-inner img{display:none!important}.content-inner[_ngcontent-%COMP%]{max-width:96%}"]}),n})();const re=["customizationSidebar"],se=["buttonDragAndDrop"],de=["buttonCustomizationSidebar"],pe=["selectTheme"];function ce(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"mat-icon"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.icon)}}function me(n,o){if(1&n&&t.\u0275\u0275element(0,"mat-icon",37),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("svgIcon",e.icon)}}function ue(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"li",34),t.\u0275\u0275template(1,ce,2,1,"mat-icon",35),t.\u0275\u0275template(2,me,1,1,"mat-icon",36),t.\u0275\u0275elementStart(3,"span"),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()),2&n){const e=o.$implicit;t.\u0275\u0275classProp("tw-border-l",!o.first),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","mat"===e.iconType),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","svg"===e.iconType),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.label)}}function _e(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",26)(1,"p",27),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"p",28),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"ul",29),t.\u0275\u0275template(8,ue,5,5,"li",30),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"button",31,32),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.openCustomizationSidebar())}),t.\u0275\u0275element(11,"mat-icon",33),t.\u0275\u0275elementStart(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()()()}if(2&n){const e=o.ngIf,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,4,i.headline$)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,6,i.greeting$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",e),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(14,8,"Customize"))}}function ge(n,o){1&n&&(t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275element(1,"div",39)(2,"div",40)(3,"div",41),t.\u0275\u0275elementEnd())}function fe(n,o){1&n&&t.\u0275\u0275element(0,"div")}function he(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div",51),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"WIDGET_NAME."+e.widget_name)," ")}}function xe(n,o){1&n&&t.\u0275\u0275element(0,"ms-mailbox-homepage-widget")}function Ce(n,o){1&n&&t.\u0275\u0275element(0,"ms-pending-task-homepage-widget")}function ve(n,o){1&n&&t.\u0275\u0275element(0,"ms-overdue-task-homepage-widget")}function we(n,o){1&n&&t.\u0275\u0275element(0,"ms-news-homepage-widget")}function be(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-grid-tile",45),t.\u0275\u0275listener("cdkDropListDropped",function(a){const r=t.\u0275\u0275restoreView(e).index,d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.widgetDropped(a,r))})("cdkDropListEntered",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.widgetEntered(a))})("cdkDropListExited",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.widgetExited())}),t.\u0275\u0275elementStart(1,"div",46),t.\u0275\u0275listener("cdkDragStarted",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.onDragStarted())}),t.\u0275\u0275template(2,fe,1,0,"div",47),t.\u0275\u0275template(3,he,3,3,"div",48),t.\u0275\u0275elementStart(4,"ms-base-homepage-widget",49),t.\u0275\u0275template(5,xe,1,0,"ms-mailbox-homepage-widget",50),t.\u0275\u0275template(6,Ce,1,0,"ms-pending-task-homepage-widget",50),t.\u0275\u0275template(7,ve,1,0,"ms-overdue-task-homepage-widget",50),t.\u0275\u0275template(8,we,1,0,"ms-news-homepage-widget",50),t.\u0275\u0275elementEnd()()()}if(2&n){const e=o.$implicit,i=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("colspan","full"===e.size?2:1)("cdkDropListConnectedTo",i.drops),t.\u0275\u0275advance(1),t.\u0275\u0275property("cdkDragData",e),t.\u0275\u0275advance(3),t.\u0275\u0275property("widget",e)("ngSwitch",e.widget_name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","email"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","pending_task"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","overdue_task"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","news")}}function ye(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-grid-tile",52),t.\u0275\u0275listener("cdkDropListDropped",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().ngIf,r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.widgetDropped(a,l))})("cdkDropListEntered",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.widgetEntered(a))})("cdkDropListExited",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.widgetExited())}),t.\u0275\u0275elementStart(1,"div",53)(2,"span",12),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",54,55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.toggleCustomizationSidebar())}),t.\u0275\u0275element(7,"mat-icon",33),t.\u0275\u0275elementStart(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("cdkDropListConnectedTo",e.drops),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,3,"Drag & drop widgets here")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,5,"Customize"))}}function Me(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"mat-grid-list",42),t.\u0275\u0275template(1,be,9,9,"mat-grid-tile",43),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,ye,11,7,"mat-grid-tile",44),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();let i;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(2,2,e.displayedWidgets$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==(i=t.\u0275\u0275pipeBind1(4,4,e.availableWidgets$))?null:i.length)}}function Oe(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-grid-list",56)(1,"mat-grid-tile",52),t.\u0275\u0275listener("cdkDropListDropped",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.widgetDropped(a,0))})("cdkDropListEntered",function(a){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.widgetEntered(a))})("cdkDropListExited",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.widgetExited())}),t.\u0275\u0275elementStart(2,"div",57)(3,"span",12),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",54,55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.toggleCustomizationSidebar())}),t.\u0275\u0275element(8,"mat-icon",33),t.\u0275\u0275elementStart(9,"span"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()()()()()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("cdkDropListConnectedTo",e.drops),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("tw-bg-app-secondary",e.dragging),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,5,"Drag & drop widgets here")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(11,7,"Customize"))}}function Pe(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",58),t.\u0275\u0275listener("click",function(a){const r=t.\u0275\u0275restoreView(e).$implicit,d=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(d.selectBackground(a,r))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&n){const e=o.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,"theme_name."+e.name)," ")}}function ke(n,o){1&n&&t.\u0275\u0275element(0,"div",63)}function Te(n,o){if(1&n&&(t.\u0275\u0275elementStart(0,"div",51),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"WIDGET_NAME."+e.widget_name)," ")}}function Se(n,o){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"li",59),t.\u0275\u0275listener("cdkDragStarted",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.dragging=!0)})("cdkDragEnded",function(){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.dragging=!1)}),t.\u0275\u0275template(1,ke,1,0,"div",60),t.\u0275\u0275template(2,Te,3,3,"div",48),t.\u0275\u0275elementStart(3,"div",61),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"img",62),t.\u0275\u0275elementEnd()}if(2&n){const e=o.$implicit;t.\u0275\u0275property("cdkDragData",e),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,4,"WIDGET_NAME."+e.widget_name)),t.\u0275\u0275advance(2),t.\u0275\u0275property("src",e.img,t.\u0275\u0275sanitizeUrl)("height",96)}}let Ee=(()=>{class n{constructor(){this._destroy$=new $.xQ,this._auth=(0,t.inject)(O.e),this._core=(0,t.inject)(G.p),this._fb=(0,t.inject)(_.FormBuilder),this._homepageService=(0,t.inject)(N.g),this._translate=(0,t.inject)(m.sK),this._userService=(0,t.inject)(Q.K),this._utils=(0,t.inject)(E.t),this._pageTitleService=(0,t.inject)(U.Z),this._updateWidget=new $.xQ,this._customizationSidebarOpen=new F.X(!1),this._loading=new F.X(!0),this.backgroundNameFormControl=this._fb.nonNullable.control("default"),this.backgroundHexFormGroup=this._fb.nonNullable.group({primary:this._fb.nonNullable.control(""),secondary:this._fb.nonNullable.control(""),tertiary:this._fb.nonNullable.control("")}),this.dragging=!1,this.availableBackgrounds$=this._homepageService.availableBackgrounds$,this.availableWidgets$=this._homepageService.availableWidgets$,this.loading$=this._loading.asObservable().pipe((0,Z.b)(100)),this.displayedWidgets$=this._homepageService.displayedWidgets$,this.customizationSidebarOpen$=this._customizationSidebarOpen.asObservable(),this.summaries$=(0,z.aj)([this._userService.reloadCurrentUser$.pipe((0,b.O)(!0),(0,q.h)(Boolean)),this._translate.onLangChange.pipe((0,b.O)(K.E))]).pipe((0,v.b)(()=>{this._loading.next(!0),this._setPageTitle()}),(0,tt.w)(()=>{const e=this._auth.getLocalStorageUser(),i=e?._id,a=e?.entities?.find(l=>l?.type?.name===this._auth.getPermission()[0])?.type?._id;return this._homepageService.getSummaryItemCounts(i,a)}),(0,v.b)(()=>{this._loading.next(!1)}),(0,y.U)(({overdue_task_count:e,pending_task_count:i,unread_mail_count:a})=>[{icon:"mail",iconType:"mat",label:`${a} ${this._translate.instant("HomepageEmail")}`},{icon:"inventory_2",iconType:"mat",label:`${i} ${this._translate.instant("Pending Task")}`},{icon:"inventory_2",iconType:"mat",label:`${e} ${this._translate.instant("Task Overdue")}`}]),(0,g.R)(this._destroy$)),this.displayDragAndDropText$=(0,z.aj)([this.customizationSidebarOpen$,this.availableWidgets$,this.displayedWidgets$]).pipe((0,y.U)(([e,i,a])=>e&&i?.length||!a?.length)),this.headline$=this._translate.onLangChange.pipe((0,y.U)(e=>e.lang),(0,b.O)(localStorage.getItem("currentLang")),(0,y.U)(e=>u().locale(e).format("dddd, DD MMMM YYYY")),(0,g.R)(this._destroy$)),this.greeting$=(0,X.T)(this._userService.reloadCurrentUser$,this._translate.onLangChange,(0,J.F)(6e4)).pipe((0,b.O)(0),(0,y.U)(()=>{const e=u().get("hour"),i=this._translate.instant(e>=0&&e<12?"Good Morning":e>=12&&e<18?"Good Afternoon":"Good Evening"),a=this._auth.getLocalStorageUser();return[i,this._utils.constructUserName(a,["first"])].join(", ")}),(0,g.R)(this._destroy$))}_setPageTitle(){this._pageTitleService.setTitle("ERP_072.Home Page")}ngOnInit(){this._homepageService.config$.pipe((0,v.b)(e=>{if(e.background_colour.primary&&e.background_colour.secondary&&e.background_colour.tertiary){const i=this._homepageService.findThemeByColorConfig(e.background_colour);this.backgroundNameFormControl.patchValue(i?i.name:"custom"),this.backgroundHexFormGroup.patchValue(e.background_colour),this._core.setAppThemeColors(e.background_colour)}else{const i=this._homepageService.findDefaultTheme();this.backgroundNameFormControl.patchValue(i.name),this.backgroundHexFormGroup.patchValue(i),this._core.setAppThemeColors(i)}}),(0,et.q)(1),(0,g.R)(this._destroy$)).subscribe(),this.backgroundNameFormControl.valueChanges.pipe((0,v.b)(e=>{if("custom"!==e){const i=this._homepageService.findThemeByNameOrReturnDefault(e);this.backgroundHexFormGroup.patchValue(i)}}),(0,g.R)(this._destroy$)).subscribe(),this.backgroundHexFormGroup.valueChanges.pipe((0,v.b)(e=>{this._homepageService.findThemeByColorConfig(this.backgroundHexFormGroup.getRawValue())||this.backgroundNameFormControl.setValue("custom"),this._core.setAppThemeColors(e),this._homepageService.updateConfiguration({background_colour:this._homepageService.createSelectedBackgroundPayload(e)})}),(0,g.R)(this._destroy$)).subscribe(),this._updateWidget.asObservable().pipe(function it(n){return o=>o.lift(new at(n))}(()=>this._homepageService.applyingConfiguration),(0,v.b)(()=>{this._homepageService.triggerWidgetUpdateManually()}),(0,g.R)(this._destroy$)).subscribe()}ngAfterViewInit(){this.dropsQuery.changes.pipe((0,b.O)(this.dropsQuery),(0,g.R)(this._destroy$)).subscribe(()=>{this.drops=this.dropsQuery.toArray()})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._pageTitleService.setTitle("")}openCustomizationSidebar(){this._customizationSidebarOpen.next(!0)}closeCustomizationSidebar(){this._customizationSidebarOpen.next(!1)}toggleCustomizationSidebar(){this._customizationSidebarOpen.next(!this._customizationSidebarOpen.getValue())}selectBackground(e,i){this._homepageService.setBackground(i),e.stopPropagation()}_restoreRemovedTileContentElement(){this.removedTileContentElement&&this.removedTileContentParentElement&&this.removedTileContentParentElement.appendChild(this.removedTileContentElement)}widgetEntered(e){const i=e.item,a=e.container;if(i.dropContainer.element.nativeElement===a.element.nativeElement){const l=i.dropContainer.element.nativeElement.parentElement.querySelector(".cdk-drag-placeholder");return i.dropContainer.element.nativeElement.removeChild(l),void i.dropContainer.element.nativeElement.querySelector(".mat-grid-tile-content").appendChild(l)}if(this.removedTileContentElement=a.element.nativeElement.querySelector(".widget-item"),this.removedTileContentParentElement=this.removedTileContentElement.parentElement,this.removedTileContentParentElement.removeChild(this.removedTileContentElement),this.removedTileContentElement.classList.contains("drop-placeholder")){const l=a.element.nativeElement.parentElement.querySelector(".cdk-drag-placeholder");a.element.nativeElement.removeChild(l),a.element.nativeElement.querySelector(".mat-grid-tile-content").appendChild(l)}}widgetExited(){this._restoreRemovedTileContentElement()}widgetDropped(e,i){this._restoreRemovedTileContentElement(),e.item.data?.widget_name&&(e.container.element.nativeElement.parentElement.parentElement===e.previousContainer.element.nativeElement.parentElement.parentElement?this._homepageService.moveWidget(e.item.data.widget_name,"number"==typeof i?i:e.currentIndex):this._homepageService.displayWidget(e.item.data.widget_name,"number"==typeof i?i:e.currentIndex),this._updateWidget.next())}handleClickOutside(e){if(this._customizationSidebarOpen.value){if(this.customizationSidebar?.nativeElement?.contains(e.target)||this.buttonDragAndDrop?.nativeElement?.contains(e.target)||this.buttonCustomizationSidebar?.nativeElement?.contains(e.target))return;this.closeCustomizationSidebar()}}onDragStarted(){this.closeCustomizationSidebar()}selectCustomOption(e){e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ms-homepage"]],viewQuery:function(e,i){if(1&e&&(t.\u0275\u0275viewQuery(re,5),t.\u0275\u0275viewQuery(se,5),t.\u0275\u0275viewQuery(de,5),t.\u0275\u0275viewQuery(pe,5),t.\u0275\u0275viewQuery(x.Wj,5)),2&e){let a;t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.customizationSidebar=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.buttonDragAndDrop=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.buttonCustomizationSidebar=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.selectTheme=a.first),t.\u0275\u0275queryRefresh(a=t.\u0275\u0275loadQuery())&&(i.dropsQuery=a)}},hostBindings:function(e,i){1&e&&t.\u0275\u0275listener("click",function(l){return i.handleClickOutside(l)},!1,t.\u0275\u0275resolveDocument)},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:62,vars:58,consts:[[1,"tw-p-8"],["class","tw-relative tw-flex tw-flex-col tw-items-center tw-text-center tw-gap-4",4,"ngIf"],["class","tw-flex tw-flex-col tw-gap-4",4,"ngIf"],[1,"tw-p-2","tw-pb-6"],["cols","2","rowHeight","3:2","gutterSize","1rem","class","drag-boundary",4,"ngIf"],["cols","1","rowHeight","3:1",4,"ngIf"],[1,"tw-overflow-x-scroll","tw-fixed","tw-transition-all","tw-rounded-md","tw-shadow-md","tw-right-0","tw-top-16","tw-bottom-0","tw-border-2","tw-bg-app-primary","tw-border-app-tertiary/40","tw-m-4","tw-py-4","tw-px-6","tw-min-w-max"],["customizationSidebar",""],[1,"tw-flex","tw-items-center","tw-gap-4","tw-justify-between"],[1,"mat-subtitle","!tw-m-0"],[1,"tw-p-2","tw-rounded-full","tw-flex","tw-items-center","tw-justify-center","tw-transition-colors","tw-text-rose-500","hover:tw-bg-rose-300/50",3,"click"],[1,"tw-mt-4"],[1,"mat-title"],["appearance","outline","color","secondary"],[3,"disableOptionCentering","formControl"],[3,"value","click",4,"ngFor","ngForOf"],["value","custom",3,"click"],[1,"tw-flex","tw-flex-col","tw-gap-4",3,"formGroup"],[1,"tw-flex","tw-items-center"],[1,"tw-w-1/2"],[1,"tw-flex-1"],["type","color","formControlName","primary",1,"color-input"],["type","color","formControlName","secondary",1,"color-input"],["type","color","formControlName","tertiary",1,"color-input"],["cdkDropList","",1,"tw-flex","tw-flex-col","tw-gap-2","tw-min-h-[12em]",3,"cdkDropListConnectedTo"],["class","tw-p-2 tw-border-2 tw-rounded-md tw-cursor-grab tw-transition-colors tw-border-app-secondary/50 hover:tw-border-app-secondary hover:tw-bg-app-secondary/10","cdkDrag","",3,"cdkDragData","cdkDragStarted","cdkDragEnded",4,"ngFor","ngForOf"],[1,"tw-relative","tw-flex","tw-flex-col","tw-items-center","tw-text-center","tw-gap-4"],[1,"mat-headline","!tw-mb-0"],[1,"mat-display-2","!tw-mb-4"],[1,"tw-rounded-full","tw-bg-app-secondary","tw-flex","tw-justify-center","tw-p-4","tw-w-fit","tw-mx-auto"],["class","tw-px-4 tw-flex tw-items-center tw-gap-4 tw-border-l-app-tertiary",3,"tw-border-l",4,"ngFor","ngForOf"],[1,"tw-px-5","tw-py-2","tw-flex","tw-items-center","tw-transition-colors","tw-gap-2","tw-rounded-full","tw-border-2","tw-border-app-secondary/50","tw-text-app-tertiary","hover:tw-bg-app-secondary/25","hover:tw-border-app-secondary","tw-absolute","tw-bottom-0","tw-right-4",3,"click"],["buttonCustomizationSidebar",""],["svgIcon","menu-custom"],[1,"tw-px-4","tw-flex","tw-items-center","tw-gap-4","tw-border-l-app-tertiary"],[4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],[1,"tw-flex","tw-flex-col","tw-gap-4"],[1,"tw-mx-auto","tw-w-1/6","tw-rounded-full","tw-h-8","tw-bg-app-secondary","tw-opacity-20","tw-animate-pulse"],[1,"tw-mx-auto","tw-w-2/6","tw-rounded-full","tw-h-16","tw-bg-app-secondary","tw-opacity-20","tw-animate-pulse"],[1,"tw-mx-auto","tw-w-3/6","tw-rounded-full","tw-h-16","tw-bg-app-secondary","tw-opacity-20","tw-animate-pulse"],["cols","2","rowHeight","3:2","gutterSize","1rem",1,"drag-boundary"],["cdkDropList","","class","drag-item tw-transition-all",3,"colspan","cdkDropListConnectedTo","cdkDropListDropped","cdkDropListEntered","cdkDropListExited",4,"ngFor","ngForOf"],["cdkDropList","",3,"cdkDropListConnectedTo","cdkDropListDropped","cdkDropListEntered","cdkDropListExited",4,"ngIf"],["cdkDropList","",1,"drag-item","tw-transition-all",3,"colspan","cdkDropListConnectedTo","cdkDropListDropped","cdkDropListEntered","cdkDropListExited"],["cdkDrag","","cdkDragBoundary",".drag-boundary",1,"widget-item","tw-p-4","tw-rounded-md","tw-cursor-grab","tw-transition-colors","tw-color-app-tertiary","tw-border-2","tw-bg-app-secondary","tw-border-app-tertiary/20","hover:tw-border-app-tertiary/50","tw-w-full","tw-h-full",3,"cdkDragData","cdkDragStarted"],[4,"cdkDragPlaceholder"],["class","tw-p-4 tw-px-8 tw-font-bold tw-rounded tw-bg-app-secondary tw-border-2 tw-border-app-tertiary/20 tw-text-app-tertiary",4,"cdkDragPreview"],[3,"widget","ngSwitch"],[4,"ngSwitchCase"],[1,"tw-p-4","tw-px-8","tw-font-bold","tw-rounded","tw-bg-app-secondary","tw-border-2","tw-border-app-tertiary/20","tw-text-app-tertiary"],["cdkDropList","",3,"cdkDropListConnectedTo","cdkDropListDropped","cdkDropListEntered","cdkDropListExited"],[1,"widget-item","drop-placeholder","tw-p-4","tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-text-center","tw-rounded-md","tw-transition-colors","tw-color-app-tertiary","tw-bg-app-secondary","tw-w-full","tw-h-full"],[1,"tw-px-5","tw-py-2","tw-flex","tw-items-center","tw-transition-colors","tw-gap-2","tw-rounded-full","tw-border-2","tw-border-app-tertiary/50","tw-text-app-tertiary","hover:tw-bg-app-tertiary/25","hover:tw-border-app-tertiary",3,"click"],["buttonDragAndDrop",""],["cols","1","rowHeight","3:1"],[1,"widget-item","drop-placeholder","tw-p-4","tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-text-center","tw-rounded-md","tw-transition-colors","tw-color-app-tertiary","tw-w-full","tw-h-full"],[3,"value","click"],["cdkDrag","",1,"tw-p-2","tw-border-2","tw-rounded-md","tw-cursor-grab","tw-transition-colors","tw-border-app-secondary/50","hover:tw-border-app-secondary","hover:tw-bg-app-secondary/10",3,"cdkDragData","cdkDragStarted","cdkDragEnded"],["class","tw-p-2 tw-rounded-md tw-bg-app-secondary/50 tw-h-[10em]",4,"cdkDragPlaceholder"],[1,"tw-text-bold"],["alt","Widget Preview",3,"src","height"],[1,"tw-p-2","tw-rounded-md","tw-bg-app-secondary/50","tw-h-[10em]"]],template:function(e,i){if(1&e&&(t.\u0275\u0275elementStart(0,"header",0),t.\u0275\u0275template(1,_e,15,10,"div",1),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275template(3,ge,4,0,"div",2),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"main",3),t.\u0275\u0275template(7,Me,5,6,"mat-grid-list",4),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,Oe,12,9,"mat-grid-list",5),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"aside",6,7),t.\u0275\u0275pipe(13,"async"),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275elementStart(15,"header",8)(16,"h2",9),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"button",10),t.\u0275\u0275listener("click",function(){return i.closeCustomizationSidebar()}),t.\u0275\u0275elementStart(20,"mat-icon"),t.\u0275\u0275text(21,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(22,"div",11)(23,"h3",12),t.\u0275\u0275text(24),t.\u0275\u0275pipe(25,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"mat-form-field",13)(27,"mat-label"),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"mat-select",14),t.\u0275\u0275template(31,Pe,3,4,"mat-option",15),t.\u0275\u0275pipe(32,"async"),t.\u0275\u0275elementStart(33,"mat-option",16),t.\u0275\u0275listener("click",function(l){return i.selectCustomOption(l)}),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(36,"div",17)(37,"span",18)(38,"span",19),t.\u0275\u0275text(39),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"span",20),t.\u0275\u0275element(42,"input",21),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(43,"span",18)(44,"span",19),t.\u0275\u0275text(45),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(47,"span",20),t.\u0275\u0275element(48,"input",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(49,"span",18)(50,"span",19),t.\u0275\u0275text(51),t.\u0275\u0275pipe(52,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(53,"span",20),t.\u0275\u0275element(54,"input",23),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(55,"div",11)(56,"h3",12),t.\u0275\u0275text(57),t.\u0275\u0275pipe(58,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(59,"ul",24),t.\u0275\u0275template(60,Se,7,6,"li",25),t.\u0275\u0275pipe(61,"async"),t.\u0275\u0275elementEnd()()()),2&e){let a,l;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,24,i.summaries$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(4,26,i.loading$)&&!t.\u0275\u0275pipeBind1(5,28,i.summaries$)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null==(a=t.\u0275\u0275pipeBind1(8,30,i.displayedWidgets$))?null:a.length),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!(null!=(l=t.\u0275\u0275pipeBind1(10,32,i.displayedWidgets$))&&l.length)),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("tw-translate-x-full",!t.\u0275\u0275pipeBind1(13,34,i.customizationSidebarOpen$))("tw-opacity-0",!t.\u0275\u0275pipeBind1(14,36,i.customizationSidebarOpen$)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(18,38,"Customize Widget")," "),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(25,40,"ERP_072.Background")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(29,42,"ERP_072.Background")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disableOptionCentering",!0)("formControl",i.backgroundNameFormControl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(32,44,i.availableBackgrounds$)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,46,"theme_name.custom")," "),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("tw-hidden","custom"!==(null==i.backgroundNameFormControl?null:i.backgroundNameFormControl.value)),t.\u0275\u0275property("formGroup",i.backgroundHexFormGroup),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(40,48,"ERP_072.Primary")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(46,50,"ERP_072.Secondary")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(52,52,"ERP_072.Tertiary")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(58,54,"Widgets")),t.\u0275\u0275advance(2),t.\u0275\u0275property("cdkDropListConnectedTo",i.drops),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(61,56,i.availableWidgets$))}},dependencies:[ct,p.ez,p.sg,p.O5,p.RF,p.n9,p.Ov,x._t,x.Wj,x.Zt,x.pV,x.Hk,vt,M.ot,S.lN,S.KE,S.hX,V.LD,V.gD,W.ey,W.Ng,f.Ps,f.Hw,B.N6,B.Il,B.DX,Y.c,L.Cq,A.SJ,C.AV,Vt,te,le,_.ReactiveFormsModule,_.DefaultValueAccessor,_.NgControlStatus,_.NgControlStatusGroup,_.FormControlDirective,_.FormGroupDirective,_.FormControlName,m.aw,m.X$],styles:["ul[_ngcontent-%COMP%]{list-style:none}.color-input[_ngcontent-%COMP%]{appearance:none;background-color:transparent;width:100%;height:2em;border:none;cursor:pointer}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border:2px solid #000000}.color-input[_ngcontent-%COMP%]::-moz-color-swatch{border:2px solid #000000}.mat-grid-tile[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:.25rem;background-color:rgb(var(--app-theme-color-secondary) / .5);padding:2rem}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.drag-boundary.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})()}}]);