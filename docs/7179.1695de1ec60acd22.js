"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[7179],{46416:(b,A,s)=>{s.d(A,{e:()=>F});var v=s(17489),m=s(24006),O=s(68745),C=s(65938),e=s(35226),h=s.n(e),P=s(34318),t=s(94650),x=s(68516),y=s(52688),S=s(89383),R=s(79710),B=s(84075),M=s(73555),L=s(4859),f=s(56709),D=s(97392),l=s(59549),c=s(284),g=s(51572),_=s(36895),p=s(88796);const I=function(){return{standalone:!0}};function T(d,u){if(1&d){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275listener("click",function(){const o=t.\u0275\u0275restoreView(a).item,r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.toggleCreateTag(o))}),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275element(2,"input",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",22),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()}if(2&d){const a=u.item,i=u.item$,n=u.index;t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("id","item-",n,""),t.\u0275\u0275property("ngModel",i.selected)("ngModelOptions",t.\u0275\u0275pureFunction0(4,I)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",a.name," ")}}function k(d,u){if(1&d){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-checkbox",24),t.\u0275\u0275listener("change",function(n){t.\u0275\u0275restoreView(a);const o=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(o.selectAllTag(n))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&d){const a=t.\u0275\u0275nextContext(2);let i;t.\u0275\u0275property("checked",a.checkAllTag())("indeterminate",!a.checkAllTag()&&(null==a.form||null==(i=a.form.get("tag"))||null==i.value?null:i.value.length)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"All")," ")}}function W(d,u){1&d&&t.\u0275\u0275template(0,k,3,5,"ng-template",23)}function U(d,u){1&d&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function V(d,u){1&d&&(t.\u0275\u0275elementStart(0,"mat-error",25),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function K(d,u){if(1&d&&(t.\u0275\u0275elementStart(0,"div",26)(1,"div",7)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",8),t.\u0275\u0275text(6,":"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",9)(8,"mat-form-field",27),t.\u0275\u0275element(9,"input",28),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275template(11,V,3,3,"mat-error",14),t.\u0275\u0275elementEnd()()()),2&d){const a=t.\u0275\u0275nextContext();let i;t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(4,4,"StudentCardTag.Tag name"),"*"),t.\u0275\u0275advance(5),t.\u0275\u0275property("hideRequiredMarker",!0),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(10,6,"StudentCardTag.type a tag")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==a.form||null==(i=a.form.get("tag_name"))?null:i.hasError("required"))&&((null==a.form?null:a.form.get("tag_name").dirty)||(null==a.form||null==(i=a.form.get("tag_name"))?null:i.touched)))}}function w(d,u){1&d&&(t.\u0275\u0275elementStart(0,"div",29),t.\u0275\u0275element(1,"mat-spinner",30),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let F=(()=>{class d{constructor(a,i,n,o,r,N,j,G){this.data=a,this.dialogRef=i,this.fb=n,this.studentsService=o,this.authService=r,this.translate=N,this.candidateService=j,this.utilService=G,this.subs=new O.Y,this.isWaitingForResponse=!1,this.tags=[],this.tagList=[],this.isCreateTag=!1}ngOnInit(){this.initForm(),this.getAllTags(),this.currentUser=this.authService.getLocalStorageUser()}checkAllTag(){return this.tags?.length===this.form.get("tag")?.value?.length}selectAllTag(a){if(a.checked&&this.tags?.length){const i=this.tags?.map(n=>n?._id).filter(n=>"create"!==n);this.form.get("tag")?.patchValue(i,{emitEvent:!1})}else this.form.get("tag")?.patchValue(null)}toggleCreateTag(a){"Create a tag"===a.name&&(this.isCreateTag=!0)}initForm(){this.form=this.fb.group({tag:[null,m.Validators.required],tag_name:[null]})}getAllTags(){this.isWaitingForResponse=!0,this.tags=[],this.tagList=[],this.subs.sink=this.studentsService.getAllTags().subscribe(a=>{if(a){const i=(0,v.cloneDeep)(a);if(this.data?.tags?.length&&"student-card"===this.data?.from){const n=this.data.tags.map(o=>o?._id);i.forEach(o=>{n.includes(o?._id)||(this.tags.push(o),this.tagList.push(o))})}else this.tags=i,this.tagList=i;this.tagList=(0,v.uniqBy)(this.tagList,"_id"),this.tagList=this.tagList.sort((n,o)=>this.utilService.simplifyRegex(n?.name?.toLowerCase())<this.utilService.simplifyRegex(o?.name?.toLowerCase())?-1:this.utilService.simplifyRegex(n?.name?.toLowerCase())>this.utilService.simplifyRegex(o?.name?.toLowerCase())?1:0),this.tags=(0,v.uniqBy)(this.tags,"_id"),this.tags=this.tags.sort((n,o)=>this.utilService.simplifyRegex(n?.name?.toLowerCase())<this.utilService.simplifyRegex(o?.name?.toLowerCase())?-1:this.utilService.simplifyRegex(n?.name?.toLowerCase())>this.utilService.simplifyRegex(o?.name?.toLowerCase())?1:0),this.tags.unshift({name:this.translate.instant("StudentCardTag.Create a tag"),_id:"create"})}this.isWaitingForResponse=!1},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),h().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}checkValidator(){const a=JSON.stringify(this.form?.get("tag")?.value),i=this.form?.get("tag")?.value;this.tags=[],a===JSON.stringify(["create"])?(this.isCreateTag=!0,this.form?.get("tag_name")?.setValidators([m.Validators.required,P.I8]),this.tags=[{name:this.translate.instant("StudentCardTag.Create a tag"),_id:"create"}]):i?.length?(this.isCreateTag=!1,this.form?.get("tag_name")?.clearValidators(),this.tags=v.cloneDeep(this.tagList)):(this.isCreateTag=!1,this.form?.get("tag_name")?.clearValidators(),this.tags=v.cloneDeep(this.tagList),this.tags.unshift({name:this.translate.instant("StudentCardTag.Create a tag"),_id:"create"})),this.form?.get("tag_name")?.updateValueAndValidity()}createPayload(a){const i=this.data?.tags?.map(r=>r?._id),n=i?.length?i:[],o=this.form?.get("tag")?.value;return this.isCreateTag?n?.includes(a)||n?.push(a):o?.length&&!this.isCreateTag&&o.forEach(r=>{n.includes(r)||n?.push(r)}),{tag_ids:n}}validate(){if(this.form?.invalid)return h().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),void this.form.markAllAsTouched();this.isCreateTag?this.createTag():"student-card"===this.data?.from?this.updateCandidate():"all-students"===this.data?.from&&this.updateManyCandidate()}createTag(){const a={name:this.form?.get("tag_name")?.value},i=this.form?.get("tag_name")?.value;this.isWaitingForResponse=!0,this.subs.sink=this.studentsService.createTag(a).subscribe(n=>{n?"student-card"===this.data?.from?this.updateCandidate(n?._id):"all-students"===this.data?.from&&this.updateManyCandidate(n?._id):this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message?.includes("Tag already exist")?h().fire({type:"info",title:this.translate.instant("student_tags_S3.TITLE"),html:this.translate.instant("student_tags_S3.TEXT",{tagName:i}),confirmButtonText:this.translate.instant("student_tags_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}):h().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}updateCandidate(a){const n=this.createPayload(a||null);this.isWaitingForResponse=!0,this.subs.sink=this.candidateService.UpdateCandidateId(this.data?.candidateId,n,!0).subscribe(r=>{this.isWaitingForResponse=!1,r&&h().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},r=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(r),h().fire({type:"info",title:this.translate.instant("SORRY"),text:r&&r.message?this.translate.instant(r.message.replaceAll("GraphQL error: ","")):r,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}updateManyCandidate(a){const i=a||this.form?.get("tag")?.value,n=this.currentUser?.app_data?this.currentUser.app_data.user_type_id:[],o={candidate_ids:this.data?.candidateId};this.isWaitingForResponse=!0,this.subs.sink=this.studentsService.modifyCandidatesTag(n,o,i,!1,!0).subscribe(r=>{this.isWaitingForResponse=!1,r&&h().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},r=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(r),h().fire({type:"info",title:this.translate.instant("SORRY"),text:r&&r.message?this.translate.instant(r.message.replaceAll("GraphQL error: ","")):r,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}close(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}closeSelect(a){a.close()}}return d.\u0275fac=function(a){return new(a||d)(t.\u0275\u0275directiveInject(C.WI),t.\u0275\u0275directiveInject(C.so),t.\u0275\u0275directiveInject(m.UntypedFormBuilder),t.\u0275\u0275directiveInject(x.q),t.\u0275\u0275directiveInject(y.e),t.\u0275\u0275directiveInject(S.sK),t.\u0275\u0275directiveInject(R.o),t.\u0275\u0275directiveInject(B.t))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["ms-add-tags-dialog"]],decls:36,vars:27,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"no-padding","p-col-2"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"dialog-body"],[1,"p-col-12",3,"formGroup"],[1,"p-col-2","no-padding","tag-field"],[1,"p-col-1","no-padding","tag-field",2,"width","30px"],[1,"p-col-9","no-padding"],["bindLabel","name","bindValue","_id","appendTo","body","formControlName","tag",1,"mrgn-btn","custom-ngselect-addtag",3,"items","multiple","clearable","placeholder","notFoundText","closeOnSelect","change"],["select",""],["ng-option-tmp",""],[4,"ngIf"],["class","invalid-field",4,"ngIf"],["class","p-grid","style","margin-top: 10px !important",4,"ngIf"],[1,"action-button"],["mat-raised-button","","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"flex",3,"click"],["type","checkbox",3,"id","ngModel","ngModelOptions"],[1,"break-space"],["ng-header-tmp",""],[1,"m-1",3,"checked","indeterminate","change"],[1,"invalid-field"],[1,"p-grid",2,"margin-top","10px !important"],[3,"hideRequiredMarker"],["matInput","","formControlName","tag_name",3,"placeholder"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(a,i){if(1&a){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",3)(7,"button",4),t.\u0275\u0275listener("click",function(){return i.close()}),t.\u0275\u0275elementStart(8,"mat-icon"),t.\u0275\u0275text(9,"close"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(10,"div",5)(11,"div",6)(12,"div",1)(13,"div",7)(14,"mat-label"),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",8),t.\u0275\u0275text(18,":"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9)(20,"ng-select",10,11),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275reference(21);return i.checkValidator(),t.\u0275\u0275resetView(i.closeSelect(r))}),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275template(24,T,5,5,"ng-template",12),t.\u0275\u0275template(25,W,1,0,null,13),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(26,U,3,3,"div",14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(27,K,12,8,"div",15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(28,"mat-dialog-actions",16)(29,"button",17),t.\u0275\u0275text(30),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"button",18),t.\u0275\u0275listener("click",function(){return i.validate()}),t.\u0275\u0275text(33),t.\u0275\u0275pipe(34,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(35,w,2,1,"div",19)}if(2&a){let n;t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,15,"Add a tag")),t.\u0275\u0275advance(7),t.\u0275\u0275property("formGroup",i.form),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(16,17,"All_Students.Tag"),"*"),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(22,19,"StudentCardTag.select a tag")),t.\u0275\u0275propertyInterpolate("notFoundText",t.\u0275\u0275pipeBind1(23,21,"NOT RECORD FOUND")),t.\u0275\u0275property("items",i.tags)("multiple",!0)("clearable",!1)("closeOnSelect",!1),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",null==i.tags?null:i.tags.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==i.form||null==(n=i.form.get("tag"))?null:n.hasError("required"))&&((null==i.form?null:i.form.get("tag").dirty)||(null==i.form||null==(n=i.form.get("tag"))?null:n.touched))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isCreateTag),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(31,23,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(34,25,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.isWaitingForResponse)}},dependencies:[M.Zt,M.Bh,L.lW,f.oG,C.ZT,C.xY,C.H8,D.Hw,l.TO,l.KE,l.hX,c.Nt,g.Ou,m.DefaultValueAccessor,m.CheckboxControlValueAccessor,m.NgControlStatus,m.NgControlStatusGroup,m.NgModel,m.FormGroupDirective,m.FormControlName,_.O5,p.w9,p.ir,p.Cm,S.X$],styles:['.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 15px 0 30px;color:#000;border-bottom:1px solid black}.inline-block[_ngcontent-%COMP%]{display:inline-block}.mat-dialog-content[_ngcontent-%COMP%]{margin:15px 0}.action-button[_ngcontent-%COMP%]{margin-right:25px;text-align:right}  .custom-ngselect-addtag.ng-dropdown-panel{width:auto!important;max-width:-moz-fit-content!important;max-width:fit-content!important}  .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}  .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-header{border-bottom:0!important}  .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-header .mat-checkbox{margin-left:3px}  .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-header .mat-checkbox .mat-checkbox-inner-container{height:16px!important;width:16px!important}  .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-header .mat-checkbox-checked .mat-checkbox-background,   .custom-ngselect-addtag.ng-dropdown-panel .ng-dropdown-header .mat-checkbox-indeterminate .mat-checkbox-background{background-color:#0075ff!important}[_nghost-%COMP%]  .ng-select .ng-select-container{border-right:0!important;border-left:0!important;border-top:0!important;border-radius:0!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container{padding-left:0!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input{padding-left:0!important}[_nghost-%COMP%]  .ng-select.ng-select-focused:not(.ng-select-opened)>.ng-select-container{box-shadow:none!important;border-top-color:transparent;border-left-color:transparent;border-right-color:transparent;border-bottom-color:#ccc}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container .ng-value-container .ng-placeholder{color:#f44336!important}.tag-field[_ngcontent-%COMP%]{align-self:center}.invalid-field[_ngcontent-%COMP%]{color:red;font-size:14px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .checkBoxAll .mat-checkbox-background{background-color:#0075ff!important}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-value-label:after{content:","}.break-space[_ngcontent-%COMP%]{white-space:break-spaces}.flex[_ngcontent-%COMP%]{display:flex}.m-1[_ngcontent-%COMP%]{margin-left:7px}']}),d})()},15807:(b,A,s)=>{s.d(A,{a:()=>L});var v=s(35226),E=s.n(v),m=s(65938),O=s(17489),e=s(94650),h=s(68516),P=s(52688),t=s(89383),x=s(73555),y=s(4859),S=s(97392),R=s(51572),B=s(36895);function M(f,D){1&f&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275element(1,"mat-spinner",9),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("diameter",100))}let L=(()=>{class f{constructor(l,c,g,_,p){this.dialogRef=l,this.studentService=c,this.parentData=g,this.authService=_,this.translate=p,this.isWaitingForResponse=!1}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.isPermission=this.authService.getPermission();const c=this.authService.getLocalStorageUser()?.entities?.find(g=>g?.type?.name===this.isPermission[0]);this.currentUserTypeId=[c?.type?._id]}onValidate(){this.isWaitingForResponse=!0;let l=this.parentData?.filter?this.cleanFilterData():null;const c=this.parentData?.from&&"multiple"===this.parentData?.from?this.mappedMultipleData():[this.parentData?.student?._id];l={...l,candidate_ids:c},this.studentService.askVisaDocument(l,this.currentUserTypeId).subscribe(g=>{if(g){const _=g?.amount_sent,p=g?.amount_not_sent,I=this.sumObjectValues(_),T=this.sumObjectValues(p);(_?.status_not_sent||_?.status_rejected||_?.status_expired)&&p?.status_not_required?E().fire({type:"warning",title:this.translate.instant("AskVisaDocument_S5.TITLE"),text:this.translate.instant("AskVisaDocument_S5.TEXT"),confirmButtonText:this.translate.instant("AskVisaDocument_S5.BUTTON"),allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close()}):(_?.status_not_sent||_?.status_rejected||_?.status_expired)&&(p?.status_not_completed||p?.status_validated||p?.status_waiting_for_validation)?E().fire({type:"info",title:this.translate.instant("AskVisaDocument_S2.TITLE"),text:this.translate.instant("AskVisaDocument_S2.TEXT"),confirmButtonText:this.translate.instant("AskVisaDocument_S2.BUTTON"),allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close()}):!I&&T&&T===p?.status_not_required?E().fire({type:"warning",title:this.translate.instant("AskVisaDocument_S4.TITLE"),text:this.translate.instant("AskVisaDocument_S4.TEXT"),confirmButtonText:this.translate.instant("AskVisaDocument_S4.BUTTON"),allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close()}):I||!T||T!==p?.status_not_completed&&T!==p?.status_validated&&T!==p?.status_waiting_for_validation?E().fire({type:"success",title:this.translate.instant("Bravo"),confirmButtonText:this.translate.instant("OK"),allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close(!0)}):E().fire({type:"warning",title:this.translate.instant("AskVisaDocument_S3.TITLE"),text:this.translate.instant("AskVisaDocument_S3.TEXT"),confirmButtonText:this.translate.instant("AskVisaDocument_S3.BUTTON"),allowOutsideClick:!1,allowEscapeKey:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close()})}else this.isWaitingForResponse=!1},g=>{this.isWaitingForResponse=!1,E().fire({type:"info",title:this.translate.instant("SORRY"),text:g&&g.message?this.translate.instant(g.message.replaceAll("GraphQL error: ","")):g,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}sumObjectValues(l){if(l)return Object.values(l).reduce((_,p)=>_+p,0)}mappedMultipleData(){if(this.parentData?.selectedData)return this.parentData?.selectedData?.map(c=>c?._id)}cleanFilterData(){const l=O.cloneDeep(this.parentData?.filter);return Object.keys(l).forEach(c=>{!l[c]&&!1!==l[c]&&delete l[c]}),l?.validation_statuses?.length||delete l.validation_statuses,l}closeDialog(){this.dialogRef.close()}}return f.\u0275fac=function(l){return new(l||f)(e.\u0275\u0275directiveInject(m.so),e.\u0275\u0275directiveInject(h.q),e.\u0275\u0275directiveInject(m.WI),e.\u0275\u0275directiveInject(P.e),e.\u0275\u0275directiveInject(t.sK))},f.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["ms-ask-visa-document-dialog"]],decls:21,vars:13,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-div"],[1,"header-text"],["mat-icon-button","","type","button","tabindex","-1",1,"header-icon",3,"click"],[1,"header-border"],["align","end"],["mat-raised-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",3,"click"],["class","inner-loading-indicator",4,"ngIf"],[1,"inner-loading-indicator"],["color","accent",3,"diameter"]],template:function(l,c){1&l&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h3",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return c.closeDialog()}),e.\u0275\u0275elementStart(5,"mat-icon"),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(7,"hr"),e.\u0275\u0275elementStart(8,"div",3)(9,"mat-dialog-content")(10,"p"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"mat-dialog-actions",4)(14,"button",5),e.\u0275\u0275listener("click",function(){return c.closeDialog()}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",6),e.\u0275\u0275listener("click",function(){return c.onValidate()}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(20,M,2,1,"div",7)),2&l&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,5,"VISA_DOCUMENT_DIALOG.TITLE")," "),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,7,"VISA_DOCUMENT_DIALOG.TEXT")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(16,9,"Cancel")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,11,"Validate")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",c.isWaitingForResponse))},dependencies:[x.Zt,x.Bh,y.lW,m.xY,m.H8,S.Hw,R.Ou,B.O5,t.X$],styles:["[_nghost-%COMP%]  .header-text{margin-left:8px}.header-border[_ngcontent-%COMP%]{padding:16px;color:#000}[_nghost-%COMP%]     .mat-dialog-content{margin:0!important;padding:0!important;min-height:60px}[_nghost-%COMP%]     .mat-dialog-actions{min-height:unset}"]}),f})()}}]);