"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[2202],{75223:(A,y,d)=>{d.d(y,{r:()=>m});var e=d(94650),b=d(89383),h=d(36895),x=d(97392);function t(r,l){1&r&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1," , "),e.\u0275\u0275elementEnd())}function o(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,t,2,0,"span",11),e.\u0275\u0275elementContainerEnd()),2&r){const n=l.$implicit,s=l.last;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,n)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!s)}}function _(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3),u=a.$implicit,g=a.index,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.removeFilter(u,g))}),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd()}}function i(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,o,4,4,"ng-container",7),e.\u0275\u0275template(4,_,2,0,"mat-icon",10),e.\u0275\u0275elementEnd()),2&r){const n=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,3,null==n?null:n.column)," : "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==n?null:n.key),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(s.isReadmission&&"scholar_season"===(null==n?null:n.name)))}}function c(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3),u=a.$implicit,g=a.index,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.removeFilter(u,g))}),e.\u0275\u0275text(1,"close"),e.\u0275\u0275elementEnd()}}function p(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,c,2,0,"mat-icon",10),e.\u0275\u0275elementEnd()),2&r){const n=e.\u0275\u0275nextContext(2).$implicit,s=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind1(2,3,null==n?null:n.column)," : ",e.\u0275\u0275pipeBind1(3,5,null==n?null:n.key)," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!(s.isReadmission&&"scholar_season"===(null==n?null:n.name)))}}function v(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,i,5,5,"span",8),e.\u0275\u0275template(2,p,5,7,"span",8),e.\u0275\u0275elementContainerEnd()),2&r){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n?null:n.isMultiple),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=n&&n.isMultiple))}}function E(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,v,3,2,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&r){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","super_filter"===(null==n?null:n.type))}}function C(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"div",4)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,E,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&r){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Super Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function B(r,l){1&r&&(e.\u0275\u0275elementStart(0,"span",12),e.\u0275\u0275text(1," , "),e.\u0275\u0275elementEnd())}function F(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275template(3,B,2,0,"span",11),e.\u0275\u0275elementContainerEnd()),2&r){const n=l.$implicit,s=l.last,a=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null!=a&&a.noTranslate?n:e.\u0275\u0275pipeBind1(2,2,n)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!s)}}function O(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,F,4,4,"ng-container",7),e.\u0275\u0275elementStart(5,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2),u=a.$implicit,g=a.index,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.removeFilter(u,g))}),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()}if(2&r){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",null!=n&&n.stepColumnName?e.\u0275\u0275pipeBind1(2,2,null==n?null:n.stepColumnName)+" "+(null==n?null:n.column):e.\u0275\u0275pipeBind1(3,4,null==n?null:n.column)," : "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==n?null:n.key)}}function T(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"span",9),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementStart(5,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2),u=a.$implicit,g=a.index,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.removeFilter(u,g))}),e.\u0275\u0275text(6,"close"),e.\u0275\u0275elementEnd()()}if(2&r){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null!=n&&n.stepColumnName?e.\u0275\u0275pipeBind1(2,2,null==n?null:n.stepColumnName)+" "+(null==n?null:n.column):e.\u0275\u0275pipeBind1(3,4,null==n?null:n.column)," : ",!0===(null==n?null:n.noTranslate)?null==n?null:n.key:e.\u0275\u0275pipeBind1(4,6,null==n?null:n.key)," ")}}function S(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,O,7,6,"span",8),e.\u0275\u0275template(2,T,7,8,"span",8),e.\u0275\u0275elementContainerEnd()),2&r){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n?null:n.isMultiple),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=n&&n.isMultiple))}}function M(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,S,3,2,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&r){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","table_filter"===(null==n?null:n.type))}}function P(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,M,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&r){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Table Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function D(r,l){if(1&r){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementStart(4,"mat-icon",13),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(),u=a.$implicit,g=a.index,f=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(f.removeFilter(u,g))}),e.\u0275\u0275text(5,"close"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&r){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,null==n?null:n.key)," ")}}function k(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,D,6,3,"ng-container",1),e.\u0275\u0275elementContainerEnd()),2&r){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","action_filter"===(null==n?null:n.type))}}function I(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,":"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",6),e.\u0275\u0275template(7,k,2,1,"ng-container",7),e.\u0275\u0275elementEnd()()),2&r){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass","en"===n.translate.currentLang?"filter-type":"filter-type-fr"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,3,"Action Filter")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.filterBreadcrumbData)}}function R(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,C,8,5,"div",2),e.\u0275\u0275template(2,P,8,5,"div",3),e.\u0275\u0275template(3,I,8,5,"div",3),e.\u0275\u0275elementContainerEnd()),2&r){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("super_filter")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("table_filter")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.filterDataExist("action_filter"))}}let m=(()=>{class r{constructor(n){this.translate=n,this.removeFilterTrigger=new e.EventEmitter}ngOnInit(){}filterDataExist(n){return!!this.filterBreadcrumbData.find(a=>a?.type===n)}removeFilter(n,s){this.filterBreadcrumbData.splice(s,1),this.removeFilterTrigger.emit(n)}}return r.\u0275fac=function(n){return new(n||r)(e.\u0275\u0275directiveInject(b.sK))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ms-filter-breadcrumb"]],inputs:{filterBreadcrumbData:"filterBreadcrumbData",isReadmission:"isReadmission"},outputs:{removeFilterTrigger:"removeFilterTrigger"},decls:2,vars:1,consts:[[1,"filter-breadcrumb"],[4,"ngIf"],["class","filter-breadcrumb-container mt-10",4,"ngIf"],["class","filter-breadcrumb-container",4,"ngIf"],[1,"filter-breadcrumb-container","mt-10"],[3,"ngClass"],[1,"breadcrumb-value"],[4,"ngFor","ngForOf"],["class","breadcrumb-filter",4,"ngIf"],[1,"breadcrumb-filter"],["class","icon-remove",3,"click",4,"ngIf"],["class","comma",4,"ngIf"],[1,"comma"],[1,"icon-remove",3,"click"],[1,"filter-breadcrumb-container"]],template:function(n,s){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,R,4,3,"ng-container",1),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==s.filterBreadcrumbData?null:s.filterBreadcrumbData.length))},dependencies:[h.mk,h.sg,h.O5,x.Hw,b.X$],styles:[".filter-breadcrumb[_ngcontent-%COMP%]{padding:1rem}.filter-breadcrumb-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.filter-breadcrumb-container[_ngcontent-%COMP%] ~ .filter-breadcrumb-container[_ngcontent-%COMP%]{margin-top:1rem}.breadcrumb-value[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 1rem;gap:4px}.filter-type[_ngcontent-%COMP%]{width:100px}.filter-type-fr[_ngcontent-%COMP%]{width:150px}.breadcrumb-filter[_ngcontent-%COMP%]{background-color:#ffd740;color:#000;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;display:flex;flex-wrap:wrap;align-items:center}.comma[_ngcontent-%COMP%]{margin-right:4px}.icon-remove[_ngcontent-%COMP%]{vertical-align:middle;margin-left:.25rem;font-size:inherit;cursor:pointer}"]}),r})()},22437:(A,y,d)=>{d.d(y,{q:()=>b});var e=d(94650);let b=(()=>{class h{constructor(){this.filterSingle=(t,o,_,i,c="")=>null==o?"":c+t?.find(p=>p[_]===o)?.[i],this.filterSingleBoolean=(t,o,_,i,c="")=>null==o?"":c+t?.find(p=>"boolean"==typeof p[_]?JSON.stringify(p[_])===o:"string"==typeof p[_]?p[_]===o:void 0)?.[i],this.filterMultiple=(t,o,_,i,c="")=>o?.length?null===_&&null===i?t.filter(p=>o?.includes(p)).map(p=>c+p):t.filter(p=>o?.includes(p[_]))?.map(p=>c+p[i]):[],this.isValueObject=t=>"object"==typeof t&&!Array.isArray(t)&&null!==t,this.getNestedObjectValue=(t,o)=>{for(const _ in t){if(_===o)return t[o];if(this.isValueObject(t[o]))return this.getNestedObjectValue(t[_],o)}},this.getKey=t=>{if(null===t?.filterValue)return null;const o=null===t?.name?t?.filterValue:"boolean"==typeof t?.filterValue?.[t?.name]?String(t?.filterValue?.[t.name]):t.filterValue?.[t.name],_=t.isMultiple,i=t.isSelectionInput,c=t?.fixedValues,p=t?.translationPrefix??"";if(null==o)return null;if(!i&&this.isValueObject(o)&&t?.nestedKey)return p+this.getNestedObjectValue(o,t.nestedKey);if(!i)return p+o;let v;if(c)if(Array.isArray(o))v=c?.filter(C=>o?.includes(C));else if("string"==typeof o||"boolean"==typeof o)return v=c?.find(C=>o===C),v;const E=_?this.filterMultiple(t.filterList,o,t.savedValue,t.displayKey,t.translationPrefix):"boolean"==typeof t?.filterValue?.[t?.name]||"false"===t?.filterValue?.[t?.name]||"true"===t?.filterValue?.[t?.name]?this.filterSingleBoolean(t.filterList,o,t.savedValue,t.displayKey,t.translationPrefix):this.filterSingle(t.filterList,o,t.savedValue,t.displayKey,t.translationPrefix);return _&&v?E.concat(...c):E}}filterBreadcrumb(t,o){const{type:_,column:i}=t,c=o.findIndex(p=>p?.type===_&&p?.column===i);-1!==c?(o[c]=t,!(Array.isArray(o[c]?.value)?o[c]?.value?.length:o[c]?.value)&&!(Array.isArray(o[c]?.key)?o[c]?.key?.length:o[c]?.key)&&o.splice(c,1)):(-1===c&&Array.isArray(t?.value)?t?.value?.length:t?.value)&&o.push(t)}removeFilterBreadcrumb(t,o,_,i,c=!1){"super_filter"===t.type&&o?o[t.name]=null:"table_filter"===t.type&&_?_[t.name]=null:"action_filter"===t.type&&i&&(i[t.name]=null),t?.filterRef?.patchValue(t?.resetValue??null,{emitEvent:c})}filterBreadcrumbFormat(t,o){const _=[...o];for(const i of t){const c=null===i.name?i?.filterValue:"boolean"==typeof i?.filterValue?.[i.name]?String(i?.filterValue?.[i.name]):i?.filterValue?.[i.name],p={type:i.type,name:i.name,column:i.column,filterList:i?.filterList,value:c||null,isMultiple:i.isMultiple,filterRef:i.filterRef,resetValue:i.resetValue,noTranslate:i?.noTranslate,stepColumnName:i?.stepColumnName,key:this.getKey(i)};this.filterBreadcrumb(p,_)}return _}}return h.\u0275fac=function(t){return new(t||h)},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},59938:(A,y,d)=>{d.d(y,{A:()=>R});var e=d(24006),b=d(68745),h=d(35226),x=d.n(h),t=d(94650),o=d(52688),_=d(79710),i=d(65938),c=d(89383),p=d(73555),v=d(4859),E=d(56709),C=d(97392),B=d(51572),F=d(36895),O=d(88796);function T(m,r){1&m&&(t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function S(m,r){1&m&&(t.\u0275\u0275elementStart(0,"label",9),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"CALENDAR_Select Schools*")," "))}function M(m,r){if(1&m&&(t.\u0275\u0275element(0,"input",21),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate")),2&m){const l=r.item,n=r.item$;t.\u0275\u0275propertyInterpolate1("id","item-",r.index,""),t.\u0275\u0275property("ngModel",n.selected),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,l.short_name)," ")}}function P(m,r){if(1&m){const l=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-checkbox",23),t.\u0275\u0275listener("change",function(s){t.\u0275\u0275restoreView(l);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.selectAllData(s,"school"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&m){const l=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("checked",l.isAllDropdownSelected("school"))("indeterminate",l.isSomeDropdownSelected("school")),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,3,"AllM")," ")}}function D(m,r){1&m&&t.\u0275\u0275template(0,P,3,5,"ng-template",22)}function k(m,r){1&m&&(t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function I(m,r){1&m&&(t.\u0275\u0275elementStart(0,"div",24),t.\u0275\u0275element(1,"mat-spinner",25),t.\u0275\u0275elementEnd()),2&m&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let R=(()=>{class m{constructor(l,n,s,a,u){this.authService=l,this.candidateService=n,this.fb=s,this.dialogRef=a,this.translate=u,this.isWaitingForResponse=!1,this.scholarList=[],this.subs=new b.Y,this.school=[],this.scholarFilter=new e.UntypedFormControl(null,e.Validators.required),this.schoolsFilter=new e.UntypedFormControl(null,e.Validators.required)}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const l=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=l?.type?._id,this.initForm(),this.getScholarSeason()}initForm(){this.reportForm=this.fb.group({scholar_season:[null,e.Validators.required],schools:[null,e.Validators.required]})}scholarSelect(){const l=this.scholarFilter.value;this.reportForm.get("scholar_season").markAsTouched(),l&&l&&(this.school=[],this.schoolsFilter.setValue(null),this.reportForm.get("schools").patchValue(null),this.reportForm.get("scholar_season").patchValue(l),this.getDataForList(l))}schoolSelect(){const l=this.schoolsFilter.value;this.reportForm.get("schools").markAsTouched(),l&&l.length?(this.schoolsFilter.patchValue(l),this.reportForm.get("schools").patchValue(l)):(this.schoolsFilter.patchValue(null),this.reportForm.get("schools").patchValue(null))}clearSchool(){this.school=[],this.schoolsFilter.patchValue(null),this.reportForm.get("schools").patchValue(null),this.reportForm.get("schools").markAsTouched()}isAllDropdownSelected(l){if("school"===l){const n=this.schoolsFilter.value;return n&&0!==n.length&&n.length===this.school.length}}isSomeDropdownSelected(l){if("school"===l){const n=this.schoolsFilter.value;return n&&0!==n.length&&n.length!==this.school.length}}selectAllData(l,n){if("school"===n)if(l.checked){const s=this.school.map(a=>a?._id);this.schoolsFilter.patchValue(s,{emitEvent:!1})}else this.schoolsFilter.patchValue(null,{emitEvent:!1})}getScholarSeason(){this.isWaitingForResponse=!0,this.subs.sink=this.candidateService.getAllScholarSeasons({is_published:!0}).subscribe(n=>{n&&(this.scholarList=n,this.isWaitingForResponse=!1)},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?x().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):x().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")})})}getDataForList(l){this.isWaitingForResponse=!0;const n=l||"";this.subs.sink=this.candidateService.GetAllSchoolFilter(n,`filter: { scholar_season_id:"${n}"}`,this.currentUserTypeId).subscribe(a=>{if(a)if(this.currentUser&&this.currentUser.entities&&this.currentUser.entities.length&&this.currentUser.app_data&&this.currentUser.app_data.school_package&&this.currentUser.app_data.school_package.length){const u=[];this.currentUser.app_data.school_package.forEach(g=>{u.push(g.school)}),this.school=u,this.school=this.school.sort((g,f)=>g.short_name>f.short_name?1:f.short_name>g.short_name?-1:0)}else this.school=a,this.school=this.school.sort((u,g)=>u.short_name>g.short_name?1:g.short_name>u.short_name?-1:0);this.isWaitingForResponse=!1},a=>{this.isWaitingForResponse=!1,!(a&&a.message&&(a.message.includes("jwt expired")||a.message.includes("str & salt required")||a.message.includes("Authorization header is missing")||a.message.includes("salt")))&&(a&&a.message&&a.message.includes("Network error: Http failure response for")?x().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):x().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}))})}onValidate(){if(this.reportForm.invalid)return x().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.reportForm.markAllAsTouched(),this.scholarFilter.markAllAsTouched(),this.schoolsFilter.markAllAsTouched(),!0;this.dialogRef.close(this.reportForm.value)}}return m.\u0275fac=function(l){return new(l||m)(t.\u0275\u0275directiveInject(o.e),t.\u0275\u0275directiveInject(_.o),t.\u0275\u0275directiveInject(e.UntypedFormBuilder),t.\u0275\u0275directiveInject(i.so),t.\u0275\u0275directiveInject(c.sK))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["ms-export-controlling-report-dialog"]],decls:40,vars:42,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"w-95","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[1,"p-col-12"],[1,"custom-ng-select","no-padding"],[1,"float-label"],["bindLabel","scholar_season","bindValue","_id",1,"mrgn-btn","custom-ngselect-contentspace",3,"items","appendTo","formControl","placeholder","clearable","closeOnSelect","change"],["class","error-msg",4,"ngIf"],["class","float-label",4,"ngIf"],["bindLabel","short_name","bindValue","_id",1,"mrgn-btn","custom-ngselect-contentspace",3,"items","appendTo","formControl","placeholder","clearable","multiple","notFoundText","closeOnSelect","close","remove"],["ng-option-tmp",""],[4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",1,"mr-0",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"error-msg"],["type","checkbox",3,"id","ngModel"],["ng-header-tmp",""],[1,"all-input",2,"cursor","pointer",3,"checked","indeterminate","change"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(l,n){if(1&l&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6)(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",2)(12,"div",7),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",7)(16,"div",8)(17,"label",9),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"ng-select",10),t.\u0275\u0275listener("change",function(){return n.scholarSelect()}),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(22,T,3,3,"span",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"div",7)(24,"div",8),t.\u0275\u0275template(25,S,3,3,"label",12),t.\u0275\u0275elementStart(26,"ng-select",13),t.\u0275\u0275listener("close",function(){return n.schoolSelect()})("remove",function(){return n.schoolSelect()}),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275template(29,M,3,5,"ng-template",14),t.\u0275\u0275template(30,D,1,0,null,15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(31,k,3,3,"span",11),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(32,"div",16)(33,"button",17),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"button",18),t.\u0275\u0275listener("click",function(){return n.onValidate()}),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(39,I,2,1,"div",19)),2&l){let s;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,26,"Export controlling report")),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,28,"Please select scholar season and schools that you want to export")," "),t.\u0275\u0275advance(4),t.\u0275\u0275styleProp("display",null!=(s=n.reportForm.get("scholar_season"))&&s.value?"block":"none"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,30,"Select Scholar Season"),"* "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(21,32,"Select Scholar Seasons")," *"),t.\u0275\u0275property("items",n.scholarList)("appendTo","body")("formControl",n.scholarFilter)("clearable",!1)("closeOnSelect",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.reportForm.get("scholar_season").hasError("required")&&(n.reportForm.get("scholar_season").touched||n.reportForm.get("scholar_season").dirty||n.scholarFilter.touched)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",(null==n.schoolsFilter?null:n.schoolsFilter.value)&&0!==(null==n.schoolsFilter||null==n.schoolsFilter.value?null:n.schoolsFilter.value.length)),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(27,34,"Select Schools")," *"),t.\u0275\u0275propertyInterpolate("notFoundText",t.\u0275\u0275pipeBind1(28,36,"NOT RECORD FOUND")),t.\u0275\u0275property("items",n.school)("appendTo","body")("formControl",n.schoolsFilter)("clearable",!1)("multiple",!0)("closeOnSelect",!1),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",null==n.school?null:n.school.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.reportForm.get("schools").hasError("required")&&(n.reportForm.get("schools").touched||n.reportForm.get("schools").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(35,38,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(38,40,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse)}},dependencies:[p.Zt,p.Bh,v.lW,E.oG,i.ZT,i.H8,C.Hw,B.Ou,e.CheckboxControlValueAccessor,e.NgControlStatus,e.NgModel,e.FormControlDirective,F.O5,O.w9,O.ir,O.Cm,c.X$],styles:['.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.float-label[_ngcontent-%COMP%]{font-size:.82rem;color:#999;font-weight:600}.mt-15[_ngcontent-%COMP%]{margin-top:15px}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-95[_ngcontent-%COMP%]{width:95px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}[_nghost-%COMP%]  .ng-select .ng-select-container{min-height:36px;border-left:0px!important;border-right:0px!important;border-top:0px!important;border-radius:0!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container .ng-value-container .ng-placeholder{color:#f44336!important}.label-scholar[_ngcontent-%COMP%]{position:absolute;font-size:10;font-weight:500;top:-11px;left:5px;z-index:999;color:#acacac}.red[_ngcontent-%COMP%]{color:#f44336!important}.custom-ng-select[_ngcontent-%COMP%]{position:relative}.label[_ngcontent-%COMP%]{color:#999;position:absolute;top:0;z-index:100}.error-msg[_ngcontent-%COMP%]{color:#f44336!important;font-size:75%!important;margin:0 0 0 7px!important}  .all-input .mat-checkbox-layout .mat-checkbox-inner-container{width:12px;height:12px;margin-left:7px}  .all-input .mat-checkbox-layout .mat-checkbox-inner-container .mat-checkbox-background{background-color:transparent}  .all-input .mat-checkbox-layout .mat-checkbox-inner-container .mat-checkbox-background .mat-checkbox-checkmark .mat-checkbox-checkmark-path{stroke:#000!important}  .all-input.mat-checkbox-indeterminate .mat-checkbox-layout .mat-checkbox-inner-container .mat-checkbox-background .mat-checkbox-mixedmark{background-color:#000!important}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background-color:transparent}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value -shadowcsshost  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{background-color:transparent}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value -shadowcsshost  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value:not(:nth-last-child(2)):after{content:","}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value -shadowcsshost  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value:not(:nth-last-child(2)):after{content:","}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}']}),m})()}}]);