"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[6699,4318],{2057:(yt,tt,m)=>{m.r(tt),m.d(tt,{CompaniesModule:()=>Mi});var t=m(94650),u=m(36895),rt=m(93730),W=m(3238),D=m(610),st=m(36224),et=m(25360),_=m(98739),O=m(22868),P=m(68745),b=m(17489),y=m(65884),M=m(52688),N=m(84075),pt=m(67154),T=m(4859),E=m(51572),H=m(24784),d=m(24006),$=m(1059),A=m(80013),bt=m(35226),l=m.n(bt),v=m(65938),C=m(89383),xt=m(11481),Q=m(44758),nt=m(84130),R=m(73546),w=m(97392),z=m(10266);const Ot=["companyCreate"];function vt(o,r){if(1&o&&t.\u0275\u0275element(0,"img",15),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",e.company_name),t.\u0275\u0275property("src",n.imgURL(e.company_logo),t.\u0275\u0275sanitizeUrl)}}function Mt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",16),t.\u0275\u0275text(1,"business"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",e.company_name)}}function Pt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",11)(1,"p",17),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.no_RC," ")}}function St(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.deleteCompany(i._id,i.company_name))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"close"),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"Delete"))}function Tt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",18)(1,"div",19),t.\u0275\u0275template(2,St,3,3,"mat-icon",20),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",n.companyId===e._id?"company-text":""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.permissionService.addcompanyPerm())}}function It(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-card",3),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.selectCompany(a._id,a.company_name))}),t.\u0275\u0275elementStart(1,"mat-card-subtitle",4)(2,"div",5)(3,"div",6)(4,"span"),t.\u0275\u0275template(5,vt,1,2,"img",7),t.\u0275\u0275template(6,Mt,2,1,"mat-icon",8),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",9)(8,"div",10)(9,"div",11)(10,"h5",12),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(12,Pt,3,1,"div",13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(13,Tt,3,2,"div",14),t.\u0275\u0275elementEnd()()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngClass",n.companyId===e._id?"company-select mrgn-all-md":"mrgn-all-md"),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("id","item-",e._id,""),t.\u0275\u0275property("ngClass",n.companyId===e._id?"company-text":""),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",e.company_logo),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.company_logo),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("matTooltip",e.company_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",n.formBranch&&null!=e&&null!=e.company_entity_id&&e.company_entity_id.company_name?e.company_entity_id.company_name+" - ":""," ",e.company_name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&e.no_RC),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isUserAdmtc||n.isUserAdmtcDir)}}function Et(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275template(1,It,14,10,"mat-card",2),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275styleProp("height",e.getAutomaticHeight(),"px")("max-height",e.getAutomaticHeight(),"px"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.companies)}}let dt=(()=>{class o{constructor(e,n,i,a,s,c,g,f,p){this.dialog=e,this.companyService=n,this.utilService=i,this.CurUserService=a,this.translate=s,this.sanitizer=c,this.permissionService=g,this.route=f,this.permissions=p,this.selectedChange=new t.EventEmitter,this.reload=new t.EventEmitter,this.subs=new P.Y,this.config={},this.companyId="",this.isLoading=!0,this.searchCompany=new d.UntypedFormControl(""),this.searchCountry=new d.UntypedFormControl(""),this.searchZipCode=new d.UntypedFormControl(""),this.searchComp="",this.searchCoun="",this.searchZip="",this.filteredCompanies=[],this.companyCreation=!1,this.connectCompany=!1,this.isUserAdmtc=!1,this.isUserAcadir=!1,this.isUserAdmtcDir=!1,this.isUserAcadAdmin=!1,this.pageIndex=0,this.nowIndex=0,this.checkIndex=0,this.buttonNext=!0,this.buttonPreviouse=!1,this.totalData=0,this.start=0,this.end=1,this.messageDataEmpty=!1,this.isLoadingPagination=!1,this.companyReload=!1,this.isSubmitRequest=!1,this.myInnerHeight=1920,this.isDeleteAction=!1,this.isReset=!1,this.isFilterQuickSearch=!1}set curCompanyId(e){this._curCompanyId=e,this.companyId=e}get curCompanyId(){return this._curCompanyId}ngOnInit(){const e=this.route.snapshot.queryParamMap.get("open"),n=this.route.snapshot.queryParamMap.get("country"),i=this.route.snapshot.queryParamMap.get("company"),a=this.route.snapshot.queryParamMap.get("code"),s=this.route.snapshot.queryParamMap.get("schoolId"),c=this.route.snapshot.queryParamMap.get("titleId"),g=this.route.snapshot.queryParamMap.get("classId"),f=this.route.snapshot.queryParamMap.get("studentId"),p=this.route.snapshot.queryParamMap.get("companyTab"),h=this.route.snapshot.queryParamMap.get("selectedCompanyId"),S=this.route.snapshot.queryParamMap.get("selectedCompanyName"),Pi=this.route.snapshot.queryParamMap.get("selectedMentorId");h&&S&&(console.log(S),this.companyTab=p,this.searchCompany.patchValue(S),this.setCompanyFilter(S),this.isFilterQuickSearch=!0,this.quickSearchCompanyId=h,this.quickSearchCompanyName=S,this.quickSearchMentorId=Pi),e&&"company-creation"===e&&(this.dataPass={company_name:i,country:n,postal_code:a,zip_code:a,schoolId:s,titleId:c,classId:g,studentId:f},this.companyCreation=!0),this.subs.sink=this.companyService.getCountry().subscribe(k=>{this.countries=k},k=>{l().fire({type:"info",title:this.translate.instant("SORRY"),text:k&&k.message?this.translate.instant(k.message.replaceAll("GraphQL error: ","")):k,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}),this.getAutomaticHeight(),this.isUserAcadir=!!this.permissions.getPermission("Academic Director"),this.isUserAdmtcDir=!!this.permissions.getPermission("ADMTC Director"),this.isUserAcadAdmin=!!this.permissions.getPermission("Academic Admin"),this.isUserAdmtc=this.utilService.isUserEntityADMTC(),this.CurUser=this.CurUserService.getLocalStorageUser(),this.entityData=this.CurUser?.entities.find(k=>"Academic Director"===k?.type?.name||"Academic Admin"===k?.type?.name),this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""),this.filterCompaniesList(),this.filterCompany(),this.initZipCode()}getAutomaticHeight(){return this.myInnerHeight=window.innerHeight-365,this.myInnerHeight}selectCompany(e,n){if(!this.isDeleteAction){if(!this.companyService.childrenFormValidationStatus)return this.fireUnsavedDataWarningSwal(e);this.companyId=e,this.selectedChange.emit(this.companyId)}}filterCompaniesList(){this.subs.sink=this.searchCountry.valueChanges.pipe((0,$.O)("")).subscribe(e=>{0!==this.tabIndex&&(this.tabIndex=0),this.searchCoun=e?e.toLowerCase():"",this.isLoading=!0,this.filteredCompanies=null,this.companyId=null,this.pageIndex=0,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))})}initZipCode(){this.subs.sink=this.searchZipCode.valueChanges.pipe((0,A.b)(400)).subscribe(e=>{e.match(/[()|{}\[\]:;<>?,\/]/)||e.match(/\\/)?(this.searchZipCode.setValue(""),0!==this.tabIndex&&(this.tabIndex=0),this.searchZip="",this.isLoading=!0,this.filteredCompanies=null,this.companyId=null,this.pageIndex=0,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))):(0!==this.tabIndex&&(this.tabIndex=0),this.searchZip=e,this.isLoading=!0,this.filteredCompanies=null,this.companyId=null,this.pageIndex=0,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC("")))})}filterCompany(){this.subs.sink=this.searchCompany.valueChanges.pipe((0,A.b)(100)).subscribe(e=>{e&&e.length>=3&&(this.subs.sink=this.isUserAdmtc?this.companyService.getCompanyDropdownList(e.toLowerCase()).subscribe(n=>{this.companyList=n},n=>{this.CurUserService.postErrorLog(n),l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.companyService.getCompanyWithSchool(e.toLowerCase(),this.entityData.school._id).subscribe(n=>{this.companyList=n},n=>{this.CurUserService.postErrorLog(n),l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))})}setCompanyFilter(e){this.searchComp="AllM"===e?"":e.toLowerCase(),this.isLoading=!0,this.pageIndex=0,this.filteredCompanies=null,this.companyId=null,0!==this.tabIndex&&(this.tabIndex=0),this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}resetSearch(){this.isReset=!0,this.tabIndex=0,this.searchCompany.setValue(""),this.searchCountry.setValue(""),this.searchZipCode.setValue(""),this.companyList=[],this.searchCoun="",this.searchComp="",this.searchZip="",this.pageIndex=0,this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC("")}getCardCompanyByAcadir(e){this.subs.sink=this.companyService.getAllCompanyByAcadir(this.entityData.school._id,this.searchCoun?this.searchCoun:"",this.searchComp?this.searchComp:"",{limit:10,page:this.pageIndex?this.pageIndex:0},this.searchZip?this.searchZip:"").subscribe(c=>{this.isReset=!1,this.isLoadingPagination=!1,this.messageDataEmpty=!1,c&&c.length?(this.companiesData=c,this.filteredCompanies=this.companiesData,this.isLoading=!1,this.totalData=c[0].count_document?c[0].count_document:0,this.buttonNext=!(this.nowIndex>this.totalData),e&&this.goLastPage()):(this.isLoading=!1,this.messageDataEmpty=!0,this.totalData=0,e&&this.goLastPage()),this.isFilterQuickSearch?setTimeout(()=>{this.checkItemScrollTo(),this.selectCompany(this.quickSearchCompanyId,this.quickSearchCompanyName),this.isFilterQuickSearch=!1},200):(this.companyTab="",this.quickSearchMentorId="")},c=>{this.isReset=!1,console.log("[Company Data][Error] : ",c),this.CurUserService.postErrorLog(c),l().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}setNextPage(e){this.isLoadingPagination=!0,this.pageIndex=this.pageIndex+1,this.start=this.pageIndex,this.end=this.pageIndex+1,this.nowIndex=10*this.end,this.checkIndex=10*this.pageIndex,console.log("currentIndex : ",e),this.buttonNext=!(e>this.totalData),this.buttonPreviouse=0!==this.pageIndex,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}setPreviousePage(e){this.isLoadingPagination=!0,this.pageIndex=this.pageIndex-1,this.start=this.pageIndex,this.end=this.pageIndex+1,this.nowIndex=10*this.pageIndex,this.checkIndex=10*this.pageIndex,console.log("currentIndex : ",e),this.buttonPreviouse=0!==this.pageIndex,this.buttonNext=!(this.nowIndex>this.totalData),this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}goLastPage(){this.isLoadingPagination=!0;const n=Math.floor(this.totalData/10);this.start=n,this.end=n+1,this.pageIndex=n,this.nowIndex=10*this.end,this.checkIndex=10*this.end,console.log("Last Index : ",this.nowIndex," > ",this.totalData),this.buttonNext=!1,this.buttonPreviouse=!0,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}goFirstPage(){this.isLoadingPagination=!0,this.pageIndex=0,this.buttonNext=!0,this.buttonPreviouse=!1,this.start=0,this.end=1,this.nowIndex=1,this.checkIndex=1,this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}getCardCompanyADMTC(e){this.subs.sink=this.companyService.getAllCompanyByAdmtc(this.searchCoun?this.searchCoun:"",this.searchComp?this.searchComp:"",{limit:10,page:this.pageIndex?this.pageIndex:0},this.searchZip?this.searchZip:"").subscribe(c=>{this.isReset=!1,this.isLoadingPagination=!1,this.messageDataEmpty=!1,c&&c.length?(this.companiesData=c,this.filteredCompanies=this.companiesData,this.isLoading=!1,this.totalData=c[0].count_document?c[0].count_document:0,this.checkIndex+10>this.totalData?this.buttonNext=!1:(this.isLoading=!1,this.buttonNext=!0),e&&this.goLastPage()):(this.isLoading=!1,this.messageDataEmpty=!0,this.totalData=0,e&&this.goLastPage()),setTimeout(()=>{this.checkItemScrollTo()},200)},c=>{this.isReset=!1,this.CurUserService.postErrorLog(c),console.log("[Company Data][Error] : ",c),l().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectCompanyCard(e){this.companyId=e,this.companyService.setCompanyId(this.companyId)}selectNewCompany(e){this.goLastPage(),this.selectCompany(e.companyId,e.company_name)}connectingCompany(e){this.subs.sink=this.companyService.connectSchoolToCompany(this.companyId,this.entityData.school._id).subscribe(i=>{i&&(e?this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC("")):l().fire({type:"success",title:"Bravo !",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(a=>{this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}))},i=>{console.log("[Company Data][Error] : ",i),this.CurUserService.postErrorLog(i),l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}afterCreation(e){console.log(e),this.companyCreation=e.createCompany,this.companyId=e.companyId,this.connectCompany=e.connectCompany,this.pageIndex=0,this.buttonPreviouse=!1,this.start=this.pageIndex,this.end=this.pageIndex+1,this.connectCompany&&(this.isUserAcadir||this.isUserAcadAdmin)&&this.companyId&&this.connectingCompany(!0),this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}ngOnDestroy(){this.subs.unsubscribe()}deleteCompany(e,n){this.isDeleteAction=!0;let i=3;l().fire({type:"warning",title:this.translate.instant("Attention"),html:this.translate.instant("DISCONNECT_SCHOOL.DELETED",{name:n}),showCancelButton:!0,confirmButtonText:this.translate.instant("SWEET_ALERT.DELETE.CONFIRM",{timer:i}),cancelButtonText:this.translate.instant("SWEET_ALERT.DELETE.CANCEL"),onOpen:()=>{l().disableConfirmButton();const a=l().getConfirmButton(),s=setInterval(()=>{i-=1,a.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM")+" in "+i+" sec"},1e3);this.timeOutSwal=setTimeout(()=>{a.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM"),l().enableConfirmButton(),clearTimeout(s)},1e3*i)}}).then(a=>{clearTimeout(this.timeOutSwal),a.value?(this.isDeleteAction=!1,this.subs.sink=this.companyService.deleteCompany(e).subscribe(s=>{l().fire({type:"success",title:"Bravo!",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(c=>{this.reload.emit(!0)})},s=>{const c=String(s),g=c.indexOf("/"),p=c.slice(21,g);console.log("err : ",p),this.CurUserService.postErrorLog(s),l().fire({type:"info",title:this.translate.instant("DISCONNECT_SCHOOL.TITLE"),text:this.translate.instant("DISCONNECT_SCHOOL.INVALID"),confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})):this.isDeleteAction=!1})}canDeactivate(){let e;return e=!1,this.companyCreate&&this.companyCreate.companyCreation&&(e=!0),!e||new Promise((n,i)=>{l().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(a=>{n(!a.value)})})}resetCompanyFilter(){this.isLoading=!0,this.pageIndex=0,this.searchCountry.setValue(""),this.searchCoun="",this.companyId=null,0!==this.tabIndex&&(this.tabIndex=0),this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC(""))}getCompany(){this.subs.sink=this.searchCountry.valueChanges.subscribe(e=>{this.isLoading=!0,this.filteredCompanies=null,this.companyId=null,0!==this.tabIndex&&(this.tabIndex=0),this.searchComp=e.toLowerCase()},e=>{this.CurUserService.postErrorLog(e),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}imgURL(e){return this.sanitizer.bypassSecurityTrustUrl(e)}submitRequest(e){console.log(e),this.isSubmitRequest=!0,e&&(this.isReset||(this.isUserAcadir||this.isUserAcadAdmin?this.getCardCompanyByAcadir(""):(this.isUserAdmtc||this.isUserAdmtcDir)&&this.getCardCompanyADMTC("")))}imgRequest(e){console.log(e),e&&(this.filteredCompanies.forEach((n,i)=>{n._id===this.companyId&&(console.log(i),this.filteredCompanies[i].company_logo=e,this.indexLogo=i)}),this.imgURL(e))}checkItemScrollTo(){const e=document.getElementById("item-"+this.companyId);console.log(this.companyId),console.log(e),e&&e.scrollIntoView(!0)}fireUnsavedDataWarningSwal(e){l().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{if(n.value)return!1;this.companyId=e,this.companyService.childrenFormValidationStatus=!0,this.selectedChange.emit(this.companyId)})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.uw),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(xt.H7),t.\u0275\u0275directiveInject(Q.$),t.\u0275\u0275directiveInject(D.gz),t.\u0275\u0275directiveInject(nt.YI))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-list"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(Ot,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.companyCreate=i.first)}},inputs:{companies:"companies",isWaitingForResponse:"isWaitingForResponse",curCompanyId:"curCompanyId",formBranch:"formBranch"},outputs:{selectedChange:"selectedChange",reload:"reload"},decls:1,vars:1,consts:[["class","scrollbar company-list-scroll","id","style-4",3,"height","max-height",4,"ngIf"],["id","style-4",1,"scrollbar","company-list-scroll"],["class","company-list-mat-card mrgn-top-none",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"company-list-mat-card","mrgn-top-none",3,"ngClass","click"],[3,"id","ngClass"],[1,"p-grid"],[1,"p-col-2","company-list-icon-container"],["class","company-list-icon radius-50",3,"matTooltip","src",4,"ngIf"],["class","company-list-icon",3,"matTooltip",4,"ngIf"],[1,"p-col-10"],[1,"p-grid","no-padding"],[1,"p-col-12","no-padding","company-list-details"],[1,"no-margin","company-list-shortName",3,"matTooltip"],["class","p-col-12 no-padding company-list-details",4,"ngIf"],["class","p-col-1 no-padding btn-close",4,"ngIf"],[1,"company-list-icon","radius-50",3,"matTooltip","src"],[1,"company-list-icon",3,"matTooltip"],[1,"no-margin","one-line-text","fix-font-size"],[1,"p-col-1","no-padding","btn-close"],[3,"ngClass"],["class","icon-style font-20",3,"matTooltip","click",4,"ngIf"],[1,"icon-style","font-20",3,"matTooltip","click"]],template:function(e,n){1&e&&t.\u0275\u0275template(0,Et,2,5,"div",0),2&e&&t.\u0275\u0275property("ngIf",n.companies.length>0&&!n.isWaitingForResponse)},dependencies:[u.mk,u.sg,u.O5,R.a8,R.$j,w.Hw,z.gM,H.oO,C.X$],styles:[".top-space{margin-top:30px}table .mat-select-trigger{display:inline-table}table .mat-select-value{display:table-cell;max-width:0}table .mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}:host ::ng-deep table:not(.no-action-header):not(.notif-table) th{font-weight:400}:host ::ng-deep table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}:host ::ng-deep table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}:host ::ng-deep table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}:host ::ng-deep table.no-action-header th{font-weight:400}:host ::ng-deep table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}:host ::ng-deep table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}:host ::ng-deep table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}:host ::ng-deep table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}:host ::ng-deep table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}:host ::ng-deep table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}:host ::ng-deep table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}:host ::ng-deep table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}:host ::ng-deep table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}:host ::ng-deep table.no-action-header tbody tr:nth-child(even){background-color:#353535}:host ::ng-deep table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}:host ::ng-deep table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal{overflow:auto}.child-tab-font{font-size:.8rem}.center-spinner{display:flex;justify-content:center;align-items:center}.hide,.hidden{display:none!important}.header-div{border-bottom:1px solid black;display:flex;padding:1rem}.header-text{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align{align-items:baseline}.admtc-table-button,button.yellow-button.mat-raised-button,button.blue-patina-button.mat-raised-button{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button .mat-icon[svgicon],button.yellow-button.mat-raised-button .mat-icon[svgicon],button.blue-patina-button.mat-raised-button .mat-icon[svgicon]{margin-top:.5em;margin-right:.3em}.admtc-normal-button,button.yellow-button-normal.mat-raised-button{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button .mat-icon[svgicon],button.yellow-button-normal.mat-raised-button .mat-icon[svgicon]{margin-top:.3em;margin-right:.2em}.background-accent,button.yellow-button-normal.mat-raised-button,button.yellow-button.mat-raised-button{background-color:#fdd835!important;color:#000000de}.background-warn{background-color:red!important;color:#fff}.background-success{background-color:#4caf50!important;color:#fff}.background-primary{background-color:#607d8b!important;color:#fff}.background-medium-grey{background-color:#424242!important;color:#fff}.background-black{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button{background-color:#607d8b!important}:host ::ng-deep .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}:host ::ng-deep .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}:host ::ng-deep .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}:host ::ng-deep mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon,.red-icon,.purple-icon,.black-icon,.greenyellow-icon,.yellow-icon,.green-icon{font-size:25px;width:30px}.is-loading .mat-option-text{display:flex;justify-content:center}.display-flex{display:flex}.green-icon{color:#4caf50}.yellow-icon{color:#ff0}.greenyellow-icon{color:#adff2f}.black-icon{color:#000}.purple-icon{color:purple}.red-icon,.red-text{color:red}.text-white{color:#fff}.greenyellow-text{color:#adff2f!important}.mat-sort-header-container{justify-content:center}.tags{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn{background:#fdd835;width:10rem}.color{background:#607d8b;width:10rem}.alignment{text-align:right;padding-right:0}mat-form-field{width:100%}:host ::ng-deep .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor{color:#000}.yellow-border{border:2px solid #fdd835}.silver-border{border:2px solid whitesmoke}.red-border{border:2px solid red}.certification-rule-pop-up .mat-dialog-container{padding:0}.one-time-pop-up .mat-dialog-container{width:800px!important}.dark-mode-pop-up .mat-dialog-container{color:#fff;background:#303030}.grey-mode-pop-up .mat-dialog-container{color:#fff;background:#7c7c7c}.view-step-validation-pop-up .mat-dialog-container{max-height:590px}.image-preview-pop-up .mat-dialog-container{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up .mat-dialog-container{padding:0 24px 18px}.expected-doc-task .mat-dialog-container{padding:16px!important;overflow:visible}.no-padding-pop-up .mat-dialog-container{padding:0;overflow:visible}.questionnaire-simulation-pop-up .mat-dialog-container{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up .mat-dialog-container{padding:0;min-height:430px}.send-pro-evaluation-pop-up .mat-dialog-container{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white{background-color:#fafafa;color:#000}.editor-background-white .ck-editor__editable{min-height:140px!important}.small-text-fieldset{font-size:12px}.small-icon{transform:scale(.6)}.padding-0{padding:0!important}.mt-1rem{margin-top:1rem}.mr-1rem{margin-right:1rem}.mb-1rem{margin-bottom:1rem}.ellipsis-one-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title{color:#000}.icon-self-right{position:absolute;right:0;top:0;cursor:pointer}.dialog-body{color:#000}.no-padding{padding:0!important}.no-padding-x{padding-right:0!important;padding-left:0!important}.no-padding-y{padding-top:0!important;padding-bottom:0!important}.no-padding-r{padding-right:0!important}.no-padding-l{padding-left:0!important}.no-padding-t{padding-top:0!important}.no-padding-b{padding-bottom:0!important}.no-margin{margin:0}.align-center{text-align:center}.align-end{text-align:end}.one-line-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small .ck-editor__editable{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium .ck-editor__editable{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big .ck-editor__editable{min-height:500px!important;max-height:500px!important}.ckeditor-white-background{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc .mat-dialog-container{overflow:unset;padding:15px}.align-input-field{margin-bottom:9px}.hide-pagination-buttons .mat-paginator-navigation-first,.hide-pagination-buttons .mat-paginator-navigation-previous,.hide-pagination-buttons .mat-paginator-navigation-next,.hide-pagination-buttons .mat-paginator-navigation-last{display:none!important}.clickable{cursor:pointer}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap{display:flex;flex-flow:row wrap;box-sizing:border-box}#style-4::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}#style-4::-webkit-scrollbar{width:10px;background-color:#555}#style-4::-webkit-scrollbar-thumb{background-color:#909090;border:2px solid #555555}.company-select{background-color:#fdd835!important}.company-text{color:#000!important}.mat-card-adjust{padding-bottom:0!important;padding-top:0!important;height:75px;margin-left:13px!important}.company-list-mat-card{cursor:pointer;padding:10px 10px 10px 7px!important}.company-list-icon-container{align-self:center;padding-left:0!important}.company-list-details{text-align:left}.company-list-shortName{padding-top:.5rem;font-size:18px}.fix-font-size{font-size:12px}.company-list-icon{font-size:40px;max-width:40px!important;max-height:40px!important;vertical-align:middle;margin-left:10px}.company-list-delete-button{float:right;transform:scale(.9);background-color:#000!important}.delete-button{color:red}.spinner-style-adjust{text-align:center!important;display:contents}.fix-company-list-width{margin-top:10px;width:420px}.company-list-scroll{overflow-x:hidden;overflow-y:auto}.spinner-wrapper{width:100%;height:320px;display:flex;justify-content:center;align-items:center;top:0;left:0;z-index:998}.btn-placement{position:absolute;right:7px;padding:15px .5em 0}.float-left{float:left}.btn-center{text-align:center;display:flex;align-items:center;justify-content:center;position:relative}.btn-close{padding-top:7px;float:right;padding-left:0;color:#c7c7c7}.font-20{float:right;width:auto;font-size:20px!important}.display-block{display:block}.btn-right{float:right;position:relative;margin-right:10px!important}.info-pagination{color:#c7c7c7}.label-center{text-align:center;padding-top:17px;font-size:12px}.text-empty{height:auto;margin:3% auto;font-size:20px;display:block;width:100%;position:relative;text-align:center;vertical-align:middle;color:#e4e7ef}.left-margin{margin-left:10px}.paginator-controller{width:28px!important;float:left;margin-top:5px!important}.button-pagination{margin-top:7px;margin-right:0!important;background-color:transparent!important;box-shadow:none!important;min-width:25px!important;padding:0;text-align:center;float:left;vertical-align:middle;display:block}.btn-page{text-align:center;padding-top:0;font-size:0px;float:left}.pad-right-20{padding-right:20px}.float-right{float:right}.radius-50{border-radius:50%;width:40px;margin-left:10px}.pad-top-2{padding-top:2px}.mrgn-top-none{margin-top:0!important}.text-auto{margin:auto}.pad-left-24{padding-left:24px}\n"],encapsulation:2}),o})();var L=m(37084);function wt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"mat-progress-spinner",9),t.\u0275\u0275elementEnd())}function kt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",19),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.refresh())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"sync"),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"COMPANY.Update branch details"))}function At(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"button",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,null==e.company?null:e.company.company_status)," ")}}function Bt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"mat-icon",21),t.\u0275\u0275elementStart(2,"span",22),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null!=e.company&&null!=e.company.company_addresses[0]&&e.company.company_addresses[0].country&&"france"!==(null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase())?(null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].postal_code)+" "+(null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].country):null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].address)}}const Ft=function(o){return{"title-refresh":o}};function Dt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),t.\u0275\u0275template(4,kt,3,3,"mat-icon",14),t.\u0275\u0275elementStart(5,"h4",15),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",13),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementStart(10,"span")(11,"mat-icon"),t.\u0275\u0275text(12,"arrow_right"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"span"),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,At,3,3,"button",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",17),t.\u0275\u0275template(17,Bt,4,1,"div",18),t.\u0275\u0275elementEnd()()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf","france"===(null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(10,Ft,"france"===(null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase()))),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",null!=e.company&&null!=e.company.company_entity_id&&e.company.company_entity_id.company_name?e.company.company_entity_id.company_name+" - ":""," ",null==e.company?null:e.company.company_name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,8,"COMPANY.SIRET")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_RC),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.company?null:e.company.company_status),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==e.company?null:e.company.company_addresses.length)}}let Nt=(()=>{class o{constructor(e){this.companyService=e,this.isRefresh=new t.EventEmitter,this.isWaitingForResponse=!1}ngOnInit(){this.getOneCompany()}ngOnChanges(){this.companyId&&this.getOneCompany()}getOneCompany(){this.isWaitingForResponse=!0,this.companyService.getOneCompany(this.companyId).subscribe(e=>{e&&(this.company=e),this.isWaitingForResponse=!1},e=>{this.company=null,console.log(e),this.isWaitingForResponse=!1})}refresh(){this.isWaitingForResponse=!0,this.companyService.RefreshCompany(this.companyId).subscribe(e=>{e&&this.isRefresh.emit(!0),this.isWaitingForResponse=!1},e=>{console.log(e),this.isWaitingForResponse=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-branch-summary"]],inputs:{companyId:"companyId"},outputs:{isRefresh:"isRefresh"},features:[t.\u0275\u0275NgOnChangesFeature],decls:11,vars:6,consts:[[1,"example-headers-align","summary"],["accordion",""],[1,"panel-spacing",3,"expanded"],[1,"background-primary","panel-header"],[2,"color","white","align-self","center","margin","0px"],[1,"pane-divider"],["class","loading-indicator",4,"ngIf"],["class","detail p-grid",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[1,"detail","p-grid"],[1,"p-col","no-padding"],[1,"p-grid"],[1,"p-col-12","p-grid"],["class","refresh",3,"matTooltip","click",4,"ngIf"],[2,"text-decoration","underline","margin-bottom","0px",3,"ngClass"],["mat-raised-button","","class","green-btn mr-left",4,"ngIf"],[1,"p-col-12","galu",2,"padding-top","0px"],["class","p-grid",4,"ngIf"],[1,"refresh",3,"matTooltip","click"],["mat-raised-button","",1,"green-btn","mr-left"],["svgIcon","map-legend",1,"map"],[2,"margin-left","30px"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-accordion",0,1)(2,"mat-expansion-panel",2)(3,"mat-expansion-panel-header",3)(4,"mat-panel-title")(5,"h4",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",5),t.\u0275\u0275template(9,wt,2,0,"div",6),t.\u0275\u0275template(10,Dt,18,12,"div",7),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("expanded",n.companyId),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,"COMPANY.Branch Summary")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse))},dependencies:[u.mk,u.O5,T.lW,L.pp,L.ib,L.yz,L.yK,w.Hw,E.Ou,z.gM,H.oO,C.X$],styles:[".green-btn[_ngcontent-%COMP%]{background-color:green!important;cursor:default;height:22px!important;padding:0!important;text-align:center;display:flex;align-items:center;justify-content:center}.status[_ngcontent-%COMP%]{margin-right:10px}.summary[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0 15px 10px;height:130px}.detail[_ngcontent-%COMP%]{margin-top:15px!important}.mr-left[_ngcontent-%COMP%]{margin-left:10px}.mr-right[_ngcontent-%COMP%]{margin-right:7px!important}.panel-header[_ngcontent-%COMP%]{color:#fff;font-size:16px;height:30px!important}.arrow[_ngcontent-%COMP%]{position:absolute;top:96px}.map[_ngcontent-%COMP%]{display:inline-flex;align-self:baseline;margin-right:8px}.refresh[_ngcontent-%COMP%]{display:inline-flex;align-self:baseline;margin-right:8px;transform:rotate(130deg);color:#ffd740;cursor:pointer}.company-name[_ngcontent-%COMP%]{text-decoration:underline;margin-bottom:0;margin-left:25px}.title-refresh[_ngcontent-%COMP%]{margin-left:25px}.galu[_ngcontent-%COMP%]{width:800px}"]}),o})();var B=m(3848),lt=m(58840),j=m(15439);function Rt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3("",t.\u0275\u0275pipeBind1(2,3,null==e.company?null:e.company.no_of_employee_in_france)," ",null!=e.company&&e.company.no_of_employee_in_france&&null!=e.company&&e.company.no_of_employee_in_france_by_year?t.\u0275\u0275pipeBind1(3,5,"in"):""," ",null==e.company?null:e.company.no_of_employee_in_france_by_year,"")}}function Lt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_of_employee_in_france)}}let Ut=(()=>{class o{constructor(e){this.companyService=e}ngOnInit(){}getDate(e){return j(e).format("DD/MM/YYYY")}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-branch-identity-display"]],inputs:{branchId:"branchId",company:"company"},decls:80,vars:44,consts:[[1,"mr-top"],[1,"p-col"],[1,"p-grid"],[1,"p-col-12"],[1,"text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",4)(8,"ul")(9,"li")(10,"span"),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(13,":"),t.\u0275\u0275elementStart(14,"span"),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"li")(17,"span"),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(20,":"),t.\u0275\u0275elementStart(21,"span"),t.\u0275\u0275text(22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"li")(24,"span"),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(27,":"),t.\u0275\u0275elementStart(28,"span"),t.\u0275\u0275text(29),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"li")(31,"span"),t.\u0275\u0275text(32),t.\u0275\u0275pipe(33,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(34,":"),t.\u0275\u0275elementStart(35,"span"),t.\u0275\u0275text(36),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(37,"li")(38,"span"),t.\u0275\u0275text(39),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(41,":"),t.\u0275\u0275elementStart(42,"span"),t.\u0275\u0275text(43),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(44,"li")(45,"span"),t.\u0275\u0275text(46),t.\u0275\u0275pipe(47,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(48,":"),t.\u0275\u0275elementStart(49,"span"),t.\u0275\u0275text(50),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(51,"li")(52,"span"),t.\u0275\u0275text(53),t.\u0275\u0275pipe(54,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(55,":"),t.\u0275\u0275elementStart(56,"span"),t.\u0275\u0275text(57),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(58,"li")(59,"span"),t.\u0275\u0275text(60),t.\u0275\u0275pipe(61,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(62,": "),t.\u0275\u0275elementContainerStart(63,5),t.\u0275\u0275template(64,Rt,4,7,"span",6),t.\u0275\u0275template(65,Lt,2,1,"span",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(66,"li")(67,"span"),t.\u0275\u0275text(68),t.\u0275\u0275pipe(69,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(70,":"),t.\u0275\u0275elementStart(71,"span"),t.\u0275\u0275text(72),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(73,"li")(74,"span"),t.\u0275\u0275text(75),t.\u0275\u0275pipe(76,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(77,":"),t.\u0275\u0275elementStart(78,"span"),t.\u0275\u0275text(79),t.\u0275\u0275elementEnd()()()()()()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,22,"COMPANY.Information about this branche")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,24,"COMPANY.Branche Emblem")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",(null==n.company?null:n.company.company_name)||(null==n.company?null:n.company.company_name_2)||(null==n.company?null:n.company.company_name_3)," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(19,26,"COMPANY.RC")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.no_RC),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(26,28,"COMPANY.NIC Key")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.nic),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(33,30,"COMPANY.COMPANY_TYPE")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.type_of_company),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(40,32,"COMPANY.ZIPCODE")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.company_addresses[0].postal_code),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(47,34,"COMPANY.COUNTRY")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.company_addresses[0].country),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(54,36,"COMPANY.Main activity of the establishment (NAF/APE)")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==n.company?null:n.company.activity),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(61,38,"COMPANY.Slice of salaried workforce")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngSwitch",null==n.company||null==n.company.company_addresses[0]||null==n.company.company_addresses[0].country?null:n.company.company_addresses[0].country.toLowerCase()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","france"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(69,40,"COMPANY.Creation date")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.getDate(null==n.company?null:n.company.created_at)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(76,42,"COMPANY.Last update")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",n.getDate(null==n.company?null:n.company.updated_at)," "))},dependencies:[u.RF,u.n9,u.ED,R.a8,C.X$],styles:[".mr-top[_ngcontent-%COMP%]{margin-top:10px;padding:0 10px;margin-bottom:10px;border:1px solid grey}.right-border[_ngcontent-%COMP%]{border-right:1px solid grey}.text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:table;padding-left:10px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table-row}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;padding-right:50px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-of-type{padding-left:20px}"]}),o})();var I=m(59549),U=m(284),ct=m(84385);function Vt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e.name)," ")}}function Yt(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0,16),t.\u0275\u0275elementStart(1,"mat-form-field"),t.\u0275\u0275element(2,"input",17),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-form-field")(5,"mat-label"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"mat-select",18),t.\u0275\u0275template(9,Vt,3,4,"mat-option",19),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.index,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroupName",e),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,5,"COMPANY.ZIPCODE")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,7,"COMPANY.COUNTRY")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.countries)}}function Wt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"mat-progress-spinner",22),t.\u0275\u0275elementEnd())}let Ht=(()=>{class o{constructor(e,n,i,a,s,c){this.fb=e,this.translate=n,this.companyService=i,this.permission=a,this.utilService=s,this.CurUserService=c,this.subs=new P.Y,this.saveFormNonFrance=new t.EventEmitter,this.isWaitingForResponse=!1,this.isUserAcadir=!1,this.isUserAcadAdmin=!1,this.isUserAdmtc=!1,this.isLoading=!1,this.countries=[]}ngOnInit(){this.initForm(),this.patchFormValue(),this.getListCountries(),this.CurUser=this.CurUserService.getLocalStorageUser(),this.schoolId=this.CurUser.entities&&this.CurUser.entities[0].school&&this.CurUser.entities[0].school._id?this.CurUser.entities[0].school._id:null,this.entityData=this.CurUser.entities.find(e=>"Academic Director"===e.type.name),this.isUserAcadir=!!this.permission.getPermission("Academic Director"),this.isUserAcadAdmin=!!this.permission.getPermission("Academic Admin"),this.isUserAdmtc=this.utilService.isUserEntityADMTC()}getListCountries(){this.subs.sink=this.companyService.getCountry().subscribe(e=>{const n=e.filter(i=>"France"!==i.name);this.countries=n,this.countriesList=n})}initForm(){this.editBranchCompany=this.fb.group({company_name:["",d.Validators.required],no_RC:["",d.Validators.required],nic:[""],type_of_company:["",d.Validators.required],company_addresses:this.fb.array([this.initAddressForm()]),activity:["",d.Validators.required],no_of_employee_in_france:["",d.Validators.required]})}initAddressForm(){return this.fb.group({address:[""],city:[""],country:["",d.Validators.required],department:[""],is_main_address:[!0],postal_code:["",d.Validators.required],region:[""]})}get companyAddressFormArray(){return this.editBranchCompany.get("company_addresses")}patchFormValue(){this.company&&(this.editBranchCompany.patchValue(this.company),this.initialForm=b.cloneDeep(this.editBranchCompany.value)),this.subs.sink=this.editBranchCompany.valueChanges.subscribe(()=>{this.isFormChanged()})}isFormChanged(){const e=JSON.stringify(this.initialForm);return JSON.stringify(this.editBranchCompany.value)===e?(this.companyService.childrenFormValidationStatus=!0,!0):(this.companyService.childrenFormValidationStatus=!1,!1)}onSave(){this.editBranchCompany.valid?this.saveUpdate():(this.editBranchCompany.markAllAsTouched(),l().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}))}saveUpdate(){const e=this.editBranchCompany.value;this.isWaitingForResponse=!0,this.subs.sink=this.companyService.updateCompany(this.branchId,e).subscribe(n=>{this.isWaitingForResponse=!1,this.swalSuccess(e)},n=>{this.CurUserService.postErrorLog(n),this.isWaitingForResponse=!1,this.swalError(n)})}swalSuccess(e){l().fire({type:"success",title:this.translate.instant("COMPANY.UPDATEMSG",{shortName:e.company_name}),confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.saveFormNonFrance.emit(!0),this.companyService.childrenFormValidationStatus=!0,this.companyService.setRefreshEditCompany(!0)})}swalError(e){this.editBranchCompany.markAllAsTouched(),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(d.UntypedFormBuilder),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(nt.YI),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-branch-identity-form"]],inputs:{company:"company",branchId:"branchId"},outputs:{saveFormNonFrance:"saveFormNonFrance"},decls:37,vars:29,consts:[["mat-raised-button","","color","accent",1,"btn-save",3,"click"],[1,"mat-icon-default"],[1,"mr-top"],[1,"p-col"],[1,"p-grid"],[1,"p-col-12"],[1,"margin-form",3,"formGroup"],["matInput","","required","","formControlName","company_name",3,"placeholder"],["matInput","","required","","formControlName","no_RC",3,"placeholder"],["matInput","","formControlName","nic",3,"placeholder"],["matInput","","required","","formControlName","type_of_company",3,"placeholder"],["formArrayName","company_addresses"],[3,"formGroupName",4,"ngFor","ngForOf"],["matInput","","required","","formControlName","activity",3,"placeholder"],["matInput","","required","","formControlName","no_of_employee_in_france",3,"placeholder"],["class","loading-indicator",4,"ngIf"],[3,"formGroupName"],["matInput","","required","","formControlName","postal_code",3,"placeholder"],["formControlName","country","required","","panelClass","custom-matselect-dropdown",3,"disableOptionCentering"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div")(1,"button",0),t.\u0275\u0275listener("click",function(){return n.onSave()}),t.\u0275\u0275elementStart(2,"mat-icon",1),t.\u0275\u0275text(3,"save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"titlecase"),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"mat-card",2)(8,"div",3)(9,"div",4)(10,"div",5)(11,"h4"),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",6)(15,"div",4)(16,"mat-form-field"),t.\u0275\u0275element(17,"input",7),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"mat-form-field"),t.\u0275\u0275element(20,"input",8),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"mat-form-field"),t.\u0275\u0275element(23,"input",9),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"mat-form-field"),t.\u0275\u0275element(26,"input",10),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerStart(28,11),t.\u0275\u0275template(29,Yt,10,9,"ng-container",12),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementStart(30,"mat-form-field"),t.\u0275\u0275element(31,"input",13),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"mat-form-field"),t.\u0275\u0275element(34,"input",14),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(36,Wt,2,0,"div",15),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,11,t.\u0275\u0275pipeBind1(6,13,"COMPANY.SAVE"))," "),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(13,15,"COMPANY.Information about this branche")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",n.editBranchCompany),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(18,17,"COMPANY.Branche Emblem")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(21,19,"COMPANY.RC")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(24,21,"COMPANY.NIC Key")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(27,23,"COMPANY.COMPANY_TYPE")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.companyAddressFormArray.controls),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(32,25,"COMPANY.Main activity of the establishment (NAF/APE)")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(35,27,"COMPANY.Slice of salaried workforce")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[u.sg,u.O5,W.ey,T.lW,R.a8,w.Hw,I.KE,I.hX,U.Nt,E.Ou,ct.gD,d.DefaultValueAccessor,d.NgControlStatus,d.NgControlStatusGroup,d.RequiredValidator,d.FormGroupDirective,d.FormControlName,d.FormGroupName,d.FormArrayName,u.rS,C.X$],styles:[".mr-top[_ngcontent-%COMP%]{margin-top:10px;padding:0 10px;margin-bottom:10px;border:1px solid grey}.right-border[_ngcontent-%COMP%]{border-right:1px solid grey}.margin-form[_ngcontent-%COMP%]{margin-left:7px}.btn-save[_ngcontent-%COMP%]{float:right;z-index:99;bottom:35px}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}"]}),o})();function zt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.editForm())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.Edit")))}function jt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.onCancel())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"Cancel")," "))}function Gt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275template(1,zt,3,3,"button",5),t.\u0275\u0275template(2,jt,3,3,"button",5),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!1===e.editMode&&e.permission.editCompanyInCompany()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===e.editMode)}}function $t(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-branch-identity-display",7),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("branchId",e.branchId)("company",e.companyData)}}function Qt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ms-branch-identity-form",8),t.\u0275\u0275listener("saveFormNonFrance",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.isSaveForm(i))}),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("branchId",e.branchId)("company",e.companyData)}}let qt=(()=>{class o{constructor(e,n,i,a){this.companyService=e,this.translate=n,this.permission=i,this.authService=a,this.selectedIndex=0,this.editMode=!1}ngOnInit(){this.getOneCompany()}ngOnChanges(){this.branchId&&(this.editMode=!1,this.getOneCompany())}getOneCompany(){this.companyService.getOneCompany(this.branchId).subscribe(e=>{e&&(this.companyData=e,this.outCompanyLocation())},e=>{this.authService.postErrorLog(e),this.companyData=null})}outCompanyLocation(){const e=this.companyData.company_addresses.find(i=>!0===i.is_main_address);this.companyLocation=e?e.country:0}editForm(){this.editMode=!0}onCancel(){if(!this.companyService.childrenFormValidationStatus)return this.fireUnsavedDataWarningSwal();this.editMode=!1}isSaveForm(e){!0===e&&(this.editMode=!1)}fireUnsavedDataWarningSwal(){l().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(e=>{if(e.value)return!1;this.companyService.childrenFormValidationStatus=!0,this.editMode=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(Q.$),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-branch-identity-tab"]],inputs:{branchId:"branchId"},features:[t.\u0275\u0275NgOnChangesFeature],decls:4,vars:3,consts:[["class","float-right",4,"ngIf"],[1,"display-container"],[3,"branchId","company",4,"ngIf"],[3,"branchId","company","saveFormNonFrance",4,"ngIf"],[1,"float-right"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[3,"branchId","company"],[3,"branchId","company","saveFormNonFrance"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,Gt,3,2,"div",0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,$t,1,2,"ms-branch-identity-display",2),t.\u0275\u0275template(3,Qt,1,2,"ms-branch-identity-form",3),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("ngIf","france"!==n.companyLocation&&0!==n.companyLocation),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===n.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!0===n.editMode))},dependencies:[u.O5,T.lW,Ut,Ht,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.float-right[_ngcontent-%COMP%]{padding-top:5px;margin-bottom:15px;right:5px}.display-container[_ngcontent-%COMP%]{margin-top:40px}"]}),o})();var x=m(53626),Kt=m(95017),q=m(96308),mt=m(91135),Xt=m(25508),V=m(24850),ot=m(9749),K=m(29521),Zt=m(91013),Jt=m(80484),Y=m(73555),X=m(47957),it=m(77331),J=m(37204);const te=["languagesInput"],ee=["recipientCc"],ne=["recipientBcc"],oe=["auto"],ie=["myInput"];function ae(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-icon",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.sendMail())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"send"),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"MailBox.SEND"))}function re(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",27),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"send"),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"MailBox.SEND"))}function se(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",30),t.\u0275\u0275text(1,"cancel"),t.\u0275\u0275elementEnd())}function le(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-chip",28),t.\u0275\u0275listener("removed",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.removeTo(a))}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,se,2,0,"mat-icon",29),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("selectable",n.selectable)("removable",n.removable),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.removable)}}function ce(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",31),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",e)("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function pe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",30),t.\u0275\u0275text(1,"cancel"),t.\u0275\u0275elementEnd())}function de(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-chip",28),t.\u0275\u0275listener("removed",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.removeCc(a))}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,pe,2,0,"mat-icon",29),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("selectable",n.selectable)("removable",n.removable),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.removable)}}function me(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",36),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.resetValueCc())}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",e)("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function he(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-chip-list",null,32),t.\u0275\u0275template(3,de,3,4,"mat-chip",14),t.\u0275\u0275elementStart(4,"input",33,34),t.\u0275\u0275listener("matChipInputTokenEnd",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.addCc(i))}),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"mat-autocomplete",17,18),t.\u0275\u0275listener("optionSelected",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setSelectedEmailCc(i))}),t.\u0275\u0275template(9,me,2,3,"mat-option",35),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275reference(2),n=t.\u0275\u0275reference(8),i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",i.selectedEmailCc),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder"," ",t.\u0275\u0275pipeBind1(6,7,"MailBox.composeMail.cc"),""),t.\u0275\u0275property("matAutocomplete",n)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",i.separatorKeysCodesCc)("matChipInputAddOnBlur",i.addOnBlurCc),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",i.emailAddressesListCc)}}function ge(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",30),t.\u0275\u0275text(1,"cancel"),t.\u0275\u0275elementEnd())}function ue(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-chip",28),t.\u0275\u0275listener("removed",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.removeBcc(a))}),t.\u0275\u0275text(1),t.\u0275\u0275template(2,ge,2,0,"mat-icon",29),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("selectable",n.selectable)("removable",n.removable),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.removable)}}function fe(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",31),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",e)("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function _e(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",12)(1,"mat-chip-list",null,37),t.\u0275\u0275template(3,ue,3,4,"mat-chip",14),t.\u0275\u0275elementStart(4,"input",38,39),t.\u0275\u0275listener("matChipInputTokenEnd",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.addBcc(i))}),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"mat-autocomplete",17,18),t.\u0275\u0275listener("optionSelected",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.setSelectedEmailBcc(i))}),t.\u0275\u0275template(9,fe,2,3,"mat-option",19),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275reference(2),n=t.\u0275\u0275reference(8),i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",i.selectedEmailBcc),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder"," ",t.\u0275\u0275pipeBind1(6,7,"MailBox.composeMail.bcc"),""),t.\u0275\u0275property("matAutocomplete",n)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",i.separatorKeysCodesBcc)("matChipInputAddOnBlur",i.addOnBlurBcc),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",i.emailAddressesListBcc)}}function Ce(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",40)(1,"button",41)(2,"mat-icon"),t.\u0275\u0275text(3,"insert_drive_file"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"label"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",42),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.removeAttachment(a))}),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8," close "),t.\u0275\u0275elementEnd()()()}if(2&o){const e=r.$implicit;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.name)}}function ye(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",43),t.\u0275\u0275element(1,"mat-progress-spinner",44),t.\u0275\u0275elementEnd())}var F=(()=>{return(o=F||(F={})).LABEL="LABEL",o.VALUE="VALUE",o.OBJECT="OBJECT",F;var o})();let be=(()=>{class o{constructor(e,n,i,a,s,c,g,f){this.data=e,this.translate=n,this.userService=i,this.mailboxService=a,this.fileUploadService=s,this.dialogref=c,this.fb=g,this.utilService=f,this.subs=new P.Y,this.Editor=ot,this.showCC=!1,this.showBCC=!1,this.config={},this.selectedEmailTo=[],this.selectedEmailCc=[],this.selectedEmailBcc=[],this.selectedRecepientsList=[],this.ccselectedRecepientsList=[],this.bccselectedRecepientsList=[],this.recpList=[],this.recpListCc=[],this.recpListBcc=[],this.emailAddressesListTo=[],this.emailAddressesListCc=[],this.emailAddressesListBcc=[],this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.addOnBlurCc=!0,this.addOnBlurBcc=!0,this.showCCInput=!1,this.showBCCInput=!1,this.allowOther=!1,this.returnType=F.LABEL,this.optionSelected=new t.EventEmitter,this.separatorKeysCodes=[K.K5,K.OC],this.separatorKeysCodesCc=[K.K5,K.OC],this.separatorKeysCodesBcc=[K.K5,K.OC],this.attachmnetsPaths=[],this.isGroupEmail=!1,this.isUserAdmtc=!1,this.isUserAcadir=!1,this.isWaitingForResponse=!1,this.sendEmailForm=this.fb.group({to:["",d.Validators.required],cc:["",d.Validators.required],bcc:["",d.Validators.required],subject:["",d.Validators.required],message:["",d.Validators.required]})}ngOnInit(){this.isPermission=this.userService.getPermission(),this.getCurrentUser(),this.getRecipientsData(),this.getSchoolAcadirData()}getSchoolAcadirData(){if(Array.isArray(this.data))for(const e of this.data)this.preSelectedEmail=e.civility+" "+e.first_name+" "+e.last_name+" <"+e.email+">",this.selectedEmailTo.push(this.translate.instant(e.civility)+" "+e.first_name+" "+e.last_name+" <"+e.email+">"),this.emailAddressesListTo.push(this.preSelectedEmail),this.validateEmail(e.email)&&this.selectedRecepientsList.push(e.email),this.recpList.push(e.email),this.sendEmailForm.get("to").setValue(null),this.getEmailMessage();else this.preSelectedEmail=this.data.civility+" "+this.data.first_name+" "+this.data.last_name+" <"+this.data.email+">",this.selectedEmailTo.push(this.translate.instant(this.data.civility)+" "+this.data.first_name+" "+this.data.last_name+" <"+this.data.email+">"),this.emailAddressesListTo.push(this.preSelectedEmail),this.validateEmail(this.data.email)&&this.selectedRecepientsList.push(this.data.email),this.recpList.push(this.data.email),this.sendEmailForm.get("to").setValue(null),this.getEmailMessage()}getEmailMessage(){if(Array.isArray(this.data)){let e="";for(const s of this.data)e=e+this.translate.instant(s.civility)+" "+s.first_name+" "+s.last_name+", ";const n=e+"<p></p><p></p><p></p><p></p>"+this.translate.instant(this.currentUser.civility)+" "+this.currentUser.first_name+" "+this.currentUser.last_name,i=this.currentUser.entities.filter(s=>s.type.name===this.isPermission[0]),a=b.uniqBy(i,"school.short_name");e+=this.currentUser?.position?",<br>"+this.currentUser?.position:"",e+=a&&a.length&&a[0].school&&a[0].school.short_name?",<br>"+a[0].school.short_name:"",this.sendEmailForm.get("message").setValue(n)}else{let e="";e=e+this.translate.instant(this.data.civility)+" "+this.data.first_name+" "+this.data.last_name+", ";const n=e+"<p></p><p></p><p></p><p></p>"+this.translate.instant(this.currentUser.civility)+" "+this.currentUser.first_name+" "+this.currentUser.last_name,i=this.currentUser.entities.filter(s=>s.type.name===this.isPermission[0]),a=b.uniqBy(i,"school.short_name");e+=this.currentUser?.position?",<br>"+this.currentUser?.position:"",e+=a&&a.length&&a[0].school&&a[0].school.short_name?",<br>"+a[0].school.short_name:"",this.sendEmailForm.get("message").setValue(n)}}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}setSelectedEmail(e,n){n.setValue(e)}closeDialog(){l().fire({title:this.translate.instant("MailBox.composeMail.DRAFT.TITLE"),html:this.translate.instant("MailBox.composeMail.DRAFT.TEXT"),type:"warning",showCancelButton:!0,confirmButtonText:this.translate.instant("MailBox.composeMail.DRAFT.CONFIRMBTN"),cancelButtonText:this.translate.instant("MailBox.composeMail.DRAFT.DECBTN")}).then(e=>{e.value?this.saveDraft():this.dialogref.close()})}saveDraft(){const e=this.sendEmailForm.value;if(""!==e.subject&&""!==e.message&&void 0!==e.message){const n=[];this.mailData={};const i=this.recpList,a=this.recpListCc,s=this.recpListBcc;this.currentUser=this.userService.getLocalStorageUser();const c={sender:this.currentUser.email,is_read:!1,mail_type:"draft"};if(i){const p=i.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"a",is_read:!1,mail_type:"draft"})}if(a){const p=a.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"cc",is_read:!1,mail_type:"draft"})}if(s){const p=s.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"c",is_read:!1,mail_type:"draft"})}const g=[],f=[];this.attachmnetsPaths.forEach(p=>{const h={file_name:p.name,path:p.path};f.push(p.name),g.push(h)}),this.mailData.sender_property=c,this.mailData.recipient_properties=n,this.mailData.subject=e.subject,this.mailData.message=e.message,this.mailData.is_sent=!1,this.mailData.status="active",this.mailData.is_urgent_mail=!1,this.mailData.attachments=f,this.mailData.file_attachments=g,this.mailData.tags=["draft"],this.isGroupEmail&&(this.mailData.is_group_parent=this.isGroupEmail,this.mailData.user_type_selection=e.user_type_selection,this.mailData.group_detail=this.computeGroupDetails()),this.mailboxService.createMail(this.mailData).subscribe(p=>{this.dialogref.close(),l().fire({type:"info",title:this.translate.instant("MailBox.MESSAGES.DRAFTMSG"),text:"",confirmButtonText:this.translate.instant("MailBox.MESSAGES.THANK")})},p=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(p),l().fire({type:"warning",title:this.translate.instant("Sorry"),text:p&&p.message?this.translate.instant(p.message.replaceAll("GraphQL error: ","")):p,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}else l().fire({type:"warning",title:this.translate.instant("MENTOREVALUATION.EMAILTEMPLATE.SUBJECT.validation1"),text:"",confirmButtonText:"OK"})}sendMail(){this.isWaitingForResponse=!0;const e=this.sendEmailForm.value;if(""!==e.subject||""!==e.message&&void 0!==e.message){const n=[];this.mailData={};const i=this.recpList,a=this.recpListCc,s=this.recpListBcc;this.currentUser=this.userService.getLocalStorageUser();const c={sender:this.currentUser.email,is_read:!1,mail_type:"sent"};if(i){const p=i.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"a",is_read:!1,mail_type:"inbox"})}if(a){const p=a.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"cc",is_read:!1,mail_type:"inbox"})}if(s){const p=s.toString().split(",");for(let h=0;h<p.length;h++)p[h]=p[h].replace(/^\s*/,"").replace(/\s*$/,""),this.validateEmail(p[h])&&n.push({recipients:[p[h]],rank:"c",is_read:!1,mail_type:"inbox"})}const g=[],f=[];this.attachmnetsPaths.forEach(p=>{const h={file_name:p.name,path:p.path};f.push(p.name),g.push(h)}),this.mailData.sender_property=c,this.mailData.recipient_properties=n,this.mailData.subject=e.subject,this.mailData.message=e.message,this.mailData.is_sent=!0,this.mailData.status="active",this.mailData.attachments=f,this.mailData.file_attachments=g,this.mailData.tags=["sent"],this.isGroupEmail&&(this.mailData.is_group_parent=this.isGroupEmail,this.mailData.user_type_selection=e.user_type_selection,this.mailData.group_detail=this.computeGroupDetails()),this.mailboxService.createMail(this.mailData).subscribe(p=>{this.isWaitingForResponse=!1,this.dialogref.close(),l().fire({title:this.translate.instant("MailBox.composeMail.MESSAGES.TITLE"),text:this.translate.instant("MailBox.composeMail.MESSAGES.TEXT"),allowEscapeKey:!0,type:"success",confirmButtonText:this.translate.instant("MailBox.composeMail.MESSAGES.CONFIRMBTN")})},p=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(p),l().fire({type:"warning",title:this.translate.instant("Sorry"),text:p&&p.message?this.translate.instant(p.message.replaceAll("GraphQL error: ","")):p,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}setSelectedEmailTo(e){const n=e.option.value,i=n.split(" ");let a="";i.forEach(S=>{a=S});const c=a.replace("<","").replace(">","");this.validateEmail(c)&&(this.selectedEmailTo.push(n),this.selectedRecepientsList.push(n));const g=n.split(" ");let f="";g.forEach(S=>{f=S});const h=f.replace("<","").replace(">","");this.recpList.push(h),this.languagesInput.nativeElement.value="",this.sendEmailForm.get("to").setValue(null),this.emitSelectedLanguagesTo()}setSelectedEmailCc(e){const n=e.option.value,i=n.split(" ");let a="";i.forEach(S=>{a=S});const c=a.replace("<","").replace(">","");this.validateEmail(c)&&(this.selectedEmailCc.push(n),this.selectedRecepientsList.push(n));const g=n.split(" ");let f="";g.forEach(S=>{f=S});const h=f.replace("<","").replace(">","");this.recpListCc.push(h),this.recipientCc.nativeElement.value="",this.sendEmailForm.get("cc").patchValue("",{emitEvent:!0}),this.sendEmailForm.get("cc").setValue("")}setSelectedEmailBcc(e){const n=e.option.value,i=n.split(" ");let a="";i.forEach(S=>{a=S});const c=a.replace("<","").replace(">","");this.validateEmail(c)&&(this.selectedEmailBcc.push(n),this.selectedRecepientsList.push(n));const g=n.split(" ");let f="";g.forEach(S=>{f=S});const h=f.replace("<","").replace(">","");this.recpListBcc.push(h),this.sendEmailForm.get("bcc").setValue(null),this.sendEmailForm.get("bcc").setValue(""),this.recipientBcc.nativeElement.value=""}emitSelectedLanguagesTo(){this.optionSelected.emit(this.returnType===F.OBJECT?this.selectedEmailTo:this.selectedEmailTo.map(this.returnType===F.VALUE?e=>e.value:e=>e.label))}emitSelectedLanguagesCc(){this.optionSelected.emit(this.returnType===F.OBJECT?this.selectedEmailCc:this.selectedEmailCc.map(this.returnType===F.VALUE?e=>e.value:e=>e.label))}emitSelectedLanguagesBcc(){this.optionSelected.emit(this.returnType===F.OBJECT?this.selectedEmailBcc:this.selectedEmailBcc.map(this.returnType===F.VALUE?e=>e.value:e=>e.label))}removeTo(e){const n=this.selectedEmailTo.findIndex(a=>a===e),i=this.selectedRecepientsList.findIndex(a=>a===e);n>=0&&this.selectedEmailTo.splice(n,1),i>=0&&this.selectedRecepientsList.splice(i,1),this.emitSelectedLanguagesTo()}removeCc(e){const n=this.selectedEmailCc.findIndex(a=>a===e),i=this.selectedRecepientsList.findIndex(a=>a===e);n>=0&&this.selectedEmailCc.splice(n,1),i>=0&&this.selectedRecepientsList.splice(i,1),this.emitSelectedLanguagesCc()}removeBcc(e){const n=this.selectedEmailBcc.findIndex(a=>a===e),i=this.selectedRecepientsList.findIndex(a=>a===e);n>=0&&this.selectedEmailBcc.splice(n,1),i>=0&&this.selectedRecepientsList.splice(i,1),this.emitSelectedLanguagesBcc()}addTo(e){if(!this.matAutocomplete.isOpen){const n=e.chipInput.inputElement,i=e.value,a=i.split(" ");let s="";a.forEach(f=>{s=f});const g=s.replace("<","").replace(">","");this.validateEmail(g)&&(i||"").trim()&&this.allowOther&&this.selectedEmailTo.push({label:i.trim(),value:i.trim()}),n&&(n.value=""),this.sendEmailForm.get("to").setValue(null),this.sendEmailForm.get("to").setValue("")}this.emitSelectedLanguagesTo()}addCc(e){if(!this.matAutocomplete.isOpen){const n=e.chipInput.inputElement,i=e.value,a=i.split(" ");let s="";a.forEach(f=>{s=f});const g=s.replace("<","").replace(">","");this.validateEmail(g)&&(i||"").trim()&&this.allowOther&&this.selectedEmailCc.push({label:i.trim(),value:i.trim()}),n&&(n.value=""),this.sendEmailForm.get("cc").setValue(null),this.sendEmailForm.get("cc").setValue("")}this.emitSelectedLanguagesCc()}addBcc(e){if(!this.matAutocomplete.isOpen){const n=e.chipInput.inputElement,i=e.value,a=i.split(" ");let s="";a.forEach(f=>{s=f});const g=s.replace("<","").replace(">","");this.validateEmail(g)&&(i||"").trim()&&this.allowOther&&this.selectedEmailBcc.push({label:i.trim(),value:i.trim()}),n&&(n.value=""),this.sendEmailForm.get("bcc").setValue(null),this.sendEmailForm.get("bcc").setValue("")}this.emitSelectedLanguagesBcc()}resetValueTo(){this.sendEmailForm.get("to").patchValue("",{emitEvent:!0})}resetValueCc(){this.sendEmailForm.get("cc").patchValue("",{emitEvent:!0})}resetValueBcc(){this.sendEmailForm.get("bcc").patchValue("",{emitEvent:!0})}computeGroupDetails(){const e=this.sendEmailForm.get("rncp_titles").value.map(i=>i.id);let n=[];return this.sendEmailForm.get("user_type_selection").value&&(n=this.sendEmailForm.get("user_types").value.map(i=>i.id)),{rncp_titles:e,user_types:n}}handleInputChange(e){const n=e.target.files[0];n&&this.fileUploadService.singleUpload(n).subscribe(i=>{i&&this.attachmnetsPaths.push({path:i.file_url,name:i.file_name})},i=>{console.log("[Response BE][Error] : ",i),this.userService.postErrorLog(i),l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:"OK"})}),this.resetFileState()}resetFileState(){this.currentFile.nativeElement.value=""}getRecipientsData(){this.subs.sink=this.sendEmailForm.get("to").valueChanges.pipe((0,A.b)(800)).subscribe(e=>{this.emailAddressesListTo=[],e&&e.length&&(this.isWaitingForResponse=!0,this.subs.sink=this.mailboxService.getRecipientDataUsingName(e.toString()).subscribe(n=>{this.isWaitingForResponse=!1,n&&n.length&&n.filter(a=>!this.selectedRecepientsList.includes(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")).concat(this.selectedRecepientsList.filter(a=>!this.selectedRecepientsList.includes(a.civility+" "+a.first_name+" "+a.last_name+" <"+a.email+">"))).forEach(a=>{void 0!==a.email&&this.emailAddressesListTo.push(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")})},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}),this.subs.sink=this.sendEmailForm.get("cc").valueChanges.pipe((0,A.b)(800)).subscribe(e=>{this.emailAddressesListCc=[],e&&e.length&&(this.isWaitingForResponse=!0,this.subs.sink=this.mailboxService.getRecipientDataUsingName(e.toString()).subscribe(n=>{this.isWaitingForResponse=!1,n&&n.length&&n.filter(a=>!this.selectedRecepientsList.includes(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")).concat(this.selectedRecepientsList.filter(a=>!this.selectedRecepientsList.includes(a.civility+" "+a.first_name+" "+a.last_name+" <"+a.email+">"))).forEach(a=>{void 0!==a.email&&this.emailAddressesListCc.push(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")})},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}),this.subs.sink=this.sendEmailForm.get("bcc").valueChanges.pipe((0,A.b)(800)).subscribe(e=>{this.emailAddressesListBcc=[],e&&e.length&&(this.isWaitingForResponse=!0,this.subs.sink=this.mailboxService.getRecipientDataUsingName(e.toString()).subscribe(n=>{this.isWaitingForResponse=!1,n&&n.length&&n.filter(a=>!this.selectedRecepientsList.includes(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")).concat(this.selectedRecepientsList.filter(a=>!this.selectedRecepientsList.includes(a.civility+" "+a.first_name+" "+a.last_name+" <"+a.email+">"))).forEach(a=>{void 0!==a.email&&this.emailAddressesListBcc.push(this.translate.instant(a.civility)+" "+a.first_name+" "+a.last_name+" <"+a.email+">")})},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))})}getCurrentUser(){this.currentUser=this.userService.getLocalStorageUser(),this.entityData=this.currentUser.entities.find(e=>"ADMTC Admin"===e.type.name),this.isUserAdmtc=this.utilService.isUserEntityADMTC(),this.isUserAcadir=this.utilService.isUserAcadir(),this.isUserAdmtc?this.entityData=this.currentUser.entities.find(e=>"ADMTC Admin"===e.type.name):this.isUserAcadir&&(this.entityData=this.currentUser.entities.find(e=>"Academic Director"===e.type.name))}removeAttachment(e){this.attachmnetsPaths.splice(this.attachmnetsPaths.indexOf(e),1)}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.WI),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(Zt.e),t.\u0275\u0275directiveInject(Jt.J),t.\u0275\u0275directiveInject(v.so),t.\u0275\u0275directiveInject(d.UntypedFormBuilder),t.\u0275\u0275directiveInject(N.t))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-compose-email-dialog"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(te,5),t.\u0275\u0275viewQuery(ee,5),t.\u0275\u0275viewQuery(ne,5),t.\u0275\u0275viewQuery(oe,5),t.\u0275\u0275viewQuery(ie,5)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.languagesInput=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.recipientCc=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.recipientBcc=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.matAutocomplete=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.currentFile=i.first)}},inputs:{allowOther:"allowOther",returnType:"returnType"},outputs:{optionSelected:"optionSelected"},decls:45,vars:34,consts:[[3,"formGroup"],[1,"fontColor"],["mat-dialog-title","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle",""],["svgIcon","pencil",1,"icon-style"],[1,"alignment","float-right"],[1,"icon-style",3,"matTooltip","click"],[1,"icon-style",3,"click"],[1,"icon-style",3,"matTooltip"],["type","file","name","file","multiple","","accept",".jpeg,.png,.rar,.zip,.doc,.docx,.ppt,.pdf,.xls",1,"hidden-input",3,"disabled","change"],["myInput",""],["class","vertical-align-mid cursorStyle",3,"matTooltip","click",4,"ngIf"],["class","color-gray vertical-align-mid cursorStyle",3,"matTooltip",4,"ngIf"],[1,"chip-list"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","email","formControlName","to",3,"placeholder","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["languagesInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"matTooltip","value",4,"ngFor","ngForOf"],["class","chip-list",4,"ngIf"],["matInput","","formControlName","subject",3,"placeholder"],[1,"file-section","p-col-12"],["class","fileInfo",4,"ngFor","ngForOf"],["formControlName","message",3,"editor","config","ready"],["class","loading-indicator",4,"ngIf"],[1,"vertical-align-mid","cursorStyle",3,"matTooltip","click"],[1,"color-gray","vertical-align-mid","cursorStyle",3,"matTooltip"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"matTooltip","value"],["chipListCc",""],["formControlName","cc",3,"placeholder","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["recipientCc",""],[3,"matTooltip","value","click",4,"ngFor","ngForOf"],[3,"matTooltip","value","click"],["chipListBcc",""],["formControlName","bcc",3,"placeholder","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["recipientBcc",""],[1,"fileInfo"],["mat-icon-button","","type","button"],["mat-icon-button","","type","button",3,"click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"form",0)(1,"div",1)(2,"h1",2),t.\u0275\u0275element(3,"mat-icon",3),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementStart(6,"div",4)(7,"mat-icon",5),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275text(9,"close"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"label")(11,"a",6),t.\u0275\u0275listener("click",function(){return n.showCC=!n.showCC}),t.\u0275\u0275text(12,"CC"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"label")(14,"a",6),t.\u0275\u0275listener("click",function(){return n.showBCC=!n.showBCC}),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"label")(18,"mat-icon",7),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275text(20,"attachment"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(21,"input",8,9),t.\u0275\u0275listener("change",function(a){return n.handleInputChange(a)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(23,ae,3,3,"mat-icon",10),t.\u0275\u0275template(24,re,3,3,"mat-icon",11),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"mat-dialog-content")(26,"mat-form-field",12)(27,"mat-chip-list",null,13),t.\u0275\u0275template(29,le,3,4,"mat-chip",14),t.\u0275\u0275elementStart(30,"input",15,16),t.\u0275\u0275listener("matChipInputTokenEnd",function(a){return n.addTo(a)}),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"mat-autocomplete",17,18),t.\u0275\u0275listener("optionSelected",function(a){return n.setSelectedEmailTo(a)}),t.\u0275\u0275template(35,ce,2,3,"mat-option",19),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(36,he,10,9,"mat-form-field",20),t.\u0275\u0275template(37,_e,10,9,"mat-form-field",20),t.\u0275\u0275elementStart(38,"mat-form-field"),t.\u0275\u0275element(39,"input",21),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"div",22),t.\u0275\u0275template(42,Ce,9,1,"div",23),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"ckeditor",24),t.\u0275\u0275listener("ready",function(a){return n.onReady(a)}),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(44,ye,2,0,"div",25)),2&e){const i=t.\u0275\u0275reference(28),a=t.\u0275\u0275reference(34);t.\u0275\u0275property("formGroup",n.sendEmailForm),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,22,"MailBox.composeMail.title")," "),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(8,24,"CLOSE")),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,26,"MailBox.composeMail.bcc")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(19,28,"MailBox.ATTACH_FILE")),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",n.isWaitingForResponse),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.sendEmailForm.get("subject").value&&n.selectedEmailTo.length&&!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(n.sendEmailForm.get("subject").value&&n.selectedEmailTo.length&&!n.isWaitingForResponse)),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",n.selectedEmailTo),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("placeholder"," ",t.\u0275\u0275pipeBind1(32,30,"MailBox.composeMail.to"),""),t.\u0275\u0275property("matAutocomplete",a)("matChipInputFor",i)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngForOf",n.emailAddressesListTo),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.showCC||n.showCCInput),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.showBCC||n.showBCCInput),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(40,32,"Subject")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.attachmnetsPaths),t.\u0275\u0275advance(1),t.\u0275\u0275property("editor",n.Editor)("config",n.config),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse)}},dependencies:[u.sg,u.O5,Y.Zt,Y.Bh,X.XC,X.ZL,W.ey,T.lW,it.qn,it.HS,it.oH,it.qH,v.uh,v.xY,w.Hw,I.KE,U.Nt,E.Ou,z.gM,d.\u0275NgNoValidate,d.DefaultValueAccessor,d.NgControlStatus,d.NgControlStatusGroup,d.FormGroupDirective,d.FormControlName,J.u,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}[_nghost-%COMP%]     .mat-dialog-content{max-height:520px;height:auto}[_nghost-%COMP%]     .ck-editor__editable_inline{height:auto;color:#000}.cursorStyle[_ngcontent-%COMP%]{cursor:pointer}.fileInfo[_ngcontent-%COMP%]{width:-moz-fit-content!important;width:fit-content!important;margin:5px!important;display:inline-block!important;border:1px solid rgba(0,0,0,.1);z-index:10;box-shadow:inset 1px 1px #0000001a,inset 0 -1px #00000012}.chip-list[_ngcontent-%COMP%]{width:100%}.color-gray[_ngcontent-%COMP%]{color:#aaa8a8}.float-right[_ngcontent-%COMP%]{float:right}.hidden-input[_ngcontent-%COMP%]{display:none}"]}),o})();var xe=m(87746),Oe=m(12334),Z=m(28255);function ve(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.onAddCompanyStaff())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"COMPANY.ADD_STAFF")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,5,"COMPANY.ADD_STAFF")," ")}}function Me(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",34)(1,"button",35),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementStart(5,"mat-icon"),t.\u0275\u0275text(6,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"mat-menu",null,36),t.\u0275\u0275template(9,ve,4,7,"button",37),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"button",38),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.resetFilter())}),t.\u0275\u0275element(11,"mat-icon",39),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275reference(8),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(2,6,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,8,"Action")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",n.permissionService.addStaffInCompanyStaffTabPerm()),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(13,10,"COMPANY.RESET")," ")}}function Pe(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",41)(1,"mat-form-field",42),t.\u0275\u0275element(2,"input",43),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,2,"COMPANY.SEARCH")),t.\u0275\u0275property("formControl",e.nameFilter)}}function Se(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",49),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.setTypeFilter(null==a?null:a._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.name),t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.name," ")}}function Te(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",41)(1,"mat-form-field"),t.\u0275\u0275element(2,"input",44),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-autocomplete",45,46)(6,"mat-option",47),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setTypeFilter("AllM"))}),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,Se,2,3,"mat-option",48),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,7,"COMPANY.SEARCH")),t.\u0275\u0275property("formControl",n.userTypeFilter)("matAutocomplete",e),t.\u0275\u0275advance(2),t.\u0275\u0275property("panelWidth",300)("displayWith",n.displayWithUserType.bind(n)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,9,"All")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(10,11,n.userTypeListFilter))}}function Ie(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",52),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,e))}}function Ee(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",41)(1,"mat-form-field",50)(2,"mat-select",51)(3,"mat-option",52),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,Ie,3,4,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.entityFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,5,"All")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.entityFilterList)}}function we(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",52),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,e))}}function ke(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",54)(1,"mat-form-field",55)(2,"mat-select",51)(3,"mat-option",52),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,we,3,4,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.statusFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,5,"All")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.statusFilterList)}}function Ae(o,r){1&o&&t.\u0275\u0275element(0,"th",54)}function Be(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",56),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.STAFF_NAME")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.STAFF_NAME")))}function Fe(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",57),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","",t.\u0275\u0275pipeBind1(1,6,e.last_name)," ",e.first_name," ",t.\u0275\u0275pipeBind1(2,8,e.civility),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,e.last_name)," ",e.first_name," ",e.civility&&"neutral"!==e.civility?t.\u0275\u0275pipeBind1(5,12,null==e?null:e.civility):""," ")}}function De(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",58),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.USER_TYPE")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.USER_TYPE")))}function Ne(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"p",61)(1,"span",62),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext();t.\u0275\u0275property("matTooltip",i.renderTooltipType(null==n?null:n.entities)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,2,"USER_TYPES."+(null==e||null==e.type?null:e.type.name))," ")}}function Re(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",59),t.\u0275\u0275template(1,Ne,4,4,"p",60),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.getUniqueUserType(e.entities))}}function Le(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",63),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.ENTITY")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.ENTITY")))}function Ue(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"p",61),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit,i=t.\u0275\u0275nextContext();t.\u0275\u0275property("matTooltip",i.renderTooltipEntity(null==n?null:n.entities)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e.entity_name)," ")}}function Ve(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",64),t.\u0275\u0275template(1,Ue,3,4,"p",60),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.getUniqueEntity(null==e?null:e.entities))}}function Ye(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",65),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.STATUS")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.STATUS")))}const We=function(o,r,e){return{"green-icon":o,"black-icon":r,"red-icon":e}};function He(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",66)(1,"mat-icon",67),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3," check_circle "),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,2,e.user_status)),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction3(4,We,"active"===e.user_status,"pending"===e.user_status,"incorrect_email"===e.user_status))}}function ze(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",68),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.ACTION")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.ACTION")))}function je(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onAskRevision(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"COMPANY.REQUEST_STAFF"))}function Ge(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.editStaff(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"View - EditUser"))}function $e(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.sendMail(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",72),t.\u0275\u0275elementEnd()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"COMPANY.SEND_MAIL"))}function Qe(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.removeMentor(i._id))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",73),t.\u0275\u0275text(3,"clear"),t.\u0275\u0275elementEnd()()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"COMPANY.Delete staff from this company"))}function qe(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",69),t.\u0275\u0275template(1,je,4,3,"button",70),t.\u0275\u0275template(2,Ge,4,3,"button",70),t.\u0275\u0275template(3,$e,3,3,"button",70),t.\u0275\u0275template(4,Qe,4,3,"button",70),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.isUserAcadir||e.isUserAcadAdmin&&e.permissionService.editActionInCompanyStaffTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.isUserAcadir&&!e.isUserAcadAdmin&&e.permissionService.editActionInCompanyStaffTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.sendMailActionInCompanyStaffTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.deleteActionInCompanyStaffTabPerm())}}function Ke(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",74)(1,"div",75),t.\u0275\u0275element(2,"mat-spinner",76),t.\u0275\u0275elementEnd()())}function Xe(o,r){1&o&&t.\u0275\u0275element(0,"tr",77)}function Ze(o,r){1&o&&t.\u0275\u0275element(0,"tr",77)}function Je(o,r){1&o&&t.\u0275\u0275element(0,"tr",77)}function tn(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",78),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function en(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",79),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function nn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",80),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")," "))}const on=function(){return["reset"]},an=function(){return["loading"]},rn=function(o){return{hide:o}},sn=function(o){return{"hide-pagination-buttons":o}},ln=function(){return[10]};let cn=(()=>{class o{constructor(e,n,i,a,s,c,g,f,p,h){this.dialog=e,this.translate=n,this.userService=i,this.companyService=a,this.utilService=s,this.CurUserService=c,this.permission=g,this.permissionService=f,this.authService=p,this.countryService=h,this.subs=new P.Y,this.displayedColumns=["name","userType","entity","status","action"],this.filterColumns=["nameFilter","userTypeFilter","entityFilter","statusFilter","actionFilter"],this.statusFilterList=["active","pending","incorrect_email"],this.entityFilterList=["admtc","academic","company","service_provider","group_of_schools"],this.userFilterList=["admtc","academic","company","service_provider","group_of_schools"],this.nameFilter=new d.UntypedFormControl(""),this.userTypeFilter=new d.UntypedFormControl("AllM"),this.entityFilter=new d.UntypedFormControl("All"),this.statusFilter=new d.UntypedFormControl("All"),this.filteredValues={name:null,userType:null,entity:null,userStatus:null},this.userTypeList=[],this.configCat={disableClose:!0,width:"1070px",minHeight:"81%"},this.isWaitingForResponse=!1,this.sortValue=null,this.isReset=!1,this.dataLoaded=!1,this.selectedSchoolList=[],this.isUserAdmtc=!1,this.isUserAcadDirAdmin=!1,this.schoolList=[],this.resetData=!1,this.countdownHabis=!1,this.dataSource=new x.by([]),this.selection=new Kt.Ov(!0,[]),this.countryCodeList=[]}ngOnInit(){this.getAllCountryCodes(),this.initData(),this.translate.onLangChange.subscribe(e=>{if(this.originalUserType&&this.originalUserType.length){if(this.displayWithUserType(this.userTypeFilter.value),this.userTypeFilter.value){const n=b.find(this.userTypeList,s=>s.name===this.userTypeFilter.value),i=n?b.find(this.originalUserType,s=>s._id===n._id):null,a=i?this.translate.instant("USER_TYPES."+i.name):this.userTypeFilter.value;this.userTypeFilter.setValue(a)}this.userTypeList=[],this.originalUserType.forEach(n=>{const i=this.translate.instant("USER_TYPES."+n.name);this.userTypeList.push({_id:n._id,name:i})}),this.userTypeListFilter=this.userTypeFilter.valueChanges.pipe((0,$.O)(""),(0,V.U)(n=>this.userTypeList.filter(i=>!(!i||!i.name)&&i.name.toLowerCase().includes(n.toLowerCase())).sort((i,a)=>i.name.localeCompare(a.name))))}}),this.subs.sink=this.translate.onLangChange.subscribe(()=>{this.sortCountryCode()})}sortCountryCode(){this.countryCodeList=this.countryCodeList.sort((e,n)=>this.utilService.simplifyRegex(this.translate.instant(e?.name))<this.utilService.simplifyRegex(this.translate.instant(n?.name))?-1:this.utilService.simplifyRegex(this.translate.instant(e?.name))>this.utilService.simplifyRegex(this.translate.instant(n?.name))?1:0)}ngOnChanges(){this.companyId&&!this.isReset&&(this.subs.unsubscribe(),clearInterval(),clearTimeout(),this.initData())}ngAfterViewInit(){this.paginator.page.pipe((0,$.O)(null),(0,O.b)(()=>{this.isReset||this.initData(),this.dataLoaded=!0})).subscribe()}getAllCountryCodes(){this.countryCodeList=this.countryService?.getAllCountriesNationality()}initData(){this.isUserAcadDirAdmin=this.utilService.isUserAcadDirAdmin(),this.entityFilterList=this.companyService.getEntitiesCompany(),this.CurUser=this.CurUserService.getLocalStorageUser(),this.isUserAcadDirAdmin&&(this.entityData=this.CurUser?.entities.find(e=>"Academic Director"===e?.type?.name||"Academic Admin"===e?.type?.name),this.schoolList=this.utilService.getUserAllAssignedSchool()),this.initializeUserFilter(),this.quickSearchMentorId?this.getMentorByQuickSearch():this.companyId&&!this.isReset&&this.getCompanyStuffData()}sortData(e){"name"===e.active?this.sortValue=e.direction?{full_name:e.direction}:null:"entity"===e.active?this.sortValue=e.direction?{entity_name:e.direction}:null:"userType"===e.active?this.sortValue=e.direction?{user_type:e.direction}:null:"status"===e.active&&(this.sortValue=e.direction?{user_status:e.direction}:null),this.dataLoaded&&(this.paginator.pageIndex=0,this.isReset||this.getCompanyStuffData())}initializeUserFilter(){this.subs.sink=this.nameFilter.valueChanges.pipe((0,A.b)(800)).subscribe(e=>{e&&e.length>=1&&(this.filteredValues.name=e,this.paginator.pageIndex=0,this.isReset||this.getCompanyStuffData())}),this.subs.sink=this.entityFilter.valueChanges.pipe((0,A.b)(800)).subscribe(e=>{e&&e.length>=1&&(this.filteredValues.entity="All"!==e?e:"",this.paginator.pageIndex=0,this.isReset||this.getCompanyStuffData())}),this.statusFilter.valueChanges.subscribe(e=>{this.filteredValues.userStatus="All"!==e?e:"",this.paginator.pageIndex=0,this.isReset||this.getCompanyStuffData()}),this.subs.sink=this.companyService.getUserTypesByEntity("company").subscribe(e=>{this.originalUserType=b.cloneDeep(e),this.userTypeList=[],this.originalUserType.forEach(n=>{const i=this.translate.instant("USER_TYPES."+n.name);this.userTypeList.push({_id:n._id,name:i})}),this.userTypeListFilter=this.userTypeFilter.valueChanges.pipe((0,$.O)(""),(0,V.U)(n=>this.userTypeList.filter(i=>!(!i||!i.name)&&i.name.toLowerCase().includes(n.toLowerCase())).sort((i,a)=>i.name.localeCompare(a.name))))},e=>{this.authService.postErrorLog(e),console.log("[Response BE][Error] : ",e)})}setTypeFilter(e){this.filteredValues.userType="AllM"===e?"":e,this.paginator.pageIndex=0,this.setTypeDocument(),this.isReset||this.getCompanyStuffData()}getCompanyStuffData(){this.isWaitingForResponse=!0;const e={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};let n="";n+=this.filteredValues.name?` full_name : "${this.filteredValues.name}"`:"",n+=this.filteredValues.userType?` user_type: "${this.filteredValues.userType}"`:"",n+=this.filteredValues.entity?` entity_name: ${this.filteredValues.entity}`:"",n+=this.filteredValues.userStatus?` user_status: ${this.filteredValues.userStatus}`:"",this.subs.sink=this.isUserAcadDirAdmin?this.companyService.getAllUserInStaffCompanyByAcadir(this.schoolList,this.companyId,e,this.sortValue,n,["5a2e603f53b95d22c82f9590","5a2e603c53b95d22c82f958f"],!0).subscribe(a=>{if(this.isWaitingForResponse=!1,a&&a.length){let s=[];a.forEach(c=>{let g=[];c.entities.forEach(f=>{f.companies.filter(h=>h._id===this.companyId).length&&g.push(f)}),c.entities=g,s.push(c)}),this.dataSource.data=s,this.dataSource.sort=this.sort,this.paginator.length=a[0].count_document?a[0].count_document:0}else this.dataSource.data=[],this.paginator.length=0;this.noData=this.dataSource.connect().pipe((0,V.U)(s=>0===s.length)),this.isReset=!1},a=>{console.log("[Data][Error] : ",a),this.authService.postErrorLog(a),l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):this.companyService.getAllUserInStaffCompany(this.companyId,e,this.sortValue,n).subscribe(i=>{if(this.isWaitingForResponse=!1,i&&i.length){let a=[];i.forEach(s=>{let c=[];s.entities.forEach(g=>{g.companies.filter(p=>p._id===this.companyId).length&&c.push(g)}),s.entities=c,a.push(s)}),this.dataSource.data=a,this.dataSource.sort=this.sort,this.paginator.length=i[0].count_document?i[0].count_document:0}else this.dataSource.data=[],this.paginator.length=0;this.noData=this.dataSource.connect().pipe((0,V.U)(a=>0===a.length)),this.isReset=!1},i=>{this.isWaitingForResponse=!1,this.dataSource.data=[],this.paginator.length=0,this.authService.postErrorLog(i),console.log("[Data][Error] : ",i),l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getMentorByQuickSearch(){this.isWaitingForResponse=!0,this.subs.sink=this.companyService.getOneUserInStaffCompany(this.quickSearchMentorId).subscribe(e=>{const n=[e];this.isWaitingForResponse=!1,n&&n.length?(this.dataSource.data=n,this.dataSource.sort=this.sort,this.paginator.length=n.length?n.length:0):(this.dataSource.data=[],this.paginator.length=0),this.noData=this.dataSource.connect().pipe((0,V.U)(i=>0===i.length)),this.isReset=!1,this.quickSearchMentorId=""},e=>{this.isWaitingForResponse=!1,console.log("[Data][Error] : ",e),this.dataSource.data=[],this.paginator.length=0,this.authService.postErrorLog(e),this.noData=this.dataSource.connect().pipe((0,V.U)(n=>0===n.length)),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}changePage(e){this.isReset||this.getCompanyStuffData()}resetFilter(){this.isReset=!0,this.paginator.pageIndex=0,this.sort.sort({id:"",start:"asc",disableClear:!1}),this.filteredValues={name:"",userType:"",entity:"",userStatus:""},this.nameFilter.setValue(""),this.userTypeFilter.setValue("AllM"),this.entityFilter.setValue("All"),this.statusFilter.setValue("All"),this.resetData=!0,this.sort.direction="",this.sort.active="",this.sortValue=null,this.setTypeDocument(),this.getCompanyStuffData()}onAskRevision(e){this.dialog.open(Xt.b,{minWidth:"505px",width:"590px",minHeight:"100px",panelClass:"certification-rule-pop-up",disableClose:!0,data:{reqNumber:"_2",companyId:this.companyId,userLogin:this.CurUser._id,dataMentor:e}})}onAddCompanyStaff(){this.dialog.open(mt.O,{...this.configCat,data:{operation:"add",companyId:this.companyId,countryCodeList:this.countryCodeList?.length?this.countryCodeList:[]}}).afterClosed().subscribe(e=>{e&&e.connectToCompany?this.connectingMentorToCompany(e.dataMentor,!0):this.getCompanyStuffData()})}renderTooltipType(e){let n="";const i=b.uniqBy(e,"type.name");for(const a of i)a&&(n=n+this.translate.instant("USER_TYPES."+a.type.name)+", ");return n.substring(0,n.length-2)}renderTooltipEntity(e){let n="";const i=b.uniqBy(e,"entity_name");for(const a of i)a&&(n=n+this.translate.instant(a.entity_name)+", ");return n.substring(0,n.length-2)}connectingMentorToCompany(e,n){this.subs.sink=this.companyService.connectSchoolToMentor(e._id,this.companyId,this.entityData.school._id).subscribe(i=>{i&&(n?this.getCompanyStuffData():l().fire({type:"success",title:"Bravo !",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(()=>{this.getCompanyStuffData()}))},i=>{this.authService.postErrorLog(i),l().fire({type:"info",title:"Error !",text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(a=>{console.log("[BE Message] Error is : ",i)})})}sendMail(e){this.mailCompanyStaff=this.dialog.open(be,{disableClose:!0,width:"750px",data:e})}editStaff(e){this.dialog.open(mt.O,{...this.configCat,data:{operation:"edit",companyId:this.companyId,companyData:e,userData:this.CurUser,countryCodeList:this.countryCodeList?.length?this.countryCodeList:[]}}).afterClosed().subscribe(n=>{this.getCompanyStuffData(),n.connectToCompany&&this.connectingMentorToCompany(n.dataMentor)})}getUniqueUserType(e){return b.uniqBy(e,"type.name")}getUniqueEntity(e){return b.uniqBy(e,"entity_name")}removeMentor(e){this.isUserAcadDirAdmin?this.removeMentorFromSchool(e):this.deleteMentorAsADMTC(e)}removeMentorFromSchool(e){let n=3;l().fire({type:"warning",title:this.translate.instant("DCMENTOR_1.TITLE"),html:this.translate.instant("DCMENTOR_1.TEXT"),showCancelButton:!0,confirmButtonText:this.translate.instant("DCMENTOR_1.BUTTON_1",{timer:n}),cancelButtonText:this.translate.instant("DCMENTOR_1.BUTTON_2"),onOpen:()=>{l().disableConfirmButton();const i=l().getConfirmButton(),a=setInterval(()=>{n-=1,i.innerText=this.translate.instant("DCMENTOR_1.BUTTON_1")+" in "+n+" sec"},1e3);this.timeOutSwal=setTimeout(()=>{i.innerText=this.translate.instant("DCMENTOR_1.BUTTON_1"),l().enableConfirmButton(),clearTimeout(a)},1e3*n)}}).then(i=>{clearTimeout(this.timeOutSwal),i.value&&(this.subs.sink=this.companyService.getAllUserInStaffCompanyByAcadirNoPagination(this.schoolList,this.companyId).subscribe(a=>{const s=b.cloneDeep(a),c=[];s&&s.length&&s.forEach(g=>{g&&g._id&&g._id!==e&&c.push(g._id)}),this.subs.sink=this.companyService.connectMentorToSchool(c,this.companyId,this.entityData.school._id).subscribe(g=>{l().fire({type:"success",title:this.translate.instant("DCMENTOR_2.TITLE"),html:this.translate.instant("DCMENTOR_2.TEXT"),confirmButtonText:this.translate.instant("DCMENTOR_2.BUTTON")}),this.paginator.pageIndex=0,this.getCompanyStuffData()},g=>{this.authService.postErrorLog(g),"GraphQL error: Error: the mentor is already used in student contract"===g.message?l().fire({type:"info",title:this.translate.instant("DCMENTOR_3.TITLE"),html:this.translate.instant("DCMENTOR_3.TEXT"),confirmButtonText:this.translate.instant("DCMENTOR_3.BUTTON")}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:g&&g.message?this.translate.instant(g.message.replaceAll("GraphQL error: ","")):g,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})},a=>{this.authService.postErrorLog(a),l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))})}deleteMentorAsADMTC(e){let n=3;l().fire({type:"warning",title:this.translate.instant("DISCONNECT_SCHOOL.TITLE"),html:this.translate.instant("COMPANY.Delete mentor message"),showCancelButton:!0,confirmButtonText:this.translate.instant("SWEET_ALERT.DELETE.CONFIRM",{timer:n}),cancelButtonText:this.translate.instant("SWEET_ALERT.DELETE.CANCEL"),onOpen:()=>{l().disableConfirmButton();const i=l().getConfirmButton(),a=setInterval(()=>{n-=1,i.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM")+" in "+n+" sec"},1e3);this.timeOutSwal=setTimeout(()=>{i.innerText=this.translate.instant("SWEET_ALERT.DELETE.CONFIRM"),l().enableConfirmButton(),clearTimeout(a)},1e3*n)}}).then(i=>{if(clearTimeout(this.timeOutSwal),i.value){const a=[];a.push(e),this.subs.sink=this.companyService.removeMentorInThisCompany(this.companyId,a).subscribe(s=>{l().fire({type:"success",title:"Bravo!",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}),this.paginator.pageIndex=0,this.getCompanyStuffData()},s=>{this.authService.postErrorLog(s),"GraphQL error: Error: Cannot delete,  mentor already connected to student"===s.message?l().fire({title:this.translate.instant("DCMENTOR_4.TITLE"),html:this.translate.instant("DCMENTOR_4.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("DCMENTOR_4.BUTTON")}):l().fire({type:"info",title:this.translate.instant("DISCONNECT_SCHOOL.TITLE"),text:s,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}})}displayWithUserType(e){return e&&"AllM"===e?this.translate.instant("All"):e}setTypeDocument(){this.subs.sink=this.companyService.getUserTypesByEntity("company").subscribe(e=>{this.originalUserType=b.cloneDeep(e),this.userTypeList=[],this.originalUserType.forEach(n=>{const i=this.translate.instant("USER_TYPES."+n.name);this.userTypeList.push({_id:n._id,name:i})}),this.userTypeListFilter=this.userTypeFilter.valueChanges.pipe((0,$.O)(""),(0,V.U)(n=>this.userTypeList.filter(i=>!(!i||!i.name)&&i.name.toLowerCase().includes(n.toLowerCase())).sort((i,a)=>i.name.localeCompare(a.name))))},e=>{console.log("[Response BE][Error] : ",e)})}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.uw),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(xe.K),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(nt.YI),t.\u0275\u0275directiveInject(Q.$),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(Oe.T))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-staff"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(_.NW,7),t.\u0275\u0275viewQuery(q.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{companyId:"companyId",quickSearchMentorId:"quickSearchMentorId"},features:[t.\u0275\u0275NgOnChangesFeature],decls:41,vars:22,consts:[[1,"p-col-12"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","reset"],["mat-header-cell","","colspan","5","class","action-header-column buttons-header",4,"matHeaderCellDef"],["matColumnDef","nameFilter"],["mat-header-cell","","class","force-text-center",4,"matHeaderCellDef"],["matColumnDef","userTypeFilter"],["matColumnDef","entityFilter"],["matColumnDef","statusFilter"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actionFilter"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","name","matTooltipPosition","above",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","","matTooltipPosition","above",3,"matTooltip",4,"matCellDef"],["matColumnDef","userType"],["mat-header-cell","","mat-sort-header","userType","matTooltipPosition","above",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","","class","cent",4,"matCellDef"],["matColumnDef","entity"],["mat-header-cell","","mat-sort-header","entity","matTooltipPosition","above",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","status","matTooltipPosition","above",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","","class","no-padding-left",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","matTooltipPosition","above",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","","class","no-padding-right",4,"matCellDef"],["matColumnDef","loading"],["mat-header-cell","","colspan","5","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],["class","no-records",4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","hidePageSize","pageSizeOptions"],["mat-header-cell","","colspan","5",1,"action-header-column","buttons-header"],["mat-raised-button","","color","accent",2,"padding","0px 7px !important",3,"matTooltip","disabled","matMenuTriggerFor"],["action","matMenu"],["mat-menu-item","","aria-hidden","true","class","btn-standard",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-menu-item","","aria-hidden","true",1,"btn-standard",3,"disabled","matTooltip","click"],["mat-header-cell","",1,"force-text-center"],[1,"full-wid"],["matInput","",1,"form-field",3,"formControl","placeholder"],["matInput","",1,"form-field",3,"formControl","matAutocomplete","placeholder"],[3,"panelWidth","displayWith"],["userType","matAutocomplete"],["value","AllM",3,"click"],[3,"value","matTooltip","click",4,"ngFor","ngForOf"],[3,"value","matTooltip","click"],[1,"some-margin-top"],["panelClass","filterPanel custom-matselect-dropdown",3,"formControl","disableOptionCentering"],[1,"width-size",3,"value"],["class","width-size",3,"value",4,"ngFor","ngForOf"],["mat-header-cell",""],[1,"some-margin-top","padding-right"],["mat-header-cell","","mat-sort-header","name","matTooltipPosition","above",3,"matTooltip"],["mat-cell","","matTooltipPosition","above",3,"matTooltip"],["mat-header-cell","","mat-sort-header","userType","matTooltipPosition","above",3,"matTooltip"],["mat-cell","",1,"cent"],["class","tag-text-inline","matTooltipPosition","above",3,"matTooltip",4,"ngFor","ngForOf"],["matTooltipPosition","above",1,"tag-text-inline",3,"matTooltip"],[1,"tags"],["mat-header-cell","","mat-sort-header","entity","matTooltipPosition","above",3,"matTooltip"],["mat-cell",""],["mat-header-cell","","mat-sort-header","status","matTooltipPosition","above",3,"matTooltip"],["mat-cell","",1,"no-padding-left"],["matTooltipPosition","above",3,"matTooltip","ngClass"],["mat-header-cell","","matTooltipPosition","above",3,"matTooltip"],["mat-cell","",1,"no-padding-right"],["mat-icon-button","","class","margin-right-button",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"margin-right-button",3,"matTooltip","click"],["svgIcon","email-outline"],["svgIcon","close"],["mat-header-cell","","colspan","5",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],[1,"no-records"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"table",1),t.\u0275\u0275listener("matSortChange",function(a){return n.sortData(a)}),t.\u0275\u0275elementContainerStart(2,2),t.\u0275\u0275template(3,Me,14,12,"th",3),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(4,4),t.\u0275\u0275template(5,Pe,4,4,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(6,6),t.\u0275\u0275template(7,Te,11,13,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(8,7),t.\u0275\u0275template(9,Ee,7,7,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(10,8),t.\u0275\u0275template(11,ke,7,7,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(12,10),t.\u0275\u0275template(13,Ae,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(14,11),t.\u0275\u0275template(15,Be,5,6,"th",12),t.\u0275\u0275template(16,Fe,6,14,"td",13),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(17,14),t.\u0275\u0275template(18,De,5,6,"th",15),t.\u0275\u0275template(19,Re,2,1,"td",16),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(20,17),t.\u0275\u0275template(21,Le,5,6,"th",18),t.\u0275\u0275template(22,Ve,2,1,"td",19),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(23,20),t.\u0275\u0275template(24,Ye,5,6,"th",21),t.\u0275\u0275template(25,He,4,8,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(26,23),t.\u0275\u0275template(27,ze,5,6,"th",24),t.\u0275\u0275template(28,qe,5,4,"td",25),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(29,26),t.\u0275\u0275template(30,Ke,3,0,"th",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(31,Xe,1,0,"tr",28),t.\u0275\u0275template(32,Ze,1,0,"tr",28),t.\u0275\u0275template(33,Je,1,0,"tr",28),t.\u0275\u0275template(34,tn,1,1,"tr",29),t.\u0275\u0275template(35,en,1,1,"tr",30),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(36,nn,3,3,"div",31),t.\u0275\u0275pipe(37,"async"),t.\u0275\u0275elementStart(38,"div",32),t.\u0275\u0275pipe(39,"async"),t.\u0275\u0275element(40,"mat-paginator",33),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(30),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(15,on)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(16,an)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(37,11,n.noData)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(17,rn,t.\u0275\u0275pipeBind1(39,13,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(19,sn,n.paginator.length<=10))("hidePageSize",!0)("pageSizeOptions",t.\u0275\u0275pureFunction0(21,ln)))},dependencies:[u.mk,u.sg,u.O5,X.XC,X.ZL,W.ey,T.lW,w.Hw,I.KE,U.Nt,Z.VK,Z.OP,Z.p6,_.NW,E.Ou,ct.gD,q.YE,q.nU,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.ge,x.ev,x.XQ,x.Gk,z.gM,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,H.oO,u.Ov,u.gd,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.form-field[_ngcontent-%COMP%]{margin-top:6px}.width-size[_ngcontent-%COMP%]{width:300px}td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type, th.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:35%}[_nghost-%COMP%]     table tr td:nth-child(1) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(1) .mat-form-field{width:92%}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:12%}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:15%}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:8%;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:93%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){width:20%;text-align:center!important;padding-right:0!important}[_nghost-%COMP%]     table tr td:nth-child(5) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(5) .mat-form-field{width:93%}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr th{vertical-align:top;text-align:center!important}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}[_nghost-%COMP%]     table .userpopup{display:none;position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:52em;max-width:100%;padding:1.25em;border:none;border-radius:.3125em;background:#fff;font-family:inherit;font-size:1rem}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.aligmnment[_ngcontent-%COMP%]{text-align:right;padding-right:0}.gaping[_ngcontent-%COMP%]{padding-top:6px}.buttons-header[_ngcontent-%COMP%]{text-align:right!important}.force-text-center[_ngcontent-%COMP%]{text-align:center!important}.some-margin-top[_ngcontent-%COMP%]{margin-top:6px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-right[_ngcontent-%COMP%]{padding-right:0}.tag-text-inline[_ngcontent-%COMP%]{display:inline}.padding-right[_ngcontent-%COMP%]{padding-right:7px}.margin-name[_ngcontent-%COMP%]{margin:0;padding:0}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}.btn-standard[_ngcontent-%COMP%]{margin-right:10px}.page-under-10[_ngcontent-%COMP%]{font-size:12px;vertical-align:middle;padding-top:12px!important;padding-bottom:0!important;padding-right:25px!important;height:44px;color:#c7c7c7}.invisible[_ngcontent-%COMP%]{display:none!important}.cent[_ngcontent-%COMP%]{text-align:center}  .mat-menu-panel{min-height:auto}  .mat-menu-content .mat-menu-item{border-bottom:1px solid #DADADA}  .mat-menu-content:not(:empty){padding-bottom:0}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}  .filterPanel{margin-top:25px!important}"]}),o})(),pn=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-branch-company-staff-tab"]],inputs:{companyId:"companyId",quickSearchMentorId:"quickSearchMentorId"},decls:1,vars:2,consts:[[3,"companyId","quickSearchMentorId"]],template:function(e,n){1&e&&t.\u0275\u0275element(0,"ms-company-staff",0),2&e&&t.\u0275\u0275property("companyId",n.companyId)("quickSearchMentorId",n.quickSearchMentorId)},dependencies:[cn]}),o})();var ht=m(33296);function dn(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",19),t.\u0275\u0275element(2,"img",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",21)(4,"div",2)(5,"div",22)(6,"div",23)(7,"div",24)(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",25)(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",25)(16,"span"),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(19,"div",26),t.\u0275\u0275element(20,"div",27),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("src",null!=e.replies&&null!=e.replies.created_by&&e.replies.created_by.profile_picture?e.serverimgPath+(null==e.replies||null==e.replies.created_by?null:e.replies.created_by.profile_picture):"MR"===(null==e.replies||null==e.replies.created_by?null:e.replies.created_by.civility)?e.maleStudentIcon:e.femaleStudentIcon,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate5(" ",null!=e.replies&&null!=e.replies.created_by&&e.replies.created_by.civility&&"neutral"===(null==e.replies||null==e.replies.created_by?null:e.replies.created_by.civility)?"":t.\u0275\u0275pipeBind1(10,11,null==e.replies||null==e.replies.created_by?null:e.replies.created_by.civility)," ",null==e.replies||null==e.replies.created_by?null:e.replies.created_by.first_name," ",null==e.replies||null==e.replies.created_by?null:e.replies.created_by.last_name," - ",e.transformDate(null==e.replies?null:e.replies.date_created)," - ",e.transformTime(null==e.replies?null:e.replies.date_created)," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(14,13,"Subject")," : ",null==e.replies?null:e.replies.subject,""),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(18,15,"Category")," : ",null==e.replies?null:e.replies.category,""),t.\u0275\u0275advance(3),t.\u0275\u0275property("innerHTML",null==e.replies?null:e.replies.note,t.\u0275\u0275sanitizeHtml)}}function mn(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",29)(2,"div",19),t.\u0275\u0275element(3,"img",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",21)(5,"div",2)(6,"div",22)(7,"div",23)(8,"div",24)(9,"span"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(12,"div",30),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",26),t.\u0275\u0275element(14,"div",27),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275property("src",null!=e&&null!=e.created_by&&e.created_by.profile_picture?n.serverimgPath+(null==e||null==e.created_by?null:e.created_by.profile_picture):"MR"===(null==e||null==e.created_by?null:e.created_by.civility)?n.maleStudentIcon:n.femaleStudentIcon,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate5(" ",null!=e&&null!=e.created_by&&e.created_by.civility&&"neutral"===(null==e||null==e.created_by?null:e.created_by.civility)?"":t.\u0275\u0275pipeBind1(11,7,null==e||null==e.created_by?null:e.created_by.civility)," ",null==e||null==e.created_by?null:e.created_by.first_name," ",null==e||null==e.created_by?null:e.created_by.last_name," - ",n.transformDate(null==e?null:e.date_created)," - ",n.transformTime(null==e?null:e.date_created)," "),t.\u0275\u0275advance(4),t.\u0275\u0275property("innerHTML",null==e?null:e.note,t.\u0275\u0275sanitizeHtml)}}function hn(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,mn,15,9,"ng-container",28),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.replies?null:e.replies.reply_note_ids)}}let gn=(()=>{class o{constructor(e,n,i,a,s){this.dialogRef=e,this.data=n,this.translate=i,this.companyService=a,this.authService=s,this.isWaitingForResponse=!1,this.serverimgPath=`${ht.a.baseApi}/fileuploads/`.replace("/graphql",""),this.maleStudentIcon="../../../../../../assets/img/student_icon.png",this.femaleStudentIcon="../../../../../../assets/img/student_icon_fem.png",this.commentForm=new d.UntypedFormControl(null),this.subs=new P.Y,this.Editor=ot,this.config={placeholder:this.translate.instant("Answer"),height:"20rem",toolbar:[]}}ngOnInit(){this.allDataUser=this.data.allDataUser,this.config.mention={feeds:[{marker:"@",feed:e=>this.getFeedItems(e),minimumCharacters:3}]},this.getComment()}getComment(){this.isWaitingForResponse=!0,this.subs.sink=this.companyService.GetOneCompanyNote(this.data.commentId).subscribe(e=>{this.replies=e,this.isWaitingForResponse=!1},e=>{this.authService.postErrorLog(e),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}transformDate(e){return e?j(e).format("DD/MM/YYYY"):""}transformTime(e){return e?j(e).format("HH:mm"):""}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}getFeedItems(e){return new Promise(n=>{setTimeout(()=>{if(e){const i=this.data.allDataUser.filter(a=>{const s=e.toLowerCase();return a.last_name.toLowerCase().trim().includes(s)});this.allUser=i.map(a=>"@"+a.last_name+" "+a.first_name),n(this.allUser)}else this.allUser=this.data.allDataUser.map(i=>"@"+i.last_name+" "+i.first_name).slice(0,10),n(this.allUser)},50)})}addReply(e){let n=e;n.note=this.commentForm.value,n.created_by=this.data.currentUser._id,this.data.companyId?n.company_id=this.data.companyId:this.data.companyEntityId&&(n.company_entity_id=this.data.companyEntityId),n.reply_for_note_id=n._id,n.is_reply=!0,n.tagged_user_ids=n&&n.tagged_user_ids&&n.tagged_user_ids.length?n.tagged_user_ids.map(i=>i._id):null,delete n.reply_note_ids,delete n.date_created,delete n._id,this.isWaitingForResponse=!0,this.subs.sink=this.companyService.CreateCompanyNote(n).subscribe(i=>{i&&(this.isWaitingForResponse=!1,this.getComment(),this.commentForm.setValue(null,{emitEvent:!1}))},i=>{this.authService.postErrorLog(i),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.so),t.\u0275\u0275directiveInject(v.WI),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-reply-company-note-dialog"]],decls:25,vars:9,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"w-30","no-padding"],["mat-icon-button","","svgIcon","clipboard-check",1,"mt-5px",2,"padding-top","3px"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"p-col","no-padding"],["mat-icon-button","",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body"],[1,"p-grid","reply"],[4,"ngIf"],[1,"p-col-12","answer-section","no-padding"],[1,"answer-section",2,"display","block","position","relative"],[1,"ckeditor"],[3,"editor","formControl","config","ready"],["editor",""],["matSuffix","","mat-icon-button","",2,"position","absolute","right","12px","top","10px","transform","rotate(337deg)",3,"disabled","click"],[1,"mat-icon-status"],[1,"p-col-fixed","avatar",2,"width","60px"],[1,"student-details-img",3,"src"],[1,"p-col"],[1,"p-col-12","comment-section"],[1,"p-grid","comment-header"],[1,"p-col","comment-name"],[1,"p-col-3","comment-subject",2,"padding-left","0px","padding-right","0px"],[1,"p-grid","comment-message"],[1,"p-col-12","message-body",3,"innerHTML"],[4,"ngFor","ngForOf"],[1,"p-grid",2,"padding-left","60px","width","100%"],[1,"p-col-6","comment-subject"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.\u0275\u0275element(4,"mat-icon",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",5)(6,"h3",6),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",7)(10,"button",8),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(11,"mat-icon"),t.\u0275\u0275text(12,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementContainerStart(13,9),t.\u0275\u0275elementStart(14,"div",10),t.\u0275\u0275template(15,dn,21,17,"ng-container",11),t.\u0275\u0275template(16,hn,2,1,"ng-container",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",12)(18,"div",13)(19,"div",14)(20,"ckeditor",15,16),t.\u0275\u0275listener("ready",function(a){return n.onReady(a)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(22,"button",17),t.\u0275\u0275listener("click",function(){return n.addReply(n.replies)}),t.\u0275\u0275elementStart(23,"mat-icon",18),t.\u0275\u0275text(24,"send"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd()),2&e&&(t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,7,"Commentaries / Replies")),t.\u0275\u0275advance(8),t.\u0275\u0275property("ngIf",!(null!=n.replies&&n.replies.is_reply)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==n.replies?null:n.replies.reply_note_ids)&&(null==n.replies?null:n.replies.reply_note_ids.length)),t.\u0275\u0275advance(4),t.\u0275\u0275property("editor",n.Editor)("formControl",n.commentForm)("config",n.config),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!(null!=n.commentForm&&n.commentForm.value)))},dependencies:[u.sg,u.O5,Y.Zt,Y.Bh,T.lW,v.xY,w.Hw,I.R9,d.NgControlStatus,d.FormControlDirective,J.u,C.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#fff}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid white}.float-right[_ngcontent-%COMP%]{float:right}.header-dialog[_ngcontent-%COMP%]{padding:0 5px 0 15px}.overflow-auto[_ngcontent-%COMP%]{overflow:auto}.commentaries-card[_ngcontent-%COMP%]{margin-top:16px!important;min-height:280px}.pad-top[_ngcontent-%COMP%]{padding-top:3px}.avatar[_ngcontent-%COMP%]{width:70px;border-radius:50%;margin-right:20px}.reply[_ngcontent-%COMP%]{width:860px;margin-bottom:20px;max-height:400px;overflow:auto}.student-details-img[_ngcontent-%COMP%]{border-radius:50%}.comment-section[_ngcontent-%COMP%]{border:1px solid #607d8b;background:#303030;color:#fff}.comment-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]     .mention{color:#00bfff!important}.reply-form-text[_ngcontent-%COMP%]{color:#000}.reply-form[_ngcontent-%COMP%]     .mat-form-field-outline{background-color:#ffffff6e!important;border-color:#fff!important;border-radius:0!important;color:#000}.reply-form[_ngcontent-%COMP%]     .mat-form-field-outline-start{border-color:#ffffff6e!important;border-radius:0!important}.reply-form[_ngcontent-%COMP%]     .mat-form-field-outline-end{border-color:#ffffff6e!important;border-radius:0!important}[_nghost-%COMP%]  .ck.ck-content{padding-right:65px}[_nghost-%COMP%]  .ck.ck-toolbar{border:none}[_nghost-%COMP%]  .ck-editor__editable_inline{min-height:50px;border:1px solid #ffffff;background:rgba(255,255,255,.431372549)!important;color:#242424!important}[_nghost-%COMP%]  .ck-content .mention{color:#000}"]}),o})();function un(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",24),t.\u0275\u0275element(1,"mat-spinner",25),t.\u0275\u0275elementEnd())}function fn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function _n(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",32),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(s.selectCategory(a))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e," ")}}function Cn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-form-field",26),t.\u0275\u0275element(1,"input",27),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"mat-autocomplete",28,29)(5,"mat-option",30),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.selectCategory("add"))}),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,_n,2,2,"mat-option",31),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275reference(4),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,5,"Category")),t.\u0275\u0275property("matAutocomplete",e),t.\u0275\u0275advance(2),t.\u0275\u0275property("panelWidth","fit"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,7,"Add More")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.categoryFilterList)}}function yn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-form-field"),t.\u0275\u0275element(1,"input",33),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,1,"Category")))}function bn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}let gt=(()=>{class o{constructor(e,n,i,a,s,c,g,f){this.dialogRef=e,this.data=n,this.fb=i,this.schoolService=a,this.translate=s,this.utilService=c,this.companyService=g,this.authService=f,this.Editor=ot,this.isWaitingForResponse=!1,this.categoryFilterList=[],this.isAddMore=!1,this.subs=new P.Y,this.config={placeholder:this.translate.instant("Title"),height:"20rem",toolbar:[]}}ngOnInit(){this.initForm(),this.getCategoryFilterDropdown(),this.data.isEdit&&this.getCompanyComment(),this.config.mention={feeds:[{marker:"@",feed:e=>this.getFeedItems(e),minimumCharacters:3}]}}initForm(){this.form=this.fb.group({created_by:[this.data.currentUser._id],subject:["",d.Validators.required],category:[""],note:["",d.Validators.required],tagged_user_ids:[null]})}getCompanyComment(){this.isWaitingForResponse=!0,this.subs.sink=this.companyService.GetOneCompanyNote(this.data.commentId).subscribe(e=>{if(e){const n=b.cloneDeep(e);if(n.tagged_user_ids&&n.tagged_user_ids.length){const i=[];n.tagged_user_ids.forEach(a=>{i.push(a._id)}),n.tagged_user_ids=i}this.form.patchValue(n)}this.isWaitingForResponse=!1},e=>{this.authService.postErrorLog(e),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getCategoryFilterDropdown(){this.subs.sink=this.companyService.GetAllCompanyNoteCategories().subscribe(e=>{e&&e.length&&(this.categoryFilterList=e.sort((n,i)=>n.toLowerCase()>i.toLowerCase()?1:i.toLowerCase()>n.toLowerCase()?-1:0))},e=>{this.authService.postErrorLog(e),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectCategory(e){e?"add"===e?this.isAddMore=!0:this.form.controls.category.patchValue(e):this.form.controls.category.patchValue(null)}getFeedItems(e){return new Promise(n=>{setTimeout(()=>{if(e){const i=this.data.allDataUser.filter(a=>{const s=e.toLowerCase();return a.last_name.toLowerCase().trim().includes(s)});this.allUser=i.map(a=>"@"+a.last_name+" "+a.first_name),n(this.allUser)}else this.allUser=this.data.allDataUser.map(i=>"@"+i.last_name+" "+i.first_name).slice(0,10),n(this.allUser)},50)})}getUserTagged(){let a,e=this.utilService.cleanHTML(this.form.controls.note.value).split(" "),n=[],i=!1;e.forEach(c=>{if(c.includes("@")){const g=c.substr(1,c.length);return n.push(g),i=!0,void(a=n.length)}i&&(n[a-1]=n[a-1]+" "+c,i=!1)});let s=[];return n.forEach(c=>{let g=[],f=c.split(" ");for(let p=0;p<f.length;p++)this.data.allDataUser&&this.data.allDataUser.find(h=>{h&&h.last_name&&h.first_name&&h.last_name.includes(f[p])&&h.first_name===f[f.length-1]&&(g.push(h),s.push(h._id))})}),s}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}submit(){if(this.isWaitingForResponse=!0,this.form.invalid)return this.form.markAllAsTouched(),void(this.isWaitingForResponse=!1);this.data.isEdit?this.edit():this.create()}create(){const e=this.form.value;e.tagged_user_ids=this.getUserTagged(),this.data.companyId?e.company_id=this.data.companyId:this.data.companyEntityId&&(e.company_entity_id=this.data.companyEntityId),this.subs.sink=this.companyService.CreateCompanyNote(e).subscribe(n=>{this.isWaitingForResponse=!1,n&&l().fire({type:"success",title:this.translate.instant("Bravo"),confirmButtonText:this.translate.instant("OK"),allowOutsideClick:!1,allowEscapeKey:!1}).then(i=>{i.value&&this.closeDialog()})},n=>{this.authService.postErrorLog(n),l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}edit(){const e=this.form.value;e.tagged_user_ids=this.getUserTagged(),e.created_by=this.data.currentUser._id,this.data.companyId?e.company_id=this.data.companyId:this.data.companyEntityId&&(e.company_entity_id=this.data.companyEntityId),this.subs.sink=this.companyService.UpdateCompanyNote(this.data.commentId,e).subscribe(n=>{this.isWaitingForResponse=!1,n&&l().fire({type:"success",title:this.translate.instant("Bravo"),confirmButtonText:this.translate.instant("OK"),allowOutsideClick:!1,allowEscapeKey:!1}).then(i=>{i.value&&this.closeDialog()})},n=>{this.authService.postErrorLog(n),l().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.so),t.\u0275\u0275directiveInject(v.WI),t.\u0275\u0275directiveInject(d.UntypedFormBuilder),t.\u0275\u0275directiveInject(lt.E),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-company-note-dialog"]],decls:44,vars:25,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog","no-padding"],[1,"p-grid"],[1,"w-30","no-padding"],["mat-icon-button",""],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"p-col","no-padding"],["mat-icon-button","",1,"close-icon","float-right",3,"click"],[1,"p-col-12","no-padding"],["mat-dialog-content","",3,"formGroup"],["class","inner-loading-indicator",4,"ngIf"],[1,"p-col-6"],["matInput","","formControlName","subject","required","",3,"placeholder"],[4,"ngIf"],["class","full-wid",4,"ngIf"],[1,"p-col-12","pad-y-none","no-padding"],[1,"title"],[1,"ckeditor"],["formControlName","note",3,"editor","config","ready"],["editor",""],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",1,"mr-0",3,"click"],[1,"inner-loading-indicator"],["color","accent"],[1,"full-wid"],["matInput","","formControlName","category",3,"placeholder","matAutocomplete"],[3,"panelWidth"],["autoScholar","matAutocomplete"],[3,"click"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["matInput","","formControlName","category",3,"placeholder"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5,"add"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",7)(12,"button",8),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(13,"mat-icon"),t.\u0275\u0275text(14,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(15,"div",9)(16,"div",10),t.\u0275\u0275template(17,un,2,0,"div",11),t.\u0275\u0275elementStart(18,"div",9)(19,"div",12)(20,"div",2)(21,"mat-form-field"),t.\u0275\u0275element(22,"input",13),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275template(24,fn,3,3,"mat-error",14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div",2),t.\u0275\u0275template(26,Cn,9,9,"mat-form-field",15),t.\u0275\u0275template(27,yn,3,3,"mat-form-field",14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(28,"div",16)(29,"div",17)(30,"p"),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"div",18)(34,"ckeditor",19,20),t.\u0275\u0275listener("ready",function(a){return n.onReady(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(36,bn,3,3,"mat-error",14),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(37,"div",21)(38,"button",22),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(39),t.\u0275\u0275pipe(40,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"button",23),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(42),t.\u0275\u0275pipe(43,"translate"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(n.data.isEdit?t.\u0275\u0275pipeBind1(9,13,"COMPANY.Edit Note"):t.\u0275\u0275pipeBind1(10,15,"COMPANY.Add Note")),t.\u0275\u0275advance(8),t.\u0275\u0275property("formGroup",n.form),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(23,17,"Subject")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.form.get("subject").errors),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.isAddMore),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isAddMore),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(32,19,"COMPANY.Note"),"*"),t.\u0275\u0275advance(3),t.\u0275\u0275property("editor",n.Editor)("config",n.config),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.form.get("note").touched&&n.form.get("note").invalid),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(40,21,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(43,23,"Validate")," "))},dependencies:[u.sg,u.O5,Y.Zt,Y.Bh,X.XC,X.ZL,W.ey,T.lW,v.xY,v.H8,w.Hw,I.TO,I.KE,U.Nt,E.Ou,d.DefaultValueAccessor,d.NgControlStatus,d.NgControlStatusGroup,d.RequiredValidator,d.FormGroupDirective,d.FormControlName,J.u,C.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.float-right[_ngcontent-%COMP%]{float:right}.header-dialog[_ngcontent-%COMP%]{padding:10px 5px 0 15px}.comment[_ngcontent-%COMP%]{height:100px}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mr-0[_ngcontent-%COMP%]{margin-right:0}.comment-text2[_ngcontent-%COMP%]{height:30px;color:#000}.add-comment[_ngcontent-%COMP%]     .mat-form-field-outline{height:70px}.add-comment[_ngcontent-%COMP%]     .mat-form-field-outline-start{border-radius:0!important;border-color:inherit}.add-comment[_ngcontent-%COMP%]     .mat-form-field-outline-end{border-radius:0!important;border-color:inherit}.no-padding[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]  .ckeditor .ck-content{min-height:10rem!important}[_nghost-%COMP%]  .ckeditor .ck-editor__editable_inline{border:1px solid #b8b8b8}[_nghost-%COMP%]  .ckeditor .ng-invalid.ng-touched .ck-editor__editable_inline{border:1px solid #f44336}[_nghost-%COMP%]  .ck.ck-toolbar{border:none}[_nghost-%COMP%]  .ck-content .mention{color:#000}"]}),o})();var xn=m(24742),On=m(80529);class G{constructor(r){this.httpClient=r}getAlert(){return this.httpClient.get("assets/data/alert-functionality.json")}}G.\u0275fac=function(r){return new(r||G)(t.\u0275\u0275inject(On.eN))},G.\u0275prov=t.\u0275\u0275defineInjectable({token:G,factory:G.\u0275fac,providedIn:"root"}),function(o,r,e,n){var s,i=arguments.length,a=i<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,r,e,n);else for(var c=o.length-1;c>=0;c--)(s=o[c])&&(a=(i<3?s(a):i>3?s(r,e,a):s(r,e))||a);i>3&&a&&Object.defineProperty(r,e,a)}([(0,xn.q)()],G.prototype,"getAlert",null);var at=m(88796);function Mn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.addComment())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",16),t.\u0275\u0275text(3,"add"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.Add Note")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"COMPANY.Add Note")," "))}function Pn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.edit(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",39),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"Edit"))}function Sn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",40),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.delete(i._id))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",39),t.\u0275\u0275text(3,"delete"),t.\u0275\u0275elementEnd()()}2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"Delete"))}function Tn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"span",41),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.reply(i))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("",null==e||null==e.reply_note_ids?null:e.reply_note_ids.length," ",t.\u0275\u0275pipeBind1(2,2,"replies"),"")}}function In(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",20),t.\u0275\u0275element(2,"img",21),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",22)(4,"div",18)(5,"div",23)(6,"div",24)(7,"div",25)(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",26)(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",27)(16,"span"),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"div",28),t.\u0275\u0275template(20,Pn,4,3,"button",29),t.\u0275\u0275template(21,Sn,4,3,"button",29),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(22,"div",30),t.\u0275\u0275element(23,"div",31),t.\u0275\u0275template(24,Tn,3,4,"span",32),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div",33)(26,"div",34)(27,"div",35)(28,"ckeditor",36,37),t.\u0275\u0275listener("ready",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(a.onReady(i))}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(30,"button",38),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.addReply(i))}),t.\u0275\u0275elementStart(31,"mat-icon",39),t.\u0275\u0275text(32,"send"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("src",null!=e&&null!=e.created_by&&e.created_by.profile_picture?n.serverimgPath+(null==e||null==e.created_by?null:e.created_by.profile_picture):"MR"===(null==e||null==e.created_by?null:e.created_by.civility)?n.maleStudentIcon:"neutral"===(null==e||null==e.created_by?null:e.created_by.civility)?n.neutralStudentIcon:n.femaleStudentIcon,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate5(" ",null!=e&&null!=e.created_by&&e.created_by.civility&&"neutral"===(null==e||null==e.created_by?null:e.created_by.civility)?"":t.\u0275\u0275pipeBind1(10,18,null==e||null==e.created_by?null:e.created_by.civility)," ",null==e||null==e.created_by?null:e.created_by.first_name," ",null==e||null==e.created_by?null:e.created_by.last_name," - ",n.transformDate(null==e?null:e.date_created)," - ",n.transformTime(null==e?null:e.date_created)," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(14,20,"Subject")," : ",null==e?null:e.subject,""),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(18,22,"Category")," : ",null==e?null:e.category,""),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.permission.editNoteInCompany()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.permission.editNoteInCompany()),t.\u0275\u0275advance(2),t.\u0275\u0275property("innerHTML",null==e?null:e.note,t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e?null:e.note),t.\u0275\u0275advance(4),t.\u0275\u0275property("editor",n.Editor)("formControl",n.commentForm)("config",n.config),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!n.commentForm.value)}}function En(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275template(1,In,33,24,"ng-container",19),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.is_reply))}}function wn(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,En,2,1,"div",17),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.companyComments)}}function kn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",42)(1,"div",43)(2,"h3",44),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()()),2&o&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,1,"No Data")))}function An(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",45),t.\u0275\u0275element(1,"mat-spinner",46),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let ut=(()=>{class o{constructor(e,n,i,a,s,c,g){this.fb=e,this.dialog=n,this.authService=i,this.translate=a,this.certiDegreeService=s,this.companyService=c,this.permission=g,this.Editor=ot,this.subs=new P.Y,this.isWaitingForResponse=!1,this.isReset=!0,this.companyComments=[],this.filteredValues={company_id:"",company_entity_id:"",note_body:"",created_by:"",date_note_created:"",category:""},this.commentFilter=new d.UntypedFormControl(null),this.userFilter=new d.UntypedFormControl(null),this.dateFilter=new d.UntypedFormControl(null),this.categoryFilter=new d.UntypedFormControl(null),this.categoryFilterList=[],this.userFilterList=[],this.dateFilterList=[],this.commentForm=new d.UntypedFormControl(null),this.isFirsLoad=!0,this.serverimgPath=`${ht.a.baseApi}/fileuploads/`.replace("/graphql",""),this.maleStudentIcon="../../../../../assets/img/student_icon.png",this.femaleStudentIcon="../../../../../assets/img/student_icon_fem.png",this.neutralStudentIcon="../../../../../assets/img/student_icon_neutral.png",this.config={height:"20rem",toolbar:[],placeholder:this.translate.instant("Answer")}}ngOnInit(){this.initForm(),this.getCategoryFilterDropdown(),this.filterCompanyComment(),this.userData&&this.userData.length&&this.getAllUsers(this.userData),this.currentUser=this.authService.getLocalStorageUser(),this.commentForm.valueChanges.subscribe(e=>{this.isForm()}),this.config.mention={feeds:[{marker:"@",feed:e=>this.getFeedItems(e),minimumCharacters:3}]},this.translate.onLangChange.subscribe(e=>{this.config.placeholder=e.translations.Answer,this.getAllCompanyComment()})}initForm(){this.filterForm=this.fb.group({searchCommentFilter:[null],userFilter:[null],dateFilter:[null],categoryFilter:[null]})}filterCompanyComment(){this.subs.sink=this.categoryFilter.valueChanges.subscribe(e=>{this.filteredValues.category=e||"",this.isReset||this.getAllCompanyComment()}),this.subs.sink=this.userFilter.valueChanges.subscribe(e=>{this.filteredValues.created_by=e||"",this.isReset||this.getAllCompanyComment()}),this.subs.sink=this.dateFilter.valueChanges.subscribe(e=>{this.filteredValues.date_note_created=e||"",this.isReset||this.getAllCompanyComment()}),this.subs.sink=this.commentFilter.valueChanges.subscribe(e=>{this.filteredValues.note_body=e||"",this.isReset||this.getAllCompanyComment()})}getAllCompanyComment(){this.isWaitingForResponse=!0,this.isReset=!1,this.companyId?(this.filteredValues.company_id=this.companyId,this.filteredValues.company_entity_id=null):this.companyEntityId&&(this.filteredValues.company_id=null,this.filteredValues.company_entity_id=this.companyEntityId),this.companyComments=[],this.subs.sink=this.companyService.GetAllCompanyNotes(this.filteredValues).subscribe(e=>{if(!e)return this.companyComments=[],void(this.isWaitingForResponse=!1);this.isWaitingForResponse=!1,this.companyComments=e,this.isFirsLoad&&this.getFilterDropdown(),this.isFirsLoad=!1},e=>{this.authService.postErrorLog(e),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getCategoryFilterDropdown(){this.subs.sink=this.companyService.GetAllCompanyNoteCategories().subscribe(e=>{e&&e.length&&(this.categoryFilterList=e)},e=>{this.authService.postErrorLog(e),l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getFilterDropdown(){this.companyComments&&(this.userFilterList=this.companyComments.map(e=>({name:e.created_by.first_name+" "+e.created_by.last_name})),this.userFilterList=[...new Map(this.userFilterList.map(e=>[e.name,e])).values()],this.dateFilterList=this.companyComments.map(e=>({date:this.transformDate(e.date_created)})),this.dateFilterList=[...new Map(this.dateFilterList.map(e=>[e.date,e])).values()])}getAllUsers(e){this.isWaitingForResponse=!1;const n=b.cloneDeep(e);this.allDataUser=n,this.allUser=this.allDataUser.map(i=>"@"+i.last_name+" "+i.first_name),this.config.mention={feeds:[{marker:"@",feed:i=>this.getFeedItems(i),minimumCharacters:3}]}}getFeedItems(e){return new Promise(n=>{setTimeout(()=>{if(this.allDataUser&&this.allDataUser.length)if(e){const i=this.allDataUser.filter(a=>{const s=e.toLowerCase();return a.last_name.toLowerCase().trim().includes(s)});this.allUser=i.map(a=>"@"+a.last_name+" "+a.first_name),n(this.allUser)}else this.allUser=this.allDataUser.map(i=>"@"+i.last_name+" "+i.first_name).slice(0,10),n(this.allUser)},50)})}onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())}transformDate(e){return e?j(e).format("DD/MM/YYYY"):""}transformTime(e){return e?j(e).format("HH:mm"):""}ngOnChanges(){this.userData&&this.userData.length&&this.getAllUsers(this.userData),this.reset()}addComment(){this.subs.sink=this.dialog.open(gt,{width:"900px",minHeight:"200px",disableClose:!0,data:{companyId:this.companyId,companyEntityId:this.companyEntityId,currentUser:this.currentUser,isEdit:!1,allDataUser:this.allDataUser,allUser:this.allUser}}).afterClosed().subscribe(e=>{this.isFirsLoad=!0,this.getCategoryFilterDropdown(),this.getAllCompanyComment()})}edit(e){this.subs.sink=this.dialog.open(gt,{width:"900px",minHeight:"100px",disableClose:!0,data:{companyId:this.companyId,companyEntityId:this.companyEntityId,currentUser:this.currentUser,isEdit:!0,commentId:e._id,allDataUser:this.allDataUser,allUser:this.allUser}}).afterClosed().subscribe(n=>{this.isFirsLoad=!0,this.getAllCompanyComment(),this.getCategoryFilterDropdown()})}delete(e){this.isWaitingForResponse=!0;let n=2;l().fire({type:"warning",title:this.translate.instant("Delete_Comment.title"),text:this.translate.instant("Delete_Comment.text"),allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("Delete_Comment.YES",{timer:n}),cancelButtonText:this.translate.instant("Delete_Comment.Cancel"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{l().disableConfirmButton();const i=l().getConfirmButton();this.intVal=setInterval(()=>{n-=1,i.innerText=this.translate.instant("Delete_Comment.YES")+` (${n})`},1e3),this.timeOutVal=setTimeout(()=>{i.innerText=this.translate.instant("Delete_Comment.YES"),l().enableConfirmButton(),clearInterval(this.intVal),clearTimeout(this.timeOutVal)},1e3*n)}}).then(i=>{i.value&&(this.subs.sink=this.companyService.DeleteCompanyNote(e).subscribe(a=>{a&&l().fire({type:"success",title:this.translate.instant("Bravo"),confirmButtonText:this.translate.instant("OK"),allowOutsideClick:!1,allowEscapeKey:!1}).then(s=>{s.value&&(this.isFirsLoad=!0,this.getAllCompanyComment(),this.getCategoryFilterDropdown())}),this.isWaitingForResponse=!1},a=>{this.authService.postErrorLog(a),this.isWaitingForResponse=!1,l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})),this.isWaitingForResponse=!1})}addReply(e){let n=e;n.note=this.commentForm.value,n.created_by=this.currentUser._id,n.reply_for_note_id=n._id,n.tagged_user_ids=n&&n.tagged_user_ids&&n.tagged_user_ids.length?n.tagged_user_ids.map(i=>i._id):null,n.is_reply=!0,this.companyId?n.company_id=this.companyId:this.companyEntityId&&(n.company_entity_id=this.companyEntityId),delete n.reply_note_ids,delete n.date_created,delete n._id,this.isWaitingForResponse=!0,this.subs.sink=this.companyService.CreateCompanyNote(n).subscribe(i=>{i&&(this.reset(),this.isForm(),this.isWaitingForResponse=!1)},i=>{this.authService.postErrorLog(i),l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}reply(e){this.subs.sink=this.dialog.open(gn,{width:"900px",minHeight:"100px",disableClose:!0,panelClass:"grey-mode-pop-up",data:{companyId:this.companyId,companyEntityId:this.companyEntityId,commentId:e._id,currentUser:this.currentUser,allDataUser:this.allDataUser,allUser:this.allUser}}).afterClosed().subscribe(n=>{this.getAllCompanyComment()})}reset(){this.isReset=!0,this.filteredValues={company_id:"",company_entity_id:"",note_body:"",created_by:"",date_note_created:"",category:""},this.commentForm.setValue("",{emitEvent:!1}),this.categoryFilter.setValue(null,{emitEvent:!1}),this.dateFilter.setValue(null,{emitEvent:!1}),this.userFilter.setValue(null,{emitEvent:!1}),this.commentFilter.setValue(null,{emitEvent:!1}),this.getCategoryFilterDropdown(),this.getAllCompanyComment()}isForm(){return this.commentForm.value?(this.companyService.childrenFormValidationStatus=!1,!1):(this.companyService.childrenFormValidationStatus=!0,!0)}ngOnDestroy(){this.subs.unsubscribe(),clearInterval(this.intVal),clearTimeout(this.timeOutVal)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(d.UntypedFormBuilder),t.\u0275\u0275directiveInject(v.uw),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(G),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(Q.$))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-notes-tab"]],inputs:{companyId:"companyId",companyEntityId:"companyEntityId",userData:"userData"},features:[t.\u0275\u0275NgOnChangesFeature],decls:26,vars:29,consts:[[1,"p-grid",2,"margin-top","18px !important","flex-wrap","nowrap"],[1,"p-col-fixed","no-padding",2,"width","150px","float","left","padding-right","15px !important"],["matInput","",1,"form-field",3,"formControl","placeholder"],["bindLabel","name","bindValue","name",1,"pad-top","custom-ngselect-dropdown",3,"items","formControl","placeholder"],["bindLabel","date","bindValue","date",1,"pad-top","custom-ngselect-dropdown",3,"items","formControl","placeholder"],[1,"p-col-fixed","no-padding",2,"width","150px","float","left","padding-right","12px !important"],[1,"pad-top","custom-ngselect-dropdown",3,"items","formControl","placeholder"],[1,"p-col",2,"text-align","right","white-space","nowrap"],["mat-raised-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["color","primary","mat-raised-button","",2,"padding","0px 7px !important",3,"matTooltip","click"],["svgIcon","loop",1,"mat-icon-svgIcon"],[1,"commentaries-card"],[4,"ngIf","ngIfElse"],["noData",""],["class","inner-loading-indicator",4,"ngIf"],["mat-raised-button","","color","accent",3,"matTooltip","click"],[1,"mat-icon-default"],["class","p-grid",4,"ngFor","ngForOf"],[1,"p-grid"],[4,"ngIf"],[1,"p-col-fixed","avatar",2,"width","60px"],[1,"student-details-img",3,"src"],[1,"p-col"],[1,"p-col-12","comment-section"],[1,"p-grid","comment-header"],[1,"p-col-5","comment-name"],[1,"p-col-3","comment-subject",2,"padding-left","0px","padding-right","0px"],[1,"p-col-2","comment-subject",2,"padding-left","0px","padding-right","0px"],[1,"p-col-2",2,"text-align","right","padding","3px 0 5px 5px"],["mat-icon-button","","class","margin-right-button",3,"matTooltip","click",4,"ngIf"],[1,"p-grid","comment-message"],[1,"p-col-12","message-body",3,"innerHTML"],["class","reply",3,"click",4,"ngIf"],[1,"p-col-12","answer-section","no-padding"],[1,"answer-section",2,"display","block","position","relative"],[1,"ckeditor"],[3,"editor","formControl","config","ready"],["editor",""],["matSuffix","","mat-icon-button","",2,"position","absolute","right","12px","top","10px","transform","rotate(337deg)",3,"disabled","click"],[1,"mat-icon-status"],["mat-icon-button","",1,"margin-right-button",3,"matTooltip","click"],[1,"reply",3,"click"],[1,"p-grid","no-comment"],[1,"p-col-12"],[2,"text-align","center"],[1,"inner-loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-form-field"),t.\u0275\u0275element(3,"input",2),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",1),t.\u0275\u0275element(6,"ng-select",3),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",1),t.\u0275\u0275element(9,"ng-select",4),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",5),t.\u0275\u0275element(12,"ng-select",6),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",7),t.\u0275\u0275template(15,Mn,6,6,"button",8),t.\u0275\u0275elementStart(16,"button",9),t.\u0275\u0275listener("click",function(){return n.reset()}),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275element(18,"mat-icon",10),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(21,"mat-card",11),t.\u0275\u0275template(22,wn,2,1,"ng-container",12),t.\u0275\u0275template(23,kn,5,3,"ng-template",null,13,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,An,2,1,"div",14)),2&e){const i=t.\u0275\u0275reference(24);t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(4,17,"search")),t.\u0275\u0275property("formControl",n.commentFilter),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(7,19,"User")),t.\u0275\u0275property("items",n.userFilterList)("formControl",n.userFilter),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(10,21,"MailBox.DATE")),t.\u0275\u0275property("items",n.dateFilterList)("formControl",n.dateFilter),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(13,23,"Category")),t.\u0275\u0275property("items",n.categoryFilterList)("formControl",n.categoryFilter),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.permission.addNoteInCompany()),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(17,25,"Reset")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,27,"Reset")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.companyComments&&n.companyComments.length)("ngIfElse",i),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isWaitingForResponse)}},dependencies:[u.sg,u.O5,T.lW,R.a8,w.Hw,I.KE,I.R9,U.Nt,E.Ou,z.gM,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,at.w9,J.u,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.commentaries-card[_ngcontent-%COMP%]{margin-top:16px!important;min-height:280px}.avatar[_ngcontent-%COMP%]{width:60px;border-radius:50%}.comment-section[_ngcontent-%COMP%]{border:1px solid #607d8b}.no-comment[_ngcontent-%COMP%]{justify-content:center;align-items:center;font-size:20px;color:gray;min-height:240px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#fff;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.reply[_ngcontent-%COMP%]{text-align:end;position:absolute;right:0;bottom:0;font-size:12px;color:#26abeb;font-weight:900;cursor:pointer}.reply[_ngcontent-%COMP%]:hover{text-decoration:underline}.comment-message[_ngcontent-%COMP%]{position:relative}.comment-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]     .mention{color:#00bfff!important}.overflow-auto[_ngcontent-%COMP%]{overflow:auto}.commentaries-card[_ngcontent-%COMP%]{margin-top:16px!important;margin-bottom:20px!important;min-height:280px}.pad-top[_ngcontent-%COMP%]{padding-top:3px}.student-details-img[_ngcontent-%COMP%]{border-radius:50%}.comment[_ngcontent-%COMP%]     .mat-form-field-outline-start{border-radius:0!important;border-top:0!important;border-right:0!important;border-left:0!important}.comment[_ngcontent-%COMP%]     .mat-form-field-outline-end{border-radius:0!important;border-top:0!important;border-right:0!important;border-left:0!important}[_nghost-%COMP%]  .mat-focused .mat-form-field-outline{border:1px solid!important}.comment-text[_ngcontent-%COMP%]{height:30px;color:#fff}[_nghost-%COMP%]  .ck.ck-content{padding-right:65px;background:transparent;color:#fff;border-color:#607d8b;border-top:none;border-left:none;border-right:none}[_nghost-%COMP%]  .ck.ck-toolbar{border:none}[_nghost-%COMP%]  .ck-content .mention{color:#fff}  .custom-ngselect-dropdown .ng-dropdown-panel{width:-moz-fit-content!important;width:fit-content!important}"]}),o})();const Bn=["companyMatGroup"];function Fn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Identity")))}function Dn(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-branch-identity-tab",7),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("branchId",e.companyId)}}function Nn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.COMPANY_STAFF")))}function Rn(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-branch-company-staff-tab",9),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("companyId",e.companyId)("quickSearchMentorId",e.quickSearchMentorId)}}function Ln(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",8),t.\u0275\u0275template(1,Nn,3,3,"ng-template",3),t.\u0275\u0275template(2,Rn,1,2,"ng-template",4),t.\u0275\u0275elementEnd())}function Un(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.Notes")))}function Vn(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-company-notes-tab",10),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyId",e.companyId)("userData",e.userData)}}let Yn=(()=>{class o{constructor(e,n,i,a,s){this.schoolService=e,this.companyService=n,this.translate=i,this.authService=a,this.permissionService=s,this.selectedIndex=0,this.isWaitingForResponse=!1}ngOnInit(){this.quickSearchMentorId&&(this.selectedIndex=1),this.getAllUsers()}ngAfterViewInit(){this.companyMatGroup._handleClick=this.checkIfAnyChildrenFormInvalid.bind(this)}getAllUsers(){this.userData=[],this.isWaitingForResponse=!0,this.schoolService.getAllUserNote().subscribe(e=>{this.isWaitingForResponse=!1,this.userData=e},e=>{this.authService.postErrorLog(e),e&&e.message&&(e.message.includes("jwt expired")||e.message.includes("str & salt required")||e.message.includes("Authorization header is missing")||e.message.includes("salt"))?this.authService.handlerSessionExpired():(this.userData=[],this.isWaitingForResponse=!1)})}checkIfAnyChildrenFormInvalid(e,n,i){return this.companyService.childrenFormValidationStatus?B.SP.prototype._handleClick.apply(this.companyMatGroup,[e,n,i]):this.fireUnsavedDataWarningSwal(e,n,i)}fireUnsavedDataWarningSwal(e,n,i){l().fire({type:"warning",title:this.translate.instant("TMTC_S01.TITLE"),text:this.translate.instant("TMTC_S01.TEXT"),confirmButtonText:this.translate.instant("TMTC_S01.BUTTON_1"),showCancelButton:!0,cancelButtonText:this.translate.instant("TMTC_S01.BUTTON_2"),allowEscapeKey:!1,allowOutsideClick:!1}).then(a=>!a.value&&(this.companyService.childrenFormValidationStatus=!0,B.SP.prototype._handleClick.apply(this.companyMatGroup,[e,n,i])))}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(lt.E),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(Q.$))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-branch-parent-tabs"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(Bn,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.companyMatGroup=i.first)}},inputs:{companyId:"companyId",quickSearchMentorId:"quickSearchMentorId"},decls:9,vars:2,consts:[[3,"selectedIndex","selectedIndexChange"],["companyMatGroup",""],["label","Identity"],["mat-tab-label",""],["matTabContent",""],["label","Company Staff",4,"ngIf"],["label","Notes"],[3,"branchId"],["label","Company Staff"],[3,"companyId","quickSearchMentorId"],[3,"companyId","userData"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-tab-group",0,1),t.\u0275\u0275listener("selectedIndexChange",function(a){return n.selectedIndex=a}),t.\u0275\u0275elementStart(2,"mat-tab",2),t.\u0275\u0275template(3,Fn,3,3,"ng-template",3),t.\u0275\u0275template(4,Dn,1,1,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Ln,3,0,"mat-tab",5),t.\u0275\u0275elementStart(6,"mat-tab",6),t.\u0275\u0275template(7,Un,3,3,"ng-template",3),t.\u0275\u0275template(8,Vn,1,2,"ng-template",4),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275property("selectedIndex",n.selectedIndex),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.permissionService.showsCompanyStaffTabPerm()))},dependencies:[u.O5,B.SP,B.uD,B.uX,B.Vc,qt,pn,ut,C.X$],styles:[".mat-tab-group[_ngcontent-%COMP%]{margin-top:20px!important}"]}),o})(),Wn=(()=>{class o{constructor(){this.isRefresh=new t.EventEmitter}ngOnInit(){}refresh(e){this.isRefresh.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-branch-detail"]],inputs:{companyId:"companyId",company:"company",quickSearchMentorId:"quickSearchMentorId"},outputs:{isRefresh:"isRefresh"},decls:4,vars:3,consts:[[2,"margin-top","15px"],[3,"companyId","isRefresh"],[3,"companyId","quickSearchMentorId"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"ms-company-branch-summary",1),t.\u0275\u0275listener("isRefresh",function(a){return n.refresh(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"div"),t.\u0275\u0275element(3,"ms-company-branch-parent-tabs",2),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("companyId",n.companyId),t.\u0275\u0275advance(2),t.\u0275\u0275property("companyId",n.companyId)("quickSearchMentorId",n.quickSearchMentorId))},dependencies:[Nt,Yn]}),o})();const Hn=["siretNumber"];function zn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",11),t.\u0275\u0275element(1,"mat-progress-spinner",12),t.\u0275\u0275elementEnd())}function jn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",34),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e.name)," ")}}function Gn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",28)(1,"b"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"Sorry, the SIRET number you entered does not match with any company registered in France")))}const $n=function(o){return{add:o}};function Qn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"div",15)(3,"mat-form-field")(4,"mat-label"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"mat-select",16),t.\u0275\u0275listener("selectionChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.countrySelected(i))}),t.\u0275\u0275template(8,jn,3,4,"mat-option",17),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",15)(10,"mat-form-field")(11,"input",18,19),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onWheel(i))}),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(14,"div",15)(15,"button",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.getCompany())}),t.\u0275\u0275elementStart(16,"mat-icon"),t.\u0275\u0275text(17,"check_box"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"div",21)(21,"div",22)(22,"mat-form-field"),t.\u0275\u0275element(23,"input",23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div",24)(26,"mat-form-field"),t.\u0275\u0275element(27,"input",25),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"div",24)(30,"mat-form-field"),t.\u0275\u0275element(31,"input",26),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(33,"div",24)(34,"mat-form-field"),t.\u0275\u0275element(35,"input",27),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(37,"div",24),t.\u0275\u0275elementStart(38,"div",28)(39,"b"),t.\u0275\u0275text(40),t.\u0275\u0275pipe(41,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(42,"div",28)(43,"div",29)(44,"div",30)(45,"button",31),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.onCancelAdd())}),t.\u0275\u0275text(46),t.\u0275\u0275pipe(47,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(48,"button",32),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.addCompany())}),t.\u0275\u0275text(49),t.\u0275\u0275pipe(50,"translate"),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275template(51,Gn,4,3,"div",33),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",e.addCompanyFrance),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(35,$n,!e.companyClicked)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,15,"COMPANY.COUNTRY")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",e.countries),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(13,17,"COMPANY.SIRET_NUMBER")),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(19,19,"COMPANY.GET_THE_COMPANY")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("hidden",!e.companyClicked),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(24,21,"COMPANY.NAME")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(28,23,"COMPANY.COMPANY_TYPE")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(32,25,"COMPANY.MAIN_ACTIVITY")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(36,27,"COMPANY.NO_EMPLOYEE_IN_FRANCE")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(41,29,e.caseMessage)," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(47,31,"COMPANY.NO")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(50,33,"COMPANY.YES")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","case 5"===e.caseMessage)}}function qn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",34),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e.name)," ")}}function Kn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function Xn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function Zn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function Jn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function to(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function eo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function no(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",35)(1,"div",36)(2,"div",24)(3,"mat-form-field")(4,"mat-label"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"mat-select",37),t.\u0275\u0275listener("selectionChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.countrySelected(i))}),t.\u0275\u0275template(8,qn,3,4,"mat-option",17),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",24)(10,"mat-form-field"),t.\u0275\u0275element(11,"input",38),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275template(13,Kn,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",22)(15,"mat-form-field"),t.\u0275\u0275element(16,"input",40),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275template(18,Xn,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(19,"div",24)(20,"mat-form-field"),t.\u0275\u0275element(21,"input",41),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275template(23,Zn,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",24)(25,"mat-form-field"),t.\u0275\u0275element(26,"input",42),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275template(28,Jn,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"div",24)(30,"mat-form-field"),t.\u0275\u0275element(31,"input",43),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275template(33,to,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(34,"div",24)(35,"mat-form-field"),t.\u0275\u0275element(36,"input",44),t.\u0275\u0275pipe(37,"translate"),t.\u0275\u0275template(38,eo,3,3,"mat-error",39),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(39,"div",3)(40,"div",22)(41,"div",29)(42,"div",30)(43,"button",31),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.closeDialog())}),t.\u0275\u0275text(44),t.\u0275\u0275pipe(45,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(46,"button",32),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.validateCompany())}),t.\u0275\u0275text(47),t.\u0275\u0275pipe(48,"translate"),t.\u0275\u0275elementEnd()()()()()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",e.addCompanyNotFrance),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,18,"COMPANY.COUNTRY")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.countries),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(12,20,"COMPANY.RC")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("no_RC").hasError("required")&&(e.addCompanyNotFrance.get("no_RC").touched||e.addCompanyNotFrance.get("no_RC").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(17,22,"COMPANY.NAME")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("company_name").hasError("required")&&(e.addCompanyNotFrance.get("company_name").touched||e.addCompanyNotFrance.get("company_name").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(22,24,"COMPANY.ZIPCODE")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("zip_code").hasError("required")&&(e.addCompanyNotFrance.get("zip_code").touched||e.addCompanyNotFrance.get("zip_code").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(27,26,"COMPANY.COMPANY_TYPE")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("type_of_company").hasError("required")&&(e.addCompanyNotFrance.get("type_of_company").touched||e.addCompanyNotFrance.get("type_of_company").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(32,28,"COMPANY.MAIN_ACTIVITY")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("activity").hasError("required")&&(e.addCompanyNotFrance.get("activity").touched||e.addCompanyNotFrance.get("activity").dirty)),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(37,30,"COMPANY.NO_EMPLOYEE_IN_FRANCE")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.addCompanyNotFrance.get("no_of_employee_in_france").hasError("required")&&(e.addCompanyNotFrance.get("no_of_employee_in_france").touched||e.addCompanyNotFrance.get("no_of_employee_in_france").dirty)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(45,32,"COMPANY.CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(48,34,"COMPANY.ENTER"))}}let oo=(()=>{class o{constructor(e,n,i,a,s,c,g,f){this.fb=e,this.companyService=n,this.permission=i,this.CurUserService=a,this.dialogRef=s,this.translate=c,this.router=g,this.data=f,this.subs=new P.Y,this.isWaitingForResponse=!1,this.countries=[],this.countriesList=[],this.companyClicked=!1,this.selectedCountry="France"}ngOnInit(){this.initCompanyFranceForm(),this.subs.sink=this.companyService.getCountry().subscribe(e=>{this.countries=e,this.countriesList=e},e=>{l().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}),this.addCompanyFrance.get("country").patchValue("France"),this.isUserAcadir=!!this.permission.getPermission("Academic Director"),this.isUserAcadAdmin=!!this.permission.getPermission("Academic Admin"),this.isUserAdmtc=!!this.permission.getPermission("ADMTC Admin")||!!this.permission.getPermission("ADMTC Director"),this.CurUser=this.CurUserService.getLocalStorageUser(),this.isUserAcadir?this.entityData=this.CurUser?.entities.find(e=>"Academic Director"===e?.type?.name):this.isUserAcadAdmin&&(this.entityData=this.CurUser?.entities.find(e=>"Academic Admin"===e?.type?.name))}initCompanyFranceForm(){this.addCompanyFrance=this.fb.group({country:["",d.Validators.required],no_RC:["",d.Validators.required],company_name:[""],type_of_company:[""],activity:[""],no_of_employee_in_france:[""]})}initCompanyNonFranceForm(){this.addCompanyNotFrance=this.fb.group({country:["",d.Validators.required],no_RC:["",d.Validators.required],zip_code:["",d.Validators.required],company_name:["",d.Validators.required],type_of_company:["",d.Validators.required],activity:["",d.Validators.required],no_of_employee_in_france:["",d.Validators.required]})}onWheel(e){e?.preventDefault()}countrySelected(e){console.log(e.value),"France"!==e.value?(this.addCompanyFrance&&this.addCompanyFrance.reset(),this.initCompanyNonFranceForm(),this.addCompanyNotFrance.get("country").patchValue(e.value),this.selectedCountry=e.value,this.caseMessage=""):(this.addCompanyNotFrance&&(this.addCompanyNotFrance.reset(),this.addCompanyNotFrance.clearValidators(),this.addCompanyNotFrance.updateValueAndValidity()),this.initCompanyFranceForm(),this.addCompanyFrance.get("country").patchValue("France"),this.companyClicked=!1,this.selectedCountry="France",this.caseMessage="")}onClose(){this.dialogRef.close()}getCompany(){if(this.siretInput){const a=this.siretInput.nativeElement.value;this.addCompanyFrance.get("no_RC").value!==a&&this.addCompanyFrance.get("no_RC").patchValue(a)}const e=this.addCompanyFrance.get("country").value;let n=this.addCompanyFrance.get("no_RC").value;if(!e||!n)return this.addCompanyFrance.markAllAsTouched(),void l().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1});n=n.toString();const i=this.isUserAcadir||this.isUserAcadAdmin?this.entityData.school._id:null;this.isWaitingForResponse=!0,this.companyClicked=!1,this.subs.sink=this.companyService.GetCompanyCaseBySiret(n,e,i).subscribe(a=>{if(a&&"case 5"!==a.message){this.isWaitingForResponse=!1;const c=b.cloneDeep(a).companies.find(g=>g.no_RC===n);switch(c.no_of_employee_in_france&&c.no_of_employee_in_france_by_year&&c.type_of_company&&c.type_of_company_by_year&&(c.no_of_employee_in_france=c.no_of_employee_in_france?this.translate.instant(c.no_of_employee_in_france)+(c.no_of_employee_in_france_by_year?" "+this.translate.instant("in")+" "+c.no_of_employee_in_france_by_year:""):null,c.type_of_company=c.type_of_company?c.type_of_company+(c.type_of_company_by_year?" "+this.translate.instant("in")+" "+c.type_of_company_by_year:""):null),this.addCompanyFrance.patchValue(c),this.companyClicked=!0,this.companyBySiretData=a,a.message){case"case 1":this.caseMessage="This company branch is already connected to your school. Do you want to use it?";break;case"case 2":case"case 3":case"case 4":this.caseMessage="Are you sure want to add this company?";break;case"case 6":this.caseMessage="This company branch already exists. Do you want to see the details ?"}}else this.isWaitingForResponse=!1,this.caseMessage="case 5"},a=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(a),a&&a.message&&a.message.includes("adding company is limited to 30 entity in 1 minute")?l().fire({type:"info",title:this.translate.instant("ComLim_s1.TITLE"),html:this.translate.instant("ComLim_s1.TEXT"),confirmButtonText:this.translate.instant("ComLim_s1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):a&&a.message&&a.message.includes("Sorry This Company is closed")?l().fire({type:"info",title:this.translate.instant("COMPANY_S20.TITLE"),html:this.translate.instant("COMPANY_S20.TEXT",{siret:n}),confirmButtonText:this.translate.instant("COMPANY_S20.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):a&&a.message&&(a.message.includes("the siret you entered is not found on the government api. please double check the siret and try again")||a.message.includes("the combination of siret/siren code and zipcode is not detected."))?l().fire({type:"info",title:this.translate.instant("COMP_S1.TITLE"),html:this.translate.instant("COMP_S1.TEXT"),confirmButtonText:this.translate.instant("COMP_S1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}addCompany(){const e=this.addCompanyFrance.get("no_RC").value,n=this.companyBySiretData.companies,i=this.companyBySiretData.message,a=this.companyBySiretData.companies.find(g=>g.no_RC===e),s=this.companyBySiretData.companies.find(g=>"entity"===g.company_type),c=this.isUserAcadir||this.isUserAcadAdmin?this.entityData.school._id:null;"case 1"===i||"case 6"===i?(this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:a.no_RC,siret:a.no_RC}})})):(this.isWaitingForResponse=!0,this.subs.sink=this.companyService.CreateCompanyByCases(i,a?a._id:null,s?s._id:null,c,n).subscribe(p=>{this.isWaitingForResponse=!1,p&&l().fire({type:"success",title:"Bravo !",allowOutsideClick:!1,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(h=>{this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:a.no_RC,siret:a.no_RC}})})})},p=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(p),p&&p.message&&p.message.includes("adding company is limited to 30 entity in 1 minute")?l().fire({type:"info",title:this.translate.instant("ComLim_s1.TITLE"),html:this.translate.instant("ComLim_s1.TEXT"),confirmButtonText:this.translate.instant("ComLim_s1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):p&&p.message&&(p.message.includes("the siret you entered is not found on the government api. please double check the siret and try again")||p.message.includes("the combination of siret/siren code and zipcode is not detected."))?l().fire({type:"info",title:this.translate.instant("COMP_S1.TITLE"),html:this.translate.instant("COMP_S1.TEXT"),confirmButtonText:this.translate.instant("COMP_S1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:p&&p.message?this.translate.instant(p.message.replaceAll("GraphQL error: ","")):p,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}onCancelAdd(){const e=this.addCompanyFrance.get("no_RC").value?this.addCompanyFrance.get("no_RC").value:null;this.initCompanyFranceForm(),this.addCompanyFrance.get("country").patchValue("France"),this.addCompanyFrance.get("no_RC").patchValue(e),this.companyClicked=!1,this.selectedCountry="France",this.caseMessage="",this.companyBySiretData=null}checkFormValidity(){return!!this.addCompanyNotFrance.invalid&&(l().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.addCompanyNotFrance.markAllAsTouched(),!0)}validateCompany(){if(!this.checkFormValidity()){const e=this.addCompanyNotFrance.get("company_name").value,n=this.addCompanyNotFrance.get("zip_code").value;this.addCompanyNotFrance.get("country"),this.isWaitingForResponse=!0,this.subs.sink=this.companyService.validateCompanyNonFrance(e,n).subscribe(a=>{console.log(a),this.isWaitingForResponse=!1,a&&(this.companyNonFranceData=a.companies,"case 1"===a.message?this.swalComp3():"case 2"===a.message?this.createCompany():"case 3"===a.message&&this.swalComp2())},a=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(a),a&&a.message&&a.message.includes("adding company is limited to 30 entity in 1 minute")?l().fire({type:"info",title:this.translate.instant("ComLim_s1.TITLE"),html:this.translate.instant("ComLim_s1.TEXT"),confirmButtonText:this.translate.instant("ComLim_s1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):a&&a.message&&(a.message.includes("the siret you entered is not found on the government api. please double check the siret and try again")||a.message.includes("the combination of siret/siren code and zipcode is not detected."))?l().fire({type:"info",title:this.translate.instant("COMP_S1.TITLE"),html:this.translate.instant("COMP_S1.TEXT"),confirmButtonText:this.translate.instant("COMP_S1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}swalComp2(){const e=this.addCompanyNotFrance.get("company_name").value,n=this.addCompanyNotFrance.get("zip_code").value,i=b.chain(this.companyNonFranceData).keyBy("_id").mapValues("company_name").value();l().fire({type:"warning",input:"select",title:this.translate.instant("NEW_COMP_S2.TITLE"),html:this.translate.instant("NEW_COMP_S2.TEXT",{CompanyName:e,zipcode:n}),customClass:"swal-wide",inputOptions:i,inputPlaceholder:this.translate.instant("Select Company"),confirmButtonText:this.translate.instant("NEW_COMP_S2.BUTTON1"),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_COMP_S2.BUTTON2"),allowOutsideClick:!1,inputValidator:a=>new Promise((s,c)=>{a?(s(""),l().enableConfirmButton()):(l().disableConfirmButton(),c(this.translate.instant("Import_S1.INVALID")))}),onOpen:function(){l().disableConfirmButton(),l().getInput().addEventListener("change",function(a){console.log(a),a.target?l().enableConfirmButton():l().disableConfirmButton()})}}).then(a=>{console.log(a),a.value?this.getData(a.value):this.createCompany()})}swalComp3(){const e=this.addCompanyNotFrance.get("company_name").value,n=this.addCompanyNotFrance.get("zip_code").value;let i=3,a="";this.companyNonFranceData.forEach(s=>{a=s._id}),l().fire({title:this.translate.instant("NEW_COMP_S3.TITLE"),html:this.translate.instant("NEW_COMP_S3.TEXT",{CompanyName:e,zipcode:n}),type:"info",customClass:"swal-wide-1",confirmButtonText:this.translate.instant("NEW_COMP_S3.BUTTON1",{timer:i}),showCancelButton:!0,cancelButtonText:this.translate.instant("NEW_COMP_S3.BUTTON2"),allowOutsideClick:!1,onOpen:()=>{l().disableConfirmButton();const s=l().getConfirmButton();this.timeInterval=setInterval(()=>{i-=1,s.innerText=this.translate.instant("NEW_COMP_S3.BUTTON1")+" in "+i+" sec"},1e3),this.timeOut=setTimeout(()=>{s.innerText=this.translate.instant("NEW_COMP_S3.BUTTON1"),l().enableConfirmButton(),clearInterval(this.timeInterval),clearTimeout(this.timeOut)},1e3*i)}}).then(s=>{if(clearInterval(this.timeInterval),clearTimeout(this.timeOut),s.value)if(this.isUserAcadAdmin||this.isUserAcadir)this.connectingCompany(a);else{const c=this.companyNonFranceData[0];this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:c.company_name,id:c._id}})})}})}getData(e){let n=[];if(console.log(e),this.isWaitingForResponse=!0,this.isUserAcadir||this.isUserAcadAdmin)this.subs.sink=this.companyService.getAllCompanyForCheck(this.entityData.school._id).subscribe(i=>{if(n=i.find(a=>a._id===e),n){this.isWaitingForResponse=!1;const a=this.companyNonFranceData.find(s=>s._id===e);this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:a.company_name,id:e}})})}else e&&(this.subs.sink=this.companyService.getOneCompanyForPayload(e).subscribe(a=>{this.connectingCompany(e)},a=>{this.isWaitingForResponse=!1,console.log("[Data][Error] : ",a),l().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))},i=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(i),l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})});else{this.isWaitingForResponse=!1;const i=this.companyNonFranceData.find(a=>a._id===e);this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:i.company_name,id:e}})})}}connectingCompany(e){this.subs.sink=this.companyService.connectSchoolToCompany(e,[this.entityData.school._id]).subscribe(i=>{this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:i.company_name,id:i._id}})})},i=>{console.log("[Company Data][Error] : ",i),this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(i),i&&i.message&&i.message.includes("adding company is limited to 30 entity in 1 minute")?l().fire({type:"info",title:this.translate.instant("ComLim_s1.TITLE"),html:this.translate.instant("ComLim_s1.TEXT"),confirmButtonText:this.translate.instant("ComLim_s1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):i&&i.message&&(i.message.includes("the siret you entered is not found on the government api. please double check the siret and try again")||i.message.includes("the combination of siret/siren code and zipcode is not detected."))?l().fire({type:"info",title:this.translate.instant("COMP_S1.TITLE"),html:this.translate.instant("COMP_S1.TEXT"),confirmButtonText:this.translate.instant("COMP_S1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}createCompany(){this.isWaitingForResponse=!0;const e=this.addCompanyNotFrance.value;this.isUserAcadir&&(e.school_ids=this.entityData.school._id);const n=[{address:"",postal_code:this.addCompanyNotFrance.get("zip_code").value,city:"",region:"",department:"",country:this.addCompanyNotFrance.get("country").value,is_main_address:!0}];e.company_addresses=n,delete e.country,delete e.zip_code,this.subs.sink=this.companyService.createCompany(e).subscribe(i=>{this.isWaitingForResponse=!1,i&&l().fire({type:"success",title:"Bravo !",confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")}).then(a=>{a.value&&(this.isUserAcadir||this.isUserAcadAdmin?this.connectingCompany(i._id):(this.dialogRef.close(),this.data&&"company"===this.data&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["companies/branches"],{queryParams:{siren:i.company_name,id:i._id}})})))})},i=>{this.isWaitingForResponse=!1,this.CurUserService.postErrorLog(i),i&&i.message&&i.message.includes("adding company is limited to 30 entity in 1 minute")?l().fire({type:"info",title:this.translate.instant("ComLim_s1.TITLE"),html:this.translate.instant("ComLim_s1.TEXT"),confirmButtonText:this.translate.instant("ComLim_s1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):i&&i.message&&(i.message.includes("the siret you entered is not found on the government api. please double check the siret and try again")||i.message.includes("the combination of siret/siren code and zipcode is not detected."))?l().fire({type:"info",title:this.translate.instant("COMP_S1.TITLE"),html:this.translate.instant("COMP_S1.TEXT"),confirmButtonText:this.translate.instant("COMP_S1.BUTTON"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):l().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}onCancel(){setTimeout(()=>this.siretInput.nativeElement.focus())}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(d.UntypedFormBuilder),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(nt.YI),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(v.so),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(D.F0),t.\u0275\u0275directiveInject(v.WI))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-company-dialog"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(Hn,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.siretInput=i.first)}},decls:18,vars:6,consts:[["class","loading-indicator",4,"ngIf"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"p-grid","dialog-border"],[1,"p-col-12","no-padding","no-padding-bottom"],[1,"p-grid"],[1,"p-col-9","no-padding","no-padding-bottom","title"],[1,"dialog-icon"],[1,"dialog-title-text"],[1,"p-col-3","no-padding-bottom","pad-top-15"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon"],["mat-dialog-content","",3,"formGroup",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],["mat-dialog-content","",3,"formGroup"],[1,"p-grid","no-padding","form",3,"ngClass"],[1,"p-col-4"],["formControlName","country","panelClass","filterPanel custom-matselect-dropdown",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","type","number","formControlName","no_RC",3,"placeholder","wheel"],["siretNumber",""],["mat-raised-button","","color","accent",1,"mr-top",2,"width","100%",3,"click"],[1,"p-grid",3,"hidden"],[1,"p-col-12"],["matInput","","readonly","","formControlName","company_name",3,"placeholder"],[1,"p-col-6"],["matInput","","readonly","","formControlName","type_of_company",3,"placeholder"],["matInput","","readonly","","formControlName","activity",3,"placeholder"],["matInput","","readonly","","formControlName","no_of_employee_in_france",3,"placeholder"],[1,"p-col-12","text-center"],[1,"container-btn"],[1,"btn-right"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],["class","p-col-12 text-center",4,"ngIf"],[3,"value"],[3,"formGroup"],[1,"p-grid","no-padding","form"],["formControlName","country","panelClass","filterPanel custom-matselect-dropdown",3,"disableOptionCentering","selectionChange"],["matInput","","required","","formControlName","no_RC",3,"placeholder"],[4,"ngIf"],["matInput","","required","","formControlName","company_name",3,"placeholder"],["matInput","","required","","formControlName","zip_code",3,"placeholder"],["matInput","","required","","formControlName","type_of_company",3,"placeholder"],["matInput","","required","","formControlName","activity",3,"placeholder"],["matInput","","required","","formControlName","no_of_employee_in_france",3,"placeholder"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,zn,2,0,"div",0),t.\u0275\u0275elementStart(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-icon",5),t.\u0275\u0275text(7,"business"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h2",6),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(11,"hr"),t.\u0275\u0275elementStart(12,"div",7)(13,"button",8)(14,"mat-icon"),t.\u0275\u0275text(15,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275template(16,Qn,52,37,"div",9),t.\u0275\u0275template(17,no,49,36,"div",10),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,4,"COMPANY.ADD_NEW_COMPANY")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf","France"===n.selectedCountry),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","France"!==n.selectedCountry))},dependencies:[u.mk,u.sg,u.O5,Y.Zt,Y.Bh,W.ey,T.lW,v.ZT,v.xY,w.Hw,I.TO,I.KE,I.hX,U.Nt,E.Ou,ct.gD,d.DefaultValueAccessor,d.NumberValueAccessor,d.NgControlStatus,d.NgControlStatusGroup,d.RequiredValidator,d.FormGroupDirective,d.FormControlName,H.oO,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.no-padding-bottom[_ngcontent-%COMP%]{padding-bottom:0;padding-top:0}.adjust-dialog-header[_ngcontent-%COMP%]{padding-left:23px;padding-bottom:0}.dialog-icon[_ngcontent-%COMP%]{float:left;margin-top:7px;color:#000}.btn-standard[_ngcontent-%COMP%]{font-size:12px;line-height:30px;border-radius:2px}.dialog-title-text[_ngcontent-%COMP%]{color:#000;padding-left:10px;float:left}.close-icon[_ngcontent-%COMP%]{float:right;color:#000}.dialog-fields-container[_ngcontent-%COMP%]{padding:15px}.standard-width[_ngcontent-%COMP%]{width:90%}.border-bottom[_ngcontent-%COMP%]{border-bottom-style:solid;border-bottom-color:#000}.float-center[_ngcontent-%COMP%]{margin:10px}.btn-right[_ngcontent-%COMP%]{position:absolute;right:26%}.text-center[_ngcontent-%COMP%]{text-align:center}.container-btn[_ngcontent-%COMP%]{padding-bottom:20px}[hidden][_ngcontent-%COMP%]{display:none!important}.title[_ngcontent-%COMP%]{padding-top:12px}.add-company[_ngcontent-%COMP%]{padding:5px 40px}[_nghost-%COMP%]     .mat-raised-button{margin-top:5px}[_nghost-%COMP%]     .mat-icon{margin-right:5px}.form[_ngcontent-%COMP%]{padding:5px 25px 20px}.add[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     .close-icon{margin-top:10px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}  .filterPanel{margin-top:152px!important}  .custom-matselect-dropdown.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important}"]}),o})();var io=m(92340),ao=m(92741),ro=m(22437),so=m(75223);function lo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.addCompany())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",17),t.\u0275\u0275text(3,"business"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.ADD_COMPANY")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"COMPANY.ADD_COMPANY")," "))}let ft=(()=>{class o{constructor(e,n,i,a,s){this.dialog=e,this.companyService=n,this.translate=i,this.permission=a,this.filterBreadCrumbService=s,this.isReset=new t.EventEmitter,this.search=new d.UntypedFormControl(""),this.subs=new P.Y,this.filterBreadcrumbData=[],this.filteredValue={search:""}}ngOnInit(){this.search.valueChanges.pipe((0,A.b)(400)).subscribe(e=>{this.companyService.filterCompany(e),this.filteredValue.search=e,this.filterBreadcrumbData=[],this.filterBreadcrumbFormat()})}reset(){this.search.setValue("",{emitEvent:!1}),this.companyService.filterCompany(null),this.filteredValue.search="",this.filterBreadcrumbData=[],this.isReset.emit(!0)}addCompany(){this.subs.sink=this.dialog.open(oo,{disableClose:!0,width:"50%",minHeight:"100px",data:"company"}).afterClosed().subscribe(e=>{console.log("result : ",e)})}templateForImport(){const e={",":this.translate.instant("IMPORT_TEMPLATE_S1.COMMA"),";":this.translate.instant("IMPORT_TEMPLATE_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_TEMPLATE_S1.TAB")};l().fire({type:"question",title:this.translate.instant("IMPORT_TEMPLATE_S1.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_TEMPLATE_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_TEMPLATE_S1.OK"),input:"radio",inputValue:";",inputOptions:e}).then(n=>{console.log(n),n&&n.value&&this.downloadCSVTemplate(n.value)})}downloadCSVTemplate(e){let n=io.N.apiUrl;n=n.replace("graphql","");const i=document.createElement("a");let c="downloadImportCompanyTemplate";c=c+"/"+e+"/"+this.translate.currentLang.toLowerCase(),i.href=n+c+"",i.target="_blank",i.download="Template Import CSV",document.body.appendChild(i),i.click(),document.body.removeChild(i)}csvTypeSelectionUpload(){const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};l().fire({type:"question",title:this.translate.instant("IMPORT_DECISION_S1.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:";",inputValidator:n=>new Promise((i,a)=>{n?(i(""),l().enableConfirmButton()):(l().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){l().disableConfirmButton(),l().getContent().addEventListener("click",function(a){l().enableConfirmButton()}),";"===l().getInput().getAttribute("value")&&l().enableConfirmButton()}}).then(n=>{n.value&&this.openImportDialog(n.value)})}openImportDialog(e){let n=null;switch(e){case",":n=",";break;case";":n=";";break;case"tab":n="tab";break;default:n=null}this.dialog.open(ao.q,{width:"500px",panelClass:"certification-rule-pop-up",minHeight:"200px",disableClose:!0,data:{delimeter:n,type:"companies"}}).afterClosed().subscribe(i=>{i&&this.reset()})}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"super_filter",name:"search",column:"COMPANY.SearchBy",isMultiple:!1,filterValue:this.filteredValue,filterList:null,filterRef:this.search,isSelectionInput:!1,displayKey:null,savedValue:null}],this.filterBreadcrumbData)}removeFilterBreadcrumb(e){this.filterBreadCrumbService.removeFilterBreadcrumb(e,this.filteredValue),this.search.setValue("")}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(v.uw),t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(C.sK),t.\u0275\u0275directiveInject(Q.$),t.\u0275\u0275directiveInject(ro.q))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-header-bar"]],outputs:{isReset:"isReset"},decls:34,vars:31,consts:[[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"p-col-12"],[1,"mat-card-adjust"],[1,"p-grid"],[1,"p-col-4","float-left"],[1,"pad-top-2"],["matInput","",1,"form-field",3,"formControl","placeholder"],[1,"p-col-4","float-right"],[1,"btn-placement"],["mat-raised-button","","color","accent","class","float-right",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"matTooltip","click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-raised-button","","color","accent",3,"matTooltip","matMenuTriggerFor"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["action","matMenu"],["mat-menu-item","",1,"border-button",3,"matTooltip","click"],["mat-raised-button","","color","accent",1,"float-right",3,"matTooltip","click"],[1,"mat-icon-default"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"ms-filter-breadcrumb",0),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1)(2,"mat-card",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5),t.\u0275\u0275element(6,"input",6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",7)(9,"div",3)(10,"div",8),t.\u0275\u0275template(11,lo,6,6,"button",9),t.\u0275\u0275elementStart(12,"button",10),t.\u0275\u0275listener("click",function(){return n.reset()}),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275element(14,"mat-icon",11),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",12),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275element(19,"mat-icon",13),t.\u0275\u0275text(20),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementStart(22,"mat-icon"),t.\u0275\u0275text(23,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"mat-menu",null,14)(26,"button",15),t.\u0275\u0275listener("click",function(){return n.templateForImport()}),t.\u0275\u0275pipe(27,"translate"),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"button",15),t.\u0275\u0275listener("click",function(){return n.csvTypeSelectionUpload()}),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275text(32),t.\u0275\u0275pipe(33,"translate"),t.\u0275\u0275elementEnd()()()()()()()()),2&e){const i=t.\u0275\u0275reference(25);t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(7,13,"COMPANY.SearchBy")),t.\u0275\u0275property("formControl",n.search),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.permission.addCompanyInCompany()),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(13,15,"COMPANY.RESET")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(16,17,"COMPANY.RESET")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(18,19,"Import")),t.\u0275\u0275property("matMenuTriggerFor",i),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(21,21,"Import")," "),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(27,23,"Template for Import")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(29,25,"Template for Import")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(31,27,"Import companies")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(33,29,"Import companies")," ")}},dependencies:[u.O5,T.lW,R.a8,w.Hw,I.KE,U.Nt,Z.VK,Z.OP,Z.p6,z.gM,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,so.r,C.X$],styles:[".mat-card-adjust[_ngcontent-%COMP%]{padding-bottom:0!important;padding-top:0!important;height:75px;margin-left:13px!important}.btn-placement[_ngcontent-%COMP%]{position:absolute;right:7px;padding:15px .5em 0}.float-right[_ngcontent-%COMP%]{float:right}.float-left[_ngcontent-%COMP%]{float:left}"]}),o})();function co(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ms-company-branch-detail",13),t.\u0275\u0275listener("isRefresh",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.refreshCompanyBranch(i))}),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("quickSearchMentorId",e.mentorId)("companyId",e.curSelectedId)}}function po(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",14)(1,"h4",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"COMPANY_EMPTY")))}function mo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275element(1,"mat-progress-spinner",17),t.\u0275\u0275elementEnd())}const _t=function(o){return{"toggle-card-list":o}},ho=function(o){return{hide:o}},go=function(o){return{"hide-pagination-buttons":o}},uo=function(){return[10]};let fo=(()=>{class o{constructor(e,n,i,a,s){this.companyService=e,this.authService=n,this.utilService=i,this.route=a,this.pageTitleService=s,this.subs=new P.Y,this.isWaitingForResponse=!1,this.myInnerHeight=1920,this.companies=[],this.isFirstLoad=!0,this.toggleCardList=!1,this.filteredValues={no_RC:null,company_name:null},this.pageIndex=0,this.dataCount=0,this.curSelected=null,this.curSelectedId=null,this.mentorId=""}ngOnInit(){this.companyService.filterCompany(null),this.subs.sink=this.route.queryParams.subscribe(e=>{e&&e.hasOwnProperty("siren")?(this.search=e.siren,this.siret=e.siret,this.compId=e.id):e&&e.hasOwnProperty("selectedMentor")?(this.mentorId=e.selectedMentor,this.compId=e.companyId):(this.search=null,this.siret=null,this.compId=null,this.curSelectedId=null),this.getAllCompany(),this.setupFilterListener()}),this.companyService.refreshCompany$.subscribe(e=>{e&&(this.refreshCompanyId=this.curSelectedId,this.curSelectedId=null,this.getAllCompany())}),this.pageTitleService.setTitle("Companies Branches")}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,O.b)(()=>{this.isFirstLoad||this.getAllCompany()})).subscribe()}setupFilterListener(){this.companyService.companyFilter$.subscribe(e=>{null!==e&&(this.search=e,this.curSelectedId=null,this.paginator.pageIndex=0,this.getAllCompany())})}refreshCompanyBranch(e){e&&(this.refreshCompanyId=this.curSelectedId,this.curSelectedId=null,this.getAllCompany())}getAllCompany(){const e={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};this.isWaitingForResponse=!0,this.subs.sink=this.companyService.getAllCompanies(this.search,e).subscribe(n=>{if(this.isFirstLoad=!1,n)if(this.companies=(0,b.cloneDeep)(n),this.paginator.length=n&&n.length&&n[0].count_document?n[0].count_document:0,this.dataCount=n&&n.length&&n[0].count_document?n[0].count_document:0,console.log("siret number is:",this.siret),this.siret){const i=this.companies.find(a=>a.no_RC===this.siret);console.log("found branch is:",i),i&&this.updatedSelectedCompany(i._id)}else this.compId?this.subs.sink=this.companyService.getOneCompany(this.compId).subscribe(i=>{const a=(0,b.cloneDeep)(i);a&&this.updatedSelectedCompany(a._id)}):this.refreshCompanyId&&(this.curSelectedId=this.refreshCompanyId);else this.companies=[],this.paginator.length=0;this.isWaitingForResponse=!1},n=>{this.isFirstLoad=!1,this.isWaitingForResponse=!1,this.companies=[],this.paginator.length=0,this.authService.postErrorLog(n),n&&n.message&&(n.message.includes("jwt expired")||n.message.includes("str & salt required")||n.message.includes("Authorization header is missing")||n.message.includes("salt"))?this.authService.handlerSessionExpired():console.log(n)})}reset(e){e&&(this.search=null,this.getAllCompany())}updatedSelectedCompany(e){this.curSelectedId=null,this.curSelectedId=e;const n=this.companies.filter(i=>e===i._id);this.curSelected=n[0]}getAutomaticHeight(){return this.myInnerHeight=window.innerHeight-320,this.myInnerHeight}getCardHeight(){return this.myInnerHeight=window.innerHeight-220,this.myInnerHeight}reload(e){e&&(this.search=null,this.curSelectedId=null,this.getAllCompany())}ngOnDestroy(){this.subs.unsubscribe(),this.pageTitleService.setTitle(null)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(D.gz),t.\u0275\u0275directiveInject(pt.Z))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-branches"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(_.NW,7),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first)}},decls:18,vars:34,consts:[[1,"header-filter","list-horizontal","flex-layout-row-wrap"],[3,"isReset"],["mat-raised-button","","color","primary",1,"user-list-toggle",3,"click"],[1,"p-grid",2,"padding-top","10px"],[1,"p-col-4","left-side",2,"width","335px",3,"ngClass"],[1,"p-col-fixed","fix-company-list-width"],[3,"companies","isWaitingForResponse","curCompanyId","formBranch","selectedChange","reload"],[3,"ngClass"],["showFirstLastButtons","",1,"paginator",3,"ngClass","length","hidePageSize","pageSize"],[1,"p-col-8","right-side",2,"height","193px","padding-top","0px","margin-top","1.4vh",3,"ngClass"],[3,"quickSearchMentorId","companyId","isRefresh",4,"ngIf"],["class","p-grid",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[3,"quickSearchMentorId","companyId","isRefresh"],[1,"p-grid"],[1,"text-empty"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementContainerStart(0)(1),t.\u0275\u0275element(2,"div",0),t.\u0275\u0275elementStart(3,"ms-company-header-bar",1),t.\u0275\u0275listener("isReset",function(a){return n.reload(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return n.toggleCardList=!n.toggleCardList}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerStart(7),t.\u0275\u0275elementStart(8,"div",3)(9,"div",4)(10,"div",5)(11,"ms-company-list",6),t.\u0275\u0275listener("selectedChange",function(a){return n.updatedSelectedCompany(a)})("reload",function(a){return n.reload(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",7),t.\u0275\u0275element(13,"mat-paginator",8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(14,"div",9),t.\u0275\u0275template(15,co,1,2,"ms-company-branch-detail",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,po,4,3,"div",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()(),t.\u0275\u0275template(17,mo,2,0,"div",12)),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,23,n.toggleCardList?"Expand":"Hide")," "),t.\u0275\u0275advance(3),t.\u0275\u0275styleProp("height",n.getAutomaticHeight(),"px")("max-height",n.getAutomaticHeight(),"px"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(25,_t,n.toggleCardList)),t.\u0275\u0275advance(2),t.\u0275\u0275property("companies",n.companies)("isWaitingForResponse",n.isWaitingForResponse)("curCompanyId",n.curSelectedId)("formBranch",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(27,ho,0===n.companies.length)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(29,go,n.dataCount<=6))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(31,uo)),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("height",n.getAutomaticHeight(),"px")("max-height",n.getAutomaticHeight(),"px"),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(32,_t,n.toggleCardList)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.curSelectedId),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===n.companies.length&&!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[u.mk,u.O5,T.lW,_.NW,E.Ou,H.oO,dt,Wn,ft,C.X$],styles:["[_nghost-%COMP%]  .list-horizontal{padding:0;flex-wrap:nowrap!important;margin-left:1.5em!important}[_nghost-%COMP%]  .list-horizontal>div{display:inline-block;height:auto;width:10em;min-width:9em;margin-right:10px!important}[_nghost-%COMP%]  .mat-list-item{max-width:11rem!important}[_nghost-%COMP%]  .float-right{float:right}.left-side[_ngcontent-%COMP%]{padding-left:0;width:420px}.paginator[_ngcontent-%COMP%]{margin-right:9vh}.right-side[_ngcontent-%COMP%]{width:auto;position:absolute;right:0;left:425px}.fix-company-list-width[_ngcontent-%COMP%]{margin-top:10px;width:420px}[_nghost-%COMP%]  .mat-paginator{background-color:transparent}.text-empty[_ngcontent-%COMP%]{height:auto;margin:10px auto;font-size:20px;display:block;width:100%;position:relative;text-align:center;vertical-align:middle;color:#e4e7ef}.user-list-toggle[_ngcontent-%COMP%]{margin-left:1.5rem}.right-side[_ngcontent-%COMP%]{overflow:auto}.left-side[_ngcontent-%COMP%]{width:400px}.hide-paginator[_ngcontent-%COMP%]{display:none}.left-side.toggle-card-list[_ngcontent-%COMP%]{width:0;display:none}.right-side.toggle-card-list[_ngcontent-%COMP%]{left:1.6vw}"]}),o})();function _o(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275element(1,"mat-progress-spinner",9),t.\u0275\u0275elementEnd())}function Co(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"button",18),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,null==e.company?null:e.company.company_status)," ")}}function yo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",12),t.\u0275\u0275element(1,"mat-icon",19),t.\u0275\u0275elementStart(2,"span",20),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",null!=e.company&&null!=e.company.company_addresses[0]&&e.company.company_addresses[0].country&&"france"!==(null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase())?(null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].postal_code)+" "+(null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].country):null==e.company||null==e.company.company_addresses[0]?null:e.company.company_addresses[0].address,"")}}function bo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"h4",14),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",13),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementStart(9,"span")(10,"mat-icon"),t.\u0275\u0275text(11,"arrow_right"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,Co,3,3,"button",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"div",16),t.\u0275\u0275template(16,yo,4,1,"div",17),t.\u0275\u0275elementEnd()()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.company_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,5,"COMPANY.siren")," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_RC),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.company?null:e.company.company_status),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==e.company?null:e.company.company_addresses.length)}}let xo=(()=>{class o{constructor(e,n){this.companyService=e,this.authService=n,this.isWaitingForResponse=!1}ngOnInit(){this.getOneCompany()}ngOnChanges(){this.companyId&&this.getOneCompany()}getOneCompany(){this.isWaitingForResponse=!0,this.companyService.GetOneCompanyEntity(this.companyId).subscribe(e=>{e&&(this.company=e,this.isWaitingForResponse=!1)},e=>{this.company=null,console.log(e),this.isWaitingForResponse=!1,this.authService.postErrorLog(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-entity-summary"]],inputs:{companyId:"companyId"},features:[t.\u0275\u0275NgOnChangesFeature],decls:11,vars:6,consts:[[1,"example-headers-align","summary"],["accordion",""],[1,"panel-spacing",3,"expanded"],[1,"background-primary","panel-header"],[2,"color","white","align-self","center","margin","0px"],[1,"pane-divider"],["class","loading-indicator",4,"ngIf"],["class","detail p-grid",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[1,"detail","p-grid"],[1,"p-col","no-padding"],[1,"p-grid"],[1,"p-col-12","p-grid"],[2,"text-decoration","underline","margin-bottom","0px"],["mat-raised-button","","class","green-btn mr-left",4,"ngIf"],[1,"p-col-12",2,"padding-top","0px"],["class","p-grid",4,"ngIf"],["mat-raised-button","",1,"green-btn","mr-left"],["svgIcon","map-legend",1,"map"],[2,"margin-left","30px"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-accordion",0,1)(2,"mat-expansion-panel",2)(3,"mat-expansion-panel-header",3)(4,"mat-panel-title")(5,"h4",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",5),t.\u0275\u0275template(9,_o,2,0,"div",6),t.\u0275\u0275template(10,bo,17,7,"div",7),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("expanded",n.companyId),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,"COMPANY.Entity Summary")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse))},dependencies:[u.O5,T.lW,L.pp,L.ib,L.yz,L.yK,w.Hw,E.Ou,C.X$],styles:[".green-btn[_ngcontent-%COMP%]{background-color:green!important;cursor:default;height:22px!important;padding:0!important;text-align:center;display:flex;align-items:center;justify-content:center}.status[_ngcontent-%COMP%]{margin-right:10px}.summary[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0 15px 10px;height:130px}.detail[_ngcontent-%COMP%]{margin-top:15px!important}.mr-left[_ngcontent-%COMP%]{margin-left:10px}.mr-right[_ngcontent-%COMP%]{margin-right:7px!important}.panel-header[_ngcontent-%COMP%]{color:#fff;font-size:16px;height:30px!important}.arrow[_ngcontent-%COMP%]{position:absolute;top:96px}.map[_ngcontent-%COMP%]{position:absolute;top:127px}"]}),o})();function Oo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275element(1,"mat-progress-spinner",5),t.\u0275\u0275elementEnd())}function vo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3("",t.\u0275\u0275pipeBind1(2,3,null==e.company?null:e.company.no_of_employee_in_france)," ",null!=e.company&&e.company.no_of_employee_in_france&&null!=e.company&&e.company.no_of_employee_in_france_by_year?t.\u0275\u0275pipeBind1(3,5,"in"):""," ",null==e.company?null:e.company.no_of_employee_in_france_by_year,"")}}function Mo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_of_employee_in_france)}}function Po(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"h4"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",8)(6,"ul")(7,"li")(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(11,":"),t.\u0275\u0275elementStart(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"li")(15,"span"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(18,":"),t.\u0275\u0275elementStart(19,"span"),t.\u0275\u0275text(20),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"li")(22,"span"),t.\u0275\u0275text(23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(25,":"),t.\u0275\u0275elementStart(26,"span"),t.\u0275\u0275text(27),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(28,"li")(29,"span"),t.\u0275\u0275text(30),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(32,":"),t.\u0275\u0275elementStart(33,"span"),t.\u0275\u0275text(34),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(35,"li")(36,"span"),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(39,": "),t.\u0275\u0275elementContainerStart(40,9),t.\u0275\u0275template(41,vo,4,7,"span",10),t.\u0275\u0275template(42,Mo,2,1,"span",11),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"li")(44,"span"),t.\u0275\u0275text(45),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(47,":"),t.\u0275\u0275elementStart(48,"span"),t.\u0275\u0275text(49),t.\u0275\u0275pipe(50,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(51,"li")(52,"span"),t.\u0275\u0275text(53),t.\u0275\u0275pipe(54,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(55,":"),t.\u0275\u0275elementStart(56,"span"),t.\u0275\u0275text(57),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(58,"li")(59,"span"),t.\u0275\u0275text(60),t.\u0275\u0275pipe(61,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(62,":"),t.\u0275\u0275elementStart(63,"span"),t.\u0275\u0275text(64),t.\u0275\u0275elementEnd()()()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,20,"COMPANY.Information about this entity")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,22,"COMPANY.Denomination")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null!=e.company&&e.company.denomination?e.company.denomination:null==e.company?null:e.company.company_name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,24,"COMPANY.siren")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_RC),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(24,26,"COMPANY.SIRET of the head office")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_rc_of_head_office),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(31,28,"COMPANY.Main activity of the head office (NAF/APE)")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.activity),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(38,30,"COMPANY.Employee workforce portion of the entity")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngSwitch",null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","france"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(46,32,"COMPANY.Business category")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate3(" ",null==e.company?null:e.company.type_of_company," ",null!=e.company&&e.company.type_of_company&&null!=e.company&&e.company.type_of_company_by_year?t.\u0275\u0275pipeBind1(50,34,"in"):""," ",null==e.company?null:e.company.type_of_company_by_year," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(54,36,"COMPANY.Creation date")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.getDate(null==e.company?null:e.company.created_at)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(61,38,"COMPANY.Last update")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(e.getDate(null==e.company?null:e.company.updated_at))}}let So=(()=>{class o{constructor(e,n){this.companyService=e,this.authService=n,this.isWaitingForRespose=!1}ngOnInit(){this.getOneCompany()}ngOnChanges(){this.companyId&&this.getOneCompany()}getOneCompany(){this.isWaitingForRespose=!0,this.companyService.GetOneCompanyEntity(this.companyId).subscribe(e=>{e&&(this.company=e,this.isWaitingForRespose=!1)},e=>{this.company=null,console.log(e),this.authService.postErrorLog(e)})}getDate(e){return j(e).format("DD/MM/YYYY")}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-entity-identity-tab"]],inputs:{companyId:"companyId"},features:[t.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[[1,"mr-top"],[1,"p-col"],["class","loading-indicator",4,"ngIf"],["class","p-grid",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[1,"p-grid"],[1,"p-col-12"],[1,"text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"div",1),t.\u0275\u0275template(2,Oo,2,0,"div",2),t.\u0275\u0275template(3,Po,65,40,"div",3),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForRespose),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForRespose))},dependencies:[u.O5,u.RF,u.n9,u.ED,R.a8,E.Ou,C.X$],styles:[".mr-top[_ngcontent-%COMP%]{margin-top:10px;padding:0 10px;margin-bottom:10px;border:1px solid grey}.right-border[_ngcontent-%COMP%]{border-right:1px solid grey}.text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:table;padding-left:10px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table-row}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;padding-right:50px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-of-type{padding-left:20px}"]}),o})();function To(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275element(1,"mat-progress-spinner",5),t.\u0275\u0275elementEnd())}function Io(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(2,3,null==e.company?null:e.company.slice_of_salaried_workforce_branch)," ",null!=e.company&&e.company.slice_of_salaried_workforce_by_year?t.\u0275\u0275pipeBind1(3,5,"in"):""," ",null==e.company?null:e.company.slice_of_salaried_workforce_by_year,"")}}function Eo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.slice_of_salary)}}function wo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"h4"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",8)(6,"ul")(7,"li")(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(11,":"),t.\u0275\u0275elementStart(12,"span"),t.\u0275\u0275text(13),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"li")(15,"span"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(18,":"),t.\u0275\u0275elementStart(19,"span"),t.\u0275\u0275text(20),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"li")(22,"span"),t.\u0275\u0275text(23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(25,":"),t.\u0275\u0275elementStart(26,"span"),t.\u0275\u0275text(27),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(28,"li")(29,"span"),t.\u0275\u0275text(30),t.\u0275\u0275pipe(31,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(32,":"),t.\u0275\u0275elementStart(33,"span"),t.\u0275\u0275text(34),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(35,"li")(36,"span"),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(39,": "),t.\u0275\u0275elementContainerStart(40,9),t.\u0275\u0275template(41,Io,4,7,"span",10),t.\u0275\u0275template(42,Eo,2,1,"span",11),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(43,"li")(44,"span"),t.\u0275\u0275text(45),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(47,":"),t.\u0275\u0275elementStart(48,"span"),t.\u0275\u0275text(49),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(50,"li")(51,"span"),t.\u0275\u0275text(52),t.\u0275\u0275pipe(53,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(54,":"),t.\u0275\u0275elementStart(55,"span"),t.\u0275\u0275text(56),t.\u0275\u0275elementEnd()()()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,16,"COMPANY.Head office information")),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,18,"COMPANY.SIRET")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.no_rc_of_head_office),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(17,20,"COMPANY.NIC Key")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.nic),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(24,22,"COMPANY.Main activity of the establishment (NAF/APE)")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.company?null:e.company.activity_branch),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(31,24,"COMPANY.Legal status")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null!=e.company&&null!=e.company.company_branches_id&&e.company.company_branches_id.length?null==e.company||null==e.company.company_branches_id[0]?null:e.company.company_branches_id[0].legal_status:"-"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(38,26,"COMPANY.Slice of salaried workforce")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngSwitch",null==e.company||null==e.company.company_addresses[0]||null==e.company.company_addresses[0].country?null:e.company.company_addresses[0].country.toLowerCase()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngSwitchCase","france"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(46,28,"COMPANY.Creation date")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null!=e.company&&e.company.created_at_of_head_office?e.getDate(null==e.company?null:e.company.created_at_of_head_office):""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(53,30,"COMPANY.Last update")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null!=e.company&&e.company.updated_at_of_head_office?e.getDate(null==e.company?null:e.company.updated_at_of_head_office):"")}}let ko=(()=>{class o{constructor(e,n){this.companyService=e,this.authService=n,this.isWaitingForResponse=!1}ngOnInit(){this.getOneCompany()}ngOnChanges(){this.companyId&&this.getOneCompany()}getOneCompany(){this.isWaitingForResponse=!0,this.companyService.GetOneCompanyEntity(this.companyId).subscribe(e=>{e&&(this.company=e,this.isWaitingForResponse=!1)},e=>{this.company=null,console.log(e),this.authService.postErrorLog(e)})}getDate(e){return j(e).format("DD/MM/YYYY")}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-entity-head-office-tab"]],inputs:{companyId:"companyId"},features:[t.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[[1,"mr-top"],[1,"p-col"],["class","loading-indicator",4,"ngIf"],["class","p-grid",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],[1,"p-grid"],[1,"p-col-12"],[1,"text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"div",1),t.\u0275\u0275template(2,To,2,0,"div",2),t.\u0275\u0275template(3,wo,57,32,"div",3),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse))},dependencies:[u.O5,u.RF,u.n9,u.ED,R.a8,E.Ou,C.X$],styles:[".mr-top[_ngcontent-%COMP%]{margin-top:10px;padding:0 10px;margin-bottom:10px;border:1px solid grey}.right-border[_ngcontent-%COMP%]{border-right:1px solid grey}.text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:table;padding-left:10px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table-row}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;padding-right:50px}.text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-of-type{padding-left:20px}"]}),o})();function Ao(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",23)(1,"div",24)(2,"div",25)(3,"button",26),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.reset())}),t.\u0275\u0275element(4,"mat-icon",27),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()()()}2&o&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,1,"COMPANY.RESET")," "))}function Bo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",28)(1,"mat-form-field"),t.\u0275\u0275element(2,"input",29),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,2,"COMPANY.SEARCH")),t.\u0275\u0275property("formControl",e.siretFilter)}}function Fo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"ng-option",33),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.company_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.company_name," ")}}function Do(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",28)(1,"ng-select",30),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"ng-option",31),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,Fo,2,2,"ng-option",32),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,4,"COMPANY.SEARCH")),t.\u0275\u0275property("formControl",e.branchFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,6,"AllM")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.branches)}}function No(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",28)(1,"mat-form-field"),t.\u0275\u0275element(2,"input",29),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,2,"COMPANY.SEARCH")),t.\u0275\u0275property("formControl",e.addressFilter)}}function Ro(o,r){1&o&&t.\u0275\u0275element(0,"th",28)}function Lo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",34),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",35),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.Siret")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.Siret")))}function Uo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",36),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.no_RC," ")}}function Vo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",34),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",37),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.Branch")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.Branch")))}function Yo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",38),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.company_name," ")}}function Wo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",34),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",39),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.Address")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.Address")))}function Ho(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",38),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.company_addresses[0]?null:e.company_addresses[0].address," ")}}function zo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",34),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",40),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"COMPANY.ACTION")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"COMPANY.ACTION")))}function jo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",38)(1,"button",41),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,s=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(s.viewBranchDetail(null==a?null:a.no_RC))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275element(3,"mat-icon",42),t.\u0275\u0275elementEnd()()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,1,"COMPANY.Details")))}function Go(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",43)(1,"div",44),t.\u0275\u0275element(2,"mat-spinner",45),t.\u0275\u0275elementEnd()())}function $o(o,r){1&o&&t.\u0275\u0275element(0,"tr",46)}function Qo(o,r){1&o&&t.\u0275\u0275element(0,"tr",46)}function qo(o,r){1&o&&t.\u0275\u0275element(0,"tr",46)}function Ko(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",47),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function Xo(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",47),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function Zo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",48),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")," "))}const Jo=function(){return["reset"]},ti=function(){return["loading"]},ei=function(o){return{"hide-pagination-buttons":o}},ni=function(){return[10]};let oi=(()=>{class o{constructor(e,n,i,a,s){this.companyService=e,this.authService=n,this.route=i,this.utilService=a,this.router=s,this.siret="",this.dataSource=new x.by([]),this.displayedColumns=["Siret","Branch","Address","Action"],this.filterColumns=["SiretFilter","BranchFilter","AddressFilter","ActionFilter"],this.dataCount=0,this.siretFilter=new d.UntypedFormControl(""),this.addressFilter=new d.UntypedFormControl(""),this.branchFilter=new d.UntypedFormControl("All"),this._subs=new P.Y,this.isWaitingForResponse=!1,this.filteredValues={no_RC:null,company_name:null,company_address:null},this.branches=[]}set entityRC(e){this._entityRC=e,this.branches=[],e&&this.getCurrentUserDetail(e)}set companyId(e){this._entityId=e}get entityRC(){return this._entityRC}get entityId(){return this._entityId}ngOnInit(){this.initFilters()}ngAfterViewInit(){this._subs.sink=this.paginator.page.pipe((0,$.O)(null),(0,O.b)(()=>{this.getAllBranchesOfEntity(this.siret)})).subscribe()}getCurrentUserDetail(e){this.siret=e,this.getAllBranchesOfEntity(e)}getAllBranchesOfEntity(e){this.dataSource.data=[],this.paginator.length=0,this.dataCount=0;const n={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};this.isWaitingForResponse=!0,this._subs.sink=this.companyService.getAllCompanies(e,n,this.filteredValues,this.sortValue).subscribe(a=>{a?(this.dataSource.data=(0,b.cloneDeep)(a),this.branches=(0,b.cloneDeep)(a),this.branches=this.branches.sort((s,c)=>s.company_name>c.company_name?1:s.company_name<c.company_name?-1:0),this.paginator.length=a&&a.length&&a[0].count_document?a[0].count_document:0,this.dataCount=a&&a.length&&a[0].count_document?a[0].count_document:0):(this.dataSource.data=[],this.paginator.length=0),this.noData=this.dataSource.connect().pipe((0,V.U)(s=>0===s.length)),this.isWaitingForResponse=!1},a=>{this.isWaitingForResponse=!1,this.dataSource.data=[],this.paginator.length=0,console.log(a),this.authService.postErrorLog(a)})}initFilters(){this._subs.sink=this.siretFilter.valueChanges.pipe((0,A.b)(500)).subscribe(e=>{this.filteredValues.no_RC=e,this.paginator.pageIndex=0,this.getAllBranchesOfEntity(this.entityRC)}),this._subs.sink=this.addressFilter.valueChanges.pipe((0,A.b)(500)).subscribe(e=>{this.filteredValues.company_address=e,this.paginator.pageIndex=0,this.getAllBranchesOfEntity(this.entityRC)}),this._subs.sink=this.branchFilter.valueChanges.subscribe(e=>{this.filteredValues.company_name="All"!==e?e:"",this.paginator.pageIndex=0,this.getAllBranchesOfEntity(this.entityRC)})}sortData(e){this.sortValue=e.active?{[e.active]:e.direction?e.direction:"asc"}:null,this.paginator.pageIndex=0,this.getAllBranchesOfEntity(this.entityRC)}reset(){this.filteredValues={no_RC:null,company_name:null,company_address:null},this.sortValue=null,this.siretFilter.patchValue(null,{emitEvent:!1}),this.addressFilter.patchValue(null,{emitEvent:!1}),this.branchFilter.patchValue("All",{emitEvent:!1}),this.getAllBranchesOfEntity(this.entityRC)}viewBranchDetail(e){this.router.navigate(["../branches"],{relativeTo:this.route,queryParams:{siren:this.entityRC,siret:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(D.gz),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(D.F0))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-entity-branches-tab"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(_.NW,7),t.\u0275\u0275viewQuery(q.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{entityRC:"entityRC",companyId:"companyId"},decls:35,vars:18,consts:[[1,"p-col-12"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","reset"],["mat-header-cell","","colspan","4","class","action-header-column",4,"matHeaderCellDef"],["matColumnDef","SiretFilter"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","BranchFilter"],["matColumnDef","AddressFilter"],["matColumnDef","ActionFilter"],["matColumnDef","Siret"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","","matTooltip","",4,"matCellDef"],["matColumnDef","Branch"],["mat-cell","",4,"matCellDef"],["matColumnDef","Address"],["matColumnDef","Action"],["matColumnDef","loading"],["mat-header-cell","","colspan","4","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],["class","no-records",4,"ngIf"],["showFirstLastButtons","",3,"ngClass","hidePageSize","pageSize","length"],["mat-header-cell","","colspan","4",1,"action-header-column"],[1,"p-grid"],[1,"p-col-12","text-right"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell",""],["matInput","",3,"formControl","placeholder"],[2,"width","97%",3,"placeholder","formControl"],["value","All"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","",3,"matTooltip"],["mat-sort-header","no_RC",1,"text-center"],["mat-cell","","matTooltip",""],["mat-sort-header","company_name",1,"text-center"],["mat-cell",""],["mat-sort-header","company_address",1,"text-center"],[1,"text-center"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["svgIcon","eye"],["mat-header-cell","","colspan","4",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-row","",3,"hidden"],[1,"no-records"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"table",1),t.\u0275\u0275listener("matSortChange",function(a){return n.sortData(a)}),t.\u0275\u0275elementContainerStart(2,2),t.\u0275\u0275template(3,Ao,7,3,"th",3),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(4,4),t.\u0275\u0275template(5,Bo,4,4,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(6,6),t.\u0275\u0275template(7,Do,7,8,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(8,7),t.\u0275\u0275template(9,No,4,4,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(10,8),t.\u0275\u0275template(11,Ro,1,0,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(12,9),t.\u0275\u0275template(13,Lo,5,6,"th",10),t.\u0275\u0275template(14,Uo,2,1,"td",11),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(15,12),t.\u0275\u0275template(16,Vo,5,6,"th",10),t.\u0275\u0275template(17,Yo,2,1,"td",13),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(18,14),t.\u0275\u0275template(19,Wo,5,6,"th",10),t.\u0275\u0275template(20,Ho,2,1,"td",13),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(21,15),t.\u0275\u0275template(22,zo,5,6,"th",10),t.\u0275\u0275template(23,jo,4,3,"td",13),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(24,16),t.\u0275\u0275template(25,Go,3,0,"th",17),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(26,$o,1,0,"tr",18),t.\u0275\u0275template(27,Qo,1,0,"tr",18),t.\u0275\u0275template(28,qo,1,0,"tr",18),t.\u0275\u0275template(29,Ko,1,1,"tr",19),t.\u0275\u0275template(30,Xo,1,1,"tr",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(31,Zo,3,3,"div",21),t.\u0275\u0275pipe(32,"async"),t.\u0275\u0275elementStart(33,"div"),t.\u0275\u0275element(34,"mat-paginator",22),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(25),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(13,Jo)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(14,ti)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(32,11,n.noData)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(15,ei,n.dataCount<=10))("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(17,ni))("length",n.dataCount))},dependencies:[u.mk,u.sg,u.O5,T.lW,w.Hw,I.KE,U.Nt,_.NW,E.Ou,q.YE,q.nU,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.ge,x.ev,x.XQ,x.Gk,z.gM,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,H.oO,at.w9,at.jq,u.Ov,C.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:20%;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(1) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(1) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:28%;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:28%;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:10%;padding-left:0!important;padding-right:0;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121;text-align:center}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}[_nghost-%COMP%]     table thead tr:nth-last-child(2){border-top:none!important;border-bottom:none!important;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table .action-header-column{vertical-align:middle!important;padding-right:0!important}[_nghost-%COMP%]     table .action-header-column .p-grid{margin-top:unset!important}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;background:none;border:0;box-shadow:none;outline:0;width:100%}[_nghost-%COMP%]  .ng-select .ng-select-container{color:#fff;margin-bottom:12px}[_nghost-%COMP%]  .ng-select.ng-select-single .ng-select-container .ng-value-container{padding-left:1px}[_nghost-%COMP%]  ng-dropdown-panel .scroll-host, .ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{font-size:13px}.btn-right[_ngcontent-%COMP%]{padding-right:0!important}.mt-0[_ngcontent-%COMP%]{margin-top:0!important}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}  .custom-ngselect-dropdown .ng-dropdown-panel{width:-moz-fit-content!important;width:fit-content!important}"]}),o})();function ii(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.ENTITY")))}function ai(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-entity-identity-tab",8),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyId",e.companyId)}}function ri(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.Head Office")))}function si(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-entity-head-office-tab",8),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyId",e.companyId)}}function li(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.Branches")))}function ci(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-entity-branches-tab",9),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyId",e.companyId)("entityRC",e.entityRC)}}function pi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"COMPANY.Notes")))}function di(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-company-notes-tab",10),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyEntityId",e.companyId)("userData",e.userData)}}let mi=(()=>{class o{constructor(e,n){this.schoolService=e,this.authService=n,this.selectedIndex=0,this.userData=[],this.isWaitingForResponse=!1}ngOnInit(){this.getAllUsers()}getAllUsers(){this.userData=[],this.isWaitingForResponse=!0,this.schoolService.getAllUserNote().subscribe(e=>{this.isWaitingForResponse=!1,this.userData=e},e=>{this.userData=[],this.isWaitingForResponse=!1,this.authService.postErrorLog(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(lt.E),t.\u0275\u0275directiveInject(M.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-entity-parent-tabs"]],inputs:{companyId:"companyId",entityRC:"entityRC"},decls:14,vars:1,consts:[[3,"selectedIndex","selectedIndexChange"],["companyMatGroup",""],["label","Entity"],["mat-tab-label",""],["matTabContent",""],["label","HeadOffice"],["label","Branches"],["label","Notes"],[3,"companyId"],[3,"companyId","entityRC"],[3,"companyEntityId","userData"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-tab-group",0,1),t.\u0275\u0275listener("selectedIndexChange",function(a){return n.selectedIndex=a}),t.\u0275\u0275elementStart(2,"mat-tab",2),t.\u0275\u0275template(3,ii,3,3,"ng-template",3),t.\u0275\u0275template(4,ai,1,1,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-tab",5),t.\u0275\u0275template(6,ri,3,3,"ng-template",3),t.\u0275\u0275template(7,si,1,1,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"mat-tab",6),t.\u0275\u0275template(9,li,3,3,"ng-template",3),t.\u0275\u0275template(10,ci,1,2,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"mat-tab",7),t.\u0275\u0275template(12,pi,3,3,"ng-template",3),t.\u0275\u0275template(13,di,1,2,"ng-template",4),t.\u0275\u0275elementEnd()()),2&e&&t.\u0275\u0275property("selectedIndex",n.selectedIndex)},dependencies:[B.SP,B.uD,B.uX,B.Vc,So,ko,oi,ut,C.X$]}),o})(),hi=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-entity-detail"]],inputs:{companyId:"companyId",entityRC:"entityRC"},decls:4,vars:3,consts:[[3,"companyId"],[2,"margin-top","10px"],[3,"companyId","entityRC"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"ms-company-entity-summary",0),t.\u0275\u0275elementStart(2,"div",1),t.\u0275\u0275element(3,"ms-company-entity-parent-tabs",2),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("companyId",n.companyId),t.\u0275\u0275advance(2),t.\u0275\u0275property("companyId",n.companyId)("entityRC",n.entityRC))},dependencies:[xo,mi]}),o})();function gi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ms-company-list",12),t.\u0275\u0275listener("selectedChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.updatedSelectedCompany(i))})("reload",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.reload(i))}),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companies",e.companies)("isWaitingForResponse",e.isWaitingForResponse)("curCompanyId",e.curSelectedId)}}function ui(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-company-entity-detail",13),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("companyId",e.curSelectedId)("entityRC",e.selectedEntityRC)}}function fi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",14)(1,"h4",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"COMPANY_EMPTY")))}function _i(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",16),t.\u0275\u0275element(1,"mat-progress-spinner",17),t.\u0275\u0275elementEnd())}const Ct=function(o){return{"toggle-card-list":o}},Ci=function(o){return{hide:o}},yi=function(o,r){return{"hide-paginator":o,"hide-pagination-buttons":r}},bi=function(){return[10]},xi=[{path:"",redirectTo:"entities",pathMatch:"full"},{path:"entities",component:(()=>{class o{constructor(e,n,i,a){this.companyService=e,this.authService=n,this.utilService=i,this.pageTitleService=a,this.subs=new P.Y,this.isWaitingForResponse=!1,this.myInnerHeight=1920,this.companies=[],this.isFirstLoad=!0,this.toggleCardList=!1,this.filteredValues={no_RC:null,company_name:null},this.pageIndex=0,this.dataCount=0,this.curSelected=null,this.curSelectedId=null}ngOnInit(){this.paginator.pageIndex=0,this.companyService.filterCompany(null),this.getAllCompany(),this.setupFilterListener(),this.pageTitleService.setTitle("Companies Entity")}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,O.b)(()=>{this.isFirstLoad||this.getAllCompany()})).subscribe()}setupFilterListener(){this.companyService.companyFilter$.subscribe(e=>{null!==e&&(this.search=e,this.curSelectedId=null,this.paginator.pageIndex=0,this.getAllCompany())})}getAllCompany(){const e={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};this.isWaitingForResponse=!0,this.subs.sink=this.companyService.getAllCompanyEntity(this.search,e).subscribe(n=>{this.isFirstLoad=!1,n?(this.companies=n,this.paginator.length=n&&n.length&&n[0].count_document?n[0].count_document:0,this.dataCount=n&&n.length&&n[0].count_document?n[0].count_document:0):(this.companies=[],this.paginator.length=0),this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.isFirstLoad=!1,this.companies=[],this.paginator.length=0,this.authService.postErrorLog(n),console.log(n)})}updatedSelectedCompany(e){this.curSelectedId=null,this.curSelectedId=e;const n=this.companies.filter(i=>e===i._id);this.curSelected=n[0],this.selectedEntityRC=n[0].no_RC}getAutomaticHeight(){return this.myInnerHeight=window.innerHeight-271,this.myInnerHeight}getCardHeight(){return this.myInnerHeight=window.innerHeight-230,this.myInnerHeight}reload(e){e&&(this.search=null,this.getAllCompany())}ngOnDestroy(){this.subs.unsubscribe(),this.pageTitleService.setTitle(null)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(y.J),t.\u0275\u0275directiveInject(M.e),t.\u0275\u0275directiveInject(N.t),t.\u0275\u0275directiveInject(pt.Z))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-company-entities"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(_.NW,7),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first)}},decls:18,vars:32,consts:[[1,"header-filter","list-horizontal","flex-layout-row-wrap"],[3,"isReset"],["mat-raised-button","","color","primary",1,"user-list-toggle",3,"click"],[1,"p-grid",2,"padding-top","10px"],[1,"p-col-4","left-side",3,"ngClass"],[3,"companies","isWaitingForResponse","curCompanyId","selectedChange","reload",4,"ngIfIsWaitingForResponse","ngIf"],[3,"ngClass"],["showFirstLastButtons","",1,"paginator",3,"ngClass","length","hidePageSize","pageSize"],[1,"p-col-8","right-side",3,"ngClass"],[3,"companyId","entityRC",4,"ngIf"],["class","p-grid",4,"ngIf"],["class","loading-indicator",4,"ngIf"],[3,"companies","isWaitingForResponse","curCompanyId","selectedChange","reload"],[3,"companyId","entityRC"],[1,"p-grid"],[1,"text-empty"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementContainerStart(0)(1),t.\u0275\u0275element(2,"div",0),t.\u0275\u0275elementStart(3,"ms-company-header-bar",1),t.\u0275\u0275listener("isReset",function(a){return n.reload(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return n.toggleCardList=!n.toggleCardList}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerStart(7),t.\u0275\u0275elementStart(8,"div",3)(9,"div",4),t.\u0275\u0275template(10,gi,1,3,"ms-company-list",5),t.\u0275\u0275elementStart(11,"div",6),t.\u0275\u0275element(12,"mat-paginator",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"div",8),t.\u0275\u0275elementContainerStart(14),t.\u0275\u0275template(15,ui,1,2,"ms-company-entity-detail",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,fi,4,3,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()(),t.\u0275\u0275template(17,_i,2,0,"div",11)),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,20,n.toggleCardList?"Expand":"Hide")," "),t.\u0275\u0275advance(3),t.\u0275\u0275styleProp("height",n.getAutomaticHeight(),"px")("max-height",n.getAutomaticHeight(),"px"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(22,Ct,n.toggleCardList)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.companies.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(24,Ci,0===n.companies.length)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(26,yi,n.toggleCardList,n.dataCount<=6))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(29,bi)),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("height",n.getAutomaticHeight(),"px")("max-height",n.getAutomaticHeight(),"px"),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(30,Ct,n.toggleCardList)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.curSelectedId),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0===n.companies.length&&!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[u.mk,u.O5,T.lW,_.NW,E.Ou,H.oO,dt,hi,ft,C.X$],styles:["[_nghost-%COMP%]  .list-horizontal{padding:0;flex-wrap:nowrap!important;margin-left:1.5em!important}[_nghost-%COMP%]  .list-horizontal>div{display:inline-block;height:auto;width:10em;min-width:9em;margin-right:10px!important}[_nghost-%COMP%]  .mat-list-item{max-width:11rem!important}[_nghost-%COMP%]  .float-right{float:right}.left-side[_ngcontent-%COMP%]{padding-left:10px;width:420px}.right-side[_ngcontent-%COMP%]{width:auto;position:absolute;right:0;left:400px}.fix-company-list-width[_ngcontent-%COMP%]{margin-top:10px;width:420px}[_nghost-%COMP%]  .mat-paginator{background-color:transparent}.text-empty[_ngcontent-%COMP%]{height:auto;margin:10px auto;font-size:20px;display:block;width:100%;position:relative;text-align:center;vertical-align:middle;color:#e4e7ef}.user-list-toggle[_ngcontent-%COMP%]{margin-left:1.5rem}.right-side[_ngcontent-%COMP%]{overflow:auto}.left-side[_ngcontent-%COMP%]{width:400px}.paginator[_ngcontent-%COMP%]{margin-right:9vh}.hide-paginator[_ngcontent-%COMP%]{display:none}.left-side.toggle-card-list[_ngcontent-%COMP%]{width:0}.right-side.toggle-card-list[_ngcontent-%COMP%]{left:1.6vw}"]}),o})(),canDeactivate:[st.g],canActivate:[et.n],data:{permission:"companies.company_entity.show_perm"}},{path:"branches",component:fo,canDeactivate:[st.g],canActivate:[et.n],data:{permission:"companies.company_branch.show_perm"}},{path:"**",redirectTo:"",pathMatch:"full"}];let Oi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[D.Bz.forChild(xi),D.Bz]}),o})();var vi=m(30160);let Mi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({providers:[{provide:t.LOCALE_ID,useValue:"fr-FR"},{provide:t.LOCALE_ID,useValue:"id-ID"},{provide:t.LOCALE_ID,useValue:"es-ES"}],imports:[u.ez,rt.m,W.Ng,Oi,at.A0,J.d,vi.ii.forRoot()]}),o})()},34318:(yt,tt,m)=>{function rt(_){return _&&_.value&&"string"==typeof _.value&&!_.value.replace(/\s/g,"").length&&_.setValue(""),null}function et(_){const O=_&&_.value&&"string"==typeof _.value&&!_.value.replace(/\s/g,"").length;return O&&_.setValue(""),O?{whitespace:!0}:null}m.d(tt,{I8:()=>rt,Zx:()=>et})}}]);