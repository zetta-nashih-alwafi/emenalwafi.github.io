"use strict";(self.webpackChunkGene=self.webpackChunkGene||[]).push([[8928],{75223:(St,rt,b)=>{b.d(rt,{r:()=>J});var d=b(94650),V=b(89383),$=b(36895),F=b(97392);function x(v,E){1&v&&(d.\u0275\u0275elementStart(0,"span",12),d.\u0275\u0275text(1," , "),d.\u0275\u0275elementEnd())}function s(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275template(3,x,2,0,"span",11),d.\u0275\u0275elementContainerEnd()),2&v){const C=E.$implicit,H=E.last;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,2,C)," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!H)}}function h(v,E){if(1&v){const C=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"mat-icon",13),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(C);const U=d.\u0275\u0275nextContext(3),X=U.$implicit,K=U.index,G=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(G.removeFilter(X,K))}),d.\u0275\u0275text(1,"close"),d.\u0275\u0275elementEnd()}}function p(v,E){if(1&v&&(d.\u0275\u0275elementStart(0,"span",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275template(3,s,4,4,"ng-container",7),d.\u0275\u0275template(4,h,2,0,"mat-icon",10),d.\u0275\u0275elementEnd()),2&v){const C=d.\u0275\u0275nextContext(2).$implicit,H=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(2,3,null==C?null:C.column)," : "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngForOf",null==C?null:C.key),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!(H.isReadmission&&"scholar_season"===(null==C?null:C.name)))}}function f(v,E){if(1&v){const C=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"mat-icon",13),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(C);const U=d.\u0275\u0275nextContext(3),X=U.$implicit,K=U.index,G=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(G.removeFilter(X,K))}),d.\u0275\u0275text(1,"close"),d.\u0275\u0275elementEnd()}}function t(v,E){if(1&v&&(d.\u0275\u0275elementStart(0,"span",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275template(4,f,2,0,"mat-icon",10),d.\u0275\u0275elementEnd()),2&v){const C=d.\u0275\u0275nextContext(2).$implicit,H=d.\u0275\u0275nextContext(3);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate2("",d.\u0275\u0275pipeBind1(2,3,null==C?null:C.column)," : ",d.\u0275\u0275pipeBind1(3,5,null==C?null:C.key)," "),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngIf",!(H.isReadmission&&"scholar_season"===(null==C?null:C.name)))}}function O(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,p,5,5,"span",8),d.\u0275\u0275template(2,t,5,7,"span",8),d.\u0275\u0275elementContainerEnd()),2&v){const C=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==C?null:C.isMultiple),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!(null!=C&&C.isMultiple))}}function I(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,O,3,2,"ng-container",1),d.\u0275\u0275elementContainerEnd()),2&v){const C=E.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","super_filter"===(null==C?null:C.type))}}function k(v,E){if(1&v&&(d.\u0275\u0275elementStart(0,"div",4)(1,"span",5),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"span"),d.\u0275\u0275text(5,":"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"span",6),d.\u0275\u0275template(7,I,2,1,"ng-container",7),d.\u0275\u0275elementEnd()()),2&v){const C=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass","en"===C.translate.currentLang?"filter-type":"filter-type-fr"),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(3,3,"Super Filter")," "),d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",C.filterBreadcrumbData)}}function R(v,E){1&v&&(d.\u0275\u0275elementStart(0,"span",12),d.\u0275\u0275text(1," , "),d.\u0275\u0275elementEnd())}function D(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275template(3,R,2,0,"span",11),d.\u0275\u0275elementContainerEnd()),2&v){const C=E.$implicit,H=E.last,U=d.\u0275\u0275nextContext(3).$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",null!=U&&U.noTranslate?C:d.\u0275\u0275pipeBind1(2,2,C)," "),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngIf",!H)}}function B(v,E){if(1&v){const C=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"span",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275template(4,D,4,4,"ng-container",7),d.\u0275\u0275elementStart(5,"mat-icon",13),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(C);const U=d.\u0275\u0275nextContext(2),X=U.$implicit,K=U.index,G=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(G.removeFilter(X,K))}),d.\u0275\u0275text(6,"close"),d.\u0275\u0275elementEnd()()}if(2&v){const C=d.\u0275\u0275nextContext(2).$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",null!=C&&C.stepColumnName?d.\u0275\u0275pipeBind1(2,2,null==C?null:C.stepColumnName)+" "+(null==C?null:C.column):d.\u0275\u0275pipeBind1(3,4,null==C?null:C.column)," : "),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",null==C?null:C.key)}}function T(v,E){if(1&v){const C=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"span",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275pipe(4,"translate"),d.\u0275\u0275elementStart(5,"mat-icon",13),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(C);const U=d.\u0275\u0275nextContext(2),X=U.$implicit,K=U.index,G=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(G.removeFilter(X,K))}),d.\u0275\u0275text(6,"close"),d.\u0275\u0275elementEnd()()}if(2&v){const C=d.\u0275\u0275nextContext(2).$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate2("",null!=C&&C.stepColumnName?d.\u0275\u0275pipeBind1(2,2,null==C?null:C.stepColumnName)+" "+(null==C?null:C.column):d.\u0275\u0275pipeBind1(3,4,null==C?null:C.column)," : ",!0===(null==C?null:C.noTranslate)?null==C?null:C.key:d.\u0275\u0275pipeBind1(4,6,null==C?null:C.key)," ")}}function L(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,B,7,6,"span",8),d.\u0275\u0275template(2,T,7,8,"span",8),d.\u0275\u0275elementContainerEnd()),2&v){const C=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==C?null:C.isMultiple),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!(null!=C&&C.isMultiple))}}function Q(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,L,3,2,"ng-container",1),d.\u0275\u0275elementContainerEnd()),2&v){const C=E.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","table_filter"===(null==C?null:C.type))}}function Pt(v,E){if(1&v&&(d.\u0275\u0275elementStart(0,"div",14)(1,"span",5),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"span"),d.\u0275\u0275text(5,":"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"span",6),d.\u0275\u0275template(7,Q,2,1,"ng-container",7),d.\u0275\u0275elementEnd()()),2&v){const C=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass","en"===C.translate.currentLang?"filter-type":"filter-type-fr"),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(3,3,"Table Filter")," "),d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",C.filterBreadcrumbData)}}function Mt(v,E){if(1&v){const C=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"span",9),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275elementStart(4,"mat-icon",13),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(C);const U=d.\u0275\u0275nextContext(),X=U.$implicit,K=U.index,G=d.\u0275\u0275nextContext(3);return d.\u0275\u0275resetView(G.removeFilter(X,K))}),d.\u0275\u0275text(5,"close"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementContainerEnd()}if(2&v){const C=d.\u0275\u0275nextContext().$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(3,1,null==C?null:C.key)," ")}}function wt(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,Mt,6,3,"ng-container",1),d.\u0275\u0275elementContainerEnd()),2&v){const C=E.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf","action_filter"===(null==C?null:C.type))}}function Tt(v,E){if(1&v&&(d.\u0275\u0275elementStart(0,"div",14)(1,"span",5),d.\u0275\u0275text(2),d.\u0275\u0275pipe(3,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"span"),d.\u0275\u0275text(5,":"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"span",6),d.\u0275\u0275template(7,wt,2,1,"ng-container",7),d.\u0275\u0275elementEnd()()),2&v){const C=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngClass","en"===C.translate.currentLang?"filter-type":"filter-type-fr"),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1("",d.\u0275\u0275pipeBind1(3,3,"Action Filter")," "),d.\u0275\u0275advance(5),d.\u0275\u0275property("ngForOf",C.filterBreadcrumbData)}}function mt(v,E){if(1&v&&(d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275template(1,k,8,5,"div",2),d.\u0275\u0275template(2,Pt,8,5,"div",3),d.\u0275\u0275template(3,Tt,8,5,"div",3),d.\u0275\u0275elementContainerEnd()),2&v){const C=d.\u0275\u0275nextContext();d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",C.filterDataExist("super_filter")),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",C.filterDataExist("table_filter")),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",C.filterDataExist("action_filter"))}}let J=(()=>{class v{constructor(C){this.translate=C,this.removeFilterTrigger=new d.EventEmitter}ngOnInit(){}filterDataExist(C){return!!this.filterBreadcrumbData.find(U=>U?.type===C)}removeFilter(C,H){this.filterBreadcrumbData.splice(H,1),this.removeFilterTrigger.emit(C)}}return v.\u0275fac=function(C){return new(C||v)(d.\u0275\u0275directiveInject(V.sK))},v.\u0275cmp=d.\u0275\u0275defineComponent({type:v,selectors:[["ms-filter-breadcrumb"]],inputs:{filterBreadcrumbData:"filterBreadcrumbData",isReadmission:"isReadmission"},outputs:{removeFilterTrigger:"removeFilterTrigger"},decls:2,vars:1,consts:[[1,"filter-breadcrumb"],[4,"ngIf"],["class","filter-breadcrumb-container mt-10",4,"ngIf"],["class","filter-breadcrumb-container",4,"ngIf"],[1,"filter-breadcrumb-container","mt-10"],[3,"ngClass"],[1,"breadcrumb-value"],[4,"ngFor","ngForOf"],["class","breadcrumb-filter",4,"ngIf"],[1,"breadcrumb-filter"],["class","icon-remove",3,"click",4,"ngIf"],["class","comma",4,"ngIf"],[1,"comma"],[1,"icon-remove",3,"click"],[1,"filter-breadcrumb-container"]],template:function(C,H){1&C&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275template(1,mt,4,3,"ng-container",1),d.\u0275\u0275elementEnd()),2&C&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",null==H.filterBreadcrumbData?null:H.filterBreadcrumbData.length))},dependencies:[$.mk,$.sg,$.O5,F.Hw,V.X$],styles:[".filter-breadcrumb[_ngcontent-%COMP%]{padding:1rem}.filter-breadcrumb-container[_ngcontent-%COMP%]{display:flex;align-items:baseline}.filter-breadcrumb-container[_ngcontent-%COMP%] ~ .filter-breadcrumb-container[_ngcontent-%COMP%]{margin-top:1rem}.breadcrumb-value[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 1rem;gap:4px}.filter-type[_ngcontent-%COMP%]{width:100px}.filter-type-fr[_ngcontent-%COMP%]{width:150px}.breadcrumb-filter[_ngcontent-%COMP%]{background-color:#ffd740;color:#000;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;display:flex;flex-wrap:wrap;align-items:center}.comma[_ngcontent-%COMP%]{margin-right:4px}.icon-remove[_ngcontent-%COMP%]{vertical-align:middle;margin-left:.25rem;font-size:inherit;cursor:pointer}"]}),v})()},22437:(St,rt,b)=>{b.d(rt,{q:()=>V});var d=b(94650);let V=(()=>{class ${constructor(){this.filterSingle=(x,s,h,p,f="")=>null==s?"":f+x?.find(t=>t[h]===s)?.[p],this.filterSingleBoolean=(x,s,h,p,f="")=>null==s?"":f+x?.find(t=>"boolean"==typeof t[h]?JSON.stringify(t[h])===s:"string"==typeof t[h]?t[h]===s:void 0)?.[p],this.filterMultiple=(x,s,h,p,f="")=>s?.length?null===h&&null===p?x.filter(t=>s?.includes(t)).map(t=>f+t):x.filter(t=>s?.includes(t[h]))?.map(t=>f+t[p]):[],this.isValueObject=x=>"object"==typeof x&&!Array.isArray(x)&&null!==x,this.getNestedObjectValue=(x,s)=>{for(const h in x){if(h===s)return x[s];if(this.isValueObject(x[s]))return this.getNestedObjectValue(x[h],s)}},this.getKey=x=>{if(null===x?.filterValue)return null;const s=null===x?.name?x?.filterValue:"boolean"==typeof x?.filterValue?.[x?.name]?String(x?.filterValue?.[x.name]):x.filterValue?.[x.name],h=x.isMultiple,p=x.isSelectionInput,f=x?.fixedValues,t=x?.translationPrefix??"";if(null==s)return null;if(!p&&this.isValueObject(s)&&x?.nestedKey)return t+this.getNestedObjectValue(s,x.nestedKey);if(!p)return t+s;let O;if(f)if(Array.isArray(s))O=f?.filter(k=>s?.includes(k));else if("string"==typeof s||"boolean"==typeof s)return O=f?.find(k=>s===k),O;const I=h?this.filterMultiple(x.filterList,s,x.savedValue,x.displayKey,x.translationPrefix):"boolean"==typeof x?.filterValue?.[x?.name]||"false"===x?.filterValue?.[x?.name]||"true"===x?.filterValue?.[x?.name]?this.filterSingleBoolean(x.filterList,s,x.savedValue,x.displayKey,x.translationPrefix):this.filterSingle(x.filterList,s,x.savedValue,x.displayKey,x.translationPrefix);return h&&O?I.concat(...f):I}}filterBreadcrumb(x,s){const{type:h,column:p}=x,f=s.findIndex(t=>t?.type===h&&t?.column===p);-1!==f?(s[f]=x,!(Array.isArray(s[f]?.value)?s[f]?.value?.length:s[f]?.value)&&!(Array.isArray(s[f]?.key)?s[f]?.key?.length:s[f]?.key)&&s.splice(f,1)):(-1===f&&Array.isArray(x?.value)?x?.value?.length:x?.value)&&s.push(x)}removeFilterBreadcrumb(x,s,h,p,f=!1){"super_filter"===x.type&&s?s[x.name]=null:"table_filter"===x.type&&h?h[x.name]=null:"action_filter"===x.type&&p&&(p[x.name]=null),x?.filterRef?.patchValue(x?.resetValue??null,{emitEvent:f})}filterBreadcrumbFormat(x,s){const h=[...s];for(const p of x){const f=null===p.name?p?.filterValue:"boolean"==typeof p?.filterValue?.[p.name]?String(p?.filterValue?.[p.name]):p?.filterValue?.[p.name],t={type:p.type,name:p.name,column:p.column,filterList:p?.filterList,value:f||null,isMultiple:p.isMultiple,filterRef:p.filterRef,resetValue:p.resetValue,noTranslate:p?.noTranslate,stepColumnName:p?.stepColumnName,key:this.getKey(p)};this.filterBreadcrumb(t,h)}return h}}return $.\u0275fac=function(x){return new(x||$)},$.\u0275prov=d.\u0275\u0275defineInjectable({token:$,factory:$.\u0275fac,providedIn:"root"}),$})()},40304:(St,rt,b)=>{b.r(rt),b.d(rt,{SchoolModule:()=>Bp});var d=b(36895),V=b(610),$=b(25360),F=b(68745),x=b(35226),s=b.n(x),h=b(17489),p=b(24006),f=b(65938),t=b(94650),O=b(89383),I=b(72194),k=b(52688),R=b(3238),D=b(4859),B=b(97392),T=b(59549),L=b(51572),Q=b(84385);function Pt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.scholar_season)}}function Mt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function wt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",17),t.\u0275\u0275element(1,"mat-progress-spinner",18),t.\u0275\u0275elementEnd())}let Tt=(()=>{class o{constructor(e,n,i,a,l){this.translate=e,this.intakeService=n,this.dialogRef=i,this.data=a,this.authService=l,this.subs=new F.Y,this.isWaitingForResponse=!1,this.scholarSeason=new p.UntypedFormControl(null,p.Validators.required)}ngOnInit(){this.getAllSchoolarSeason()}getAllSchoolarSeason(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllPublishedScholarSeasons(!0).subscribe(e=>{this.isWaitingForResponse=!1,e&&(this.scholarSeasonData=h.cloneDeep(e.filter(n=>n._id!==this.data.scholar_season_destination_id)),console.log("PublishedScholarSeason",this.scholarSeasonData))},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}scholarSeasonToDuplicate(e){this.scholarSeasonToDuplicateId=e,console.log(this.scholarSeasonToDuplicateId)}submitVerification(){if(this.checkFormValidity())return;const e={...this.data,scholar_season_source_id:this.scholarSeasonToDuplicateId};this.isWaitingForResponse=!0,console.log("_payload",e),this.subs.sink=this.intakeService.DuplicateScholarSeason(e).subscribe(n=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),text:this.translate.instant("This Scholar Season Duplicated !"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(n._id)})},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),"GraphQL error: Source scholar season still empty"===n.message?s().fire({title:this.translate.instant("SCHOOL_S4.TITLE"),text:this.translate.instant("SCHOOL_S4.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("SCHOOL_S4.BUTTON")}):n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}checkFormValidity(){return!!this.scholarSeason.invalid&&(s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.scholarSeason.markAllAsTouched(),!0)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-duplicate-scholar-season"]],decls:30,vars:16,consts:[[1,"dialog-border"],[1,"dialogTitleWrapper"],[1,"p-grid"],[1,"w-30","no-padding"],[1,"p-col-10","acad-title"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[1,"p-col-12","no-padding"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["align","right"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["class","loading-indicator",4,"ngIf"],[3,"value"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),t.\u0275\u0275element(3,"div",3),t.\u0275\u0275elementStart(4,"div",4)(5,"h3",5),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",6)(9,"button",7)(10,"mat-icon"),t.\u0275\u0275text(11,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(12,"mat-dialog-content")(13,"div",2)(14,"div",8)(15,"mat-form-field")(16,"mat-label"),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"mat-select",9),t.\u0275\u0275listener("selectionChange",function(a){return n.scholarSeasonToDuplicate(a.value)}),t.\u0275\u0275template(20,Pt,2,2,"mat-option",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(21,Mt,3,3,"mat-error",11),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(22,"mat-dialog-actions",12)(23,"button",13),t.\u0275\u0275text(24),t.\u0275\u0275pipe(25,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(26,"button",14),t.\u0275\u0275listener("click",function(){return n.submitVerification()}),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(29,wt,2,0,"div",15)),2&e&&(t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,8,"INTAKE_CHANNEL.Duplicate from another scholar season")," "),t.\u0275\u0275advance(11),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(18,10,"INTAKE_CHANNEL.Select the scholar season to duplicate")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",n.scholarSeason),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.scholarSeasonData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.scholarSeason.hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(25,12,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(28,14,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.sg,d.O5,R.ey,D.lW,f.ZT,f.xY,f.H8,B.Hw,T.TO,T.KE,T.hX,L.Ou,Q.gD,p.NgControlStatus,p.FormControlDirective,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mrgn-btn[_ngcontent-%COMP%]{margin-bottom:15px}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;margin-bottom:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.acad-title[_ngcontent-%COMP%]{padding:0;margin-right:25px}.w-30[_ngcontent-%COMP%]{padding-top:4px!important;margin-right:7px!important}.w-65[_ngcontent-%COMP%]{float:right;position:relative;right:-15px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.label-align[_ngcontent-%COMP%]{align-self:center}.border-white[_ngcontent-%COMP%]{border:1px solid rgb(116,116,116)}.flex-hidden-mr-1[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow:hidden;margin-right:1rem!important}[_nghost-%COMP%]  .ng-select .ng-select-container{border-left:0px!important;border-right:0px!important;border-top:0px!important;border-radius:0!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}"]}),o})();var mt=b(67154),J=b(44758),v=b(3848),E=b(34318),C=b(33296),H=b(62395),U=b(11481),X=b(80484),K=b(84075),G=b(84130),q=b(284),it=b(10266);const qt=["uploadLogo"],Gt=["uploadStamp"];function zt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",34),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.onSave())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",!e.isOperator),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,"SAVE")," ")}}function Yt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",35)(1,"div",36),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275element(4,"br"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,2,"Upload school logo")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,4,"580 x 208 px")," "))}function Qt(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275element(1,"img",39),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("src",e.getImgURL(),t.\u0275\u0275sanitizeUrl)}}function Xt(o,r){if(1&o&&t.\u0275\u0275template(0,Qt,2,1,"div",37),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",!e.isUploading)}}function Jt(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",40),t.\u0275\u0275element(1,"mat-progress-spinner",41),t.\u0275\u0275elementEnd())}function Zt(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",18)(1,"button",42),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const i=t.\u0275\u0275reference(26);return t.\u0275\u0275resetView(i.click())}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"mat-icon"),t.\u0275\u0275text(4,"edit"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"button",43),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.deleteLogo())}),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"delete"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,4,"Edit logo")),t.\u0275\u0275property("disabled",!e.isOperator),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(6,6,"Delete logo")),t.\u0275\u0275property("disabled",!e.isOperator)}}function te(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ee(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ne(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Invalid email format")))}function ie(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function oe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ae(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function le(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",35)(1,"div",36),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275element(4,"br"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,2,"Upload school stamp")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,4,"580 x 208 px")," "))}function re(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",38),t.\u0275\u0275element(1,"img",39),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("src",e.getImgURLStamp(),t.\u0275\u0275sanitizeUrl)}}function se(o,r){if(1&o&&t.\u0275\u0275template(0,re,2,1,"div",37),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",!e.isUploadingStamp)}}function ce(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",40),t.\u0275\u0275element(1,"mat-progress-spinner",41),t.\u0275\u0275elementEnd())}function de(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",18)(1,"button",42),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext();const i=t.\u0275\u0275reference(89);return t.\u0275\u0275resetView(i.click())}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementStart(3,"mat-icon"),t.\u0275\u0275text(4,"edit"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"button",43),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.deleteStamp())}),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"delete"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,4,"Edit stamp")),t.\u0275\u0275property("disabled",!e.isOperator),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(6,6,"Delete stamp")),t.\u0275\u0275property("disabled",!e.isOperator)}}function pe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",44),t.\u0275\u0275element(1,"mat-progress-spinner",45),t.\u0275\u0275elementEnd())}let me=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u){this.translate=e,this.fb=n,this.sanitizer=i,this.fileUploadService=a,this.intakeService=l,this.router=c,this.utilService=g,this.permissions=m,this.permissionService=_,this.authService=u,this.subs=new F.Y,this.isWaitingForResponse=!1,this.isUploading=!1,this.isUploadingStamp=!1,this.serverimgPath=`${C.a.baseApi}/fileuploads/`.replace("/graphql","")}ngOnInit(){this.isOperator=!!this.permissions.getPermission("operator_dir")||!!this.permissions.getPermission("operator_admin"),this.formInit(),this.schoolId&&this.getSchoolData()}getSchoolData(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetOneSchool(this.schoolId).subscribe(e=>{this.isWaitingForResponse=!1,e&&(this.schoolData=h.cloneDeep(e),this.schoolData&&this.schoolForm.patchValue(this.schoolData),null===e?.platform_account&&this.schoolForm.get("platform_account").setValue("null"))},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}formInit(){this.schoolForm=this.fb.group({school_logo:[null],platform_account:[null],school_stamp:[null],short_name:[null,[p.Validators.required,E.I8]],long_name:[null,[p.Validators.required,E.I8]],tele_phone:[null,[p.Validators.required]],accounting_plan:[null,[p.Validators.required]],signalement_email:[null,[p.Validators.required,H.dN.email]]})}checkFormValidity(){return!!this.schoolForm.invalid&&(s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.schoolForm.markAllAsTouched(),!0)}onSave(){this.checkFormValidity()||(this.isWaitingForResponse=!0,this.schoolData&&this.schoolData._id?("null"===this.schoolForm.get("platform_account")?.value&&this.schoolForm.get("platform_account").setValue(null),this.subs.sink=this.intakeService.UpdateCandidateSchool(this.schoolForm.value,this.schoolData._id).subscribe(e=>{console.log("Edit School",e),this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{this.schoolForm.patchValue(e),null===e?.platform_account&&this.schoolForm.get("platform_account").patchValue("null")})},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),console.log("err =>",e.message),"GraphQL error: Short name already taken!"===e.message?s().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("duplicate_school"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})):("null"===this.schoolForm.get("platform_account")?.value&&this.schoolForm.get("platform_account").setValue(null),this.subs.sink=this.intakeService.CreateCandidateSchool(this.schoolForm.value).subscribe(e=>{this.isWaitingForResponse=!1,console.log("Add School",e),s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{this.router.navigate(["/schools/school-detail/"+e._id])})},e=>{this.isWaitingForResponse=!1,console.log("err =>",e.message),this.authService.postErrorLog(e),"GraphQL error: Short name already taken!"===e.message?s().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("duplicate_school"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})))}getImgURL(){const e=this.schoolForm.get("school_logo").value;return this.sanitizer.bypassSecurityTrustUrl(this.serverimgPath+e)}getImgURLStamp(){const e=this.schoolForm.get("school_stamp").value;return this.sanitizer.bypassSecurityTrustUrl(this.serverimgPath+e)}chooseFile(e){const n=["jpg","jpeg","png"],i=e.target.files[0];if(this.isUploading=!0,i){const a=this.utilService.getFileExtension(i.name).toLocaleLowerCase();n.includes(a)?this.subs.sink=this.fileUploadService.singleUpload(i).subscribe(l=>{this.isUploading=!1,l&&(this.schoolForm.get("school_logo").setValue(l.s3_file_name),this.uploadLogo.nativeElement.value=null,this.schoolData&&this.updateLogo())},l=>{this.isUploading=!1,this.uploadLogo.nativeElement.value=null,this.authService.postErrorLog(l),l&&l.message&&l.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):(this.isUploading=!1,this.uploadLogo.nativeElement.value=null,s().fire({type:"info",title:this.translate.instant("Finance_S3.TITLE"),text:this.translate.instant("Finance_S3.TEXT",{file_exts:".jpg, .jpeg, .png"}),confirmButtonText:this.translate.instant("Finance_S3.BUTTON")}))}else this.isUploading=!1}chooseFileStamp(e){const n=["jpg","jpeg","png"],i=e.target.files[0];if(this.isUploadingStamp=!0,i){const a=this.utilService.getFileExtension(i.name).toLocaleLowerCase();n.includes(a)?this.subs.sink=this.fileUploadService.singleUpload(i).subscribe(l=>{this.isUploadingStamp=!1,l&&(this.schoolForm.get("school_stamp").setValue(l.s3_file_name),this.uploadLogo.nativeElement.value=null,this.schoolData&&this.updateLogo())},l=>{this.isUploadingStamp=!1,this.uploadLogo.nativeElement.value=null,this.authService.postErrorLog(l),l&&l.message&&l.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}):(this.isUploadingStamp=!1,this.uploadLogo.nativeElement.value=null,s().fire({type:"info",title:this.translate.instant("Finance_S3.TITLE"),text:this.translate.instant("Finance_S3.TEXT",{file_exts:".jpg, .jpeg, .png"}),confirmButtonText:this.translate.instant("Finance_S3.BUTTON")}))}else this.isUploadingStamp=!1}deleteLogo(){let e=3;s().fire({title:this.translate.instant("DELETE_LOGO.TITLE"),text:this.translate.instant("DELETE_LOGO.TEXT"),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM",{timer:e}),cancelButtonText:this.translate.instant("DELETE_LOGO.BUTTON_CANCEL"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{s().disableConfirmButton();const n=s().getConfirmButton(),i=setInterval(()=>{e-=1,n.innerText=this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM")+` (${e})`},1e3);this.timeOutVal=setTimeout(()=>{n.innerText=this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM"),s().enableConfirmButton(),clearInterval(i),clearTimeout(this.timeOutVal)},1e3*e)}}).then(n=>{clearTimeout(this.timeOutVal),n&&n.value&&(this.schoolForm.get("school_logo").setValue(""),this.schoolData&&this.updateLogo())})}deleteStamp(){let e=3;s().fire({title:this.translate.instant("DELETE_LOGO.TITLE"),text:this.translate.instant("DELETE_LOGO.TEXT"),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM",{timer:e}),cancelButtonText:this.translate.instant("DELETE_LOGO.BUTTON_CANCEL"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{s().disableConfirmButton();const n=s().getConfirmButton(),i=setInterval(()=>{e-=1,n.innerText=this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM")+` (${e})`},1e3);this.timeOutVal=setTimeout(()=>{n.innerText=this.translate.instant("DELETE_LOGO.BUTTON_CONFIRM"),s().enableConfirmButton(),clearInterval(i),clearTimeout(this.timeOutVal)},1e3*e)}}).then(n=>{clearTimeout(this.timeOutVal),n&&n.value&&(this.schoolForm.get("school_stamp").setValue(""),this.schoolData&&this.updateStamp())})}updateLogo(){this.subs.sink=this.intakeService.UpdateCandidateSchool(this.schoolForm.value,this.schoolData._id).subscribe(e=>{console.log("Edit School",e),this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{this.schoolForm.patchValue(e)})},e=>{this.isWaitingForResponse=!1,console.log("err =>",e.message),this.authService.postErrorLog(e),"GraphQL error: Short name already taken!"===e.message?s().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("duplicate_school"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}updateStamp(){this.subs.sink=this.intakeService.UpdateCandidateSchool(this.schoolForm.value,this.schoolData._id).subscribe(e=>{console.log("Edit School",e),this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(n=>{this.schoolForm.patchValue(e)})},e=>{this.isWaitingForResponse=!1,console.log("err =>",e.message),this.authService.postErrorLog(e),"GraphQL error: Short name already taken!"===e.message?s().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("duplicate_school"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(U.H7),t.\u0275\u0275directiveInject(X.J),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(G.YI),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-school-detail"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(qt,5),t.\u0275\u0275viewQuery(Gt,5)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.uploadLogo=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.uploadStamp=i.first)}},inputs:{schoolId:"schoolId"},decls:95,vars:76,consts:[[3,"formGroup"],[1,"p-grid"],["align","end",1,"p-col"],["mat-raised-button","","color","warn","type","button","routerLink","/schools"],["mat-raised-button","","color","accent","type","submit",3,"disabled","click",4,"ngIf"],[1,"p-col-3","logo-section"],[1,"imgContainer",3,"click"],["class","no-image ml-0",4,"ngIf","ngIfElse"],["class","p-grid p-justify-center"],["showLogoTemplate",""],["class","logo-spinner-wrapper",4,"ngIf"],[1,"overlay"],[1,"text"],[1,"p-grid","image-text"],[1,"text-logo-section"],["hidden","","type","file","accept","image/png, image/jpeg, image/jpg",3,"disabled","change"],["uploadLogo",""],["class","buttonContainer",4,"ngIf"],[1,"buttonContainer"],[1,"p-col-9"],[1,"p-col-4"],["matInput","","formControlName","short_name",3,"placeholder","readonly"],[4,"ngIf"],["matInput","","formControlName","tele_phone",3,"placeholder","readonly"],["matInput","","formControlName","signalement_email",3,"placeholder","readonly"],[1,"p-col-8"],["matInput","","formControlName","long_name",3,"placeholder","readonly"],["matInput","","formControlName","accounting_plan",3,"placeholder","readonly"],["formControlName","platform_account",3,"placeholder","disabled"],["value","null"],["value","microsoft_365"],["showStampTemplate",""],["uploadStamp",""],["class","loading-indicator",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled","click"],[1,"no-image","ml-0"],[2,"position","relative","top","80px"],["class","logo-img-wrapper",4,"ngIf"],[1,"logo-img-wrapper"],[1,"center-image","school-details-img",3,"src"],[1,"logo-spinner-wrapper"],["mode","indeterminate","color","accent",1,"m-auto",2,"left","35px"],["mat-mini-fab","","color","primary",2,"margin-right","10px",3,"matTooltip","disabled","click"],["mat-mini-fab","","color","warn",3,"matTooltip","disabled","click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){if(1&e){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",0)(1,"div",1)(2,"div",2)(3,"button",3),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,zt,3,4,"button",4),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",1)(8,"div",5)(9,"p"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const l=t.\u0275\u0275reference(26);return t.\u0275\u0275resetView(n.isOperator?l.click():"")}),t.\u0275\u0275template(13,Yt,7,6,"div",7),t.\u0275\u0275template(14,Xt,1,1,"ng-template",8,9,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(16,Jt,2,0,"div",10),t.\u0275\u0275elementStart(17,"div",11)(18,"div",12),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"div",13)(22,"div",14),t.\u0275\u0275text(23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(25,"input",15,16),t.\u0275\u0275listener("change",function(l){return n.chooseFile(l)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(27,Zt,9,8,"div",17),t.\u0275\u0275elementStart(28,"div",18),t.\u0275\u0275text(29),t.\u0275\u0275pipe(30,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(31,"div",19)(32,"div",1)(33,"div",20)(34,"mat-form-field"),t.\u0275\u0275element(35,"input",21),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275template(37,te,3,3,"mat-error",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(38,"div",20)(39,"mat-form-field"),t.\u0275\u0275element(40,"input",23),t.\u0275\u0275pipe(41,"translate"),t.\u0275\u0275template(42,ee,3,3,"mat-error",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(43,"div",20)(44,"mat-form-field"),t.\u0275\u0275element(45,"input",24),t.\u0275\u0275pipe(46,"translate"),t.\u0275\u0275template(47,ne,3,3,"mat-error",22),t.\u0275\u0275template(48,ie,3,3,"mat-error",22),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(49,"div",1)(50,"div",25)(51,"mat-form-field"),t.\u0275\u0275element(52,"input",26),t.\u0275\u0275pipe(53,"translate"),t.\u0275\u0275template(54,oe,3,3,"mat-error",22),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(55,"div",20)(56,"mat-form-field"),t.\u0275\u0275element(57,"input",27),t.\u0275\u0275pipe(58,"translate"),t.\u0275\u0275template(59,ae,3,3,"mat-error",22),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(60,"div",1)(61,"div",20)(62,"mat-form-field")(63,"mat-select",28),t.\u0275\u0275pipe(64,"translate"),t.\u0275\u0275elementStart(65,"mat-option",29),t.\u0275\u0275text(66),t.\u0275\u0275pipe(67,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(68,"mat-option",30),t.\u0275\u0275text(69),t.\u0275\u0275pipe(70,"translate"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(71,"div",5)(72,"p"),t.\u0275\u0275text(73),t.\u0275\u0275pipe(74,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(75,"div",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const l=t.\u0275\u0275reference(89);return t.\u0275\u0275resetView(n.isOperator?l.click():"")}),t.\u0275\u0275template(76,le,7,6,"div",7),t.\u0275\u0275template(77,se,1,1,"ng-template",8,31,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(79,ce,2,0,"div",10),t.\u0275\u0275elementStart(80,"div",11)(81,"div",12),t.\u0275\u0275text(82),t.\u0275\u0275pipe(83,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(84,"div",13)(85,"div",14),t.\u0275\u0275text(86),t.\u0275\u0275pipe(87,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(88,"input",15,32),t.\u0275\u0275listener("change",function(l){return n.chooseFileStamp(l)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(90,de,9,8,"div",17),t.\u0275\u0275elementStart(91,"div",18),t.\u0275\u0275text(92),t.\u0275\u0275pipe(93,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(94,pe,2,0,"div",33)}if(2&e){const i=t.\u0275\u0275reference(15),a=t.\u0275\u0275reference(78);t.\u0275\u0275property("formGroup",n.schoolForm),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,42,"CANCEL")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.permissionService.editSchoolInIntakeChanelSchool()),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(11,44,"School Logo")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!n.schoolForm.get("school_logo").value&&!n.isUploading)("ngIfElse",i),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isUploading),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,46,"DOCUMENT.LOGO")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(24,48,"School logo")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("school_logo").value),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(30,50,"SUGGESTED_RESOLUTION")," "),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(36,52,"INTAKE_CHANNEL.School name")),t.\u0275\u0275property("readonly",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("short_name").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(41,54,"INTAKE_CHANNEL.Telephone")),t.\u0275\u0275property("readonly",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("tele_phone").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(46,56,"INTAKE_CHANNEL.Email signalement")),t.\u0275\u0275property("readonly",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("signalement_email").hasError("email")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.schoolForm.get("signalement_email").hasError("required")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(53,58,"INTAKE_CHANNEL.School full name")),t.\u0275\u0275property("readonly",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("long_name").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(58,60,"INTAKE_CHANNEL.Accounting plan")),t.\u0275\u0275property("readonly",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("accounting_plan").hasError("required")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(64,62,"Platform account")),t.\u0275\u0275property("disabled",!n.isOperator),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(67,64,"None")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(70,66,"microsoft_365")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(74,68,"School Stamp")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!n.schoolForm.get("school_stamp").value&&!n.isUploadingStamp)("ngIfElse",a),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.isUploadingStamp),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(83,70,"Add Stamp")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(87,72,"School stamp")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!n.isOperator),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.schoolForm.get("school_stamp").value),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(93,74,"SUGGESTED_RESOLUTION")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse)}},dependencies:[d.O5,V.rH,R.ey,D.lW,B.Hw,T.TO,T.KE,q.Nt,L.Ou,Q.gD,it.gM,p.\u0275NgNoValidate,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.imgContainer[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.imgContainer[_ngcontent-%COMP%]{height:200px;text-align:center;overflow:hidden;position:relative;background-color:transparent}.text[_ngcontent-%COMP%]{width:165px;color:#fff;font-size:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;margin-left:0}.no-image[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;color:#fff;text-align:center;cursor:pointer}.overlay[_ngcontent-%COMP%]{position:absolute;height:200px;width:100%;bottom:0;opacity:0;transition:.5s ease;background-color:#2f2f2f!important;cursor:pointer}.logo-img-wrapper[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;text-align:center;overflow:hidden;position:relative;margin:auto auto auto 0}.text-logo-section[_ngcontent-%COMP%]{width:200px;display:flex;justify-content:center}.buttonContainer[_ngcontent-%COMP%]{padding-top:.5rem;text-align:center}.center-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto;padding:3px}.image-text[_ngcontent-%COMP%]{font-size:larger;font-weight:700;padding-top:1rem}.logo-spinner-wrapper[_ngcontent-%COMP%]{height:200px;width:173px;background-color:#6f6f6f;margin:auto;display:flex;align-items:center}.loading-indicator[_ngcontent-%COMP%]{position:fixed;z-index:999;height:2em;width:6em;overflow:show;margin:auto;inset:0}"]}),o})();var ft=b(95017),et=b(98739),z=b(96308),S=b(53626),Z=b(1059),ht=b(22868),nt=b(24850),A=b(73555),Y=b(88796);function he(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",22),t.\u0275\u0275element(1,"mat-progress-spinner",23),t.\u0275\u0275elementEnd())}let ge=(()=>{class o{constructor(e,n,i,a,l){this.parentData=e,this.fb=n,this.dialogRef=i,this.intakeChannelService=a,this.translate=l,this.subs=new F.Y,this.campusList=[],this.levelList=[],this.sectorList=[],this.specializationList=[],this.isWaitingForResponse=!1}ngOnInit(){this.getAllFillterDropdown(),this.parentData&&this.initForm()}initForm(){this.addProgramForm=this.fb.group({school_id:[this.parentData.school._id,p.Validators.required],scholar_season_id:[this.parentData.scholarSeason._id,p.Validators.required],campuses:[null,p.Validators.required],levels:[null,p.Validators.required],sectors:[null,p.Validators.required],specialities:[null]})}getAllFillterDropdown(){this.getAllCampusDropdown(),this.getAllLevelDropdown(),this.getAllSectorsDropdown(),this.getAllSpecializationDropdown()}getAllCampusDropdown(){this.subs.sink=this.intakeChannelService.getAllCampusesDropdown().subscribe(e=>{e&&e.length>0&&(console.log("campus",e),this.campusList=e)},e=>{this.swalError(e)})}getAllLevelDropdown(){this.subs.sink=this.intakeChannelService.getAllLevelsDropdown().subscribe(e=>{e&&e.length>0&&(console.log("level",e),this.levelList=e)},e=>{this.swalError(e)})}getAllSectorsDropdown(){this.subs.sink=this.intakeChannelService.getSectorDropdown().subscribe(e=>{e&&e.length>0&&(console.log("sector",e),this.sectorList=e)},e=>{this.swalError(e)})}getAllSpecializationDropdown(){this.subs.sink=this.intakeChannelService.getAllSpecializationsDropdown().subscribe(e=>{e&&e.length>0&&(console.log("spec",e),this.specializationList=e)},e=>{this.swalError(e)})}swalError(e){if(e.message.includes("GraphQL error: program_exist:")){let n=e.message.replaceAll("GraphQL error: program_exist:","");s().fire({title:this.translate.instant("SCHOOL_S2.TITLE"),text:this.translate.instant("SCHOOL_S2.TEXT",{program:n}),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("SCHOOL_S2.BUTTON1")}).then(()=>this.isWaitingForResponse=!1)}else e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}closeDialog(){this.dialogRef.close()}submit(){if(this.addProgramForm.invalid)return s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),void this.addProgramForm.markAllAsTouched();const e=this.createPayload();this.isWaitingForResponse=!0,this.subs.sink=this.intakeChannelService.AssignProgramToSchool(e).subscribe(n=>{n?s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.isWaitingForResponse=!1,this.dialogRef.close(!0)}):this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.swalError(n)})}createPayload(){return this.addProgramForm.value}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(O.sK))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-program-dialog"]],decls:41,vars:43,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"p-col-2"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",2,"overflow","hidden !important"],[1,"p-grid",2,"padding-top","10px",3,"formGroup"],[1,"p-col-1","pad-y-none"],["floatLabel","auto"],["matInput","","readonly","",1,"form-field",3,"placeholder","value"],[1,"p-col-2","pad-y-none"],["formControlName","campuses","bindLabel","name","bindValue","_id",1,"mrgn-btn",3,"placeholder","multiple","items","appendTo"],["formControlName","levels","bindLabel","name","bindValue","_id",1,"mrgn-btn",3,"placeholder","multiple","items","appendTo"],[1,"p-col-3","pad-y-none"],["formControlName","sectors","bindLabel","name","bindValue","_id",1,"mrgn-btn",3,"placeholder","multiple","items","appendTo"],["formControlName","specialities","bindLabel","name","bindValue","_id",1,"mrgn-btn",3,"placeholder","multiple","items","appendTo"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",1,"mr-0",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7)(12,"div",8)(13,"div",9)(14,"mat-form-field",10),t.\u0275\u0275element(15,"input",11),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"div",9)(18,"mat-form-field",10),t.\u0275\u0275element(19,"input",11),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(21,"div",12),t.\u0275\u0275element(22,"ng-select",13),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"div",12),t.\u0275\u0275element(25,"ng-select",14),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"div",15),t.\u0275\u0275element(28,"ng-select",16),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"div",15),t.\u0275\u0275element(31,"ng-select",17),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(33,"div",18)(34,"button",19),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(35),t.\u0275\u0275pipe(36,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(37,"button",20),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(38),t.\u0275\u0275pipe(39,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(40,he,2,0,"div",21)),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,25,"Button_Program_Above_Table_School_Detail.Add program")),t.\u0275\u0275advance(7),t.\u0275\u0275property("formGroup",n.addProgramForm),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(16,27,"Scholar Season")),t.\u0275\u0275property("value",null==n.parentData||null==n.parentData.scholarSeason?null:n.parentData.scholarSeason.scholar_season),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(20,29,"School")),t.\u0275\u0275property("value",null==n.parentData||null==n.parentData.school?null:n.parentData.school.short_name),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(23,31,"Campus"),"*"),t.\u0275\u0275property("multiple",!0)("items",n.campusList)("appendTo","body"),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(26,33,"Level"),"*"),t.\u0275\u0275property("multiple",!0)("items",n.levelList)("appendTo","body"),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(29,35,"Sector"),"*"),t.\u0275\u0275property("multiple",!0)("items",n.sectorList)("appendTo","body"),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(32,37,"Program_Table_School_Detail.Speciality")),t.\u0275\u0275property("multiple",!0)("items",n.specializationList)("appendTo","body"),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(36,39,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(39,41,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.O5,A.Zt,A.Bh,D.lW,f.xY,f.H8,B.Hw,T.KE,q.Nt,L.Ou,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,Y.w9,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.mat-icon-default[_ngcontent-%COMP%]{font-size:30px!important;margin-top:0!important;width:auto!important;padding-right:5px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center;margin-top:3px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .ng-dropdown-panel.ng-select-bottom{width:auto!important}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}[_nghost-%COMP%]  .mat-dialog-content{min-height:15vh}"]}),o})();var ot=b(92340),gt=b(80529),Ct=b(22437),_t=b(56709),W=b(28255),st=b(24784),bt=b(75223);function _e(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",45),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return i.buttonClicked="export",t.\u0275\u0275resetView(i.controlButton("export"))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",46),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Export")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"Export")," ")}}function ue(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",45),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.resetFilter())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",47),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"RESET")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"RESET")," ")}}function fe(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",37)(1,"div",38)(2,"div",39)(3,"button",40),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"mat-menu",41,42)(11,"button",43),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.onOpenAddDialog(!1))}),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(15,_e,5,7,"button",44),t.\u0275\u0275template(16,ue,5,7,"button",44),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275reference(10),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(4,8,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,10,"Action")," "),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(12,12,"Button_Program_Above_Table_School_Detail.Add program")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,14,"Button_Program_Above_Table_School_Detail.Add program")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.permission.exportSchoolProgram()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.permission.resetSchoolProgram())}}function Ce(o,r){1&o&&t.\u0275\u0275element(0,"th",48)}function be(o,r){1&o&&t.\u0275\u0275element(0,"th",48)}function xe(o,r){1&o&&t.\u0275\u0275element(0,"th",48)}function ve(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function Oe(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function ye(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Se(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",48)(1,"mat-form-field",49)(2,"mat-select",50),t.\u0275\u0275template(3,ve,3,4,"mat-option",51),t.\u0275\u0275template(4,Oe,3,4,"mat-option",52),t.\u0275\u0275template(5,ye,2,2,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.campusFilterCtrl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.campusList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.campusList&&(null==e.campusList?null:e.campusList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.campusList)}}function Pe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function Me(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function we(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Te(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",48)(1,"mat-form-field",49)(2,"mat-select",50),t.\u0275\u0275template(3,Pe,3,4,"mat-option",51),t.\u0275\u0275template(4,Me,3,4,"mat-option",52),t.\u0275\u0275template(5,we,2,2,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.levelFilterCtrl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.levelList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.levelList&&(null==e.levelList?null:e.levelList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.levelList)}}function ke(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function Ie(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Ee(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function De(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",48)(1,"mat-form-field",49)(2,"mat-select",50),t.\u0275\u0275template(3,ke,3,4,"mat-option",51),t.\u0275\u0275template(4,Ie,3,4,"mat-option",52),t.\u0275\u0275template(5,Ee,2,2,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.sectorFilterCtrl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.sectorList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sectorList&&(null==e.sectorList?null:e.sectorList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sectorList)}}function Fe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",54),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function Ae(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Be(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",55),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Ne(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",48)(1,"mat-form-field",49)(2,"mat-select",50),t.\u0275\u0275template(3,Fe,3,4,"mat-option",51),t.\u0275\u0275template(4,Ae,3,4,"mat-option",52),t.\u0275\u0275template(5,Be,2,2,"mat-option",53),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.specialityFilterCtrl),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.specialityList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialityList&&(null==e.specialityList?null:e.specialityList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.specialityList)}}function Le(o,r){1&o&&t.\u0275\u0275element(0,"th",48)}function Ve(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",56)(1,"mat-checkbox",57),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?a.masterToggle():null)})("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.showOptions("all",""))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",e.selection.hasValue()&&e.isAllSelected()||e.isCheckedAll)("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Re(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",58)(1,"mat-checkbox",59),t.\u0275\u0275listener("click",function(i){return i.stopPropagation()})("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?c.selection.toggle(l._id):null)})("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.showOptions("one",a))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",n.selection.isSelected(null==e?null:e._id)||n.isCheckedAll&&!n.dataUnselect.includes(null==e?null:e._id))("aria-label",n.checkboxLabel(e))}}function Ue(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Scholar season")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Scholar season")))}function He(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.scholar_season_id?null:e.scholar_season_id.scholar_season),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.scholar_season_id?null:e.scholar_season_id.scholar_season," ")}}function Ke(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.School")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.School")))}function We(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.school_id?null:e.school_id.short_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.school_id?null:e.school_id.short_name," ")}}function je(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Campus")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Campus")))}function $e(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.campus?null:e.campus.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.campus?null:e.campus.name," ")}}function qe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Level")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Level")))}function Ge(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.level?null:e.level.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.level?null:e.level.name," ")}}function ze(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Sector")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Sector")))}function Ye(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.sector_id?null:e.sector_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.sector_id?null:e.sector_id.name," ")}}function Qe(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Speciality")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Speciality")))}function Xe(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",61),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.speciality_id?null:e.speciality_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.speciality_id?null:e.speciality_id.name," ")}}function Je(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",60),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Action")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Action")))}function Ze(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",64),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onDelete(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"delete"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Delete")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function tn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",62),t.\u0275\u0275template(1,Ze,4,4,"button",63),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permission.deleteSchoolProgram())}}function en(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"div",66),t.\u0275\u0275element(2,"mat-spinner",67),t.\u0275\u0275elementEnd()())}function nn(o,r){1&o&&t.\u0275\u0275element(0,"tr",68)}function on(o,r){1&o&&t.\u0275\u0275element(0,"tr",68)}function an(o,r){1&o&&t.\u0275\u0275element(0,"tr",68)}function ln(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",69),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function rn(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",70),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function sn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",72),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")," "))}function cn(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,sn,3,3,"div",71),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.noData))}}function dn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",73),t.\u0275\u0275element(1,"mat-progress-spinner",74),t.\u0275\u0275elementEnd())}const pn=function(){return["reset"]},mn=function(){return["loading"]},hn=function(o){return{hide:o}},gn=function(o){return{"hide-pagination-buttons":o}},_n=function(){return[10]};let un=(()=>{class o{constructor(e,n,i,a,l,c,g){this.intakeService=e,this.translate=n,this.dialog=i,this.http=a,this.permission=l,this.authService=c,this.filterBreadCrumbService=g,this.subs=new F.Y,this.selection=new ft.Ov(!0,[]),this.dataSource=new S.by([]),this.isReset=!1,this.dataLoaded=!1,this.sortValue=null,this.displayedColumns=["select","scholarSeason","school","campus","level","sector","speciality","action"],this.filterColumns=["selectFilter","scholarSeasonFilter","schoolFilter","campusFilter","levelFilter","sectorFilter","specialityFilter","actionFilter"],this.isWaitingForResponse=!1,this.isClickingExport=!1,this.dataCount=0,this.buttonClicked=null,this.dataProgramForExport=[],this.dataUnselect=[],this.dataSelected=[],this.userSelected=[],this.userSelectedId=[],this.pageSelected=[],this.allStudentForCheckbox=[],this.campusFilterCtrl=new p.UntypedFormControl(["All"]),this.levelFilterCtrl=new p.UntypedFormControl(["All"]),this.sectorFilterCtrl=new p.UntypedFormControl(["All"]),this.specialityFilterCtrl=new p.UntypedFormControl(["All"]),this.campusList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.allFilter=[],this.filteredValues={scholar_season_id:"",school_id:[],campus:null,level:null,speciality:null,sector:null},this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.filterBreadcrumbData=[]}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.getDropdownFilter(0)}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,Z.O)(null),(0,ht.b)(()=>{this.isReset||this.getDataProgramSchoolScholarSeason(),this.dataLoaded=!0})).subscribe()}isAllSelected(){const e=this.selection.selected.length,n=this.dataSource.data.length;return e===n||e>n}masterToggle(){this.isAllSelected()?(this.selection.clear(),this.dataProgramForExport=[],this.dataUnselect=[],this.dataSelected=[],this.pageSelected=[],this.isCheckedAll=!1,this.filterBreadcrumbData=[]):(this.selection.clear(),this.dataProgramForExport=[],this.dataUnselect=[],this.dataSelected=[],this.allStudentForCheckbox=[],this.filterBreadcrumbData=[],this.isCheckedAll=!0,this.dataSource.data.map(e=>{console.log("ROW ",e),this.dataUnselect.includes(e._id)||this.selection.select(e._id)}))}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}showOptions(e,n){if(this.isCheckedAll){if(n)if(this.dataUnselect.includes(n._id)){const i=this.dataUnselect.findIndex(a=>a===n._id);this.dataUnselect.splice(i,1),this.selection.select(n._id)}else this.dataUnselect.push(n._id),this.selection.deselect(n._id)}else{if(n)if(this.dataSelected&&this.dataSelected.length){const l=this.dataSelected.filter(c=>c._id===n._id);if(l&&l.length<1)this.dataSelected.push(n);else{const c=this.dataSelected.findIndex(g=>g._id===n._id);this.dataSelected.splice(c,1)}}else this.dataSelected.push(n);console.log("dataSelected 123",this.dataSelected),this.disabledExport=!(this.selection.selected.length>0),this.userSelected=[],this.userSelectedId=[],this.dataSelectedId=[],this.selectType=e,(this.dataSelected&&this.dataSelected.length?this.dataSelected:this.selection.selected).map(l=>{this.userSelected.push(l),this.userSelectedId.push(l._id),this.dataSelectedId.push(l._id)}),console.log("dataSelectedId",this.dataSelectedId)}}resetFilter(){this.isReset=!0,this.selection.clear(),this.isCheckedAll=!1,this.dataProgramForExport=[],this.filterBreadcrumbData=[],this.dataUnselect=[],this.dataSelected=[],this.dataSelectedId=[],this.paginator.pageIndex=0,this.campusFilterCtrl.setValue(["All"],{emitEvent:!1}),this.levelFilterCtrl.setValue(["All"],{emitEvent:!1}),this.sectorFilterCtrl.setValue(["All"],{emitEvent:!1}),this.specialityFilterCtrl.setValue(["All"],{emitEvent:!1});const e=[];this.schoolId&&e.push(this.schoolId),this.filteredValues={scholar_season_id:this.scholarSeasonId,school_id:e,campus:null,level:null,speciality:null,sector:null},this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.getDataProgramSchoolScholarSeason()}getDataProgramSchoolScholarSeason(e){this.isWaitingForResponse=!0;const n={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};this.filteredValues.scholar_season_id=this.scholarSeasonId,this.filteredValues.school_id=[this.schoolId],this.subs.sink=this.intakeService.GetAllSelectedSchoolProgramScholarSeason(this.filteredValues,n,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe(a=>{if(a&&a.length>0){const l=h.cloneDeep(a);this.programsDatas=h.cloneDeep(l),this.dataSource.data=l,this.paginator.length=l[0].count_document,this.dataCount=l[0].count_document,this.disabledExport=!0}else this.dataSource.data=[],this.paginator.length=0,this.dataCount=0,this.disabledExport=!0;this.filterBreadcrumbData=[],this.filterBreadcrumbFormat(),this.noData=this.dataSource.connect().pipe((0,nt.U)(l=>0===l.length)),this.isReset=!1,this.isWaitingForResponse=!1},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):this.swalError(a)})}updateSchool(){this.schoolData&&this.schoolData._id&&(this.subs.sink=this.intakeService.updateCommonCandidateSchool(this.schoolData._id,{empty_scholar_seasons:this.schoolData.empty_scholar_seasons}).subscribe(n=>{},n=>{this.authService.postErrorLog(n),"GraphQL error: Short name already taken!"===n.message?s().fire({title:this.translate.instant("USER_S15.TITLE"),html:this.translate.instant("duplicate_school"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("USER_S15.OK")}):n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}))}checkDataCreateFromZero(e){let n=!1;this.schoolData&&this.schoolData.empty_scholar_seasons&&this.schoolData.empty_scholar_seasons.length&&e&&e._id&&(this.schoolData.empty_scholar_seasons.forEach((i,a)=>{i._id===e._id&&(this.schoolData.empty_scholar_seasons.splice(a,1),n=!0)}),n&&this.updateSchool())}getDropdownFilter(e){this.isWaitingForResponse=!0;const n={limit:300,page:e};this.filteredValues.scholar_season_id=this.scholarSeasonId,this.filteredValues.school_id=[this.schoolId],this.subs.sink=this.intakeService.GetAllSelectedSchoolProgramScholarSeasonFilter(this.filteredValues,n,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe(a=>{if(a&&a.length)this.isWaitingForResponse=!0,this.allFilter.push(...a),this.getDropdownFilter(e+1);else{this.isWaitingForResponse=!1,this.isLoading=!1;const l=h.cloneDeep(this.allFilter);l&&l.length&&(l.forEach(c=>{c&&c.campus&&this.campusList.push(c.campus),c&&c.level&&this.levelList.push(c.level),c&&c.sector_id&&this.sectorList.push(c.sector_id),c&&c.speciality_id&&this.specialityList.push(c.speciality_id)}),this.uniqByFilter())}},a=>{this.authService.postErrorLog(a),this.isWaitingForResponse=!1,this.isLoading=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("OK")})})}uniqByFilter(){this.campusList&&this.campusList.length>0&&(this.campusList=h.uniqBy(this.campusList,"_id"),this.campusList=this.campusList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.levelList&&this.levelList.length>0&&(this.levelList=h.uniqBy(this.levelList,"_id"),this.levelList=this.levelList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.sectorList&&this.sectorList.length>0&&(this.sectorList=h.uniqBy(this.sectorList,"_id"),this.sectorList=this.sectorList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.specialityList&&this.specialityList.length>0&&(this.specialityList=h.uniqBy(this.specialityList,"_id"),this.specialityList=this.specialityList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase())))}selectAll(e){const n=["All"];"campus"===e?this.campusList&&this.campusList.length?this.isSelectAllCampus?(this.isSelectAllCampus=!1,this.campusFilterCtrl.setValue(null),this.filteredValues.campus=null,this.isReset||this.getDataProgramSchoolScholarSeason()):(this.isSelectAllCampus=!0,this.campusFilterCtrl.setValue(n),this.filteredValues.campus=null,this.isReset||this.getDataProgramSchoolScholarSeason()):this.isSelectAllCampus?(this.campusFilterCtrl.setValue(n),this.isSelectAllCampus=!this.isSelectAllCampus):(this.campusFilterCtrl.setValue(null),this.isSelectAllCampus=!this.isSelectAllCampus):"level"===e?this.levelList&&this.levelList.length?this.isSelectAllLevel?(this.isSelectAllLevel=!1,this.levelFilterCtrl.setValue(null),this.filteredValues.level=null,this.isReset||this.getDataProgramSchoolScholarSeason()):(this.isSelectAllLevel=!0,this.levelFilterCtrl.setValue(n),this.filteredValues.level=null,this.isReset||this.getDataProgramSchoolScholarSeason()):this.isSelectAllLevel?(this.levelFilterCtrl.setValue(n),this.isSelectAllLevel=!this.isSelectAllLevel):(this.levelFilterCtrl.setValue(null),this.isSelectAllLevel=!this.isSelectAllLevel):"sector"===e?this.sectorList&&this.sectorList.length?this.isSelectAllSector?(this.isSelectAllSector=!1,this.sectorFilterCtrl.setValue(null),this.filteredValues.sector=null,this.isReset||this.getDataProgramSchoolScholarSeason()):(this.isSelectAllSector=!0,this.sectorFilterCtrl.setValue(n),this.filteredValues.sector=null,this.isReset||this.getDataProgramSchoolScholarSeason()):this.isSelectAllSector?(this.sectorFilterCtrl.setValue(n),this.isSelectAllSector=!this.isSelectAllSector):(this.sectorFilterCtrl.setValue(null),this.isSelectAllSector=!this.isSelectAllSector):"speciality"===e&&(this.specialityList&&this.specialityList.length?this.isSelectAllSpeciality?(this.isSelectAllSpeciality=!1,this.specialityFilterCtrl.setValue(null),this.filteredValues.speciality=null,this.isReset||this.getDataProgramSchoolScholarSeason()):(this.isSelectAllSpeciality=!0,this.specialityFilterCtrl.setValue(n),this.filteredValues.speciality=null,this.isReset||this.getDataProgramSchoolScholarSeason()):this.isSelectAllSpeciality?(this.specialityFilterCtrl.setValue(n),this.isSelectAllSpeciality=!this.isSelectAllSpeciality):(this.specialityFilterCtrl.setValue(null),this.isSelectAllSpeciality=!this.isSelectAllSpeciality))}setFilterSelected(e){switch(e){case"campus":const n=h.cloneDeep(this.campusFilterCtrl.value),i=n.find(M=>"All"===M),a=n.find(M=>"All"!==M);if(!i&&n.length){this.isSelectAllCampus=!1;const M=[];n.filter(tt=>{tt&&M.push(tt)}),this.campusFilterCtrl.setValue(M);const w=this.campusFilterCtrl.value;this.filteredValues.campus=w&&w.length>0?w:null,this.paginator.pageIndex=0}else if(a&&n.length){const M=n.findIndex(w=>"All"===w);n.splice(M,1),this.isSelectAllCampus=!1,this.campusFilterCtrl.setValue(n),this.filteredValues.campus=n}else this.filteredValues.campus=null,this.paginator.pageIndex=0;this.isReset||this.getDataProgramSchoolScholarSeason();break;case"level":const l=h.cloneDeep(this.levelFilterCtrl.value),c=l.find(M=>"All"===M),g=l.find(M=>"All"!==M);if(!c&&l.length){this.isSelectAllLevel=!1;const M=[];l.filter(tt=>{tt&&M.push(tt)}),this.levelFilterCtrl.setValue(M);const w=this.levelFilterCtrl.value;this.filteredValues.level=w&&w.length>0?w:null,this.paginator.pageIndex=0}else if(g&&l.length){const M=l.findIndex(w=>"All"===w);l.splice(M,1),this.isSelectAllLevel=!1,this.levelFilterCtrl.setValue(l),this.filteredValues.level=l}else this.filteredValues.level=null,this.paginator.pageIndex=0;this.isReset||this.getDataProgramSchoolScholarSeason();break;case"sector":const m=h.cloneDeep(this.sectorFilterCtrl.value),_=m.find(M=>"All"===M),u=m.find(M=>"All"!==M);if(!_&&m.length){this.isSelectAllSector=!1;const M=[];m.filter(tt=>{tt&&M.push(tt)}),this.sectorFilterCtrl.setValue(M);const w=this.sectorFilterCtrl.value;this.filteredValues.sector=w&&w.length>0?w:null,this.paginator.pageIndex=0}else if(u&&m.length){const M=m.findIndex(w=>"All"===w);m.splice(M,1),this.isSelectAllSector=!1,this.sectorFilterCtrl.setValue(m),this.filteredValues.sector=m}else this.filteredValues.sector=null,this.paginator.pageIndex=0;this.isReset||this.getDataProgramSchoolScholarSeason();break;case"speciality":const y=h.cloneDeep(this.specialityFilterCtrl.value),P=y.find(M=>"All"===M),N=y.find(M=>"All"!==M);if(!P&&y.length){this.isSelectAllSpeciality=!1;const M=[];y.filter(tt=>{tt&&M.push(tt)}),this.specialityFilterCtrl.setValue(M);const w=this.specialityFilterCtrl.value;this.filteredValues.speciality=w&&w.length>0?w:null,this.paginator.pageIndex=0}else if(N&&y.length){const M=y.findIndex(w=>"All"===w);y.splice(M,1),this.isSelectAllSpeciality=!1,this.specialityFilterCtrl.setValue(y),this.filteredValues.speciality=y}else this.filteredValues.speciality=null,this.paginator.pageIndex=0;this.isReset||this.getDataProgramSchoolScholarSeason()}}clearSelectIfFilter(){this.selection.clear(),this.isCheckedAll=!1,this.userSelected=[],this.userSelectedId=[],this.dataSelected=[],this.dataSelectedId=[]}resetFilterDropdown(){this.campusList=[],this.levelList=[],this.sectorList=[],this.specialityList=[]}swalError(e){s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}onDelete(e){let n=3;s().fire({title:this.translate.instant("SCHOOL_S3.TITLE"),html:this.translate.instant("SCHOOL_S3.TEXT",{name:e.program?e.program:""}),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("SCHOOL_S3.BUTTON-1",{timer:n}),cancelButtonText:this.translate.instant("SCHOOL_S3.BUTTON-2"),allowOutsideClick:!1,allowEnterKey:!1,width:"33em",onOpen:()=>{s().disableConfirmButton();const i=s().getConfirmButton(),a=setInterval(()=>{n-=1,i.innerText=this.translate.instant("SCHOOL_S3.BUTTON-1")+` (${n})`},1e3);this.timeOutVal=setTimeout(()=>{i.innerText=this.translate.instant("SCHOOL_S3.BUTTON-1"),s().enableConfirmButton(),clearInterval(a),clearTimeout(this.timeOutVal)},1e3*n)}}).then(i=>{clearTimeout(this.timeOutVal),i.value&&(this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.deleteProgramSelected(e._id).subscribe(a=>{s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.isWaitingForResponse=!1,this.paginator.pageIndex=0,this.getDataProgramSchoolScholarSeason()})},a=>{this.authService.postErrorLog(a),this.isWaitingForResponse=!1,"GraphQL error: Cannot delete program, because this program already connected to candidate"===a.message?s().fire({title:this.translate.instant("SCHOOL_S3a.TITLE"),html:this.translate.instant("SCHOOL_S3a.TEXT"),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("SCHOOL_S3a.BUTTON-1")}):a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):this.swalError(a)}))})}onOpenAddDialog(e,n){this.dialog.open(ge,{width:"1000px",minHeight:"16vh",disableClose:!0,data:{isEdit:n,dataTable:e||null,school:this.schoolData,scholarSeason:this.scholarSeason}}).afterClosed().subscribe(a=>{a&&(this.getDataProgramSchoolScholarSeason(),this.getDropdownFilter(0))})}downloadCSV(){if(this.dataSelected?.length<1&&!this.isCheckedAll)s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("School-Tab.Programs")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});else{const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translate.instant("EXPORT_DECISION.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translate&&"fr"===this.translate.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}}cleanFilterDataDownload(){const e=h.cloneDeep(this.filteredValues);let i,a,l,c,g,n="";return Object.keys(e).forEach(m=>{(e[m]||!1===e[m])&&("scholar_season_id"===m?n=n?n+`,"${m}":"${e[m]}"`:n+`"${m}":"${e[m]}"`:"school_id"===m?(i=e.school_id.map(_=>'"'+_+'"'),n=n?n+`,"school_id":[${i}]`:n+`"school_id":[${i}]`):"level"===m?(l=e.level.map(_=>'"'+_+'"'),n=n?n+`,"level":[${l}]`:n+`"level":[${l}]`):"campus"===m?(a=e.campus.map(_=>'"'+_+'"'),n=n?n+`,"campus":[${a}]`:n+`"campus":[${a}]`):"sector"===m?(c=e.sector.map(_=>'"'+_+'"'),n=n?n+`,"sector":[${c}]`:n+`"sector":[${c}]`):"speciality"===m?(g=e.speciality.map(_=>'"'+_+'"'),n=n?n+`,"speciality":[${g}]`:n+`"speciality":[${g}]`):n=n?n+`,"${m}":${e[m]}`:n+`"${m}":${e[m]}`)}),"filter={"+n+"}"}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql",""),document.createElement("a");const a=this.translate.currentLang.toLowerCase(),l=this.cleanFilterDataDownload();let c;if(this.dataSelectedId?.length&&!this.isCheckedAll||this.dataUnselect?.length>0){const y='"program_ids":['+this.dataSelectedId.map(M=>'"'+M+'"').toString()+"]",P=`"scholar_season_id": "${this.scholarSeasonId}",`,N=`"school_id": ["${this.schoolId}"],`;c=l.slice(0,8)+P+N+y+"}"}else{const u=`"scholar_season_id": "${this.scholarSeasonId}",`,y=`"school_id": ["${this.schoolId}"],`,P='"program_ids":[]';c=l.slice(0,8)+u+y+P+"}"}const m=encodeURI(n+"downloadProgramData/"+e+"/"+a+"?"+c+`&user_type_id="${this.currentUserTypeId}"`),_={headers:new gt.WM({Authorization:JSON.parse(localStorage.getItem(ot.N.tokenKey))})};this.isLoading=!0,this.subs.sink=this.http.get(m,_).subscribe(u=>{u?(this.isLoading=!1,s().fire({type:"success",title:this.translate.instant("ReAdmission_S3.TITLE"),text:this.translate.instant("ReAdmission_S3.TEXT"),confirmButtonText:this.translate.instant("ReAdmission_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.clearSelectIfFilter(),this.getDataProgramSchoolScholarSeason()})):this.isLoading=!1},u=>{this.isLoading=!1})}controlButton(e){"export"===e&&setTimeout(()=>{this.prepareDataForExport(0)},500)}prepareDataForExport(e){if("export"===this.buttonClicked)if(this.isCheckedAll)if(this.dataUnselect.length<1)this.downloadCSV();else{0===e&&(this.dataProgramForExport=[],this.dataSelected=[]);const n={limit:500,page:e},i={...this.filteredValues,scholar_season_id:this.scholarSeasonId,school_id:[this.schoolId]};this.isLoading=!0,this.subs.sink=this.intakeService.GetAllProgramsID(i,n).subscribe(a=>{a&&a.length?(this.dataProgramForExport.push(...a),this.prepareDataForExport(e+1)):(this.isLoading=!1,this.isCheckedAll&&this.dataProgramForExport?.length>0&&(this.dataSelected=this.dataProgramForExport.filter(l=>this.dataUnselect.includes(l?._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected?.length>0&&this.downloadCSV()))},a=>{this.isReset=!1,this.isLoading=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("OK")})})}else this.downloadCSV()}ngOnDestroy(){this.subs.unsubscribe()}removeFilterBreadcrumb(e){this.filterBreadCrumbService.removeFilterBreadcrumb(e,null,this.filteredValues),this.clearSelectIfFilter(),"campus"===e.name&&this.campusFilterCtrl.setValue(["All"],{emitEvent:!1}),"level"===e.name&&this.levelFilterCtrl.setValue(["All"],{emitEvent:!1}),"sector"===e.name&&this.sectorFilterCtrl.setValue(["All"],{emitEvent:!1}),"speciality"===e.name&&this.specialityFilterCtrl.setValue(["All"],{emitEvent:!1}),this.getDataProgramSchoolScholarSeason()}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"table_filter",name:"campus",column:"Program_Table_School_Detail.Campus",isMultiple:!0,filterValue:this.filteredValues,filterList:this.campusList,filterRef:this.campusFilterCtrl,displayKey:"name",savedValue:"_id",isSelectionInput:!0},{type:"table_filter",name:"level",column:"Program_Table_School_Detail.Level",isMultiple:!0,filterValue:this.filteredValues,filterList:this.levelList,filterRef:this.levelFilterCtrl,displayKey:"name",savedValue:"_id",isSelectionInput:!0},{type:"table_filter",name:"sector",column:"Program_Table_School_Detail.Sector",isMultiple:!0,filterValue:this.filteredValues,filterList:this.sectorList,filterRef:this.sectorFilterCtrl,displayKey:"name",savedValue:"_id",isSelectionInput:!0},{type:"table_filter",name:"speciality",column:"Program_Table_School_Detail.Speciality",isMultiple:!0,filterValue:this.filteredValues,filterList:this.specialityList,filterRef:this.specialityFilterCtrl,displayKey:"name",savedValue:"_id",isSelectionInput:!0}],this.filterBreadcrumbData)}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(gt.eN),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(Ct.q))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-program"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(et.NW,7),t.\u0275\u0275viewQuery(z.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{schoolId:"schoolId",scholarSeasonId:"scholarSeasonId",schoolData:"schoolData",scholarSeason:"scholarSeason"},decls:58,vars:23,consts:[[1,"p-col-12","no-padding"],[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"top-space"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","reset"],["mat-header-cell","","colspan","100%","class","action-header-column text-right",4,"matHeaderCellDef"],["matColumnDef","selectFilter","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","scholarSeasonFilter"],["matColumnDef","schoolFilter"],["matColumnDef","campusFilter"],["matColumnDef","levelFilter"],["matColumnDef","sectorFilter"],["matColumnDef","specialityFilter"],["matColumnDef","actionFilter"],["matColumnDef","select",1,"mat-column-select"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","scholarSeason"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","school"],["matColumnDef","campus"],["matColumnDef","level"],["matColumnDef","sector"],["matColumnDef","speciality"],["matColumnDef","action"],["mat-cell","",4,"matCellDef"],["matColumnDef","loading"],["mat-header-cell","","colspan","100%","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","length","hidePageSize","pageSize"],["class","loading-indicator",4,"ngIf"],["mat-header-cell","","colspan","100%",1,"action-header-column","text-right"],[1,"p-col-12","p-grid","no-padding"],[1,"p-col","text-right"],["mat-raised-button","","color","accent",3,"matTooltip","disabled","matMenuTriggerFor"],[1,"action-dropdown-button-above-table"],["action","matMenu"],["mat-menu-item","",3,"matTooltip","click"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell",""],["appearance","legacy"],["multiple","","disableOptionCentering","","panelClass","filterPanel custom-matselect-dropdown-margin",3,"formControl"],[3,"disabled",4,"ngIf"],[3,"value","click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],[3,"disabled"],[3,"value","click"],["mat-header-cell","",1,"text-center"],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"text-center"],[3,"checked","aria-label","click","change"],["mat-header-cell","",3,"matTooltip"],["mat-cell","",3,"matTooltip"],["mat-cell",""],["mat-icon-button","","class","margin-right-button","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",1,"margin-right-button",3,"disabled","matTooltip","click"],["mat-header-cell","","colspan","100%",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],["class","no-records",4,"ngIf"],[1,"no-records"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"ms-filter-breadcrumb",1),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(2,"div",2)(3,"table",3),t.\u0275\u0275elementContainerStart(4,4),t.\u0275\u0275template(5,fe,17,16,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(6,6),t.\u0275\u0275template(7,Ce,1,0,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(8,8),t.\u0275\u0275template(9,be,1,0,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(10,9),t.\u0275\u0275template(11,xe,1,0,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(12,10),t.\u0275\u0275template(13,Se,6,4,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(14,11),t.\u0275\u0275template(15,Te,6,4,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(16,12),t.\u0275\u0275template(17,De,6,4,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(18,13),t.\u0275\u0275template(19,Ne,6,4,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(20,14),t.\u0275\u0275template(21,Le,1,0,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(22,15),t.\u0275\u0275template(23,Ve,2,3,"th",16),t.\u0275\u0275template(24,Re,2,2,"td",17),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(25,18),t.\u0275\u0275template(26,Ue,5,6,"th",19),t.\u0275\u0275template(27,He,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(28,21),t.\u0275\u0275template(29,Ke,5,6,"th",19),t.\u0275\u0275template(30,We,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(31,22),t.\u0275\u0275template(32,je,5,6,"th",19),t.\u0275\u0275template(33,$e,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(34,23),t.\u0275\u0275template(35,qe,5,6,"th",19),t.\u0275\u0275template(36,Ge,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(37,24),t.\u0275\u0275template(38,ze,5,6,"th",19),t.\u0275\u0275template(39,Ye,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(40,25),t.\u0275\u0275template(41,Qe,5,6,"th",19),t.\u0275\u0275template(42,Xe,2,2,"td",20),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(43,26),t.\u0275\u0275template(44,Je,5,6,"th",19),t.\u0275\u0275template(45,tn,2,1,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(46,28),t.\u0275\u0275template(47,en,3,0,"th",29),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(48,nn,1,0,"tr",30),t.\u0275\u0275template(49,on,1,0,"tr",30),t.\u0275\u0275template(50,an,1,0,"tr",30),t.\u0275\u0275template(51,ln,1,1,"tr",31),t.\u0275\u0275template(52,rn,1,1,"tr",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(53,cn,3,3,"ng-container",33),t.\u0275\u0275elementStart(54,"div",34),t.\u0275\u0275pipe(55,"async"),t.\u0275\u0275element(56,"mat-paginator",35),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(57,dn,2,0,"div",36)),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(2),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(45),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(16,pn)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(17,mn)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(18,hn,t.\u0275\u0275pipeBind1(55,14,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(20,gn,n.dataCount<=10))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(22,_n)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isLoading))},dependencies:[d.mk,d.sg,d.O5,R.ey,D.lW,_t.oG,B.Hw,T.KE,W.VK,W.OP,W.p6,et.NW,L.Ou,Q.gD,z.YE,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,it.gM,p.NgControlStatus,p.FormControlDirective,st.oO,bt.r,d.Ov,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}#certifier[_ngcontent-%COMP%]{margin-left:20px}.mat-form-field[_ngcontent-%COMP%]{padding-left:.5rem!important}.pad-top-miss[_ngcontent-%COMP%]{padding-top:1.8px!important}.form-field[_ngcontent-%COMP%]{margin-top:.5px}.tag-container[_ngcontent-%COMP%]{white-space:normal;text-align:left!important;line-height:2.3;overflow-wrap:break-word}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:3%;padding-left:0rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:15%;text-align:center!important;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:15%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:15%;text-align:center!important;padding-left:.5rem!important;padding-right:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){width:15%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(5) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(5) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(6), [_nghost-%COMP%]     table tr th:nth-child(6){width:15%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(6) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(6) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(7), [_nghost-%COMP%]     table tr th:nth-child(7){width:15%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(8), [_nghost-%COMP%]     table tr th:nth-child(8){width:10%;min-width:90px;max-width:90px;padding-left:.7rem!important;padding-right:.7rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr th{vertical-align:top}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.left-margin[_ngcontent-%COMP%]{margin-left:3%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.pc-section[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:5px;display:inline-block}.cr-section[_ngcontent-%COMP%]{width:50%;text-align:left;display:inline-block}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}  .mat-menu-panel.action-dropdown-button-above-table{min-height:auto}  .filterPanel{margin-top:25px!important}  .custom-matselect-dropdown-margin.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}"]}),o})();var j=b(15439),xt=b(8739),dt=b(94442),Ft=b(30277);const fn=["importFile"];function Cn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5)(1,"div",18)(2,"label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",19)(6,"span"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",20)(9,"input",21,22),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.handleInputChange(i))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"button",23),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.openUploadWindow())}),t.\u0275\u0275elementStart(12,"mat-icon",24),t.\u0275\u0275text(13,"add"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Data File")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(null==e.file?null:e.file.name),t.\u0275\u0275advance(4),t.\u0275\u0275property("disabled",e.importForm.invalid||e.isWaitingForResponse||!(null!=e.importForm&&e.importForm.get("file_delimeter").value)||!(null!=e.importForm&&e.importForm.get("school_id").value)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,6,"Import File")," ")}}function bn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5)(1,"div",25)(2,"button",23),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.downloadTemplate())}),t.\u0275\u0275elementStart(3,"mat-icon",24),t.\u0275\u0275text(4,"cloud_download"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",e.importForm.invalid||e.isWaitingForResponse||!(null!=e.importForm&&e.importForm.get("file_delimeter").value)||!(null!=e.importForm&&e.importForm.get("school_id").value)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,2,"Download Template")," ")}}function xn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275element(1,"mat-progress-spinner",27),t.\u0275\u0275elementEnd())}let vn=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.fb=e,this.admissionService=n,this.dialogRef=i,this.translate=a,this.utilService=l,this.financeService=c,this.data=g,this.userService=m,this.isWaitingForResponse=!1,this.templateDownloaded=!1,this.scholars=[],this.scholarFilter=new p.UntypedFormControl(null),this.schoolFilter=new p.UntypedFormControl(null),this.subs=new F.Y,this.delimeter=[{key:"COMMA [ , ]",value:","},{key:"SEMICOLON [ ; ]",value:";"},{key:"TAB [ ]",value:"tab"}]}ngOnInit(){this.isPermission=this.userService.getPermission(),this.currentUser=this.userService.getLocalStorageUser();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.data&&this.data.scholar_season&&(this.scholarId=this.data.scholar_season),this.delimeter=[{key:this.translate.instant("STUDENT_IMPORT.DELIMETER.COMMA"),value:","},{key:this.translate.instant("STUDENT_IMPORT.DELIMETER.SEMICOLON"),value:";"},{key:this.translate.instant("STUDENT_IMPORT.DELIMETER.TAB"),value:"tab"}],this.initForm(),this.getDataScholarSeasons(),this.getDataSchool()}initForm(){this.importForm=this.fb.group({school_id:[this.data&&this.data.school_id?this.data.school_id:null,[p.Validators.required]],scholar_season:[this.scholarId],file_delimeter:[";",[p.Validators.required]]})}handleInputChange(e){this.isWaitingForResponse=!0;const a=this.utilService.getFileExtension(e.target.files[0].name).toLocaleLowerCase();["csv","tsv"].includes(a)?(this.file=e.target.files[0],this.isWaitingForResponse=!1):(this.file=null,this.isWaitingForResponse=!1,s().fire({type:"info",title:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TITLE"),text:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TEXT",{file_exts:".csv, .tsv"}),allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1}))}openUploadWindow(){this.importFile.nativeElement.click()}downloadTemplate(){this.templateDownloaded=!0,this.financeService.downloadFullRateTemplateCSV(this.importForm.get("file_delimeter").value,this.importForm.get("scholar_season").value,this.importForm.get("school_id").value),this.importForm.get("file_delimeter").disable(),this.importForm.get("scholar_season").disable(),this.importForm.get("school_id").disable()}resetValue(){this.templateDownloaded=!1,this.importForm.get("file_delimeter").setValue(null),this.importForm.get("school_id").setValue(null),this.importForm.get("file_delimeter").reset(),this.importForm.get("school_id").reset(),this.importForm.get("file_delimeter").enable(),this.importForm.get("school_id").enable(),this.importForm.get("file_delimeter").clearValidators(),this.importForm.get("school_id").clearValidators(),this.importForm.get("file_delimeter").updateValueAndValidity(),this.importForm.get("school_id").updateValueAndValidity()}submit(){this.data&&this.callCheckImportAPI()}getDataScholarSeasons(){this.subs.sink=this.financeService.GetAllScholarSeasons().subscribe(e=>{e&&e.length&&(this.scholars=e,this.importForm.get("scholar_season").value||this.importForm.get("scholar_season").setValue(this.scholars[0]._id))},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}getDataSchool(){this.subs.sink=this.admissionService.GetAllSchoolScholar([],this.scholarId,this.currentUserTypeId).subscribe(n=>{n&&n.length&&(this.dataSchoolOriginal=n,this.importForm.get("school_id").value||this.importForm.get("school_id").setValue(this.scholars[0]._id))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}callCheckImportAPI(){this.isWaitingForResponse=!0,this.subs.sink=this.financeService.ImportFullRate(this.importForm.value,this.file).subscribe(e=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},e=>{this.userService.postErrorLog(e),this.isWaitingForResponse=!1,e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}swalError(e){s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(xt.Q),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-import-full-rate-dialog"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(fn,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.importFile=i.first)}},decls:34,vars:24,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-div"],["svgIcon","file-upload"],[1,"header-text"],["mat-icon-button","","type","button",1,"header-icon",3,"click"],[1,"pad-x-md","pad-t-md",3,"formGroup"],[1,"p-grid"],[1,"p-col-12",2,"float","left"],[1,"p-grid",2,"margin-bottom","25px"],[1,"title-school",2,"width","100%"],[1,"school-name"],[1,"class-scholar",2,"width","100%"],["bindLabel","key","bindValue","value","formControlName","file_delimeter",1,"mrgn-btn",3,"disabled","appendTo","items","multiple","placeholder"],["class","p-grid",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center",1,"footer-form"],["mat-raised-button","","color","accent","type","button",3,"disabled","click"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"p-col-3",2,"padding","0.5em 0px","float","left"],[1,"p-col-6",2,"padding","0.5em 0px","float","left"],[1,"p-col-3",2,"padding","0px","float","left","text-align","right"],["type","file","accept",".csv, .tsv","disableMultipart","true",2,"display","none",3,"change"],["importFile",""],["mat-raised-button","","color","accent",1,"margin-right-0",3,"disabled","click"],[1,"mat-icon-default"],[1,"p-col-12",2,"padding","0.5em 0px","float","right","text-align","right"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"mat-icon",1),t.\u0275\u0275elementStart(2,"h2",2),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",3),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(6,"mat-icon"),t.\u0275\u0275text(7,"close"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275element(8,"hr"),t.\u0275\u0275elementStart(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10),t.\u0275\u0275element(16,"ng-select",11),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(18,Cn,16,8,"div",12),t.\u0275\u0275template(19,bn,7,4,"div",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(20,"div",13)(21,"div")(22,"button",14),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(23),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(25,"div")(26,"button",15),t.\u0275\u0275listener("click",function(){return n.resetValue()}),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(29,"div")(30,"button",16),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(33,xn,2,0,"div",17)),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,14,"IMPORT_TEMPLATE.IMPORT")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.importForm),t.\u0275\u0275advance(7),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(17,16,"Delimeter")),t.\u0275\u0275property("disabled",n.templateDownloaded)("appendTo","body")("items",n.delimeter)("multiple",!1),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.templateDownloaded),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.templateDownloaded),t.\u0275\u0275advance(3),t.\u0275\u0275property("disabled",!n.file),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(24,18,"Import")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(28,20,"Reset")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(32,22,"Cancel")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[A.Zt,A.Bh,D.lW,B.Hw,L.Ou,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,Ft.xw,Ft.Wh,d.O5,Y.w9,O.X$],styles:[".header-form[_ngcontent-%COMP%]{padding:18px}.footer-form[_ngcontent-%COMP%]{padding:0 18px 18px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  ng-dropdown-panel{z-index:99999999999}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.class-scholar[_ngcontent-%COMP%]{width:150px;display:inline-block;vertical-align:middle;margin-right:10px}.title-school[_ngcontent-%COMP%]{margin-right:10px}"]}),o})();var Ot=b(9962),pt=b(30160);function On(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7),t.\u0275\u0275element(2,"mat-spinner",8),t.\u0275\u0275elementEnd()())}function yn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"button",19),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon"),t.\u0275\u0275text(5,"expand_more"),t.\u0275\u0275elementEnd()()),2&o){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,4,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,6,"Action")," ")}}function Sn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.editModeOn())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Go to Edit Mode")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Go to Edit Mode")," "))}function Pn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.csvTypeSelection())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Import")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Import")," "))}function Mn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",22),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.downloadCSV())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",23),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Export")),t.\u0275\u0275property("disabled",e.dataMapping&&(null==e.dataMapping?null:e.dataMapping.length)<1),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"Export")," ")}}function wn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",24),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.validateDownPayment())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",25),t.\u0275\u0275text(3,"save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Validate")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,4,"Validate")," "))}function Tn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",37)(1,"div",38),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",39)(4,"div",40),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",41),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()()),2&o){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,3,"Internal")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"External"))}}function kn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",53),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null!=e&&e.amount_internal?null==e?null:e.amount_internal:"-")}}function In(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",54)(1,"mat-form-field")(2,"input",55),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",null==e?null:e.amount_internal)}}function En(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",56),t.\u0275\u0275elementEnd())}function Dn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function Fn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",58),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null!=e&&e.amount_external?null==e?null:e.amount_external:"-")}}function An(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",59)(1,"mat-form-field")(2,"input",55),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",null==e?null:e.amount_external)}}function Bn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",50),t.\u0275\u0275template(2,kn,3,1,"div",45),t.\u0275\u0275template(3,In,3,1,"div",51),t.\u0275\u0275template(4,En,2,0,"div",45),t.\u0275\u0275template(5,Dn,2,0,"div",45),t.\u0275\u0275template(6,Fn,3,1,"div",45),t.\u0275\u0275template(7,An,3,1,"div",52),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(6);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_external_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_external_editable))}}function Nn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementEnd())}function Ln(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Bn,8,6,"div",45),t.\u0275\u0275pipe(2,"lowercase"),t.\u0275\u0275pipe(3,"lowercase"),t.\u0275\u0275template(4,Nn,2,0,"div",49),t.\u0275\u0275pipe(5,"lowercase"),t.\u0275\u0275pipe(6,"lowercase"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name)===t.\u0275\u0275pipeBind1(3,4,null==n?null:n.name)&&(null==e?null:e.amount_internal)>=0&&(null==e?null:e.amount_external)>=0&&(null==e?null:e.is_from_deposit)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,6,null==e?null:e.name)===t.\u0275\u0275pipeBind1(6,8,null==n?null:n.name)&&!(null!=e&&e.is_from_deposit))}}function Vn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",47),t.\u0275\u0275template(1,Ln,7,10,"div",48),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2).index,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dataMapping[e])}}function Rn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Vn,2,1,"div",46),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Un(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",61),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.amount_internal)}}function Hn(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",54)(1,"mat-form-field",62)(2,"input",63),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(6);return t.\u0275\u0275resetView(l.keyupAmount(a,i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2),n=e.index,i=e.$implicit,a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(2).index,m=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("value",m.dataAmount(g,l,n,i,c))}}function Kn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function Wn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function jn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",64),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.amount_external)}}function $n(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",59)(1,"mat-form-field",62)(2,"input",65),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(6);return t.\u0275\u0275resetView(l.keyupAmountExternal(a,i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2),n=e.index,i=e.$implicit,a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(2).index,m=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("value",m.dataAmountExternal(g,l,n,i,c))}}function qn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",50),t.\u0275\u0275template(2,Un,3,1,"div",45),t.\u0275\u0275template(3,Hn,3,1,"div",51),t.\u0275\u0275template(4,Kn,2,0,"div",45),t.\u0275\u0275template(5,Wn,2,0,"div",45),t.\u0275\u0275template(6,jn,3,1,"div",45),t.\u0275\u0275template(7,$n,3,1,"div",52),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(6);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_external_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_external_editable))}}function Gn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementEnd())}function zn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,qn,8,6,"div",45),t.\u0275\u0275pipe(2,"lowercase"),t.\u0275\u0275pipe(3,"lowercase"),t.\u0275\u0275template(4,Gn,2,0,"div",49),t.\u0275\u0275pipe(5,"lowercase"),t.\u0275\u0275pipe(6,"lowercase"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name)===t.\u0275\u0275pipeBind1(3,4,null==n?null:n.name)&&(null==e?null:e.amount_internal)>=0&&(null==e?null:e.amount_external)>=0&&(null==e?null:e.is_from_deposit)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,6,null==e?null:e.name)===t.\u0275\u0275pipeBind1(6,8,null==n?null:n.name)&&!(null!=e&&e.amount_internal)&&!(null!=e&&e.amount_external)&&(null==e?null:e.amount_internal)<=0&&(null==e?null:e.amount_external)<=0&&!(null!=e&&e.is_from_deposit))}}function Yn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",47),t.\u0275\u0275template(1,zn,7,10,"div",48),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2).index,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dataMapping[e])}}function Qn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Yn,2,1,"div",46),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Xn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",67),t.\u0275\u0275element(1,"div",68)(2,"div",50),t.\u0275\u0275elementEnd())}function Jn(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Xn,3,0,"div",66),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Zn(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",67),t.\u0275\u0275element(1,"div",68)(2,"div",50),t.\u0275\u0275elementEnd())}function ti(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Zn,3,0,"div",66),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function ei(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",42)(1,"div",43)(2,"div",44),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Rn,2,1,"div",45),t.\u0275\u0275template(5,Qn,2,1,"div",45),t.\u0275\u0275template(6,Jn,2,1,"div",45),t.\u0275\u0275template(7,ti,2,1,"div",45),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.dataMapping&&(null==i.dataMapping?null:i.dataMapping.length)&&i.dataMapping[n]&&i.dataMapping[n].length&&!i.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.dataMapping&&(null==i.dataMapping?null:i.dataMapping.length)&&i.dataMapping[n]&&i.dataMapping[n].length&&i.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(i.dataMapping&&null!=i.dataMapping&&i.dataMapping.length&&i.dataMapping[n]||i.editMode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(!(i.dataMapping&&null!=i.dataMapping&&i.dataMapping.length)||!i.dataMapping[n])&&i.editMode)}}function ni(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275listener("scroll",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.dashboardScroll(i))}),t.\u0275\u0275elementStart(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",31),t.\u0275\u0275text(8,"Campus"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",32)(10,"div",33),t.\u0275\u0275element(11,"div",34),t.\u0275\u0275template(12,Tn,10,7,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,ei,8,5,"div",36),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",e.formAmountTemp),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,4,"Level")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.formGenerated)}}function ii(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"div",11),t.\u0275\u0275template(3,yn,6,8,"button",12),t.\u0275\u0275elementStart(4,"mat-menu",null,13),t.\u0275\u0275template(6,Sn,4,6,"button",14),t.\u0275\u0275template(7,Pn,4,6,"button",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,Mn,5,7,"button",16),t.\u0275\u0275template(9,wn,6,6,"button",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(10,ni,14,6,"div",18),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.editMode),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.editMode&&e.permission.editPermIntakeChannelSchoolFullRatetTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editMode&&e.permission.importIntakeChannelSchoolFullRatetTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dataSchoolOriginal&&e.dataSchoolOriginal.length)}}function oi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",69)(1,"div",69),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",69),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",69),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",69),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",69)(14,"mat-form-field",70)(15,"input",71),t.\u0275\u0275listener("ngModelChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.exportName=i)}),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(17,"button",72),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.exportData())}),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,7,"Export Text1")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,9,"Export Text2")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,11,"Export Text3")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,13,"Export Text4")," "),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(16,15,"ExportName")),t.\u0275\u0275property("ngModel",e.exportName),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,17,"OK")," ")}}function ai(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",73),t.\u0275\u0275element(1,"mat-progress-spinner",74),t.\u0275\u0275elementEnd())}let li=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u,y){this.admissionService=e,this.translate=n,this.userService=i,this.financeService=a,this.permissionsService=l,this.dialog=c,this.exportCsvService=g,this.fb=m,this.router=_,this.intakeService=u,this.permission=y,this.short_name="",this.subs=new F.Y,this.scholars=[],this.weeks=[{name:"Week 1"}],this.scholarFilter=new p.UntypedFormControl(null),this.scholarFilter1=new p.UntypedFormControl("20-21"),this.weekFilter=new p.UntypedFormControl("Week 1"),this.schoolFilter=new p.UntypedFormControl(null),this.listCampus=[],this.scrollVertical=0,this.scrollHorizontal=0,this.dataDownPayment=[],this.dataMapping=[],this.dataCampus=[],this.dataCampusIsNull=[],this.campusList=[],this.editMode=!1,this.isDirectorAdmission=!1,this.isMemberAdmission=!1,this.isWaitingForResponse=!1,this.dataMappingForForm=[],this.filterAdmission={school:"",scholar_season_id:""},this.loadingAfterValidate=!1}ngOnInit(){this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.editMode=!1,this.scholarSeason&&this.scholarSeason._id&&(this.filterAdmission.scholar_season_id=this.scholarSeason._id,this.scholarFilter.setValue(this.scholarSeason._id)),this.scholarSeasons=this.scholarSeason&&this.scholarSeason.scholar_season?this.scholarSeason.scholar_season:"",this.subs.sink=this.router.paramMap.subscribe(n=>{this.schoolId=n.get("id")}),this.schoolId&&this.getSchoolData(),this.isDirectorAdmission=!!this.permissionsService.getPermission("Director of Admissions"),this.today=new Date}getSchoolData(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetOneSchool(this.schoolId).subscribe(e=>{e&&(this.schoolData=h.cloneDeep(e),this.short_name=e.short_name,this.getDataScholarSeasons(),this.initForm(),this.initFormTemp(),this.getDataSchool())},e=>{this.userService.postErrorLog(e),this.isWaitingForResponse=!1,e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnChanges(){this.getDataSchool()}getRate(){const e=this.schoolFilter.value?this.schoolFilter.value:"",n=this.scholarSeason._id?this.scholarSeason._id:"";this.isWaitingForResponse=!0,this.subs.sink=this.financeService.getAllFullRate(e,n).subscribe(i=>{this.fullRate=i,this.getDataGeneration()},i=>{this.userService.postErrorLog(i),this.isWaitingForResponse=!1,i&&i.message&&(i.message.includes("jwt expired")||i.message.includes("str & salt required")||i.message.includes("Authorization header is missing")||i.message.includes("salt"))?this.userService.handlerSessionExpired():i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("OK")})})}translateDate(){return j(this.today,"DD/MM/YYYY").format("DD/MM/YYYY")}onWheel(e){e?.preventDefault()}getDataSchool(){const e=[this.short_name];this.isWaitingForResponse=!0,this.subs.sink=this.admissionService.GetAllSchoolScholar(e,this.scholarSeason._id,this.currentUserTypeId).subscribe(n=>{if(n&&n.length){if(this.dataSchoolOriginal=n,this.dataSchoolList=n,this.schoolFilter.value){const i=this.dataSchoolOriginal.filter(a=>a._id===this.schoolFilter.value);this.schoolData=i&&i.length?i[0]:this.dataSchoolOriginal[0]}else this.schoolData=this.dataSchoolOriginal[0],this.schoolFilter.setValue(this.dataSchoolOriginal[0]._id);this.getRate()}else this.isWaitingForResponse=!1},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")})})}getDataGeneration(){this.subs.sink=this.admissionService.GetSchoolCampusLevelSectorSpecialityForTable(this.schoolFilter.value,this.scholarSeason._id,null,null,this.currentUserTypeId).subscribe(e=>{e&&e.length?(this.dataGeneration=e.map(n=>({deposit_name:n.level?n.sector_id?n.speciality_id?n.level.name+" - "+n.sector_id.name+" - "+n.speciality_id.name:n.level.name+" - "+n.sector_id.name:n.level.name:"",...n})),this.isWaitingForResponse=!1,this.mapGlobalData()):this.isWaitingForResponse=!1},e=>{this.userService.postErrorLog(e),this.isWaitingForResponse=!1,e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")})})}mapGlobalData(){const e=[];this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length&&(this.schoolData.campuses.forEach(n=>{this.dataGeneration&&this.dataGeneration.length&&this.dataGeneration.forEach(i=>{e.push({school_id:this.schoolData._id?this.schoolData._id:"",short_name:this.schoolData.short_name?this.schoolData.short_name:"",scholar_season_id:this.schoolData.scholar_season_id?this.schoolData.scholar_season_id:"",campus:n?n.name:"",level:i.level?i.level.name:"",deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",campus_id:n?n._id:"",level_id:i.level?i.level._id:null,sector:i.sector_id?i.sector_id._id:null,speciality:i.speciality_id?i.speciality_id._id:null,is_from_deposit:!1,amount_external:0,is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,amount_internal:0,amount:0,_id:null})})}),e&&e.length&&e.forEach((n,i)=>{const a=this.fullRate.find(l=>l.campus._id===n.campus_id&&l.level._id===n.level_id&&l.sector._id===n.sector&&(l.speciality?l.speciality._id===n.speciality:l.speciality===n.speciality));a&&(e[i]={school_id:this.schoolData._id?this.schoolData._id:"",short_name:this.schoolData.short_name?this.schoolData.short_name:"",scholar_season_id:this.schoolData.scholar_season_id?this.schoolData.scholar_season_id:"",campus:a.campus?a.campus.name:"",level:a.level?a.level.name:"",deposit_name:n.deposit_name,campus_id:a.campus?a.campus._id:"",level_id:a.level?a.level._id:"",sector:a.sector?a.sector._id:"",speciality:a.speciality?a.speciality._id:"",is_from_deposit:!0,is_internal_editable:a.is_internal_editable,is_external_editable:a.is_external_editable,amount_external:a.amount_external?a.amount_external:0,amount_internal:a.amount_internal?a.amount_internal:0,amount:a.amount?a.amount:0,_id:a._id})}),this.depositMapData=h.cloneDeep(e),this.getFullRate(),this.generateFormAmount())}generateFormAmount(){this.filterAdmission.school=this.schoolData.short_name;const e=[];this.dataGeneration.forEach(i=>{this.schoolData.campuses.forEach(a=>{e.push({campus:a.name,school:this.schoolData.short_name,level:i.level?i.level.name:"",campus_id:a?a._id:"",level_id:i.level?i.level._id:"",sector:i.sector_id?i.sector_id._id:"",speciality:i.speciality_id?i.speciality_id._id:"",is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",is_from_deposit:!1})})});const n=[];if(this.dataGeneration.forEach(i=>{this.schoolData.campuses.forEach(a=>{n.push({campus:a.name,school:this.schoolData.short_name,level:i.level?i.level.name:"",campus_id:a?a._id:"",level_id:i.level?i.level._id:"",sector:i.sector_id?i.sector_id._id:"",speciality:i.speciality_id?i.speciality_id._id:"",is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",is_from_deposit:!1})})}),e&&e.length&&e.forEach(i=>{n&&n.length&&n.forEach((a,l)=>{i.campus.toUpperCase()===a.campus.toUpperCase()&&i.level.toUpperCase()===a.level.toUpperCase()&&i.sector.toUpperCase()===a.sector.toUpperCase()&&i.speciality.toUpperCase()===a.speciality.toUpperCase()&&(n[l].is_from_deposit=!0)})}),this.depositBasedOnForm=e,n&&n.length){const i=h.chain(n).groupBy("deposit_name").map((l,c)=>({name:c,data:l})).value();this.formGenerated=i;let a=[];if(this.formGenerated&&this.formGenerated.length){const l=i.map(c=>({name:c.name,data:h.uniqBy(c.data,"campus")}));a=h.orderBy(l,["name"],["asc"])}this.formGenerated=a}}getFullRate(){const e=h.cloneDeep(this.fullRate);if(e&&e.length){this.generateArray(e);let n=h.cloneDeep(e);n=n.map(l=>({school_id:l.school_id?l.school_id._id:"",scholar_season_id:l.scholar_season_id?l.scholar_season_id._id:"",campus_id:l.campus?l.campus._id:"",level_id:l.level?l.level._id:"",campus:l.campus?l.campus.name:"",level:l.level?l.level.name:"",sector:l.sector?l.sector._id:"",speciality:l.speciality?l.speciality._id:"",is_internal_editable:l.is_internal_editable,is_external_editable:l.is_external_editable,deposit_name:l.level?l.sector?l.speciality?l.level.name+" - "+l.sector.name+" - "+l.level.name:l.level.name+" - "+l.sector.name:l.level.name:"",amount_internal:l.amount_internal?l.amount_internal:0,amount_external:l.amount_external?l.amount_external:0,_id:l._id?l._id:null})),this.dataDp=n,this.connectSpecialitySectorWithLevel(this.schoolData,this.dataDp);const i=h.chain(this.depositMapData).groupBy("deposit_name").map((l,c)=>({name:c,data:l})).value();let a=[];if(this.schoolData&&this.schoolData.levels&&this.schoolData.levels.length){const l=i.map(c=>({name:c.name,data:h.uniqBy(c.data,"campus")}));a=h.orderBy(l,["name"],["asc"])}this.dataDownPayment=a,a&&this.mappingDashboard(a)}else{const n=h.chain(this.depositMapData).groupBy("deposit_name").map((a,l)=>({name:l,data:a})).value();let i=[];if(this.dataGeneration&&this.dataGeneration.length){const a=n.map(l=>({name:l.name,data:h.uniqBy(l.data,"campus")}));i=h.orderBy(a,["name"],["asc"])}this.dataDownPayment=i,i&&this.mappingDashboard(i)}}generateArray(e){if(this.schoolData){this.initForm();let n=0;e&&e.length&&e.forEach(i=>{this.addAmountForm(),this.formAmount.get("down_payment_inputs").get(n.toString()).value&&(this.formAmount.get("down_payment_inputs").get(n.toString()).get("school_id").setValue(this.schoolData._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("level").setValue(i.level._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("_id").setValue(i._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("speciality").setValue(i.speciality?i.speciality._id:null),this.formAmount.get("down_payment_inputs").get(n.toString()).get("sector").setValue(i.sector?i.sector._id:null),this.formAmount.get("down_payment_inputs").get(n.toString()).get("amount_external").setValue(i.amount_external>=0?i.amount_external:0),this.formAmount.get("down_payment_inputs").get(n.toString()).get("amount_internal").setValue(i.amount_internal>=0?i.amount_internal:0),this.formAmount.get("down_payment_inputs").get(n.toString()).get("campus").setValue(i.campus._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("scholar_season_id").setValue(this.scholarSeason._id)),n++})}}mappingDashboards(e){this.dataMappingForForm=[],e.forEach(n=>{const i=n.data.map(a=>({name:a.campus.toLowerCase(),levels:a.level,is_from_deposit:a.is_from_deposit}));this.dataMappingForForm.push(i)})}mappingDashboard(e){this.dataMapping=[],e.forEach(n=>{const i=n.data.map(a=>({name:a.campus.toLowerCase(),amount_internal:a.amount_internal,amount_external:a.amount_external,scholar_season_id:this.scholarSeason._id,school_id:a.school_id,is_internal_editable:a.is_internal_editable,is_external_editable:a.is_external_editable,levels:a.level,is_from_deposit:a.is_from_deposit,_id:a._id}));this.dataMapping.push(i)})}getDataScholarSeasons(){this.subs.sink=this.financeService.GetAllScholarSeasons().subscribe(e=>{e&&e.length&&(this.scholars=e)},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")})})}initForm(){this.formAmount=this.fb.group({down_payment_inputs:this.fb.array([])})}initFormTemp(){this.formAmountTemp=this.fb.group({amount_internal:[0],amount_external:[0]})}initAmountForm(){return this.fb.group({_id:[null],school_id:[""],scholar_season_id:[""],campus:[""],indexS:[""],speciality:[""],sector:[""],level:[""],amount_internal:[0],amount_external:[0]})}get amountFormArray(){return this.formAmount.get("down_payment_inputs")}addAmountForm(){this.amountFormArray.push(this.initAmountForm())}keyupAmount(e,n){if(this.depositMapData&&this.depositMapData.length){const i=h.cloneDeep(this.formAmount.get("down_payment_inputs").value),a=i.findIndex(c=>c._id===e._id);i.filter(c=>c._id===e._id),a>=0&&this.formAmount.get("down_payment_inputs").get(a.toString()).get("amount_internal").patchValue(Number(n?.target?.value||0))}}keyupAmountExternal(e,n){if(this.depositMapData&&this.depositMapData.length){const i=h.cloneDeep(this.formAmount.get("down_payment_inputs").value),a=i.findIndex(c=>c._id===e._id);i.filter(c=>c._id===e._id),a>=0&&this.formAmount.get("down_payment_inputs").get(a.toString()).get("amount_external").patchValue(Number(n?.target?.value||0))}}csvTypeSelection(){this.openImportDialog({delimeter:"",scholar_season:this.scholarSeason._id,school_id:this.schoolFilter.value})}openImportDialog(e){this.subs.sink=this.dialog.open(vn,{width:"600px",minHeight:"100px",disableClose:!0,data:e,panelClass:"certification-rule-pop-up"}).afterClosed().subscribe(n=>{n&&this.getDataSchool()})}downloadCSVTemplate(){this.financeService.downloadFullRateTemplateCSV(this.fileType,this.scholarSeason._id,this.schoolFilter.value)}connectSpecialitySectorWithLevel(e,n){e.levels.forEach(i=>{const a=n.find(l=>l&&i&&i._id&&l.level_id&&l.level_id===i._id);a&&(i.speciality=a.speciality,i.sector=a.sector)})}selectSchool(){if(this.schoolFilter.value){this.getDataGeneration(),this.editMode=!1,this.dataMapping=[],this.isWaitingForResponse=!0;const e=this.dataSchoolOriginal.filter(n=>n._id===this.schoolFilter.value);this.schoolData=e&&e.length?e[0]:this.dataSchoolOriginal[0],this.getDataSchool()}}selectScholar(){this.scholarSeason._id&&(this.dataMapping=[],this.isWaitingForResponse=!0,this.getDataSchool())}ngAfterViewInit(){}getNameLevel(e){let n=e;return n=parseInt(e)?"GE "+e:e,n}isCorrectCampus(e){}dashboardScroll(e){e&&e.target.scrollLeft!==this.scrollHorizontal&&(this.scrollHorizontal=e.target.scrollLeft),e&&e.target.scrollTop!==this.scrollVertical&&(this.scrollVertical=e.target.scrollTop)}editModeOn(){this.editMode=!0}validateDownPayment(){this.loadingAfterValidate=!0;let e=this.formAmount.get("down_payment_inputs").value;e=e.map(n=>({amount_external:n.amount_external?n.amount_external:0,amount_internal:n.amount_internal?n.amount_internal:0,campus:n.campus&&n.campus._id?n.campus._id:n.campus?n.campus:"",level:n.level&&n.level._id?n.level._id:n.level?n.level:"",scholar_season_id:n.scholar_season_id?n.scholar_season_id:"",speciality:n.speciality?n.speciality:null,sector:n.sector?n.sector:null,school_id:n.school_id?n.school_id:"",_id:n._id?n._id:null})),this.subs.sink=this.financeService.UpdateManyFullRate(e).subscribe(n=>{if(this.loadingAfterValidate=!1,n)if(n&&n.message)if("The full rate is updated. However some programs couldn\u2019t be updated because at least 1 term is already paid by students."===n.message||n?.message?.includes("PAY_N1 already sent to student/FS of this program")){const i=n.programs&&n.programs.length?n.programs.map(a=>a+"</br>"):"";s().fire({type:"success",title:this.translate.instant("SCHOOL_S5.TITLE"),html:this.translate.instant("SCHOOL_S5.TEXT",{program:i}),confirmButtonText:this.translate.instant("SCHOOL_S5.BUTTON1"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{this.editMode=!1,this.getDataSchool()})}else if("The full rate is updated. However some programs couldn\u2019t be updated because there is term that already generated"===n.message||n?.message?.includes("PAY_N1 already sent to student/FS of this program")){const i=n.programs&&n.programs.length?n.programs.map(a=>a+"</br>"):"";s().fire({type:"success",title:this.translate.instant("SCHOOL_FR_S7.TITLE"),html:this.translate.instant("SCHOOL_FR_S7.TEXT",{program:i}),confirmButtonText:this.translate.instant("SCHOOL_FR_S7.BUTTON1"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{this.editMode=!1,this.getDataSchool()})}else if("The full rate is updated. However some programs couldn\u2019t be updated because there is financement already accepted"===n.message){const i=n.programs&&n.programs.length?n.programs.map(a=>a+"</br>"):"";s().fire({type:"success",title:this.translate.instant("SCHOOL_FR_S8.TITLE"),html:this.translate.instant("SCHOOL_FR_S8.TEXT",{program:i}),confirmButtonText:this.translate.instant("SCHOOL_FR_S8.BUTTON1"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{this.editMode=!1,this.getDataSchool()})}else"The full rate is updated"===n.message?s().fire({type:"success",title:this.translate.instant("SCHOOL_FR_S6.TITLE"),html:this.translate.instant("SCHOOL_FR_S6.TEXT"),confirmButtonText:this.translate.instant("SCHOOL_FR_S6.BUTTON1"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}).then(()=>{this.editMode=!1,this.getDataSchool()}):s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.editMode=!1,this.getDataSchool()});else s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.editMode=!1,this.getDataSchool()})},n=>{this.userService.postErrorLog(n),this.loadingAfterValidate=!1,n&&n.message&&(n.message.includes("jwt expired")||n.message.includes("str & salt required")||n.message.includes("Authorization header is missing")||n.message.includes("salt"))?this.userService.handlerSessionExpired():n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):n&&n.message&&n.message.includes("GraphQL error: Atleast one student have financement equal to the actual full rate")||n&&n.message&&n.message.includes("GraphQL error: Au moins un apprenant a d\xe9j\xe0 un financement \xe9gal au tarif plein actuel")?s().fire({type:"info",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("Full Rate Validate"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):n&&n.message&&n.message.includes("GraphQL error: Cannot edit full rate because there is financement already accepted")?s().fire({type:"info",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("Cannot edit full rate because there is financement already accepted"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")})})}cleanFilterDataAdmission(){const e=h.cloneDeep(this.filterAdmission);let n="";return Object.keys(e).forEach(i=>{(e[i]||!1===e[i])&&(n+=` ${i}:"${e[i]}"`)}),"filter: {"+n+"}"}dataAmount(e,n,i,a,l){let c=null;if(this.dataMapping&&this.dataMapping.length&&this.dataMapping[e]){const g=this.dataMapping[e];if(g&&g.length){const m=g.find(_=>_.name.toLowerCase()===l.name.toLowerCase());c=m&&m.amount_internal?m.amount_internal:null}else c=null}else c=null;return c}dataAmountExternal(e,n,i,a,l){let c=null;if(this.dataMapping&&this.dataMapping.length&&this.dataMapping[e]){const g=this.dataMapping[e];if(g&&g.length){const m=g.find(_=>_.name.toLowerCase()===l.name.toLowerCase());c=m&&m.amount_external?m.amount_external:null}else c=null}else c=null;return c}ngOnDestroy(){this.subs.unsubscribe()}exportData(){s().close();const e=[];if(this.isWaitingForResponse=!0,this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length){let n=0;const i=[];i[0]="Campus";for(const a of this.schoolData.campuses)n++,i[n]=a.name?a.name:"",n++;e.push(i)}if(this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length){let n=0;const i=[];i[0]=this.translate.instant("Level");for(const a of this.schoolData.campuses)n++,i[n]=this.translate.instant("Internal"),n++,i[n]=this.translate.instant("External");e.push(i)}if(this.schoolData&&this.schoolData.levels&&this.schoolData.levels.length){let n=0;for(const m of this.schoolData.levels){let _=0;const u=[];if(u[0]=m.name?m.name:"",this.dataMapping&&this.dataMapping.length&&this.dataMapping[n]&&this.dataMapping[n].length){for(const y of this.schoolData.campuses)for(const P of this.dataMapping[n])P.name&&y.name&&P.name.toLowerCase()===y.name.toLowerCase()&&(_++,u[_]=P.amount_internal?P.amount_internal:"",_++,u[_]=P.amount_external?P.amount_external:"");n++,e.push(u)}}this.isWaitingForResponse=!1;const i={values:e},a=j().format("DD-MM-YYYY");this.exportCsvService.createAndUpdateSpreadsheet(i,this.exportName+"_"+a,{spreadsheetId:"1jcAykr-CDLCIaYix2lT-HWSTLRavgmybCKBj-aYIUXM",sheetId:"en"===this.translate.currentLang?0:1503494263,range:"A5"})}}filterSchool(){const e=this.schoolFilter.value.toLowerCase().trim();this.dataSchoolList=this.dataSchoolOriginal.filter(n=>n.short_name.toLowerCase().trim().includes(e))}displaySchool(e){if(e){const n=this.dataSchoolOriginal.find(i=>i._id.toLowerCase().trim().includes(e));return n?n.short_name:e}return e}downloadCSV(){const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translate.instant("EXPORT_DECISION.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translate&&"fr"===this.translate.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql","");const i=document.createElement("a"),a=this.translate.currentLang.toLowerCase();let c;c="scholar_season_id="+this.scholarSeason._id+"&school_id="+this.schoolId,i.href=encodeURI(n+"downloadFullRateData/"+e+"/"+a+"?"+c),i.target="_blank",i.download="Template Import CSV",document.body.appendChild(i),i.click(),document.body.removeChild(i)}decimalFilter(e){let i=e.target.value+String.fromCharCode(e.charCode);/^-?\d{0,6}$/.test(i)||e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(xt.Q),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(G.YI),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(Ot.J),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(J.$))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-full-rate"]],inputs:{scholarSeason:"scholarSeason"},features:[t.\u0275\u0275NgOnChangesFeature],decls:7,vars:7,consts:[["class","p-grid","class","p-col-12","style","text-align: center !important; display: contents",4,"ngIf"],["class","detail-school",4,"ngIf"],[3,"title","showConfirmButton"],["exportSwal",""],["class","",4,"swalPartial"],["class","loading-indicator",4,"ngIf"],[1,"p-col-12",2,"text-align","center !important","display","contents"],[1,"center-spinner","spinner-wrapper"],["color","accent"],[1,"detail-school"],[1,"p-grid","no-margin","no-padding"],[1,"button-action","p-col"],["style","padding: 0px 7px !important","mat-raised-button","","color","accent",3,"matTooltip","disabled","matMenuTriggerFor",4,"ngIf"],["action","matMenu"],["class","custom-border-bottom","mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["class","table-school",3,"scroll",4,"ngIf"],["mat-raised-button","","color","accent",2,"padding","0px 7px !important",3,"matTooltip","disabled","matMenuTriggerFor"],["mat-menu-item","",1,"custom-border-bottom",3,"matTooltip","click"],["mat-menu-item","",3,"matTooltip","click"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["mat-raised-button","","color","accent",3,"matTooltip","click"],[2,"font-size","16px","line-height","15px"],[1,"table-school",3,"scroll"],[1,"detail-table",3,"formGroup"],[1,"list-headers"],[1,"label-array",2,"padding","0px !important"],[1,"label-level-first"],[1,"label-school-first"],[1,"list-body"],[1,"list-level","fixed-header"],[1,"label-array"],["class","array-data","style","padding: 0px !important",4,"ngFor","ngForOf"],["class","list-level",4,"ngFor","ngForOf"],[1,"array-data",2,"padding","0px !important"],[1,"label-list-schools"],[1,"label-sub-school"],[1,"label-sub",2,"font-weight","600"],[1,"label-sub",2,"color","#dcdcdc"],[1,"list-level"],[1,"label-array",2,"height","45px !important","padding","0px 5px !important"],[1,"label-level"],[4,"ngIf"],["class","array-data","style","vertical-align: middle",4,"ngFor","ngForOf"],[1,"array-data",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],["class","list-data","style","text-align: center !important",4,"ngIf"],[1,"list-data"],["class","registereds form-amount",4,"ngIf"],["class","objectives form-amount",4,"ngIf"],[1,"registereds"],[1,"registereds","form-amount"],["matInput","","name","amount","type","number",1,"form-field",3,"value","wheel","keypress"],[1,"status","bkgrey"],[1,"status","bkgrey",2,"height","55px !important"],[1,"objectives"],[1,"objectives","form-amount"],[1,"list-data",2,"text-align","center !important"],[1,"registereds",2,"padding-top","15px"],["floatLabel","never"],["matInput","","name","amount","type","number","placeholder","0",1,"form-field",3,"value","wheel","keyup","keypress"],[1,"objectives",2,"padding-top","15px"],["matInput","","name","amount","placeholder","0","type","number",1,"form-field",3,"value","wheel","keyup","keypress"],["class","array-data",4,"ngFor","ngForOf"],[1,"array-data"],[1,"label-list-school"],[1,""],["color","accent",1,"full-wid"],["matInput","","type","text",3,"ngModel","placeholder","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,On,3,0,"div",0),t.\u0275\u0275template(1,ii,11,6,"div",1),t.\u0275\u0275elementStart(2,"swal",2,3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275template(5,oi,20,19,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,ai,2,0,"div",5)),2&e&&(t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("title",t.\u0275\u0275pipeBind1(4,5,"Export Title")),t.\u0275\u0275property("showConfirmButton",!1),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.loadingAfterValidate))},dependencies:[d.sg,d.O5,D.lW,B.Hw,T.KE,q.Nt,W.VK,W.OP,W.p6,L.Ou,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.NgModel,p.FormGroupDirective,pt.q1,pt.sC,d.i8,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mat-expansion-panel[_ngcontent-%COMP%]{margin-right:24px;margin-top:10px}.detail-school[_ngcontent-%COMP%]{padding:10px}.detail-table[_ngcontent-%COMP%]{border-collapse:separate;box-sizing:border-box;text-indent:initial}.scholar-school[_ngcontent-%COMP%]{float:left}.button-action[_ngcontent-%COMP%]{display:inline-block;text-align:right;position:relative;float:right}.school-name[_ngcontent-%COMP%]{min-width:245px;float:left;display:inline-block;position:relative}.date-today[_ngcontent-%COMP%]{width:220px;float:left;position:relative;left:15px;vertical-align:middle}.list-body[_ngcontent-%COMP%]{vertical-align:middle;max-height:505px;overflow:auto;top:-50px;position:relative}.label-school-first[_ngcontent-%COMP%]{font-weight:700;font-size:14px;background:#607d8b;text-align:center;position:absolute;width:100%;padding:5px 0;height:30px}.label-level-first[_ngcontent-%COMP%]{font-size:14px;background:#565656;text-align:center;position:absolute;width:100%;padding:5px 0;height:30px;top:30px}.title-school[_ngcontent-%COMP%]{float:left;font-size:16px}.label-first[_ngcontent-%COMP%]{height:55px;width:145px;float:left;padding:5px;border:2px solid #607d8b}.list-level[_ngcontent-%COMP%]{width:100%;position:relative;display:table-row;vertical-align:inherit}.array-school[_ngcontent-%COMP%]{height:55px;min-width:120px;padding:14px 5px 5px;border:2px solid #607d8b;text-align:center;justify-content:center;margin:auto;font-size:15px;display:table-cell;vertical-align:inherit}.list-header[_ngcontent-%COMP%]{vertical-align:middle;border-color:inherit}.label-sub-school[_ngcontent-%COMP%]{height:30px;font-size:14px;padding:5px 0;background:#565656}.label-list-schools[_ngcontent-%COMP%]{font-weight:700;height:30px;font-size:14px;padding:5px 0;background:#607d8b;text-align:center}.list-headers[_ngcontent-%COMP%]{position:relative;top:4.5px;z-index:9999999;display:block}.label-array[_ngcontent-%COMP%]{height:55px;width:310px;min-width:310px;padding:5px;border:1px solid #607d8b;border-right:1px solid black;justify-content:center;display:table-cell;vertical-align:inherit;margin:0!important;z-index:9999;position:sticky;left:0;background:#363636}.table-school[_ngcontent-%COMP%]{width:100%}.fixed-header[_ngcontent-%COMP%]{position:sticky;top:0!important;z-index:999;display:block!important;background:#363636}.label-list-schools[_ngcontent-%COMP%]{text-align:center}.array-data[_ngcontent-%COMP%]{height:45px;width:160px;min-width:160px;border:1px solid #607d8b;border-right:1px solid black;border-left:1px solid black;margin:auto;display:table-cell;vertical-align:inherit;background:#363636}.label-sub[_ngcontent-%COMP%]{width:50%;float:left;text-align:center}.spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:210px;z-index:998}.label-list-school[_ngcontent-%COMP%]{width:26px;float:left}.label-list-objectives[_ngcontent-%COMP%]{height:18px;font-size:15px;margin-left:21px;float:left}.label-level[_ngcontent-%COMP%]{font-size:12px}.objective[_ngcontent-%COMP%]{width:35px;float:right;margin-left:10px;font-size:12px}.mat-icon-status[_ngcontent-%COMP%]{font-size:16px;padding-top:11px;padding-left:5px}.label-list-registered[_ngcontent-%COMP%]{height:18px;font-size:11px;margin-left:25px;float:left}.registered[_ngcontent-%COMP%]{width:35px;float:right;margin-left:16px}.form-amount[_ngcontent-%COMP%]{width:118px;padding:0 10px}.yellow[_ngcontent-%COMP%]{color:#ffd740}.orange[_ngcontent-%COMP%]{color:#f49f36}.blue[_ngcontent-%COMP%]{color:#36ebf4}.red[_ngcontent-%COMP%]{color:#ff4040}.green[_ngcontent-%COMP%]{color:#adff2f}.grey[_ngcontent-%COMP%]{color:#999}.purple[_ngcontent-%COMP%]{color:#ff46f9}.magenta[_ngcontent-%COMP%]{color:#f0f}.black[_ngcontent-%COMP%]{color:#000}.cyan[_ngcontent-%COMP%]{color:#0ff}.status[_ngcontent-%COMP%]{height:27px;width:2px;background-color:#bbb;display:inline-block;float:left}.registereds[_ngcontent-%COMP%]{width:75px;float:left;text-align:center;font-weight:600}.objectives[_ngcontent-%COMP%]{width:70px;float:left;text-align:center;color:#b1b1b1}.bkorange[_ngcontent-%COMP%]{background-color:#f49f36!important}.bkblue[_ngcontent-%COMP%]{background-color:#36ebf4!important}.bkred[_ngcontent-%COMP%]{background-color:#ff4040!important}.bkgrey[_ngcontent-%COMP%]{background-color:#607d8b!important}.bkgreen[_ngcontent-%COMP%]{background-color:#adff2f!important}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#fff;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  ng-dropdown-panel{z-index:99999999999}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.class-scholar[_ngcontent-%COMP%]{width:150px;display:inline-block;vertical-align:middle}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .mat-menu-panel{min-height:auto}  .mat-menu-content:not(:empty){padding-bottom:0}.custom-border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}"]}),o})();var ri=b(13793);function si(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",6)(1,"div",7),t.\u0275\u0275element(2,"mat-spinner",8),t.\u0275\u0275elementEnd()())}function ci(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"button",19),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-icon"),t.\u0275\u0275text(5,"expand_more"),t.\u0275\u0275elementEnd()()),2&o){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(1,4,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,6,"Action")," ")}}function di(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.editModeOn())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Go to Edit Mode")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Go to Edit Mode")," "))}function pi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.csvTypeSelection())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Import")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Import")," "))}function mi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",22),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.downloadCSV())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",23),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Export")),t.\u0275\u0275property("disabled",e.dataMapping&&(null==e.dataMapping?null:e.dataMapping.length)<1),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"Export")," ")}}function hi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",24),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.validateDownPayment())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon",25),t.\u0275\u0275text(3,"save"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Validate")),t.\u0275\u0275property("disabled",e.loadingAfterValidate),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(5,5,"Validate")," ")}}function gi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",37)(1,"div",38),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",39)(4,"div",40),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",41),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()()()),2&o){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,3,"Internal")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"External"))}}function _i(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",53),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null!=e&&e.internal?null==e?null:e.internal:"-")}}function ui(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",54)(1,"mat-form-field")(2,"input",55),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",null==e?null:e.internal)}}function fi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",56),t.\u0275\u0275elementEnd())}function Ci(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function bi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",58),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null!=e&&e.external?null==e?null:e.external:"-")}}function xi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",59)(1,"mat-form-field")(2,"input",55),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("value",null==e?null:e.external)}}function vi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",50),t.\u0275\u0275template(2,_i,3,1,"div",45),t.\u0275\u0275template(3,ui,3,1,"div",51),t.\u0275\u0275template(4,fi,2,0,"div",45),t.\u0275\u0275template(5,Ci,2,0,"div",45),t.\u0275\u0275template(6,bi,3,1,"div",45),t.\u0275\u0275template(7,xi,3,1,"div",52),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(6);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_external_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_external_editable))}}function Oi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementEnd())}function yi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,vi,8,6,"div",45),t.\u0275\u0275pipe(2,"lowercase"),t.\u0275\u0275pipe(3,"lowercase"),t.\u0275\u0275template(4,Oi,2,0,"div",49),t.\u0275\u0275pipe(5,"lowercase"),t.\u0275\u0275pipe(6,"lowercase"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name)===t.\u0275\u0275pipeBind1(3,4,null==n?null:n.name)&&(null==e?null:e.internal)>=0&&(null==e?null:e.external)>=0&&(null==e?null:e.is_from_deposit)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,6,null==e?null:e.name)===t.\u0275\u0275pipeBind1(6,8,null==n?null:n.name)&&!(null!=e&&e.is_from_deposit))}}function Si(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",47),t.\u0275\u0275template(1,yi,7,10,"div",48),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2).index,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dataMapping[e])}}function Pi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Si,2,1,"div",46),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Mi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",61),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.internal)}}function wi(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",54)(1,"mat-form-field",62)(2,"input",63),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(6);return t.\u0275\u0275resetView(l.keyupAmount(a,i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2),n=e.index,i=e.$implicit,a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(2).index,m=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("value",m.dataAmount(g,l,n,i,c))}}function Ti(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function ki(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"div",57),t.\u0275\u0275elementEnd())}function Ii(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",64),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext(2).$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.external)}}function Ei(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",59)(1,"mat-form-field",62)(2,"input",63),t.\u0275\u0275listener("wheel",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.onWheel(i))})("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2).$implicit,l=t.\u0275\u0275nextContext(6);return t.\u0275\u0275resetView(l.keyupAmountExternal(a,i))})("keypress",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(8);return t.\u0275\u0275resetView(a.decimalFilter(i))}),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2),n=e.index,i=e.$implicit,a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(2).index,m=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("value",m.dataAmountExternal(g,l,n,i,c))}}function Di(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div")(1,"div",50),t.\u0275\u0275template(2,Mi,3,1,"div",45),t.\u0275\u0275template(3,wi,3,1,"div",51),t.\u0275\u0275template(4,Ti,2,0,"div",45),t.\u0275\u0275template(5,ki,2,0,"div",45),t.\u0275\u0275template(6,Ii,3,1,"div",45),t.\u0275\u0275template(7,Ei,3,1,"div",52),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(6);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_internal_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.editMode||!(null!=e&&e.is_external_editable)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.editMode&&(null==e?null:e.is_external_editable))}}function Fi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",60),t.\u0275\u0275text(1," - "),t.\u0275\u0275elementEnd())}function Ai(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Di,8,6,"div",45),t.\u0275\u0275pipe(2,"lowercase"),t.\u0275\u0275pipe(3,"lowercase"),t.\u0275\u0275template(4,Fi,2,0,"div",49),t.\u0275\u0275pipe(5,"lowercase"),t.\u0275\u0275pipe(6,"lowercase"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name)===t.\u0275\u0275pipeBind1(3,4,null==n?null:n.name)&&(null==e?null:e.internal)>=0&&(null==e?null:e.external)>=0&&(null==e?null:e.is_from_deposit)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(5,6,null==e?null:e.name)===t.\u0275\u0275pipeBind1(6,8,null==n?null:n.name)&&!(null!=e&&e.internal)&&!(null!=e&&e.external)&&(null==e?null:e.internal)<=0&&(null==e?null:e.external)<=0&&!(null!=e&&e.is_from_deposit))}}function Bi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",47),t.\u0275\u0275template(1,Ai,7,10,"div",48),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2).index,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.dataMapping[e])}}function Ni(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Bi,2,1,"div",46),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Li(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",66),t.\u0275\u0275element(1,"div",67)(2,"div",50),t.\u0275\u0275elementEnd())}function Vi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Li,3,0,"div",65),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Ri(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",66),t.\u0275\u0275element(1,"div",67)(2,"div",50),t.\u0275\u0275elementEnd())}function Ui(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275template(1,Ri,3,0,"div",65),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses)}}function Hi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",42)(1,"div",43)(2,"div",44),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(4,Pi,2,1,"div",45),t.\u0275\u0275template(5,Ni,2,1,"div",45),t.\u0275\u0275template(6,Vi,2,1,"div",45),t.\u0275\u0275template(7,Ui,2,1,"div",45),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.dataMapping&&(null==i.dataMapping?null:i.dataMapping.length)&&i.dataMapping[n]&&i.dataMapping[n].length&&!i.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.dataMapping&&(null==i.dataMapping?null:i.dataMapping.length)&&i.dataMapping[n]&&i.dataMapping[n].length&&i.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(i.dataMapping&&null!=i.dataMapping&&i.dataMapping.length&&i.dataMapping[n]||i.editMode)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(i.dataMapping&&null!=i.dataMapping&&i.dataMapping.length&&i.dataMapping[n]||i.editMode))}}function Ki(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275listener("scroll",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.dashboardScroll(i))}),t.\u0275\u0275elementStart(1,"div",27)(2,"div",28)(3,"div",29)(4,"div",30),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",31),t.\u0275\u0275text(8,"Campus"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(9,"div",32)(10,"div",33),t.\u0275\u0275element(11,"div",34),t.\u0275\u0275template(12,gi,10,7,"div",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(13,Hi,8,5,"div",36),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",e.formAmountTemp),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,4,"Level")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",null==e.schoolData?null:e.schoolData.campuses),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.formGenerated)}}function Wi(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"div",11),t.\u0275\u0275template(3,ci,6,8,"button",12),t.\u0275\u0275elementStart(4,"mat-menu",null,13),t.\u0275\u0275template(6,di,4,6,"button",14),t.\u0275\u0275template(7,pi,4,6,"button",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,mi,5,7,"button",16),t.\u0275\u0275template(9,hi,6,7,"button",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(10,Ki,14,6,"div",18),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.editMode),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!e.editMode&&(null==e.permission?null:e.permission.editPermIntakeChannelSchoolDownPaymentTabPerm())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editMode&&(null==e.permission?null:e.permission.importIntakeChannelSchoolDownPaymentTabPerm())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.editMode&&(null==e.permission?null:e.permission.exportCsvIntakeChannelSchoolDownPaymentTabPerm())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.editMode),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dataSchoolOriginal&&e.dataSchoolOriginal.length)}}function ji(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",68)(1,"div",68),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",68),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",68),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",68),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",68)(14,"mat-form-field",69)(15,"input",70),t.\u0275\u0275listener("ngModelChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.exportName=i)}),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(17,"button",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.exportData())}),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,7,"Export Text1")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,9,"Export Text2")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,11,"Export Text3")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,13,"Export Text4")," "),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(16,15,"ExportName")),t.\u0275\u0275property("ngModel",e.exportName),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,17,"OK")," ")}}function $i(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",72),t.\u0275\u0275element(1,"mat-progress-spinner",73),t.\u0275\u0275elementEnd())}let qi=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u,y,P){this.admissionService=e,this.translate=n,this.userService=i,this.financeService=a,this.permissionsService=l,this.dialog=c,this.fb=g,this.intakeService=m,this.exportCsvService=_,this.router=u,this.translateService=y,this.permission=P,this.short_name="",this.subs=new F.Y,this.scholars=[],this.weeks=[{name:"Week 1"}],this.scholarFilter1=new p.UntypedFormControl("20-21"),this.weekFilter=new p.UntypedFormControl("Week 1"),this.scholarFilter=new p.UntypedFormControl(null),this.schoolFilter=new p.UntypedFormControl(null),this.listCampus=[],this.filterAdmission={school:"",scholar_season_id:""},this.scrollVertical=0,this.scrollHorizontal=0,this.dataDownPayment=[],this.dataMapping=[],this.dataMappingForForm=[],this.dataCampus=[],this.dataCampusIsNull=[],this.campusList=[],this.editMode=!1,this.isDirectorAdmission=!1,this.isMemberAdmission=!1,this.isWaitingForResponse=!1,this.loadingAfterValidate=!1,this.downPaymentInputList=[]}ngOnInit(){this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.editMode=!1,this.scholarSeason&&this.scholarSeason._id&&(this.filterAdmission.scholar_season_id=this.scholarSeason._id,this.scholarFilter.setValue(this.scholarSeason._id)),this.scholarSeasons=this.scholarSeason&&this.scholarSeason.scholar_season?this.scholarSeason.scholar_season:"",this.subs.sink=this.router.paramMap.subscribe(n=>{this.schoolId=n.get("id")}),this.schoolId&&this.getSchoolData(),this.isDirectorAdmission=!!this.permissionsService.getPermission("Director of Admissions"),this.today=new Date}onWheel(e){e?.preventDefault()}getSchoolData(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetOneSchool(this.schoolId).subscribe(e=>{e&&(this.schoolData=h.cloneDeep(e),this.short_name=e.short_name,this.getDataScholarSeasons(),this.initForm(),this.initFormTemp(),this.getDataSchool())},e=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnChanges(){this.getDataSchool()}getDP(){const e=this.schoolFilter.value?this.schoolFilter.value:"",n=this.scholarSeason._id?this.scholarSeason._id:"";this.isWaitingForResponse=!0,this.subs.sink=this.financeService.getAllDownPayment(e,n).subscribe(i=>{this.fullDP=i,this.getDataGeneration()},i=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(i),i&&i.message&&(i.message.includes("jwt expired")||i.message.includes("str & salt required")||i.message.includes("Authorization header is missing")||i.message.includes("salt"))?this.userService.handlerSessionExpired():i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translateService.instant("OK")})})}translateDate(){return j(this.today,"DD/MM/YYYY").format("DD/MM/YYYY")}getDataSchool(){const e=[this.short_name];this.isWaitingForResponse=!0,this.subs.sink=this.admissionService.GetAllSchoolScholar(e,this.scholarSeason._id,this.currentUserTypeId).subscribe(n=>{if(n&&n.length){if(this.dataSchoolOriginal=n,this.dataSchoolList=n,this.schoolFilter.value){const i=this.dataSchoolOriginal.filter(a=>a._id===this.schoolFilter.value);this.schoolData=i&&i.length?i[0]:this.dataSchoolOriginal[0]}else this.schoolData=this.dataSchoolOriginal[0],this.schoolFilter.setValue(this.dataSchoolOriginal[0]._id);this.getDP()}else this.isWaitingForResponse=!1},n=>{this.userService.postErrorLog(n),this.isWaitingForResponse=!1,n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})})}getDataGeneration(){this.subs.sink=this.admissionService.GetSchoolCampusLevelSectorSpecialityForTable(this.schoolFilter.value,this.scholarSeason._id,null,null,this.currentUserTypeId).subscribe(e=>{e&&e.length?(this.dataGeneration=e.map(n=>({deposit_name:n.level?n.sector_id?n.speciality_id?n.level.name+" - "+n.sector_id.name+" - "+n.speciality_id.name:n.level.name+" - "+n.sector_id.name:n.level.name:"",...n})),this.isWaitingForResponse=!1,this.mapGlobalData()):this.isWaitingForResponse=!1},e=>{this.userService.postErrorLog(e),this.isWaitingForResponse=!1,e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("OK")})})}mapGlobalData(){const e=[];this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length&&(this.schoolData.campuses.forEach(n=>{this.dataGeneration&&this.dataGeneration.length&&this.dataGeneration.forEach(i=>{e.push({school_id:this.schoolData._id?this.schoolData._id:"",short_name:this.schoolData.short_name?this.schoolData.short_name:"",scholar_season_id:this.schoolData.scholar_season_id?this.schoolData.scholar_season_id:"",campus:n?n.name:"",level:i.level?i.level.name:"",deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",campus_id:n?n._id:"",level_id:i.level?i.level._id:null,sector:i.sector_id?i.sector_id._id:null,speciality:i.speciality_id?i.speciality_id._id:null,is_from_deposit:!1,external:0,is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,internal:0,amount:0,_id:null})})}),e&&e.length&&e.forEach((n,i)=>{const a=this.fullDP.find(l=>l.campus._id===n.campus_id&&l.level._id===n.level_id&&l.sector._id===n.sector&&(l.speciality?l.speciality._id===n.speciality:l.speciality===n.speciality));a&&(e[i]={school_id:this.schoolData._id?this.schoolData._id:"",short_name:this.schoolData.short_name?this.schoolData.short_name:"",scholar_season_id:this.schoolData.scholar_season_id?this.schoolData.scholar_season_id:"",campus:a.campus?a.campus.name:"",level:a.level?a.level.name:"",deposit_name:n.deposit_name,campus_id:a.campus?a.campus._id:"",level_id:a.level?a.level._id:"",sector:a.sector?a.sector._id:"",speciality:a.speciality?a.speciality._id:"",is_from_deposit:!0,external:a.external?a.external:0,internal:a.internal?a.internal:0,is_internal_editable:a.is_internal_editable,is_external_editable:a.is_external_editable,amount:a.amount?a.amount:0,_id:a._id})}),this.depositMapData=h.cloneDeep(e),this.getDownPayment(),this.generateFormAmount())}generateFormAmount(){this.filterAdmission.school=this.schoolData.short_name;const e=[];this.dataGeneration.forEach(i=>{this.schoolData.campuses.forEach(a=>{e.push({campus:a.name,school:this.schoolData.short_name,level:i.level?i.level.name:"",campus_id:a?a._id:"",level_id:i.level?i.level._id:"",sector:i.sector_id?i.sector_id._id:"",speciality:i.speciality_id?i.speciality_id._id:"",is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",is_from_deposit:!1})})});const n=[];if(this.dataGeneration.forEach(i=>{this.schoolData.campuses.forEach(a=>{n.push({campus:a.name,school:this.schoolData.short_name,level:i.level?i.level.name:"",campus_id:a?a._id:"",level_id:i.level?i.level._id:"",sector:i.sector_id?i.sector_id._id:"",speciality:i.speciality_id?i.speciality_id._id:"",is_internal_editable:i.is_internal_editable,is_external_editable:i.is_external_editable,deposit_name:i.level?i.sector_id?i.speciality_id?i.level.name+" - "+i.sector_id.name+" - "+i.speciality_id.name:i.level.name+" - "+i.sector_id.name:i.level.name:"",is_from_deposit:!1})})}),e&&e.length&&e.forEach(i=>{n&&n.length&&n.forEach((a,l)=>{i.campus.toUpperCase()===a.campus.toUpperCase()&&i.level.toUpperCase()===a.level.toUpperCase()&&i.sector.toUpperCase()===a.sector.toUpperCase()&&i.speciality.toUpperCase()===a.speciality.toUpperCase()&&(n[l].is_from_deposit=!0)})}),n&&n.length){const i=h.chain(n).groupBy("deposit_name").map((l,c)=>({name:c,data:l})).value();this.formGenerated=i;let a=[];if(this.formGenerated&&this.formGenerated.length){const l=i.map(c=>({name:c.name,data:h.uniqBy(c.data,"campus")}));a=h.orderBy(l,["name"],["asc"])}this.formGenerated=a}}getDownPayment(){const e=h.cloneDeep(this.fullDP);if(e&&e.length){this.generateArray(e);let n=h.cloneDeep(e);n=n.map(l=>({school_id:l.school_id?l.school_id._id:"",scholar_season_id:l.scholar_season_id?l.scholar_season_id._id:"",campus_id:l.campus?l.campus._id:"",level_id:l.level?l.level._id:"",campus:l.campus?l.campus.name:"",level:l.level?l.level.name:"",sector:l.sector?l.sector._id:"",speciality:l.speciality?l.speciality._id:"",is_internal_editable:l.is_internal_editable,is_external_editable:l.is_external_editable,deposit_name:l.level?l.sector?l.speciality?l.level.name+" - "+l.sector.name+" - "+l.level.name:l.level.name+" - "+l.sector.name:l.level.name:"",internal:l.internal?l.internal:0,external:l.external?l.external:0,_id:l._id?l._id:null})),this.dataDp=n,this.connectSpecialitySectorWithLevel(this.schoolData,this.dataDp);const i=h.chain(this.depositMapData).groupBy("deposit_name").map((l,c)=>({name:c,data:l})).value();let a=[];if(this.schoolData&&this.schoolData.levels&&this.schoolData.levels.length){const l=i.map(c=>({name:c.name,data:h.uniqBy(c.data,"campus")}));a=h.orderBy(l,["name"],["asc"])}this.dataDownPayment=a,a&&this.mappingDashboard(a)}else{const n=h.chain(this.depositMapData).groupBy("deposit_name").map((a,l)=>({name:l,data:a})).value();let i=[];if(this.dataGeneration&&this.dataGeneration.length){const a=n.map(l=>({name:l.name,data:h.uniqBy(l.data,"campus")}));i=h.orderBy(a,["name"],["asc"])}this.dataDownPayment=i,i&&this.mappingDashboard(i)}}generateArray(e){if(this.schoolData){this.initForm();let n=0;e&&e.length&&e.forEach(a=>{this.addAmountForm(),this.formAmount.get("down_payment_inputs").get(n.toString()).value&&(this.formAmount.get("down_payment_inputs").get(n.toString()).get("school_id").setValue(this.schoolData._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("level").setValue(a.level._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("_id").setValue(a._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("speciality").setValue(a.speciality?a.speciality._id:null),this.formAmount.get("down_payment_inputs").get(n.toString()).get("sector").setValue(a.sector?a.sector._id:null),this.formAmount.get("down_payment_inputs").get(n.toString()).get("external").setValue(a.external>=0?a.external:0),this.formAmount.get("down_payment_inputs").get(n.toString()).get("internal").setValue(a.internal>=0?a.internal:0),this.formAmount.get("down_payment_inputs").get(n.toString()).get("campus").setValue(a.campus._id),this.formAmount.get("down_payment_inputs").get(n.toString()).get("scholar_season_id").setValue(this.scholarSeason._id)),n++}),this.formAmount.get("down_payment_inputs")}}getDataScholarSeasons(){this.subs.sink=this.financeService.GetAllScholarSeasons().subscribe(e=>{e&&e.length&&(this.scholars=e)},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("OK")})})}initForm(){this.formAmount=this.fb.group({down_payment_inputs:this.fb.array([])})}initFormTemp(){this.formAmountTemp=this.fb.group({internal:[0],external:[0]})}initAmountForm(){return this.fb.group({_id:[null],school_id:[""],scholar_season_id:[""],campus:[""],level:[""],speciality:[""],sector:[""],indexS:[""],internal:[0],external:[0]})}get amountFormArray(){return this.formAmount.get("down_payment_inputs")}addAmountForm(){this.amountFormArray.push(this.initAmountForm())}keyupAmount(e,n){if(this.depositMapData&&this.depositMapData.length){const i=h.cloneDeep(this.formAmount.get("down_payment_inputs").value),a=i.findIndex(c=>c._id===e._id);i.filter(c=>c._id===e._id),a>=0&&this.formAmount.get("down_payment_inputs").get(a.toString()).get("internal").patchValue(Number(n?.target?.value||0))}}keyupAmountExternal(e,n){if(this.depositMapData&&this.depositMapData.length){const a=h.cloneDeep(this.formAmount.get("down_payment_inputs").value).findIndex(l=>l._id===e._id);a>=0&&this.formAmount.get("down_payment_inputs").get(a.toString()).get("external").patchValue(Number(n?.target?.value||0))}}csvTypeSelection(){this.openImportDialog({delimeter:"",scholar_season:this.scholarSeason._id,school_id:this.schoolFilter.value})}openImportDialog(e){this.subs.sink=this.dialog.open(ri.D,{width:"600px",minHeight:"100px",disableClose:!0,data:e,panelClass:"certification-rule-pop-up"}).afterClosed().subscribe(n=>{n&&this.getDataSchool()})}downloadCSVTemplate(){this.financeService.downloadDownPaymentTemplateCSV(this.fileType,this.scholarSeason._id,this.schoolFilter.value)}connectSpecialitySectorWithLevel(e,n){e.levels.forEach(i=>{const a=n.find(l=>l&&i&&i._id&&l.level_id&&l.level_id===i._id);a&&(i.speciality=a.speciality,i.sector=a.sector)})}selectSchool(){if(this.schoolFilter.value){this.dataMapping=[],this.editMode=!1,this.isWaitingForResponse=!0,this.getDataGeneration();const e=this.dataSchoolOriginal.filter(n=>n._id===this.schoolFilter.value);this.schoolData=e&&e.length?e[0]:this.dataSchoolOriginal[0],this.getDataSchool()}}selectScholar(){this.scholarSeason._id&&(this.dataMapping=[],this.isWaitingForResponse=!0,this.getDataSchool())}ngAfterViewInit(){}mappingDashboard(e){this.dataMapping=[],e.forEach(n=>{const i=n.data.map(a=>({name:a.campus.toLowerCase(),internal:a.internal,external:a.external,scholar_season_id:this.scholarSeason._id,school_id:a.school_id,is_internal_editable:a.is_internal_editable,is_external_editable:a.is_external_editable,levels:a.level,is_from_deposit:a.is_from_deposit,_id:a._id}));this.dataMapping.push(i)})}getNameLevel(e){let n=e;return n=parseInt(e)?"GE "+e:e,n}isCorrectCampus(e){}dashboardScroll(e){e&&e.target.scrollLeft!==this.scrollHorizontal&&(this.scrollHorizontal=e.target.scrollLeft),e&&e.target.scrollTop!==this.scrollVertical&&(this.scrollVertical=e.target.scrollTop)}editModeOn(){this.editMode=!0}validateDownPayment(){this.loadingAfterValidate=!0;let e=this.formAmount.get("down_payment_inputs").value;e=e.map(n=>({internal:n.internal?n.internal:0,external:n.external?n.external:0,campus:n.campus&&n.campus._id?n.campus._id:n.campus?n.campus:"",level:n.level&&n.level._id?n.level._id:n.level?n.level:"",scholar_season_id:n.scholar_season_id?n.scholar_season_id:"",speciality:n.speciality?n.speciality:null,sector:n.sector?n.sector:null,school_id:n.school_id?n.school_id:"",_id:n._id?n._id:null})),this.subs.sink=this.financeService.UpdateManyDownPayment(e).subscribe(n=>{n&&(this.loadingAfterValidate=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.editMode=!1,this.getDataSchool()}))},n=>{this.userService.postErrorLog(n),this.loadingAfterValidate=!1,n&&n.message&&(n.message.includes("jwt expired")||n.message.includes("str & salt required")||n.message.includes("Authorization header is missing")||n.message.includes("salt"))?this.userService.handlerSessionExpired():n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})})}cleanFilterDataAdmission(){const e=h.cloneDeep(this.filterAdmission);let n="";return Object.keys(e).forEach(i=>{(e[i]||!1===e[i])&&(n+=` ${i}:"${e[i]}"`)}),"filter: {"+n+"}"}dataAmount(e,n,i,a,l){let c=null;if(this.dataMapping&&this.dataMapping.length&&this.dataMapping[e]){const g=this.dataMapping[e];if(g&&g.length){const m=g.find(_=>_.name.toLowerCase()===l.name.toLowerCase());c=m&&m.internal?m.internal:null}else c=null}else c=null;return c}dataAmountExternal(e,n,i,a,l){let c=null;if(this.dataMapping&&this.dataMapping.length&&this.dataMapping[e]){const g=this.dataMapping[e];if(g&&g.length){const m=g.find(_=>_.name.toLowerCase()===l.name.toLowerCase());c=m&&m.external?m.external:null}else c=null}else c=null;return c}ngOnDestroy(){this.subs.unsubscribe()}exportData(){s().close();const e=[];if(this.isWaitingForResponse=!0,this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length){let n=0;const i=[];i[0]="Campus";for(const a of this.schoolData.campuses)n++,i[n]=a.name?a.name:"",n++;e.push(i)}if(this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length){let n=0;const i=[];i[0]=this.translate.instant("Level");for(const a of this.schoolData.campuses)n++,i[n]=this.translate.instant("Internal"),n++,i[n]=this.translate.instant("External");e.push(i)}if(this.schoolData&&this.schoolData.levels&&this.schoolData.levels.length){let n=0;for(const m of this.schoolData.levels){let _=0;const u=[];if(u[0]=m.name?m.name:"",this.dataMapping&&this.dataMapping.length&&this.dataMapping[n]&&this.dataMapping[n].length){for(const y of this.schoolData.campuses)for(const P of this.dataMapping[n])P.name&&y.name&&P.name.toLowerCase()===y.name.toLowerCase()&&(_++,u[_]=P.internal?P.internal:"",_++,u[_]=P.external?P.external:"");n++,e.push(u)}}this.isWaitingForResponse=!1;const i={values:e},a=j().format("DD-MM-YYYY");this.exportCsvService.createAndUpdateSpreadsheet(i,this.exportName+"_"+a,{spreadsheetId:"1KPNthvpoOBu6BOoaDnccDA3zmLf5AU6cztkwQZgRK48",sheetId:"en"===this.translate.currentLang?0:1810114757,range:"A5"})}}filterSchool(){const e=this.schoolFilter.value.toLowerCase().trim();this.dataSchoolList=this.dataSchoolOriginal.filter(n=>n.short_name.toLowerCase().trim().includes(e))}displaySchool(e){if(e){const n=this.dataSchoolOriginal.find(i=>i._id.toLowerCase().trim().includes(e));return n?n.short_name:e}return e}downloadCSV(){const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translate.instant("EXPORT_DECISION.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translate&&"fr"===this.translate.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql","");const i=document.createElement("a"),a=this.translate.currentLang.toLowerCase();let c;c="scholar_season_id="+this.scholarSeason._id+"&school_id="+this.schoolId,i.href=encodeURI(n+"downloadDownPaymentData/"+e+"/"+a+"?"+c),i.target="_blank",i.download="Template Import CSV",document.body.appendChild(i),i.click(),document.body.removeChild(i)}decimalFilter(e){let i=e.target.value+String.fromCharCode(e.charCode);/^-?\d{0,6}$/.test(i)||e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(xt.Q),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(G.YI),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(Ot.J),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(J.$))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-down-payment"]],inputs:{scholarSeason:"scholarSeason"},features:[t.\u0275\u0275NgOnChangesFeature],decls:7,vars:7,consts:[["class","p-grid","class","p-col-12","style","text-align: center !important; display: contents",4,"ngIf"],["class","detail-school",4,"ngIf"],[3,"title","showConfirmButton"],["exportSwal",""],["class","",4,"swalPartial"],["class","loading-indicator",4,"ngIf"],[1,"p-col-12",2,"text-align","center !important","display","contents"],[1,"center-spinner","spinner-wrapper"],["color","accent"],[1,"detail-school"],[1,"p-grid","no-margin","no-padding"],[1,"button-action","p-col"],["style","padding: 0px 7px !important","mat-raised-button","","color","accent",3,"matTooltip","disabled","matMenuTriggerFor",4,"ngIf"],["action","matMenu"],["class","custom-border-bottom","mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","matTooltip","click",4,"ngIf"],["class","table-school",3,"scroll",4,"ngIf"],["mat-raised-button","","color","accent",2,"padding","0px 7px !important",3,"matTooltip","disabled","matMenuTriggerFor"],["mat-menu-item","",1,"custom-border-bottom",3,"matTooltip","click"],["mat-menu-item","",3,"matTooltip","click"],["mat-raised-button","","color","primary",3,"disabled","matTooltip","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["mat-raised-button","","color","accent",3,"disabled","matTooltip","click"],[2,"font-size","16px","line-height","15px"],[1,"table-school",3,"scroll"],[1,"detail-table",3,"formGroup"],[1,"list-headers"],[1,"label-array",2,"padding","0px !important"],[1,"label-level-first"],[1,"label-school-first"],[1,"list-body"],[1,"list-level","fixed-header"],[1,"label-array"],["class","array-data","style","padding: 0px !important",4,"ngFor","ngForOf"],["class","list-level",4,"ngFor","ngForOf"],[1,"array-data",2,"padding","0px !important"],[1,"label-list-schools"],[1,"label-sub-school"],[1,"label-sub",2,"font-weight","600"],[1,"label-sub",2,"color","#dcdcdc"],[1,"list-level"],[1,"label-array",2,"height","45px !important","padding","0px 5px !important"],[1,"label-level"],[4,"ngIf"],["class","array-data","style","vertical-align: middle",4,"ngFor","ngForOf"],[1,"array-data",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],["class","list-data","style","text-align: center !important",4,"ngIf"],[1,"list-data"],["class","registereds form-amount",4,"ngIf"],["class","objectives form-amount",4,"ngIf"],[1,"registereds"],[1,"registereds","form-amount"],["matInput","","name","amount","type","number",1,"form-field",3,"value","wheel","keypress"],[1,"status","bkgrey"],[1,"status","bkgrey",2,"height","55px !important"],[1,"objectives"],[1,"objectives","form-amount"],[1,"list-data",2,"text-align","center !important"],[1,"registereds",2,"padding-top","15px"],["floatLabel","never"],["matInput","","name","amount","type","number","placeholder","0",1,"form-field",3,"value","wheel","keyup","keypress"],[1,"objectives",2,"padding-top","15px"],["class","array-data",4,"ngFor","ngForOf"],[1,"array-data"],[1,"label-list-school"],[1,""],["color","accent",1,"full-wid"],["matInput","","type","text",3,"ngModel","placeholder","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,si,3,0,"div",0),t.\u0275\u0275template(1,Wi,11,6,"div",1),t.\u0275\u0275elementStart(2,"swal",2,3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275template(5,ji,20,19,"div",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,$i,2,0,"div",5)),2&e&&(t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("title",t.\u0275\u0275pipeBind1(4,5,"Export Title")),t.\u0275\u0275property("showConfirmButton",!1),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.loadingAfterValidate))},dependencies:[d.sg,d.O5,D.lW,B.Hw,T.KE,q.Nt,W.VK,W.OP,W.p6,L.Ou,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.NgModel,p.FormGroupDirective,pt.q1,pt.sC,d.i8,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mat-expansion-panel[_ngcontent-%COMP%]{margin-right:24px;margin-top:10px}.detail-school[_ngcontent-%COMP%]{padding:10px}.detail-table[_ngcontent-%COMP%]{border-collapse:separate;box-sizing:border-box;text-indent:initial}.scholar-school[_ngcontent-%COMP%]{float:left}.button-action[_ngcontent-%COMP%]{display:block;text-align:right;position:relative;float:right}.school-name[_ngcontent-%COMP%]{min-width:245px;float:left;display:block;position:relative}.date-today[_ngcontent-%COMP%]{width:220px;float:left;position:relative;left:15px;vertical-align:middle}.list-body[_ngcontent-%COMP%]{vertical-align:middle;max-height:505px;overflow:auto;top:-50px;position:relative}.label-school-first[_ngcontent-%COMP%]{font-weight:700;font-size:14px;background:#607d8b;text-align:center;position:absolute;width:100%;padding:5px 0;height:30px}.label-level-first[_ngcontent-%COMP%]{font-size:14px;background:#565656;text-align:center;position:absolute;width:100%;padding:5px 0;height:30px;top:30px}.title-school[_ngcontent-%COMP%]{float:left;font-size:16px}.label-first[_ngcontent-%COMP%]{height:55px;width:145px;float:left;padding:5px;border:2px solid #607d8b}.list-level[_ngcontent-%COMP%]{width:100%;position:relative;display:table-row;vertical-align:inherit}.array-school[_ngcontent-%COMP%]{height:55px;min-width:120px;padding:14px 5px 5px;border:2px solid #607d8b;text-align:center;justify-content:center;margin:auto;font-size:15px;display:table-cell;vertical-align:inherit}.list-header[_ngcontent-%COMP%]{vertical-align:middle;border-color:inherit}.label-sub-school[_ngcontent-%COMP%]{height:30px;font-size:14px;padding:5px 0;background:#565656}.label-list-schools[_ngcontent-%COMP%]{font-weight:700;height:30px;font-size:14px;padding:5px 0;background:#607d8b;text-align:center}.list-headers[_ngcontent-%COMP%]{position:relative;top:5.5px;z-index:9999999;display:block}.label-array[_ngcontent-%COMP%]{height:55px;width:310px;min-width:310px;padding:5px;border:1px solid #607d8b;border-right:1px solid black;justify-content:center;display:table-cell;vertical-align:inherit;margin:0!important;z-index:9999;position:sticky;left:0;background:#363636}.table-school[_ngcontent-%COMP%]{width:100%}.fixed-header[_ngcontent-%COMP%]{position:sticky;top:0!important;z-index:999;display:block!important;background:#363636}.label-list-schools[_ngcontent-%COMP%]{text-align:center}.array-data[_ngcontent-%COMP%]{height:45px;width:160px;min-width:160px;border:1px solid #607d8b;border-right:1px solid black;border-left:1px solid black;margin:auto;display:table-cell;vertical-align:inherit;background:#363636}.label-sub[_ngcontent-%COMP%]{width:50%;float:left;text-align:center}.spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:210px;z-index:998}.label-list-school[_ngcontent-%COMP%]{width:26px;float:left}.label-list-objectives[_ngcontent-%COMP%]{height:18px;font-size:15px;margin-left:21px;float:left}.label-level[_ngcontent-%COMP%]{font-size:12px}.objective[_ngcontent-%COMP%]{width:35px;float:right;margin-left:10px;font-size:12px}.mat-icon-status[_ngcontent-%COMP%]{font-size:16px;padding-top:11px;padding-left:5px}.label-list-registered[_ngcontent-%COMP%]{height:18px;font-size:11px;margin-left:25px;float:left}.registered[_ngcontent-%COMP%]{width:35px;float:right;margin-left:16px}.form-amount[_ngcontent-%COMP%]{width:118px;padding:0 10px}.yellow[_ngcontent-%COMP%]{color:#ffd740}.orange[_ngcontent-%COMP%]{color:#f49f36}.blue[_ngcontent-%COMP%]{color:#36ebf4}.red[_ngcontent-%COMP%]{color:#ff4040}.green[_ngcontent-%COMP%]{color:#adff2f}.grey[_ngcontent-%COMP%]{color:#999}.purple[_ngcontent-%COMP%]{color:#ff46f9}.magenta[_ngcontent-%COMP%]{color:#f0f}.black[_ngcontent-%COMP%]{color:#000}.cyan[_ngcontent-%COMP%]{color:#0ff}.status[_ngcontent-%COMP%]{height:27px;width:2px;background-color:#bbb;display:block;float:left}.registereds[_ngcontent-%COMP%]{width:75px;float:left;text-align:center;font-weight:600}.objectives[_ngcontent-%COMP%]{width:70px;float:left;text-align:center;color:#b1b1b1}.bkorange[_ngcontent-%COMP%]{background-color:#f49f36!important}.bkblue[_ngcontent-%COMP%]{background-color:#36ebf4!important}.bkred[_ngcontent-%COMP%]{background-color:#ff4040!important}.bkgrey[_ngcontent-%COMP%]{background-color:#607d8b!important}.bkgreen[_ngcontent-%COMP%]{background-color:#adff2f!important}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#fff;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  ng-dropdown-panel{z-index:99999999999}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.class-scholar[_ngcontent-%COMP%]{width:150px;display:inline-block;vertical-align:middle}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .mat-menu-panel{min-height:auto}  .mat-menu-content:not(:empty){padding-bottom:0}.custom-border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}"]}),o})();var ut=b(21086);function Gi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"p",19),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}let zi=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u){this.fb=e,this.translate=n,this.admissionService=i,this.dialogRef=a,this.router=l,this.financeService=c,this.userService=g,this.translateService=m,this.intakeChannelService=_,this.data=u,this.listObjective=[],this.listOfLegalEntity=[],this.realCampusList=[],this.subs=new F.Y}ngOnInit(){this.currentUser=this.userService.getLocalStorageUser(),this.isPermission=this.userService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.data&&this.data.scholar&&this.data.scholar._id&&(this.scholarSeasonId=this.data.scholar._id),this.data&&this.data.school&&this.data.school._id?(this.schoolData=this.data.school,this.listObjective=[this.data.school],this.school=this.listObjective,this.initVolumeHoursForm(),this.getDataCampus()):(this.initVolumeHoursForm(),this.getDataForList()),this.getLegalEntityForDropdown()}ngOnDestroy(){this.subs.unsubscribe()}getDataForList(){this.subs.sink=this.intakeChannelService.GetOneCandidateSchool(this.schoolData._id,this.scholarSeasonId).subscribe(e=>{e&&(this.listObjective=[e],this.school=this.listObjective)},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("OK")})})}getLegalEntityForDropdown(){this.subs.sink=this.financeService.getAllLegalEntityPublishByScholar(this.scholarSeasonId).subscribe(e=>{this.listOfLegalEntity=e&&e.length?e:[]},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("OK")})})}initVolumeHoursForm(){this.volumeHoursForm=this.fb.group({school_id:[this.schoolData&&this.schoolData._id?this.schoolData._id:null],campus:[null],level:[null],legal_entity_ids:[null,p.Validators.required],scholar_season_id:[this.scholarSeasonId]})}getDataCampus(){this.levels=[],this.campusList=[],this.realCampusList=[],this.volumeHoursForm.get("campus").setValue(null),this.volumeHoursForm.get("level").setValue(null),this.isCampusOn=!0;const e=this.volumeHoursForm.get("school_id").value,n=this.listObjective.filter(a=>e.includes(a._id)),i={_id:"ALL",name:this.translate.instant("ALL")};this.campusList.push(i),n.filter((a,l)=>{a.campuses&&a.campuses.length&&a.campuses.filter((c,g)=>{this.campusList.push(c),this.realCampusList.push(c)})}),this.campusList=h.uniqBy(this.campusList,"_id"),this.realCampusList=h.uniqBy(this.realCampusList,"_id")}getDataLevel(){this.levels=[],this.volumeHoursForm.get("level").setValue(null);let e=h.cloneDeep(this.volumeHoursForm.get("campus").value);if(e=e.filter(n=>"ALL"===n||"Tous"===n),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const n=[],i=this.realCampusList.filter(c=>"ALL"!==c._id&&"Tous"!==c._id);i.forEach(c=>{n.push(c._id)}),this.volumeHoursForm.get("campus").patchValue(n);const a=i,l={_id:"ALL",name:this.translate.instant("ALL")};this.levels.push(l),a.forEach(c=>{c.levels.forEach(g=>{this.levels.push(g)})}),this.levels=h.uniqBy(this.levels,"_id")}else{e=h.cloneDeep(this.volumeHoursForm.get("campus").value);const n=this.realCampusList.filter(a=>e.includes(a._id)),i={_id:"ALL",name:this.translate.instant("ALL")};this.levels.push(i),n.forEach(a=>{a.levels.forEach(l=>{this.levels.push(l)})}),this.levels=h.uniqBy(this.levels,"_id")}}levelSelected(){let e=h.cloneDeep(this.volumeHoursForm.get("level").value);if(e=e.filter(n=>"ALL"===n||"Tous"===n),e&&e.length&&("ALL"===e[0]||"Tous"===e[0])){const n=[];this.levels.filter(a=>"ALL"!==a._id&&"Tous"!==a._id).forEach(a=>{n.push(a._id)}),this.volumeHoursForm.get("level").patchValue(n)}}checkFormValidity(){return!!this.volumeHoursForm.invalid&&(s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.volumeHoursForm.markAllAsTouched(),!0)}onValidate(){if(this.checkFormValidity())return;const e=this.createPayload(),n=this.volumeHoursForm.get("legal_entity_ids").value[0];this.subs.sink=this.admissionService.UpdateLegalEntityPublish(n,e,!1).subscribe(a=>{a&&s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},a=>{this.userService.postErrorLog(a),"GraphQL error: Some program already assigned to candidate!"===a.message?s().fire({type:"info",title:this.translate.instant("Account_s2.Title"),text:this.translate.instant("Account_s2.Text"),confirmButtonText:this.translate.instant("Account_s2.Button"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}):a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}createPayload(){let e=[],n=[],i=[];const a=[],l=[];let c=!1;this.data&&this.data.selected&&this.data.selected.length&&(e=this.data.selected.map(m=>m.campus),n=this.data.selected.map(m=>m.level),i=this.data.selected.map(m=>m?.speciality_id?._id)?.filter(m=>m)),e=h.uniqBy(e),n=h.uniqBy(n),this.schoolData&&this.schoolData.campuses&&this.schoolData.campuses.length&&this.schoolData.campuses.forEach((m,_)=>{e.includes(m.name)&&a.push(m._id)}),this.schoolData&&this.schoolData.levels&&this.schoolData.levels.length&&this.schoolData.levels.forEach((m,_)=>{n.includes(m.name)&&l.push(m._id)}),this.data?.selected?.length&&this.data?.selected?.forEach(m=>{m?.speciality_id?._id||(c=!0)});let g={school_id:this.schoolData&&this.schoolData._id?this.schoolData._id:null,campus:a,level:l,speciality_ids:i,is_no_speciality:c,scholar_season_id:this.scholarSeasonId?this.scholarSeasonId:""};return g?.speciality_ids?.length||delete g?.speciality_ids,g}clearLevel(){this.getDataCampus()}clearCampus(){this.campusList=[],this.realCampusList=[]}handleRemoveSchool(){0===this.volumeHoursForm.get("school_id").value.length&&this.clearCampus()}handleRemoveCampus(){0===this.volumeHoursForm.get("campus").value.length&&this.clearLevel()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(xt.Q),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(f.WI))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-connect-legal-entity-dialog"]],decls:34,vars:18,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"w-30","no-padding"],[2,"vertical-align","middle"],[1,"p-col-10","acad-title"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[3,"formGroup"],[1,"fontColor"],[1,"p-col-12","no-padding"],[1,"p-col-fixed","center-label","no-padding-left","label-align",2,"width","225px"],[1,"p-col","no-padding","custom-ng-select","mrgn-btn"],["bindLabel","legal_entity_name","bindValue","_id","formControlName","legal_entity_ids","clearAllText","Clear",3,"items","multiple","hideSelected","appendTo"],["style","color: #f44336; font-size: 75%; margin: 0",4,"ngIf"],["align","right"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],[2,"color","#f44336","font-size","75%","margin","0"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5,"add"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",7)(11,"button",8)(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(14,"form",9)(15,"div",10)(16,"mat-dialog-content")(17,"div",2)(18,"div",11)(19,"div",2)(20,"div",12)(21,"mat-label"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",13),t.\u0275\u0275element(25,"ng-select",14),t.\u0275\u0275template(26,Gi,3,3,"p",15),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(27,"mat-dialog-actions",16)(28,"button",17),t.\u0275\u0275text(29),t.\u0275\u0275pipe(30,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"button",18),t.\u0275\u0275listener("click",function(){return n.onValidate()}),t.\u0275\u0275text(32),t.\u0275\u0275pipe(33,"translate"),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,10,"Connect Legal Entity")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.volumeHoursForm),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(23,12,"Select Legal Entity"),"*"),t.\u0275\u0275advance(3),t.\u0275\u0275property("items",n.listOfLegalEntity)("multiple",!0)("hideSelected",!0)("appendTo","body"),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.volumeHoursForm.get("legal_entity_ids").hasError("required")&&n.volumeHoursForm.get("legal_entity_ids").touched),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(30,14,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(33,16,"Validate")," "))},dependencies:[d.O5,A.Zt,A.Bh,D.lW,f.ZT,f.xY,f.H8,B.Hw,T.hX,p.\u0275NgNoValidate,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,Y.w9,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mrgn-btn[_ngcontent-%COMP%]{margin-bottom:15px}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;margin-bottom:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.acad-title[_ngcontent-%COMP%]{padding:0;margin-right:25px}.w-30[_ngcontent-%COMP%]{padding-top:4px!important;margin-right:7px!important}.w-65[_ngcontent-%COMP%]{float:right;position:relative;right:-15px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.label-align[_ngcontent-%COMP%]{align-self:center}.border-white[_ngcontent-%COMP%]{border:1px solid rgb(116,116,116)}.flex-hidden-mr-1[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow:hidden;margin-right:1rem!important}.custom-ng-select[_ngcontent-%COMP%]     .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}.custom-ng-select[_ngcontent-%COMP%]     .mat-select-arrow-wrapper{padding-right:5px}.custom-ng-select[_ngcontent-%COMP%]     .mat-select-value-text{margin-left:10px;font-size:13px}.custom-ng-select[_ngcontent-%COMP%]     .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}.custom-input[_ngcontent-%COMP%]     .mat-form-field-infix{border-bottom:1px solid #8c8c8c!important}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}"]}),o})();var At=b(97679);function Yi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"must contain number only")))}function Qi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}let Xi=(()=>{class o{constructor(e,n,i,a,l,c){this.translate=e,this.fb=n,this.dialogRef=i,this.data=a,this.admissionEntrypointService=l,this.authService=c}ngOnInit(){this.initFormBuilder(),this.selectedId=this.data.selectedData.map(e=>e._id)}onWheel(e){e?.preventDefault()}initFormBuilder(){this.inducedForm=this.fb.group({induced_hours:[null,[p.Validators.required,p.Validators.pattern("^(?:\\d*(?:[.,]\\d{1,5})?|[.,]\\d{1,2})$")]],_id:[null]}),this.inducedForm.get("_id").patchValue(this.data.selectedData[0]._id),this.inducedForm.get("induced_hours").patchValue(this.data.selectedData[0].induced_hours_coefficient)}onSubmit(){if(this.inducedForm.invalid)return s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.inducedForm.markAllAsTouched(),!0;this.admissionEntrypointService.addInducedHoursCoefficient(this.selectedId,this.inducedForm.get("induced_hours").value).subscribe(e=>{s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},e=>{this.authService.postErrorLog(e),s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}decimalFilter(e){const i=e.target.value+String.fromCharCode(e.charCode);/^-?\d*[.,]?\d{0,5}$/.test(i)||e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(At.l),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-induced-hour-coefficient-dialog"]],decls:36,vars:16,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"w-30","no-padding"],[2,"vertical-align","middle"],[1,"p-col-10","acad-title"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[3,"formGroup"],[1,"fontColor"],[1,"p-col-12","no-padding"],[1,"p-col-fixed","center-label","no-padding-left","label-align",2,"width","225px"],[1,"p-col","no-padding","custom-input"],["floatLabel","never"],["matInput","","type","number","formControlName","induced_hours","required","",3,"wheel","keypress"],[4,"ngIf"],["align","right"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5,"add"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",7)(11,"button",8)(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(14,"form",9)(15,"div",10)(16,"mat-dialog-content")(17,"div",2)(18,"div",11)(19,"div",2)(20,"div",12)(21,"label"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",13)(25,"mat-form-field",14)(26,"input",15),t.\u0275\u0275listener("wheel",function(a){return n.onWheel(a)})("keypress",function(a){return n.decimalFilter(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(27,Yi,3,3,"mat-error",16),t.\u0275\u0275template(28,Qi,3,3,"mat-error",16),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(29,"mat-dialog-actions",17)(30,"button",18),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"button",19),t.\u0275\u0275listener("click",function(){return n.onSubmit()}),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,8,"Add Induced hours coefficient")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.inducedForm),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(23,10,"Induced hours coefficient"),"*"),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.inducedForm.get("induced_hours").hasError("pattern")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.inducedForm.get("induced_hours").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(32,12,"CANCEL")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!n.inducedForm.valid),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,14,"Submit")," "))},dependencies:[d.O5,A.Zt,A.Bh,D.lW,f.ZT,f.xY,f.H8,B.Hw,T.TO,T.KE,q.Nt,p.\u0275NgNoValidate,p.DefaultValueAccessor,p.NumberValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.RequiredValidator,p.FormGroupDirective,p.FormControlName,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mrgn-btn[_ngcontent-%COMP%]{margin-bottom:15px}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}.imgContainer[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.imgContainer[_ngcontent-%COMP%]{width:172px;height:200px;line-height:200px;text-align:center;overflow:hidden;position:relative;background-color:transparent}.text[_ngcontent-%COMP%]{width:165px;color:#fff;font-size:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;margin-left:0}.no-image[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;line-height:200px;color:#fff;text-align:center;cursor:pointer;width:173px}.overlay[_ngcontent-%COMP%]{position:absolute;height:200px;width:173px;bottom:0;opacity:0;transition:.5s ease;background-color:#2f2f2f!important;cursor:pointer}.logo-img-wrapper[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;text-align:center;overflow:hidden;position:relative;margin:auto auto auto 0;width:173px}.text-logo-section[_ngcontent-%COMP%]{width:200px;display:flex;justify-content:center}.buttonContainer[_ngcontent-%COMP%]{width:172px;text-align:center}.center-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto;padding:3px}.image-text[_ngcontent-%COMP%]{font-size:larger;font-weight:700;padding-top:1rem}.logo-spinner-wrapper[_ngcontent-%COMP%]{height:200px;width:173px;background-color:#6f6f6f;margin:auto;display:flex;align-items:center}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.specialization-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#4141cd;color:#fff;border-radius:4px;text-align:center;margin-top:5px}.level-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#ffd740;color:#000;border-radius:4px;text-align:center;margin-top:5px}.icon-mat-change[_ngcontent-%COMP%]{font-size:14px;display:inline-block;position:relative;top:2px}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;margin-bottom:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.acad-title[_ngcontent-%COMP%]{padding:0;margin-right:25px}.w-30[_ngcontent-%COMP%]{padding-top:4px!important;margin-right:7px!important}.w-65[_ngcontent-%COMP%]{float:right;position:relative;right:-38px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.label-align[_ngcontent-%COMP%]{align-self:center}.border-white[_ngcontent-%COMP%]{border:1px solid rgb(116,116,116)}.flex-hidden-mr-1[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow:hidden;margin-right:1rem!important}[_nghost-%COMP%]  .ng-select .ng-select-container{height:36px;border-left:0px!important;border-right:0px!important;border-top:0px!important;border-radius:0!important}"]}),o})();function Ji(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"must contain number only")))}function Zi(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}let to=(()=>{class o{constructor(e,n,i,a,l,c){this.translate=e,this.fb=n,this.dialogRef=i,this.data=a,this.admissionEntrypointService=l,this.authService=c}ngOnInit(){this.initFormBuilder(),this.selectedId=this.data.selectedData.map(e=>e._id)}initFormBuilder(){this.paidForm=this.fb.group({paid_leave:[null,[p.Validators.required,p.Validators.pattern("^(?:\\d*(?:[.,]\\d{1,2})?|[.,]\\d{1,2})$")]],_id:[null]}),this.paidForm.get("_id").patchValue(this.data.selectedData[0]._id),this.paidForm.get("paid_leave").patchValue(this.data.selectedData[0].paid_leave_allowance_rate)}onWheel(e){e?.preventDefault()}onSubmit(){if(console.log(this.paidForm.controls),console.log(this.paidForm.value),this.paidForm.invalid)return s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.paidForm.markAllAsTouched(),!0;this.admissionEntrypointService.addPaidLeaveAllowance(this.selectedId,this.paidForm.get("paid_leave").value).subscribe(e=>{console.log(e),s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},e=>{this.authService.postErrorLog(e),s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}decimalFilter(e){const i=e.target.value+String.fromCharCode(e.charCode);/^-?\d*[.,]?\d{0,2}$/.test(i)||e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(At.l),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-paid-leave-allowance-dialog"]],decls:36,vars:16,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"w-30","no-padding"],[2,"vertical-align","middle"],[1,"p-col-10","acad-title"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[3,"formGroup"],[1,"fontColor"],[1,"p-col-12","no-padding"],[1,"p-col-fixed","center-label","no-padding-left","label-align",2,"width","225px"],[1,"p-col","no-padding","custom-input"],["floatLabel","never"],["matInput","","type","number","formControlName","paid_leave","required","",3,"wheel","keypress"],[4,"ngIf"],["align","right"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5,"add"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",7)(11,"button",8)(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(14,"form",9)(15,"div",10)(16,"mat-dialog-content")(17,"div",2)(18,"div",11)(19,"div",2)(20,"div",12)(21,"label"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(24,"div",13)(25,"mat-form-field",14)(26,"input",15),t.\u0275\u0275listener("wheel",function(a){return n.onWheel(a)})("keypress",function(a){return n.decimalFilter(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(27,Ji,3,3,"mat-error",16),t.\u0275\u0275template(28,Zi,3,3,"mat-error",16),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(29,"mat-dialog-actions",17)(30,"button",18),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"button",19),t.\u0275\u0275listener("click",function(){return n.onSubmit()}),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,8,"Add Paid leave allowance rate")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.paidForm),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(23,10,"Paid leave allowance rate"),"*"),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.paidForm.get("paid_leave").hasError("pattern")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.paidForm.get("paid_leave").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(32,12,"CANCEL")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!n.paidForm.valid),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,14,"Submit")," "))},dependencies:[d.O5,A.Zt,A.Bh,D.lW,f.ZT,f.xY,f.H8,B.Hw,T.TO,T.KE,q.Nt,p.\u0275NgNoValidate,p.DefaultValueAccessor,p.NumberValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.RequiredValidator,p.FormGroupDirective,p.FormControlName,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mrgn-btn[_ngcontent-%COMP%]{margin-bottom:15px}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}.imgContainer[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.imgContainer[_ngcontent-%COMP%]{width:172px;height:200px;line-height:200px;text-align:center;overflow:hidden;position:relative;background-color:transparent}.text[_ngcontent-%COMP%]{width:165px;color:#fff;font-size:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;margin-left:0}.no-image[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;line-height:200px;color:#fff;text-align:center;cursor:pointer;width:173px}.overlay[_ngcontent-%COMP%]{position:absolute;height:200px;width:173px;bottom:0;opacity:0;transition:.5s ease;background-color:#2f2f2f!important;cursor:pointer}.logo-img-wrapper[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;text-align:center;overflow:hidden;position:relative;margin:auto auto auto 0;width:173px}.text-logo-section[_ngcontent-%COMP%]{width:200px;display:flex;justify-content:center}.buttonContainer[_ngcontent-%COMP%]{width:172px;text-align:center}.center-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto;padding:3px}.image-text[_ngcontent-%COMP%]{font-size:larger;font-weight:700;padding-top:1rem}.logo-spinner-wrapper[_ngcontent-%COMP%]{height:200px;width:173px;background-color:#6f6f6f;margin:auto;display:flex;align-items:center}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.specialization-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#4141cd;color:#fff;border-radius:4px;text-align:center;margin-top:5px}.level-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#ffd740;color:#000;border-radius:4px;text-align:center;margin-top:5px}.icon-mat-change[_ngcontent-%COMP%]{font-size:14px;display:inline-block;position:relative;top:2px}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;margin-bottom:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.acad-title[_ngcontent-%COMP%]{padding:0;margin-right:25px}.w-30[_ngcontent-%COMP%]{padding-top:4px!important;margin-right:7px!important}.w-65[_ngcontent-%COMP%]{float:right;position:relative;right:-38px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.label-align[_ngcontent-%COMP%]{align-self:center}.border-white[_ngcontent-%COMP%]{border:1px solid rgb(116,116,116)}.flex-hidden-mr-1[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow:hidden;margin-right:1rem!important}[_nghost-%COMP%]  .ng-select .ng-select-container{height:36px;border-left:0px!important;border-right:0px!important;border-top:0px!important;border-radius:0!important}"]}),o})();var ct=b(47957);function eo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",51),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.onAddPaidLeaveAllowanceRateCheckbox(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Add Paid leave allowance rate")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Add Paid leave allowance rate")," "))}function no(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",51),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllIdForAddInductedHours(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Add Induced hours coefficient")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Add Induced hours coefficient")," "))}function io(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",52),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllDataForCheckboxConnectLegal(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Connect Legal Entity")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Connect Legal Entity")," "))}function oo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",53),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllIdForCheckbox(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",54),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Export")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"Export")," ")}}function ao(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",53),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.resetTable())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",55),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,4,"RESET")),t.\u0275\u0275property("disabled",e.isWaitingForResponse)("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,6,"RESET")," ")}}function lo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",43)(1,"div",44)(2,"div",45)(3,"button",46),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"mat-menu",null,47),t.\u0275\u0275template(11,eo,4,6,"button",48),t.\u0275\u0275template(12,no,4,6,"button",48),t.\u0275\u0275template(13,io,4,6,"button",49),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(14,oo,5,7,"button",50),t.\u0275\u0275template(15,ao,5,8,"button",50),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275reference(10),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(4,9,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,11,"Action")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.paidAllowanceRateIntakeChannelSchoolLegalTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.inducedHoursIntakeChannelSchoolLegalTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.connectLegalEntityIntakeChannelSchoolLegalTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.exportCsvIntakeChannelSchoolLegalTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.resetIntakeChannelSchoolLegalTabPerm())}}function ro(o,r){1&o&&t.\u0275\u0275element(0,"th",56)}function so(o,r){1&o&&t.\u0275\u0275element(0,"th",57)}function co(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function po(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function mo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",57)(1,"mat-form-field",58)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",59),t.\u0275\u0275template(6,co,3,4,"mat-option",60),t.\u0275\u0275template(7,po,2,2,"mat-option",61),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"search")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.campusFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.campusList&&(null==e.campusList?null:e.campusList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.campusList)}}function ho(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function go(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function _o(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",57)(1,"mat-form-field",58)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",59),t.\u0275\u0275template(6,ho,3,4,"mat-option",60),t.\u0275\u0275template(7,go,2,2,"mat-option",61),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"search")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.levelFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.levelList&&(null==e.levelList?null:e.levelList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.levelList)}}function uo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllM")))}function fo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function Co(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",57)(1,"mat-form-field")(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",59),t.\u0275\u0275template(6,uo,3,4,"mat-option",60),t.\u0275\u0275template(7,fo,2,2,"mat-option",61),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"search")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.sectorFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sectorListFilter&&(null==e.sectorListFilter?null:e.sectorListFilter.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sectorListFilter)}}function bo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllM")))}function xo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",62),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function vo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",57)(1,"mat-form-field")(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",59),t.\u0275\u0275template(6,bo,3,4,"mat-option",60),t.\u0275\u0275template(7,xo,2,2,"mat-option",61),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"search")),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.specialityFilter),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialityListFilter&&(null==e.specialityListFilter?null:e.specialityListFilter.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.specialityListFilter)}}function Oo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.legalEntitySelected(null==a?null:a._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.legal_entity_name),t.\u0275\u0275property("value",null==e?null:e.legal_entity_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.legal_entity_name," ")}}function yo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",57)(1,"mat-form-field"),t.\u0275\u0275element(2,"input",63),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-autocomplete",64,65)(6,"mat-option",66),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.legalEntitySelected("AllS"))}),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,Oo,2,3,"mat-option",67),t.\u0275\u0275pipe(10,"async"),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275reference(5),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,7,"search")),t.\u0275\u0275property("formControl",n.legalFilterCtrl)("matAutocomplete",e),t.\u0275\u0275advance(2),t.\u0275\u0275property("panelWidth","fit")("displayWith",n.displayWithLegal.bind(n)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(8,9,"AllM")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(10,11,n.legallFiltered))}}function So(o,r){1&o&&t.\u0275\u0275element(0,"th",57)}function Po(o,r){1&o&&t.\u0275\u0275element(0,"th",57)}function Mo(o,r){1&o&&t.\u0275\u0275element(0,"th",57)}function wo(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",56)(1,"mat-checkbox",69),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?a.masterToggle():null)})("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.showOptions("all",""))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",e.selection.hasValue()&&e.isAllSelected()||e.isCheckedAll)("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function To(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",70)(1,"mat-checkbox",71),t.\u0275\u0275listener("click",function(i){return i.stopPropagation()})("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?c.selection.toggle(l._id):null)})("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.showOptions("one",a))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",n.selection.isSelected(e._id)||n.isCheckedAll&&!n.dataUnselectUser.includes(null==e?null:e._id))("aria-label",n.checkboxLabel(e))}}function ko(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Scholar season")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Scholar season")," "))}function Io(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.school),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==n.scholarSeason?null:n.scholarSeason.scholar_season," ")}}function Eo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ADMISSION.TABLE_ADMISSION_CHANNEL.Schools")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"ADMISSION.TABLE_ADMISSION_CHANNEL.Schools")," "))}function Do(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",75),t.\u0275\u0275text(1,"error"),t.\u0275\u0275elementEnd())}function Fo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Do,2,0,"mat-icon",74),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.school),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.school," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.school))}}function Ao(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",76),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ADMISSION.TABLE_ADMISSION_CHANNEL.Campus")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"ADMISSION.TABLE_ADMISSION_CHANNEL.Campus")," "))}function Bo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",75),t.\u0275\u0275text(1,"error"),t.\u0275\u0275elementEnd())}function No(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Bo,2,0,"mat-icon",74),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.campus),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.campus," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.campus))}}function Lo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",77),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ADMISSION.TABLE_ADMISSION_CHANNEL.Level")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"ADMISSION.TABLE_ADMISSION_CHANNEL.Level")," "))}function Vo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",75),t.\u0275\u0275text(1,"error"),t.\u0275\u0275elementEnd())}function Ro(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275template(2,Vo,2,0,"mat-icon",74),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.level),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.level," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.level))}}function Uo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",78),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Sector")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"Sector")," "))}function Ho(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.sector_id?null:e.sector_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.sector_id?null:e.sector_id.name," ")}}function Ko(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",78),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Speciality")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,4,"Speciality")," "))}function Wo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.speciality_id?null:e.speciality_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.speciality_id?null:e.speciality_id.name," ")}}function jo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5",79),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ADMISSION.TABLE_LEGAL_ENTITIES.Legal Entity")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ADMISSION.TABLE_LEGAL_ENTITIES.Legal Entity")))}function $o(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",82),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.legal_entity_name)}}function qo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-icon",83),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2,"error"),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"NOT RECORD FOUND"))}function Go(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275template(1,$o,3,1,"ng-container",80),t.\u0275\u0275template(2,qo,3,3,"mat-icon",81),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("matTooltip",n.renderTooltipEntity(null==e?null:e.legal_entities_id)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.getUniqueLegals(null==e?null:e.legal_entities_id)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==e||null==e.legal_entities_id?null:e.legal_entities_id.length)<1)}}function zo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Paid leave allowance rate")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Paid leave allowance rate")))}function Yo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e?null:e.paid_leave_allowance_rate),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.paid_leave_allowance_rate," ")}}function Qo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",72),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Induced hours coefficient")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Induced hours coefficient")))}function Xo(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",73),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e?null:e.induced_hours_coefficient),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.induced_hours_coefficient," ")}}function Jo(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",84)(1,"div",85),t.\u0275\u0275element(2,"mat-spinner",86),t.\u0275\u0275elementEnd()())}function Zo(o,r){1&o&&t.\u0275\u0275element(0,"tr",87)}function ta(o,r){1&o&&t.\u0275\u0275element(0,"tr",87)}function ea(o,r){1&o&&t.\u0275\u0275element(0,"tr",87)}function na(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",88),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function ia(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",89),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function oa(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",90),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"No record of Accounting")," "))}function aa(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",91)(1,"div",91),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",91),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",91),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",91),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",91)(14,"mat-form-field",92)(15,"input",93),t.\u0275\u0275listener("ngModelChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.exportName=i)}),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(17,"button",94),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.onDataExport())}),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,7,"Export Text1")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,9,"Export Text2")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,11,"Export Text3")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(12,13,"Export Text4")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(16,15,"ExportName")),t.\u0275\u0275property("ngModel",e.exportName),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,17,"OK")," ")}}function la(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",95),t.\u0275\u0275element(1,"mat-spinner",96),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}const ra=function(){return["reset"]},sa=function(){return["loading"]},ca=function(o){return{hide:o}},da=function(o){return{"hide-pagination-buttons":o}},pa=function(){return[10]};let ma=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u,y,P,N){this.dialog=e,this.financeService=n,this.exportCsvService=i,this.translateService=a,this.pageTitleService=l,this.admissionService=c,this.router=g,this.userService=m,this.intakeService=_,this.permission=u,this.utilService=y,this.httpClient=P,this.filterBreadCrumbService=N,this.dataSource=new S.by([]),this.displayedColumns=["select","scholarSeason","school","campus","level","sector","speciality","legalEntity","paidLeaveAllowanceRate","inducedHoursCoefficient"],this.filterColumns=["selectFilter","scholarSeasonFilter","schoolFilter","campusFilter","levelFilter","sectorFilter","specialityFilter","legalEntityFilter","paidLeaveAllowanceRateFilter","inducedHoursCoefficientFilter"],this.filteredValues={school:[],campus:[],level:[],scholar_season_ids:[],name:"",sector:[],speciality:[],sectors:[],specialties:[],legal_entity_id:null},this.isReset=!1,this.dataLoaded=!1,this.sortValue=null,this.isWaitingForResponse=!1,this.isLoading=!1,this.dataCount=0,this.subs=new F.Y,this.registrationProfileFilter=new p.UntypedFormControl(""),this.discountFilter=new p.UntypedFormControl(""),this.descriptionFilter=new p.UntypedFormControl(""),this.selection=new ft.Ov(!0,[]),this.isCheckedAll=!1,this.disabledExport=!0,this.userSelected=[],this.userSelectedId=[],this.allInternshipId=[],this.schoolsFilter=new p.UntypedFormControl(["All"]),this.campusFilter=new p.UntypedFormControl(["All"]),this.levelFilter=new p.UntypedFormControl(["All"]),this.sectorFilter=new p.UntypedFormControl(["All"]),this.specialityFilter=new p.UntypedFormControl(["All"]),this.sectorFilterCtrl=new p.UntypedFormControl(null),this.sectorListFilter=[],this.specialityFilterCtrl=new p.UntypedFormControl(null),this.specialityListFilter=[],this.legalFilterCtrl=new p.UntypedFormControl("All"),this.legalListFilter=[],this.analyticFilterCtrl=new p.UntypedFormControl(null),this.analyticListFilter=[],this.accountingAccountFilterCtrl=new p.UntypedFormControl(null),this.accountingAccountListFilter=[],this.isSelectAllSchool=!0,this.isSelectAllCampous=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.allStudentForCheckbox=[],this.dataSelected=[],this.pageSelected=[],this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[],this.allDataForAddInductedHours=[],this.allDataForCheckboxConnectLegal=[],this.filterBreadcrumbData=[]}ngOnInit(){this.translateService.onLangChange.subscribe(e=>{this.resetTable(),this.displayWithLegal(this.legalFilterCtrl.value)}),this.scholarSeason&&this.scholarSeason._id&&(this.scholarId=this.scholarSeason._id,this.filteredValues.scholar_season_ids=this.scholarSeason._id),this.scholarSeasons=this.scholarSeason&&this.scholarSeason.scholar_season?this.scholarSeason.scholar_season:"",this.subs.sink=this.router.paramMap.subscribe(e=>{this.schoolId=e.get("id")}),this.initUser(),this.schoolId&&this.getSchoolData()}initUser(){this.isPermission=this.userService.getPermission(),this.currentUser=this.userService.getLocalStorageUser();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id}getSchoolData(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetOneSchoolLegal(this.schoolId,this.scholarId).subscribe(e=>{e&&(this.schoolData=h.cloneDeep(e),this.short_name=e.short_name,this.schoolData&&(this.getAccountingData("getSchoolData"),this.getAllFilterDropdown()))},e=>{this.userService.postErrorLog(e),this.isWaitingForResponse=!1,e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translateService.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translateService.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnDestroy(){this.subs.unsubscribe()}getAccountingData(e){this.isWaitingForResponse=!0;const n={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0};let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.GetAdmissionIntakeData(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.dataSource.data=a,this.paginator.length=a[0].count_document,this.dataCount=a[0].count_document,this.getDataForList()):(this.dataSource.data=[],this.paginator.length=0,this.dataCount=0),this.filterBreadcrumbFormat(),this.disabledExport=!0,this.noData=this.dataSource.connect().pipe((0,nt.U)(l=>0===l.length)),this.isReset=!1,this.isWaitingForResponse=!1},a=>{this.userService.postErrorLog(a),this.disabledExport=!0,this.noData=this.dataSource.connect().pipe((0,nt.U)(l=>0===l.length)),this.isReset=!1,this.isWaitingForResponse=!1,a&&a.message&&(a.message.includes("jwt expired")||a.message.includes("str & salt required")||a.message.includes("Authorization header is missing")||a.message.includes("salt"))?this.userService.handlerSessionExpired():a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}getDataForList(){this.subs.sink=this.admissionService.GetOneCandidateSchool(this.schoolId,this.scholarId).subscribe(e=>{e&&(this.listObjective=[e],this.schoolList=this.listObjective,this.getDataCampus())},e=>{this.userService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:e&&e.message?this.translateService.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translateService.instant("OK")})})}getDataCampus(){if(this.levelList=[],this.campusList=[],this.schoolsFilter.value&&!this.schoolsFilter.value.includes("All")){const n=this.schoolsFilter.value;this.listObjective.filter(a=>n.includes(a.short_name)).filter((a,l)=>{a.campuses&&a.campuses.length&&a.campuses.filter((c,g)=>{this.campusList.push(c)})}),this.getDataLevel()}else this.listObjective.filter((n,i)=>{n.campuses&&n.campuses.length&&n.campuses.filter((a,l)=>{this.campusList.push(a)})}),this.getDataLevel();this.campusList=h.uniqBy(this.campusList,"name"),this.campusList=this.campusList.sort((n,i)=>n.name.toLowerCase().localeCompare(i.name.toLowerCase()))}getDataLevel(){this.levelList=[];const e=this.campusFilter.value;this.campusFilter?.value?.length&&!e.includes("All")?this.campusList.filter(i=>e.includes(i.name)).forEach(i=>{i.levels.forEach(a=>{this.levelList.push(a)})}):this.campusList.forEach(n=>{n.levels.forEach(i=>{this.levelList.push(i)})}),this.levelList=h.uniqBy(this.levelList,"name"),this.levelList=this.levelList.sort((n,i)=>n.name.toLowerCase().localeCompare(i.name.toLowerCase()))}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,Z.O)(null),(0,ht.b)(()=>{!this.isReset&&this.schoolData&&this.getAccountingData("ngAfterViewInit"),this.dataLoaded=!0})).subscribe()}sortData(e){this.sortValue=e.active?{[e.active]:e.direction?e.direction:"asc"}:null,this.dataLoaded&&(this.paginator.pageIndex=0,this.isReset||this.getAccountingData())}resetTable(){this.isReset=!0,this.selection.clear(),this.dataSelected=[],this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[],this.allDataForCheckboxConnectLegal=[],this.allDataForAddInductedHours=[],this.isCheckedAll=!1,this.paginator.pageIndex=0,this.sort.sort({id:"",start:"asc",disableClear:!1}),this.filteredValues={school:[],campus:[],level:[],scholar_season_ids:this.scholarId,name:"",sector:[],speciality:[],sectors:[],specialties:[],legal_entity_id:null},this.disabledExport=!0,this.schoolsFilter.setValue(["All"],{emitEvent:!1}),this.campusFilter.setValue(["All"],{emitEvent:!1}),this.levelFilter.setValue(["All"],{emitEvent:!1}),this.sectorFilter.setValue(["All"],{emitEvent:!1}),this.specialityFilter.setValue(["All"],{emitEvent:!1}),this.sectorFilterCtrl.setValue(null),this.specialityFilterCtrl.setValue(null),this.analyticFilterCtrl.setValue(null),this.legalFilterCtrl.setValue("All"),this.accountingAccountFilterCtrl.setValue(null),this.sort.direction="",this.sort.active="",this.sortValue=null,this.isSelectAllSchool=!0,this.isSelectAllCampous=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.getAccountingData(),this.legallFiltered=(0,ut.of)(this.legalListFilter),this.filterBreadcrumbData=[]}cleanFilterData(){const e=h.cloneDeep(this.filteredValues);let n="";return Object.keys(e).forEach(i=>{(e[i]||!1===e[i])&&(n+=` ${i}:"${e[i]}"`)}),n}setFilterSelected(e){switch(e){case"campus":if(this.isSelectAllCampous)this.selectAll("campus");else{const n=h.cloneDeep(this.campusFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllCampous=!0,this.selectAll("campus");else{this.isSelectAllCampous=!1,this.campusFilter.setValue(i);const l=this.campusFilter.value;this.filteredValues.campus=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAccountingData()}}break;case"level":if(this.isSelectAllLevel)this.selectAll("level");else{this.isSelectAllLevel=!1;const n=h.cloneDeep(this.levelFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllLevel=!0,this.selectAll("level");else{this.levelFilter.setValue(i);const l=this.levelFilter.value;this.filteredValues.level=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAccountingData()}}break;case"sector":if(this.isSelectAllSector)this.selectAll("sector");else{const n=h.cloneDeep(this.sectorFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllSector=!0,this.selectAll("sector");else{this.isSelectAllSector=!1,this.sectorFilter.setValue(i);const l=this.sectorFilter.value;this.filteredValues.sectors=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAccountingData()}}break;case"speciality":if(this.isSelectAllSpeciality)this.selectAll("speciality");else{const n=h.cloneDeep(this.specialityFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllSpeciality=!0,this.selectAll("speciality");else{this.isSelectAllSpeciality=!1,this.specialityFilter.setValue(i);const l=this.specialityFilter.value;this.filteredValues.specialties=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAccountingData()}}}}selectAll(e){const n=["All"];if("campus"===e){if(this.campusList&&this.campusList.length)if(this.isSelectAllCampous){this.isSelectAllCampous=!1;const i=[];h.cloneDeep(this.campusFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.campus=i&&i.length>0?i:null,this.campusFilter.setValue(i)}else this.isSelectAllCampous=!0,this.campusFilter.setValue(n),this.filteredValues.campus=null;else this.campusFilter?(this.campusFilter.setValue(n),this.isSelectAllCampous=!this.isSelectAllCampous):(this.campusFilter.setValue(null),this.isSelectAllCampous=!this.isSelectAllCampous);this.paginator.pageIndex=0,this.getAccountingData()}else if("level"===e){if(this.levelList&&this.levelList.length)if(this.isSelectAllLevel){this.isSelectAllLevel=!1;const i=[];h.cloneDeep(this.levelFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.level=i&&i.length>0?i:null,this.levelFilter.setValue(i)}else this.isSelectAllLevel=!0,this.levelFilter.setValue(n),this.filteredValues.level=null;else this.levelFilter?(this.levelFilter.setValue(n),this.isSelectAllLevel=!this.isSelectAllLevel):(this.levelFilter.setValue(null),this.isSelectAllLevel=!this.isSelectAllLevel);this.paginator.pageIndex=0,this.getAccountingData()}else if("sector"===e){if(this.sectorListFilter&&this.sectorListFilter.length)if(this.isSelectAllSector){this.isSelectAllSector=!1;const i=[];h.cloneDeep(this.sectorFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.sectors=i&&i.length>0?i:null,this.sectorFilter.setValue(i)}else this.isSelectAllSector=!0,this.sectorFilter.setValue(n),this.filteredValues.sectors=null;else this.sectorFilter?(this.sectorFilter.setValue(n),this.isSelectAllSector=!this.isSelectAllSector):(this.sectorFilter.setValue(null),this.isSelectAllSector=!this.isSelectAllSector);this.paginator.pageIndex=0,this.getAccountingData()}else if("speciality"===e){if(this.specialityListFilter&&this.specialityListFilter.length)if(this.isSelectAllSpeciality){this.isSelectAllSpeciality=!1;const i=[];h.cloneDeep(this.specialityFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.specialties=i&&i.length>0?i:null,this.specialityFilter.setValue(i)}else this.isSelectAllSpeciality=!0,this.specialityFilter.setValue(n),this.filteredValues.specialties=null;else this.specialityFilter?(this.specialityFilter.setValue(n),this.isSelectAllSpeciality=!this.isSelectAllSpeciality):(this.specialityFilter.setValue(null),this.isSelectAllSpeciality=!this.isSelectAllSpeciality);this.paginator.pageIndex=0,this.getAccountingData()}}renderTooltipEntity(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a.legal_entity_name&&(n+=", ",n+=a.legal_entity_name):a.legal_entity_name&&(n+=a.legal_entity_name);return n}renderTooltipEntityAccounting(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a.account_number&&(n+=", ",n+=a.account_number):a.account_number&&(n+=a.account_number);return n}renderTooltipEntityAnalytical(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a.analytical_code&&(n+=", ",n+=a.analytical_code):a.analytical_code&&(n+=a.analytical_code);return n}renderTooltipEntityProgram(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a&&(n+=", ",n+=a):a&&(n+=a);return n}renderTooltipEntityAdditional(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a.additional_cost&&(n+=", ",n+=a.additional_cost):a.additional_cost&&(n+=a.additional_cost);return n}deleteProfileRate(e){let n=3;s().fire({title:this.translateService.instant("DELETE_ITEM_TEMPLATE.TITLE"),html:this.translateService.instant("CONFIRMDELETE",{value:e.name?e.name:""}),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translateService.instant("THUMBSUP.SWEET_ALERT.CONFIRM",{timer:n}),cancelButtonText:this.translateService.instant("DASHBOARD_DELETE.NO"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{s().disableConfirmButton();const i=s().getConfirmButton(),a=setInterval(()=>{n-=1,i.innerText=this.translateService.instant("DELETE_ITEM_TEMPLATE.BUTTON_1")+` (${n})`},1e3);this.timeOutVal=setTimeout(()=>{i.innerText=this.translateService.instant("DELETE_ITEM_TEMPLATE.BUTTON_1"),s().enableConfirmButton(),clearInterval(a),clearTimeout(this.timeOutVal)},1e3*n)}}).then(i=>{clearTimeout(this.timeOutVal),i.value&&(this.subs.sink=this.financeService.DeleteProfilRate(e._id).subscribe(a=>{s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.getAccountingData()})},a=>{this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})}))})}getAllExportData(e){this.isLoading=!0;const n={limit:500,page:e};let i="";i+=this.filteredValues.school&&this.filteredValues.school.length&&this.filteredValues.school[0]?" school : "+JSON.stringify(this.filteredValues.school):"",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.GetAdmissionIntakeData(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allInternshipId.push(...a),this.getAllExportData(e+1)):(this.isLoading=!1,this.exportAllData(this.allInternshipId))},a=>{this.userService.postErrorLog(a),this.isLoading=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}onDataExport(){if(this.allInternshipId=[],"one"===this.selectType){const e=[];if(this.dataSelected.length){for(const g of this.dataSelected){let m="",_="",u="";for(const N of g.legal_entities_id)m=m?m+", "+(N.name?N.name:""):N.name?N.name:"";for(const N of g.analytical_code_id)_=_?_+", "+(N.analytical_code?N.analytical_code:""):N.analytical_code?N.analytical_code:"";for(const N of g.accounting_account_id)u=u?u+", "+(N.account_number?N.account_number:""):N.account_number?N.account_number:"";const P=[];P[0]=g.school,P[1]=g.campus,P[2]=g.level,P[3]=g.sector_id.name,P[4]=m||"-",P[5]=_||"-",P[6]=u||"-",e.push(P)}const n={values:e},i=j().format("DD-MM-YYYY");this.exportCsvService.createAndUpdateSpreadsheet(n,this.exportName+"_"+i,{spreadsheetId:"1-IfKljcWkHYOhslgEAeeIMHQYL43gY3etW_WK-igBpY",sheetId:"en"===this.translateService.currentLang?0:575276114,range:"A7"})}s().close()}else this.getAllExportData(0)}exportAllData(e){const n=e,i=[];if(n&&n.length){for(const _ of n){let u="",y="",P="";for(const w of _.legal_entities_id)u=u?u+", "+(w.name?w.name:""):w.name?w.name:"";for(const w of _.analytical_code_id)y=y?y+", "+(w.analytical_code?w.analytical_code:""):w.analytical_code?w.analytical_code:"";for(const w of _.accounting_account_id)P=P?P+", "+(w.account_number?w.account_number:""):w.account_number?w.account_number:"";const M=[];M[0]=_.school,M[1]=_.campus,M[2]=_.level,M[3]=_.sector_id.name,M[4]=u||"-",M[5]=y||"-",M[6]=P||"-",i.push(M)}const a={values:i},l=j().format("DD-MM-YYYY");this.exportCsvService.createAndUpdateSpreadsheet(a,this.exportName+"_"+l,{spreadsheetId:"1-IfKljcWkHYOhslgEAeeIMHQYL43gY3etW_WK-igBpY",sheetId:"en"===this.translateService.currentLang?0:575276114,range:"A7"})}s().close()}getAllDataForCheckboxConnectLegal(e){if(this.isCheckedAll){0===e&&(this.allDataForCheckboxConnectLegal=[],this.dataSelected=[]);const n={limit:500,page:e};this.isLoading=!0;let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.getAllDataIntakeChannelsForConnectLegal(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allDataForCheckboxConnectLegal.push(...a),this.getAllDataForCheckboxConnectLegal(e+1)):(this.isLoading=!1,this.isCheckedAll&&this.allDataForCheckboxConnectLegal&&this.allDataForCheckboxConnectLegal.length&&(this.dataSelected=this.allDataForCheckboxConnectLegal.filter(l=>!this.dataUnselectUser.includes(l._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.onOpenConnectLegalEntity()))},a=>{this.isReset=!1,this.isLoading=!1,this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}else this.onOpenConnectLegalEntity()}onOpenConnectLegalEntity(){this.dataSelected.length<1?s().fire({type:"info",title:this.translateService.instant("Followup_S8.Title"),html:this.translateService.instant("Followup_S8.Text",{menu:this.translateService.instant("School-Tab.Legal")}),confirmButtonText:this.translateService.instant("Followup_S8.Button")}):this.subs.sink=this.dialog.open(zi,{width:"600px",minHeight:"100px",disableClose:!0,data:{scholar:this.scholarSeason,school:this.schoolData,selected:this.dataSelected}}).afterClosed().subscribe(e=>{e&&(this.getAccountingData(),this.getAllFilterDropdown(),this.clearSelectIfFilter())})}sectorSelected(e){if(e&&"AllS"!==e){const n=[];n.push(e),this.filteredValues.sector=n,this.getAccountingData()}else this.filteredValues.sector=[],this.getAccountingData()}specialitySelected(e){if(e&&"AllS"!==e){const n=[];n.push(e),this.filteredValues.speciality=n,this.getAccountingData()}else this.filteredValues.speciality=[],this.getAccountingData()}legalEntitySelected(e){e&&"AllS"!==e?(this.filteredValues.legal_entity_id=e,this.getAccountingData("legal entity select if")):(this.filteredValues.legal_entity_id=null,this.legallFiltered=(0,ut.of)(this.legalListFilter),this.getAccountingData("legal entity select else"))}getAllFilterDropdown(){this.subs.sink=this.financeService.GetAllSectorsDropdown({scholar_season_id:this.scholarId,candidate_school_ids:[this.schoolId]}).subscribe(n=>{n&&(this.sectorListFilter=n,this.sectorListFilter=this.sectorListFilter.sort((i,a)=>i.name.toLowerCase().localeCompare(a.name.toLowerCase())),this.sectorlFiltered=this.sectorFilterCtrl.valueChanges.pipe((0,Z.O)(""),(0,nt.U)(i=>i?this.sectorListFilter.filter(a=>!!a&&a.name.toLowerCase().includes(i.toLowerCase())).sort((a,l)=>a.name.localeCompare(l.name)):this.sectorListFilter.sort((a,l)=>a.name.localeCompare(l.name)))))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:n&&n.message?this.translateService.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})}),this.subs.sink=this.financeService.getSpecialityIntakeChannelDropDown(this.schoolId,this.scholarId).subscribe(n=>{n&&(this.specialityListFilter=n,this.specialityListFilter=this.specialityListFilter.sort((i,a)=>i.name.toLowerCase().localeCompare(a.name.toLowerCase())),this.specialityFiltered=this.specialityFilterCtrl.valueChanges.pipe((0,Z.O)(""),(0,nt.U)(i=>i?this.specialityListFilter.filter(a=>!!a&&a.name.toLowerCase().includes(i.toLowerCase())).sort((a,l)=>a.name.localeCompare(l.name)):this.specialityListFilter.sort((a,l)=>a.name.localeCompare(l.name)))))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:n&&n.message?this.translateService.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})}),this.subs.sink=this.financeService.getAllLegalEntityByScholar(this.scholarId).subscribe(n=>{n&&(this.legalListFilter=n,this.legalListFilter=this.legalListFilter.sort((i,a)=>this.utilService.simplifyRegex(i.legal_entity_name).localeCompare(this.utilService.simplifyRegex(a.legal_entity_name))),this.legallFiltered=(0,ut.of)(this.legalListFilter),this.subs.sink=this.legalFilterCtrl.valueChanges.subscribe(i=>{if(i&&"string"==typeof i){const a=this.legalListFilter.filter(l=>{if(l?.legal_entity_name)return this.utilService.simplifyRegex(l?.legal_entity_name).includes(this.utilService.simplifyRegex(i))});this.legallFiltered=(0,ut.of)(a)}}))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:n&&n.message?this.translateService.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})}),this.subs.sink=this.financeService.GetAllAnalyticalCodes(this.scholarId).subscribe(n=>{n&&(this.analyticListFilter=n,this.analyticlFiltered=this.analyticFilterCtrl.valueChanges.pipe((0,Z.O)(""),(0,nt.U)(i=>i?this.analyticListFilter.filter(a=>!!a&&a.analytical_code.toLowerCase().includes(i.toLowerCase())):this.analyticListFilter)))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:n&&n.message?this.translateService.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})}),this.subs.sink=this.financeService.GetAllAccountingAccounts(this.scholarId).subscribe(n=>{n&&(this.accountingAccountListFilter=n,this.accountingAccountlFiltered=this.accountingAccountFilterCtrl.valueChanges.pipe((0,Z.O)(""),(0,nt.U)(i=>i?this.accountingAccountListFilter.filter(a=>!!a&&a.account_number.toLowerCase().includes(i.toLowerCase())):this.accountingAccountListFilter)))},n=>{this.userService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:n&&n.message?this.translateService.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translateService.instant("OK")})})}displayWithLegal(e){if(e){if("All"===e)return this.translateService.instant("All");const n=this.legalListFilter.find(i=>i._id.toLowerCase().trim().includes(e));return n?n.legal_entity_name:e}return e}displayWithAnalytical(e){if(e){const n=this.analyticListFilter.find(i=>i._id.toLowerCase().trim().includes(e));return n?n.analytical_code:e}return e}displayWithAccount(e){if(e){const n=this.accountingAccountListFilter.find(i=>i._id.toLowerCase().trim().includes(e));return n?n.account_number:e}return e}isAllSelected(){const e=this.selection.selected.length,n=this.dataSource.data.length;return e===n||e>n}masterToggle(){this.isAllSelected()||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length?(this.selection.clear(),this.dataSelected=[],this.pageSelected=[],this.isCheckedAll=!1,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[],this.allDataForCheckboxConnectLegal=[],this.allDataForAddInductedHours=[]):(this.selection.clear(),this.dataSelected=[],this.allStudentForCheckbox=[],this.isCheckedAll=!0,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[],this.allDataForCheckboxConnectLegal=[],this.allDataForAddInductedHours=[],this.dataSource.data.forEach(e=>{this.dataUnselectUser.includes(e._id)||this.selection.select(e._id)}))}getDataAllForCheckbox(e){const n={limit:300,page:e};this.isWaitingForResponse=!0;let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.GetAdmissionIntakeDataCheckbox(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allStudentForCheckbox.push(...a),this.getDataAllForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.isCheckedAll?(this.allStudentForCheckbox&&this.allStudentForCheckbox.length&&this.allStudentForCheckbox.forEach(l=>{this.selection.select(l._id),this.dataSelected.push(l)}),this.pageSelected.push(this.paginator.pageIndex)):this.pageSelected=[])},a=>{this.userService.postErrorLog(a),this.isReset=!1,this.isWaitingForResponse=!1,a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}showOptions(e,n){if(this.isCheckedAll){if(n)if(this.dataUnselectUser.includes(n._id)){const l=this.dataUnselectUser.findIndex(c=>c===n._id);this.dataUnselectUser.splice(l,1),this.selection.select(n._id)}else this.dataUnselectUser.push(n._id),this.selection.deselect(n._id)}else if(n)if(this.dataSelected&&this.dataSelected.length){const l=this.dataSelected.filter(c=>c._id===n._id);if(l&&l.length<1)this.dataSelected.push(n);else{const c=this.dataSelected.findIndex(g=>g._id===n._id);this.dataSelected.splice(c,1)}}else this.dataSelected.push(n);this.disabledExport=!(this.dataSelected.length>0),this.userSelected=[],this.userSelectedId=[],this.selectType=e,(this.dataSelected&&this.dataSelected.length?this.dataSelected:this.selection.selected).forEach(l=>{this.userSelected.push(l),this.userSelectedId.push(l._id)})}getUniqueLegals(e){return h.uniqBy(e,"_id")}checkIfCandidateSelectNotNull(e,n){return!!(e<1&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser.length))&&(s().fire({type:"info",title:this.translateService.instant("Followup_S8.Title"),html:this.translateService.instant("Followup_S8.Text",{menu:this.translateService.instant("School-Tab.Legal")}),confirmButtonText:this.translateService.instant("Followup_S8.Button")}),!0)}getAllIdForCheckbox(e){if(this.isCheckedAll)if(this.dataUnselectUser.length<1)this.downloadCSV();else{0===e&&(this.allExportForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isLoading=!0;let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.getAllIdIntakeChannelsForCheckbox(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allExportForCheckbox.push(...a),this.getAllIdForCheckbox(e+1)):(this.isLoading=!1,this.isCheckedAll&&this.allExportForCheckbox&&this.allExportForCheckbox.length&&(this.dataSelected=this.allExportForCheckbox.filter(l=>!this.dataUnselectUser.includes(l._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.downloadCSV()))},a=>{this.isReset=!1,this.isLoading=!1,this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}else this.downloadCSV()}onAddPaidLeaveAllowanceRateCheckbox(e){if(this.isCheckedAll){0===e&&(this.allPaidLeaveAllowanceRateCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isLoading=!0;let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.getAllIdIntakeChannelsForCheckbox(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allPaidLeaveAllowanceRateCheckbox.push(...a),this.onAddPaidLeaveAllowanceRateCheckbox(e+1)):(this.isLoading=!1,this.isCheckedAll&&this.allPaidLeaveAllowanceRateCheckbox&&this.allPaidLeaveAllowanceRateCheckbox.length&&(this.dataSelected=this.allPaidLeaveAllowanceRateCheckbox.filter(l=>!this.dataUnselectUser.includes(l._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.onAddPaidLeaveAllowanceRate()))},a=>{this.isReset=!1,this.isLoading=!1,this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}else this.onAddPaidLeaveAllowanceRate()}downloadCSV(){if(!this.checkIfCandidateSelectNotNull(this.dataSelected.length,"School-Tab.Legal")){const e={",":this.translateService.instant("IMPORT_DECISION_S1.COMMA"),";":this.translateService.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translateService.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translateService.instant("EXPORT_DECISION.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translateService.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translateService.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translateService&&"fr"===this.translateService.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translateService.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql",""),document.createElement("a");const a=this.translateService.currentLang.toLowerCase();let c;if(this.dataSelected.length&&!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser.length&&this.dataSelected.length){const u=[...new Set(this.dataSelected.map(y=>'"'+y._id+'"'))];c='filter={"scholar_season_ids": ["'+this.scholarId+'"], "program_ids": ['+u.toString()+'], "school": ["'+this.schoolData.short_name+'"] }'}else c=this.cleanFilterDataCSV();const m=n+"downloadAccountingAccountData/"+e+"/"+a+"?"+c+"&"+this.sortingForExport()+`&user_type_id="${this.currentUserTypeId}"`;console.log("fullURL",m);const _={headers:new gt.WM({Authorization:JSON.parse(localStorage.getItem("admtc-token-encryption"))})};this.isLoading=!0,this.httpClient.get(`${encodeURI(m)}`,_).subscribe(u=>{u?(this.isLoading=!1,s().fire({type:"success",title:this.translateService.instant("ReAdmission_S3.TITLE"),text:this.translateService.instant("ReAdmission_S3.TEXT"),confirmButtonText:this.translateService.instant("ReAdmission_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>this.clearSelectIfFilter())):this.isLoading=!1},u=>{this.isLoading=!1,console.log("uat 389 error",u)})}sortingForExport(){let e="";if(this.sortValue){const n=h.cloneDeep(this.sortValue);Object.keys(n).forEach(i=>{n[i]&&(e=e?e+`,"${i}":"${n[i]}"`:e+`"${i}":"${n[i]}"`)})}return"sorting={"+e+"}"}clearSelectIfFilter(){this.selection.clear(),this.isCheckedAll=!1,this.dataSelected=[],this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[],this.allDataForCheckboxConnectLegal=[],this.allDataForAddInductedHours=[]}cleanFilterDataCSV(){const e=h.cloneDeep(this.filteredValues);let n="";return Object.keys(e).forEach(i=>{if(e[i]||!1===e[i])if("campus"!==i&&"level"!==i&&"sectors"!==i&&"specialties"!==i&&"school"!==i&&"scholar_season_ids"!==i)n=n?n+`,"${i}":"${e[i]}"`:n+`"${i}":"${e[i]}"`;else if("campus"===i){let a=[];this.filteredValues.campus&&this.filteredValues.campus.length&&(a=this.filteredValues.campus.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("school"===i)this.schoolData&&this.schoolData.short_name&&this.schoolData.short_name.length&&(n=n?n+`,"${i}":["${this.schoolData.short_name}"]`:n+`"${i}":["${this.schoolData.short_name}"]`);else if("scholar_season_ids"===i)n=n?n+`,"${i}":["${this.scholarId}"]`:n+`"${i}":["${this.scholarId}"]`;else if("level"===i){let a=[];this.filteredValues.level&&this.filteredValues.level.length&&(a=this.filteredValues.level.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("sectors"===i){let a=[];this.filteredValues.sectors&&this.filteredValues.sectors.length&&(a=this.filteredValues.sectors.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("specialties"===i){let a=[];this.filteredValues.specialties&&this.filteredValues.specialties.length&&(a=this.filteredValues.specialties.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}}),"filter={"+n+"}"}onAddPaidLeaveAllowanceRate(){this.dataSelected&&this.dataSelected.length<1&&!this.isCheckedAll?s().fire({type:"info",title:this.translateService.instant("Followup_S8.Title"),html:this.translateService.instant("Followup_S8.Text",{menu:this.translateService.instant("School-Tab.Legal")}),confirmButtonText:this.translateService.instant("Followup_S8.Button")}):this.AddPaidLeaveAllowanceRateDialog()}AddPaidLeaveAllowanceRateDialog(){this.subs.sink=this.dialog.open(to,{width:"800px",disableClose:!0,data:{selectedData:this.dataSelected}}).afterClosed().subscribe(e=>{e&&(this.getAccountingData(),this.selection.clear(),this.dataSelected=[],this.isCheckedAll=!1,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[])})}onAddInducedHoursCoefficient(){this.dataSelected.length<1?s().fire({type:"info",title:this.translateService.instant("Followup_S8.Title"),html:this.translateService.instant("Followup_S8.Text",{menu:this.translateService.instant("School-Tab.Legal")}),confirmButtonText:this.translateService.instant("Followup_S8.Button")}):this.AddInducedHoursCoefficientDialog()}AddInducedHoursCoefficientDialog(){this.subs.sink=this.dialog.open(Xi,{width:"800px",disableClose:!0,data:{selectedData:this.dataSelected}}).afterClosed().subscribe(e=>{e&&(this.getAccountingData(),this.selection.clear(),this.dataSelected=[],this.isCheckedAll=!1,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allPaidLeaveAllowanceRateCheckbox=[])})}getAllIdForAddInductedHours(e){if(this.isCheckedAll){0===e&&(this.allDataForAddInductedHours=[],this.dataSelected=[]);const n={limit:500,page:e};this.isLoading=!0;let i="";i+=" school : ["+JSON.stringify(this.schoolData.short_name)+"]",i+=this.filteredValues.campus&&this.filteredValues.campus.length&&this.filteredValues.campus[0]?" campus : "+JSON.stringify(this.filteredValues.campus):"",i+=this.filteredValues.level&&this.filteredValues.level.length&&this.filteredValues.level[0]?" level : "+JSON.stringify(this.filteredValues.level):"",i+=this.filteredValues.sectors&&this.filteredValues.sectors.length&&this.filteredValues.sectors[0]?" sectors : "+JSON.stringify(this.filteredValues.sectors):"",i+=this.filteredValues.specialties&&this.filteredValues.specialties.length&&this.filteredValues.specialties[0]?" specialties : "+JSON.stringify(this.filteredValues.specialties):"",i+=this.filteredValues.legal_entity_id?" legal_entity_id : "+JSON.stringify(this.filteredValues.legal_entity_id):"",i+=this.filteredValues.speciality&&this.filteredValues.speciality.length?" speciality : "+JSON.stringify(this.filteredValues.speciality):"",i+=` scholar_season_ids: ["${this.scholarId}"]`,i="filter: {"+i+"}",this.subs.sink=this.financeService.getAllIdIntakeChannelsForAddInducedHours(n,this.sortValue,i).subscribe(a=>{a&&a.length?(this.allDataForAddInductedHours.push(...a),this.getAllIdForAddInductedHours(e+1)):(this.isLoading=!1,this.isCheckedAll&&this.allDataForAddInductedHours&&this.allDataForAddInductedHours.length&&(this.dataSelected=this.allDataForAddInductedHours.filter(l=>!this.dataUnselectUser.includes(l._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.onAddInducedHoursCoefficient()))},a=>{this.isReset=!1,this.isLoading=!1,this.userService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translateService.instant("BAD_CONNECTION.Title"),html:this.translateService.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translateService.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translateService.instant("SORRY"),text:a&&a.message?this.translateService.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translateService.instant("OK")})})}else this.onAddInducedHoursCoefficient()}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"table_filter",name:"campus",column:"ADMISSION.TABLE_ADMISSION_CHANNEL.Campus",isMultiple:!0,filterValue:this.filteredValues,filterList:this.campusList,filterRef:this.campusFilter,displayKey:"name",savedValue:"name",isSelectionInput:!0},{type:"table_filter",name:"level",column:"ADMISSION.TABLE_ADMISSION_CHANNEL.Level",isMultiple:!0,filterValue:this.filteredValues,filterList:this.levelList,filterRef:this.levelFilter,displayKey:"name",savedValue:"name",isSelectionInput:!0},{type:"table_filter",name:"sectors",column:"Sector",isMultiple:!0,filterValue:this.filteredValues,filterList:this.sectorListFilter,filterRef:this.sectorFilter,displayKey:"name",savedValue:"name",isSelectionInput:!0},{type:"table_filter",name:"specialties",column:"Speciality",isMultiple:!0,filterValue:this.filteredValues,filterList:this.specialityListFilter,filterRef:this.specialityFilter,displayKey:"name",savedValue:"name",isSelectionInput:!0},{type:"table_filter",name:"legal_entity_id",column:"ADMISSION.TABLE_LEGAL_ENTITIES.Legal Entity",isMultiple:!1,filterValue:this.filteredValues,filterList:this.legalListFilter,filterRef:this.legalFilterCtrl,displayKey:"legal_entity_name",savedValue:"_id",isSelectionInput:!0}],this.filterBreadcrumbData),console.log("cek",this.filterBreadcrumbData)}removeFilterBreadcrumb(e){this.filterBreadCrumbService.removeFilterBreadcrumb(e,null,this.filteredValues),this.clearSelectIfFilter(),"campus"===e.name&&this.campusFilter.setValue(["All"],{emitEvent:!1}),"level"===e.name&&this.levelFilter.setValue(["All"],{emitEvent:!1}),"sectors"===e.name&&this.sectorFilter.setValue(["All"],{emitEvent:!1}),"specialties"===e.name&&this.specialityFilter.setValue(["All"],{emitEvent:!1}),"legal_entity_id"===e.name&&this.legalFilterCtrl.setValue("All",{emitEvent:!1}),this.getAccountingData()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(Ot.J),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(mt.Z),t.\u0275\u0275directiveInject(xt.Q),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(gt.eN),t.\u0275\u0275directiveInject(Ct.q))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-legal"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(et.NW,7),t.\u0275\u0275viewQuery(z.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{scholarSeason:"scholarSeason"},decls:73,vars:29,consts:[[1,"p-col-12","no-padding"],[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"top-space",2,"overflow","hidden"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","reset"],["mat-header-cell","","colspan","10","class","action-header-column text-right",4,"matHeaderCellDef"],["matColumnDef","selectFilter",1,"mat-column-select"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["matColumnDef","schoolFilter"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","campusFilter"],["matColumnDef","levelFilter"],["matColumnDef","sectorFilter"],["matColumnDef","specialityFilter"],["matColumnDef","legalEntityFilter"],["matColumnDef","scholarSeasonFilter"],["matColumnDef","paidLeaveAllowanceRateFilter"],["matColumnDef","inducedHoursCoefficientFilter"],["matColumnDef","select",1,"mat-column-select"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","scholarSeason"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","school"],["matColumnDef","campus"],["matColumnDef","level"],["matColumnDef","sector"],["matColumnDef","speciality"],["matColumnDef","legalEntity"],["matColumnDef","paidLeaveAllowanceRate"],["matColumnDef","inducedHoursCoefficient"],["matColumnDef","loading"],["mat-header-cell","","colspan","10","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],["class","no-records",4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","length","hidePageSize","pageSize"],[3,"title","showConfirmButton"],["exportSwal",""],["class","",4,"swalPartial"],["class","inner-loading-indicator",4,"ngIf"],["mat-header-cell","","colspan","10",1,"action-header-column","text-right"],[1,"p-grid"],[1,"p-col-12","text-right",2,"padding-top","18px"],["mat-raised-button","","color","accent",2,"padding","0px 7px !important",3,"matTooltip","disabled","matMenuTriggerFor"],["action","matMenu"],["mat-menu-item","","class","border-button",3,"matTooltip","click",4,"ngIf"],["mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary","style","padding-left: 5px; padding-right: 5px; padding-top: 1px; font-size: 12px !important",3,"disabled","matTooltip","click",4,"ngIf"],["mat-menu-item","",1,"border-button",3,"matTooltip","click"],["mat-menu-item","",3,"matTooltip","click"],["mat-raised-button","","color","primary",2,"padding-left","5px","padding-right","5px","padding-top","1px","font-size","12px !important",3,"disabled","matTooltip","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell","",1,"text-center"],["mat-header-cell",""],["appearance","legacy"],["multiple","","disableOptionCentering","","panelClass","filterPanel custom-matselect-dropdown-margin",3,"formControl"],[3,"value","click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["matInput","",1,"form-field",3,"formControl","matAutocomplete","placeholder"],[3,"panelWidth","displayWith"],["legalAuto","matAutocomplete"],["value","All",3,"click"],[3,"value","matTooltip","click",4,"ngFor","ngForOf"],[3,"value","matTooltip","click"],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"text-center"],[3,"checked","aria-label","click","change"],["mat-header-cell","",3,"matTooltip"],["mat-cell","",3,"matTooltip"],["style","color: red",4,"ngIf"],[2,"color","red"],["mat-sort-header","campus"],["mat-sort-header","level"],[2,"text-align","center !important"],["mat-sort-header","name"],[4,"ngFor","ngForOf"],["style","color: red",3,"matTooltip",4,"ngIf"],[1,"tags"],[2,"color","red",3,"matTooltip"],["mat-header-cell","","colspan","10",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],[1,"no-records"],[1,""],["color","accent",1,"full-wid"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"inner-loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"ms-filter-breadcrumb",1),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(2,"div",2)(3,"table",3),t.\u0275\u0275listener("matSortChange",function(a){return n.sortData(a)}),t.\u0275\u0275elementContainerStart(4,4),t.\u0275\u0275template(5,lo,16,13,"th",5),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(6,6),t.\u0275\u0275template(7,ro,1,0,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(8,8),t.\u0275\u0275template(9,so,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(10,10),t.\u0275\u0275template(11,mo,8,6,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(12,11),t.\u0275\u0275template(13,_o,8,6,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(14,12),t.\u0275\u0275template(15,Co,8,6,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(16,13),t.\u0275\u0275template(17,vo,8,6,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(18,14),t.\u0275\u0275template(19,yo,11,13,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(20,15),t.\u0275\u0275template(21,So,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(22,16),t.\u0275\u0275template(23,Po,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(24,17),t.\u0275\u0275template(25,Mo,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(26,18),t.\u0275\u0275template(27,wo,2,3,"th",7),t.\u0275\u0275template(28,To,2,2,"td",19),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(29,20),t.\u0275\u0275template(30,ko,5,6,"th",21),t.\u0275\u0275template(31,Io,2,2,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(32,23),t.\u0275\u0275template(33,Eo,5,6,"th",21),t.\u0275\u0275template(34,Fo,3,3,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(35,24),t.\u0275\u0275template(36,Ao,5,6,"th",21),t.\u0275\u0275template(37,No,3,3,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(38,25),t.\u0275\u0275template(39,Lo,5,6,"th",21),t.\u0275\u0275template(40,Ro,3,3,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(41,26),t.\u0275\u0275template(42,Uo,5,6,"th",21),t.\u0275\u0275template(43,Ho,2,2,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(44,27),t.\u0275\u0275template(45,Ko,5,6,"th",21),t.\u0275\u0275template(46,Wo,2,2,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(47,28),t.\u0275\u0275template(48,jo,5,6,"th",21),t.\u0275\u0275template(49,Go,3,3,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(50,29),t.\u0275\u0275template(51,zo,5,6,"th",21),t.\u0275\u0275template(52,Yo,2,2,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(53,30),t.\u0275\u0275template(54,Qo,5,6,"th",21),t.\u0275\u0275template(55,Xo,2,2,"td",22),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(56,31),t.\u0275\u0275template(57,Jo,3,0,"th",32),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(58,Zo,1,0,"tr",33),t.\u0275\u0275template(59,ta,1,0,"tr",33),t.\u0275\u0275template(60,ea,1,0,"tr",33),t.\u0275\u0275template(61,na,1,1,"tr",34),t.\u0275\u0275template(62,ia,1,1,"tr",35),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(63,oa,3,3,"div",36),t.\u0275\u0275pipe(64,"async"),t.\u0275\u0275elementStart(65,"div",37),t.\u0275\u0275pipe(66,"async"),t.\u0275\u0275element(67,"mat-paginator",38),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(68,"swal",39,40),t.\u0275\u0275pipe(70,"translate"),t.\u0275\u0275template(71,aa,20,19,"div",41),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(72,la,2,1,"div",42)),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(2),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(55),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(22,ra)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(23,sa)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(64,16,n.noData)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(24,ca,t.\u0275\u0275pipeBind1(66,18,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(26,da,n.intakeChannelCount<=10))("length",n.registrationProfileCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(28,pa)),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("title",t.\u0275\u0275pipeBind1(70,20,"Export Title")),t.\u0275\u0275property("showConfirmButton",!1),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.isLoading))},dependencies:[d.mk,d.sg,d.O5,ct.XC,ct.ZL,R.ey,D.lW,_t.oG,B.Hw,T.KE,T.hX,q.Nt,W.VK,W.OP,W.p6,et.NW,L.Ou,Q.gD,z.YE,z.nU,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.NgModel,p.FormControlDirective,st.oO,bt.r,pt.q1,pt.sC,d.Ov,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}#certifier[_ngcontent-%COMP%]{margin-left:20px}.mat-form-field[_ngcontent-%COMP%]{padding-left:.5rem!important}.pad-top-miss[_ngcontent-%COMP%]{padding-top:1.8px!important}.form-field[_ngcontent-%COMP%]{margin-top:.5px}.tag-container[_ngcontent-%COMP%]{white-space:normal;text-align:left!important;line-height:2.3;overflow-wrap:break-word}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:3%;padding-left:0rem!important}[_nghost-%COMP%]     table tr td:nth-child(1) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(1) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:8%;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:8%;padding-left:0rem!important}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:10%;padding-left:0rem!important}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){width:5%;text-align:center!important;padding-left:0rem!important}[_nghost-%COMP%]     table tr td:nth-child(5) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(5) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(6), [_nghost-%COMP%]     table tr th:nth-child(6){width:15%;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(6) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(6) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(7), [_nghost-%COMP%]     table tr th:nth-child(7){width:15%;text-align:center!important;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(7) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(7) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(8), [_nghost-%COMP%]     table tr th:nth-child(8){width:20%;text-align:center!important;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(8) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(8) .mat-form-field{width:80%}[_nghost-%COMP%]     table tr td:nth-child(9), [_nghost-%COMP%]     table tr th:nth-child(9){width:9%;min-width:90px;max-width:90px;padding-right:0rem!important;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(10), [_nghost-%COMP%]     table tr th:nth-child(10){width:9%;min-width:90px;max-width:90px;padding-right:0rem!important;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr th{vertical-align:top}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.left-margin[_ngcontent-%COMP%]{margin-left:3%}[_nghost-%COMP%]     .swal2-checkbox label, .swal2-radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1em!important}.school-backdrop[_ngcontent-%COMP%] + .cdk-overlay-pane[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:visible}.mat-column-select[_ngcontent-%COMP%]{overflow:initial}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.pc-section[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:5px;display:inline-block}.cr-section[_ngcontent-%COMP%]{width:50%;text-align:left;display:inline-block}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}.flag-red[_ngcontent-%COMP%]{background-color:red;border-color:red;padding:0!important;margin:0!important}.icon-svgIcon-menu[_ngcontent-%COMP%]{margin-top:-4px!important;width:18px!important;height:18px!important}.border-button[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}  .custom-matselect-dropdown-margin.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}[_nghost-%COMP%]  .filterPanel.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}"]}),o})();var kt=b(80013),at=b(72986),It=b(73546);const ha=["fileUploadDoc"];function ga(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h3",18),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Add Condition")))}function _a(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h3",18),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Edit Condition")))}function ua(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",23)(1,"button",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.uploadSubmitFlyer())}),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"file_upload"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.removeFile())}),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"delete"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()()}2&o&&(t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(5,2,"ACAD_KIT.DOC.Add this File")," "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(10,4,"ACAD_KIT.DOC.Remove")," "))}function fa(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",19)(1,"div",8)(2,"mat-card")(3,"div",20)(4,"mat-icon",21),t.\u0275\u0275text(5,"insert_drive_file"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,ua,11,6,"div",22),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",null==e.uploadDocForm||null==(n=e.uploadDocForm.get("s3_file_name"))?null:n.value," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.selectedFile)}}function Ca(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",24),t.\u0275\u0275element(1,"mat-spinner",25),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let Bt=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.dialogRef=e,this.parentData=n,this.fb=i,this.translate=a,this.utilService=l,this.fileUploadService=c,this.intakeService=g,this.authService=m,this.isWaitingForResponse=!1,this.subs=new F.Y,this.fileTypesControl=new p.UntypedFormControl(""),this.fileTypes=[],this.selectedFileType="",this.selectedMaxSize=0}ngOnInit(){console.log(this.parentData),this.initUploadDocForm(),this.parentData&&1===this.parentData.length&&this.parentData[0].admission_document&&this.parentData[0].admission_document.document_name&&this.parentData[0].admission_document.s3_file_name&&this.uploadDocForm.patchValue(this.parentData[0].admission_document),this.firstForm=h.cloneDeep(this.uploadDocForm.value)}initUploadDocForm(){this.uploadDocForm=this.fb.group({document_name:["",p.Validators.required],s3_file_name:[""]})}closeDialog(){console.log(this.uploadDocForm.value),this.dialogRef.close()}openUploadWindow(){this.fileUploaderDoc.nativeElement.click(),this.selectedMaxSize=0}addFile(e){const a=this.utilService.getFileExtension(e.target.files[0].name).toLocaleLowerCase();["pdf"].includes(a)?this.utilService.countFileSize(e.target.files[0],this.selectedMaxSize)?(this.selectedFile=e.target.files[0],this.uploadDocForm.get("s3_file_name").setValue(this.selectedFile.name)):s().fire({type:"warning",title:this.translate.instant("UPLOAD_RESTRICT_TO_FILESIZE_File.TITLE"),html:this.translate.instant("UPLOAD_RESTRICT_TO_FILESIZE_File.TEXT",{size:this.selectedMaxSize}),confirmButtonText:this.translate.instant("UPLOAD_RESTRICT_TO_FILESIZE_File.BUTTON"),allowOutsideClick:!1}):s().fire({type:"info",title:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TITLE"),text:this.translate.instant("UPLOAD_ERROR.WRONG_TYPE_TEXT",{file_exts:".pdf"}),allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})}removeFile(){this.selectedFile=null,this.fileUploaderDoc.nativeElement.value=null,this.uploadDocForm.get("s3_file_name").setValue(""),this.parentData&&this.parentData.isUpdate&&this.parentData.document&&this.parentData.document.s3_file_name&&this.uploadDocForm.get("s3_file_name").setValue(this.parentData.document.s3_file_name)}uploadSubmitFlyer(){this.isWaitingForResponse=!0,this.subs.sink=this.fileUploadService.singleUpload(this.selectedFile).subscribe(e=>{this.isWaitingForResponse=!1,e&&e.s3_file_name?(this.uploadDocForm.get("s3_file_name").setValue(e.s3_file_name),this.submitFlyer()):s().fire({type:"info",title:this.translate.instant("SORRY"),allowOutsideClick:!1,confirmButtonText:this.translate.instant("ok")})},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")})})}submitFlyer(){this.isWaitingForResponse=!0;const e={admission_document:this.uploadDocForm.value};if(console.log("payload",e),this.parentData&&1===this.parentData.length){let n;this.parentData[0]._id&&(n=this.parentData[0]._id),this.intakeService.updateProgram(n,e).subscribe(i=>{this.isWaitingForResponse=!1,i&&s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(this.uploadDocForm.value)})},i=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(i),i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("OK")})})}else{const n=h.cloneDeep(this.parentData);let i=[];n&&n.length&&n.forEach(a=>{i.push(a._id.toString())}),console.log(i),this.intakeService.updatePrograms(i,e).subscribe(a=>{this.isWaitingForResponse=!1,a&&s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(this.uploadDocForm.value)})},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("OK")})})}}isUploadedNewFile(){return this.selectedFile||!this.uploadDocForm.get("s3_file_name").value}isUploadedFileExist(){let e=!1;return(this.selectedFile||this.uploadDocForm.get("s3_file_name").value)&&(e=!0),e}comparison(){return JSON.stringify(this.firstForm)===JSON.stringify(this.uploadDocForm.value)||!!this.isUploadedNewFile()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(X.J),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-condition-dialog"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(ha,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.fileUploaderDoc=i.first)}},decls:31,vars:14,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],["class","dialogTitle",4,"ngIf"],[1,"p-col-2",2,"padding-right","1em"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",3,"formGroup"],[1,"p-col-12"],["hideRequiredMarker","",1,"full-width"],["matInput","","formControlName","document_name",2,"font-size","14px !important"],["class","p-gird",4,"ngIf"],["class","loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["type","file","accept",".pdf",1,"hidden",3,"change"],["fileUploadDoc",""],[1,"dialogTitle"],[1,"p-gird"],[1,"uploaded-file-wrapper"],[1,"icon"],["class","uploaded-file-wrapper mt-1rem",4,"ngIf"],[1,"uploaded-file-wrapper","mt-1rem"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.\u0275\u0275template(4,ga,3,3,"h3",4),t.\u0275\u0275template(5,_a,3,3,"h3",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",5)(7,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(8,"mat-icon"),t.\u0275\u0275text(9,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(10,"div",7)(11,"div",2)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(17,"input",10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(18,fa,8,2,"div",11),t.\u0275\u0275template(19,Ca,2,1,"div",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"div",13)(21,"button",14),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"button",15),t.\u0275\u0275listener("click",function(){return n.openUploadWindow()}),t.\u0275\u0275elementStart(25,"mat-icon"),t.\u0275\u0275text(26,"add"),t.\u0275\u0275elementEnd(),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"input",16,17),t.\u0275\u0275listener("change",function(a){return n.addFile(a)}),t.\u0275\u0275elementEnd()()),2&e){let i,a,l;t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!(null!=n.uploadDocForm&&null!=(i=n.uploadDocForm.get("s3_file_name"))&&i.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.uploadDocForm||null==(a=n.uploadDocForm.get("s3_file_name"))?null:a.value),t.\u0275\u0275advance(5),t.\u0275\u0275property("formGroup",n.uploadDocForm),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(16,8,"Name of the document")," *"),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",null==n.uploadDocForm||null==(l=n.uploadDocForm.get("s3_file_name"))?null:l.value),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(23,10,"CANCEL")," "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(28,12,"Doc")," ")}},dependencies:[d.O5,A.Zt,A.Bh,D.lW,It.a8,f.xY,f.H8,B.Hw,T.KE,T.hX,q.Nt,L.Ou,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.mat-icon-default[_ngcontent-%COMP%]{font-size:30px!important;margin-top:0!important;width:auto!important;padding-right:5px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center;margin-top:3px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .ng-dropdown-panel.ng-select-bottom{width:auto!important}[_nghost-%COMP%]  .mat-dialog-content{max-height:355px}.items-center[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),o})();var ba=b(68310);function xa(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",19),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(),a=i.index,l=i.$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.selectSingle(a,l))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.intake_channel)}}function va(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",13)(2,"p"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",14)(5,"mat-form-field",15)(6,"mat-select",16),t.\u0275\u0275listener("ngModelChange",function(i){const l=t.\u0275\u0275restoreView(e).index,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.regisValue[l]=i)}),t.\u0275\u0275elementStart(7,"mat-option",17),t.\u0275\u0275listener("click",function(){const i=t.\u0275\u0275restoreView(e),a=i.index,l=i.$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.selectAll(a,l))}),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,xa,2,2,"mat-option",18),t.\u0275\u0275elementEnd()()()()}if(2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",i.regisValue[n])("disableOptionCentering",!0),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"AllS")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.whereFrom(e))}}function Oa(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275element(1,"mat-spinner",21),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let ya=(()=>{class o{constructor(e,n,i,a,l,c){this.dialogRef=e,this.data=n,this.fb=i,this.translate=a,this.intakeService=l,this.authService=c,this.isWaitingForResponse=!1,this.subs=new F.Y,this.payload=[],this.dataProgram=[],this.regisValue=[],this.allSelected=!1,this.allProgramToRegistrationProfile=[],this.remainingProgramToRegistrationProfile=[],this.payloadProgramToRegistrationProfile=[]}ngOnInit(){this.initConnectForm(),this.getAllProfilRates(),console.log(this.data),this.dataProgram=this.data.regisList,this.mapValue()}mapValue(){let e;this.data&&this.data.data&&(e=this.data.data.map(n=>({profil_rate_id:n.profil_rate&&n.profil_rate.length>0?n.profil_rate.map(i=>i._id):null,...n}))),this.dataProgram&&(this.dataProgram=this.dataProgram.map(n=>({name:n.name,_id:n._id,programs:[]})),this.dataProgram.forEach((n,i)=>{this.regisValue.push([]),e.forEach((a,l)=>{a.profil_rate_id&&a.profil_rate_id.includes(n._id)&&(this.dataProgram[i].programs.push(a),this.regisValue[i].push(a._id))})}),this.payload=this.dataProgram.map(n=>({profile_rate_id:n._id,programs:n.programs.map(i=>i._id)})))}whereFrom(e){let n=[];return this.dataProgram.forEach(i=>{i._id===e._id&&(n=i.programs)}),n}initConnectForm(){this.connectRegisForm=this.fb.group({profil_rate:["",p.Validators.required]})}closeDialog(){this.payload=[],this.dialogRef.close()}getAllProfilRates(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllRegistrationProfile({scholar_season_id:this.data.data[0].scholar_season_id}).subscribe(n=>{n&&n.length&&this.data&&this.data.data.length&&this.data.data[0].scholar_season_id?(this.regisList=n,this.regData=n.map(i=>({profile_rate_id:i._id,programs:i.programs&&i.programs.length>0?i.programs.map(a=>a._id):[]})),this.allProgramToRegistrationProfile=this.regisList.map(i=>{const a=i.scholar_season_programs&&i.scholar_season_programs.length>0?i.scholar_season_programs.map(l=>l&&l.school_id&&l.scholar_season_id&&l.school_id._id===this.data.data[0].school_id&&l.scholar_season_id._id===this.data.data[0].scholar_season_id?l.programs.map(c=>c._id):[]):[];return{profile_rate_id:i._id,programs:h.uniqBy(a.flat())}})):(this.regisList=[],this.regData=[],this.allProgramToRegistrationProfile=[]),this.payloadProgramToRegistrationProfile=h.cloneDeep(this.allProgramToRegistrationProfile),this.remainingProgramToRegistrationProfile=h.cloneDeep(this.allProgramToRegistrationProfile),console.log("this.allProgramToRegistrationProfile",this.allProgramToRegistrationProfile),this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectAll(e,n){this.allSelected=!0,this.regisValue&&this.regisValue[e]&&this.regisValue[e].length>0&&(this.regisValue[e]=["All"]);const i=this.payloadProgramToRegistrationProfile.findIndex(a=>a&&a.profile_rate_id&&a.profile_rate_id===n._id);this.payloadProgramToRegistrationProfile[i].programs=this.regisValue[e].includes("All")?[]:this.regisValue[e],console.log("_regdata",this.payloadProgramToRegistrationProfile,this.payload)}selectSingle(e,n){this.allSelected=!1,this.regisValue&&this.regisValue[e]&&this.regisValue[e].length>0&&(this.regisValue[e]=this.regisValue[e].filter(a=>"All"!==a));const i=this.payloadProgramToRegistrationProfile.findIndex(a=>a&&a.profile_rate_id&&a.profile_rate_id===n._id);this.payloadProgramToRegistrationProfile[i].programs=this.regisValue[e].includes("All")?[]:this.regisValue[e],console.log("_regdata",this.payloadProgramToRegistrationProfile,this.payload)}validate(){this.isWaitingForResponse=!0,this.allProgramToRegistrationProfile.forEach((e,n)=>{if(e&&e.programs&&e.programs.length){const i=this.payload.find(a=>a.profile_rate_id===e.profile_rate_id);i&&i.profile_rate_id&&e.programs.forEach(a=>{i.programs.includes(a)||this.payloadProgramToRegistrationProfile[n].programs.push(a)}),this.payloadProgramToRegistrationProfile[n].programs=h.uniqBy(this.payloadProgramToRegistrationProfile[n].programs)}}),console.log("this.payload",this.payloadProgramToRegistrationProfile),this.subs.sink=this.intakeService.AssignProgramToProfileRates(this.data.data[0].scholar_season_id,this.data.data[0].school_id,this.payloadProgramToRegistrationProfile).subscribe(e=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")}).then(()=>{this.dialogRef.close(!0)})})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-remove-registration-profile-dialog"]],decls:21,vars:11,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"p-col-2"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body"],["class","p-grid",4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",3,"click"],[1,"p-col-6","items-center"],[1,"p-col-6"],["appearance","legacy"],["multiple","","panelClass","optionPanel",3,"ngModel","disableOptionCentering","ngModelChange"],["value","All",3,"click"],["selected","true",3,"value","click",4,"ngFor","ngForOf"],["selected","true",3,"value","click"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7),t.\u0275\u0275template(12,va,11,7,"div",8),t.\u0275\u0275template(13,Oa,2,1,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",10)(15,"button",11),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"button",12),t.\u0275\u0275listener("click",function(){return n.validate()}),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,5,"INTAKE_CHANNEL.Remove registration profile")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",n.dataProgram),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,7,"CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,9,"Validate")," "))},dependencies:[d.sg,d.O5,A.Zt,A.Bh,R.ey,D.lW,f.xY,f.H8,B.Hw,T.KE,L.Ou,Q.gD,p.NgControlStatus,p.NgModel,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.mat-icon-default[_ngcontent-%COMP%]{font-size:30px!important;margin-top:0!important;width:auto!important;padding-right:5px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center;margin-top:3px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .ng-dropdown-panel.ng-select-bottom{width:auto!important}[_nghost-%COMP%]  .mat-dialog-content{max-height:355px}.items-center[_ngcontent-%COMP%]{display:flex;align-items:center}  .optionPanel.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:25px!important;margin-left:40px!important}"]}),o})();function Sa(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",20),t.\u0275\u0275listener("onSelectionChange",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).index,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.selectSingle(i))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.intake_channel)}}function Pa(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Sa,2,2,"mat-option",19),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext().index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=i.regisSelectedValue[n]&&null!=i.regisSelectedValue[n].programs&&i.regisSelectedValue[n].programs.includes(null==e?null:e._id)))}}function Ma(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",2)(1,"div",13)(2,"p"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",14)(5,"mat-form-field",15)(6,"mat-select",16),t.\u0275\u0275listener("selectionChange",function(i){const a=t.\u0275\u0275restoreView(e),l=a.$implicit,c=a.index,g=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(g.setItem(i.value,l,c))})("ngModelChange",function(i){const l=t.\u0275\u0275restoreView(e).index,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(c.regisValue[l]=i)}),t.\u0275\u0275elementStart(7,"mat-option",17),t.\u0275\u0275listener("onSelectionChange",function(){const a=t.\u0275\u0275restoreView(e).index,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.selectAll(a))}),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,Pa,2,1,"ng-container",18),t.\u0275\u0275elementEnd()()()()}if(2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.name),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngModel",i.regisValue[n])("disableOptionCentering",!0),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,5,"AllS")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.data)}}function wa(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"mat-spinner",22),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let Ta=(()=>{class o{constructor(e,n,i,a,l,c){this.dialogRef=e,this.data=n,this.fb=i,this.translate=a,this.intakeService=l,this.authService=c,this.isWaitingForResponse=!1,this.subs=new F.Y,this.payload=[],this.payloadFromEdit=[],this.regisValue=[],this.regisSelectedValue=[],this.allSelected=[],this.listProgramNotSelected=[]}ngOnInit(){this.initConnectForm(),this.getAllProfilRates()}initConnectForm(){this.connectRegisForm=this.fb.group({profil_rate:["",p.Validators.required]})}closeDialog(){this.payload=[],this.dialogRef.close()}getAllProfilRates(){this.regisSelectedValue=[],this.regisValue=[],this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllRegistrationProfile({scholar_season_id:this.data[0].scholar_season_id}).subscribe(n=>{this.regisList=n,this.regisList.forEach((a,l)=>{this.regisValue.push([]),this.allSelected.push(!1)}),this.payloadFromEdit=this.regisList.map(a=>{const l=a.scholar_season_programs&&a.scholar_season_programs.length>0?a.scholar_season_programs.map(c=>c&&c.scholar_season_id&&c.scholar_season_id._id===this.data[0].scholar_season_id&&c.school_id&&c.school_id._id===this.data[0].school_id?c.programs.map(g=>g._id):[]):[];return{profile_rate_id:a._id,programs:l.flat()}});const i=this.data.map(a=>a&&a._id);this.payloadFromEdit.forEach((a,l)=>{a.programs&&a.programs.length>0&&a.programs.forEach((c,g)=>{i.includes(c)})}),this.regisSelectedValue=this.payloadFromEdit,console.log("_before",this.payloadFromEdit,this.regisValue),this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}setItem(e,n,i){if(this.allSelected[i]&&(e.includes("All")||(this.allSelected[i]=!1,this.regisValue[i]=[])),e&&e.length>0&&!this.allSelected[i]){this.payload.some(l=>l.profile_rate_id===n._id)&&(this.payload=this.payload.filter(l=>l.profile_rate_id!==n._id));let a=[];this.regisValue&&this.regisValue[i]&&this.regisValue[i].length>0&&(this.regisValue[i]=this.regisValue[i].filter(l=>"All"!==l),a=this.regisValue[i]),e.length>0&&this.payload.push({profile_rate_id:n._id,programs:a})}if(e&&e.length>0&&this.allSelected[i]){const a=this.data.map(l=>l._id);this.payload.some(l=>l.profile_rate_id===n._id)&&(this.payload=this.payload.filter(l=>l.profile_rate_id!==n._id)),this.regisValue&&this.regisValue[i]&&this.regisValue[i].length>0&&(this.regisValue[i]=["All",...a]),e.length>0&&this.payload.push({profile_rate_id:n._id,programs:a})}e&&0===e.length&&!this.allSelected[i]&&(this.payload.some(a=>a.profile_rate_id===n._id)&&(this.payload=this.payload.filter(a=>a.profile_rate_id!==n._id)),this.payload.push({profile_rate_id:n._id,programs:[]})),console.log("_pay",this.payload)}selectAll(e){this.allSelected[e]=!this.allSelected[e]}selectSingle(e){this.allSelected[e]=!1}payloadEdit(){const e=h.cloneDeep(this.payloadFromEdit),n=h.cloneDeep(this.payload);e&&e.length>0&&e.forEach((i,a)=>{n.forEach((l,c)=>{i.profile_rate_id===l.profile_rate_id&&(i.programs=i.programs.concat(l.programs),i.programs=h.uniqBy(i.programs))})}),this.payload=e}validate(){this.payloadEdit(),this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.AssignProgramToProfileRates(this.data[0].scholar_season_id,this.data[0].school_id,this.payload).subscribe(e=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")}).then(()=>{this.dialogRef.close(!0)})})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-connect-registration-profile-dialog"]],decls:21,vars:11,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"p-col-2"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body"],["class","p-grid",4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",3,"click"],[1,"p-col-6","items-center"],[1,"p-col-6"],["appearance","legacy"],["multiple","","panelClass","optionPanel",3,"ngModel","disableOptionCentering","selectionChange","ngModelChange"],["value","All",3,"onSelectionChange"],[4,"ngFor","ngForOf"],[3,"value","onSelectionChange",4,"ngIf"],[3,"value","onSelectionChange"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7),t.\u0275\u0275template(12,Ma,11,7,"div",8),t.\u0275\u0275template(13,wa,2,1,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",10)(15,"button",11),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"button",12),t.\u0275\u0275listener("click",function(){return n.validate()}),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,5,"INTAKE_CHANNEL.Connect registration profile")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngForOf",n.regisList),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,7,"CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(20,9,"Validate")," "))},dependencies:[d.sg,d.O5,A.Zt,A.Bh,R.ey,D.lW,f.xY,f.H8,B.Hw,T.KE,L.Ou,Q.gD,p.NgControlStatus,p.NgModel,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.mat-icon-default[_ngcontent-%COMP%]{font-size:30px!important;margin-top:0!important;width:auto!important;padding-right:5px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center;margin-top:3px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .ng-dropdown-panel.ng-select-bottom{width:auto!important}[_nghost-%COMP%]  .mat-dialog-content{max-height:355px}.items-center[_ngcontent-%COMP%]{display:flex;align-items:center}  .optionPanel.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:25px!important;margin-left:40px!important}"]}),o})();var Nt=b(61294),Lt=b(71122),Vt=b(36746);function ka(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"ng-option",14),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.form_builder_name," ")}}function Ia(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",22),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function Ea(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"input",29),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,2,"search")),t.\u0275\u0275property("formControl",e.studentSignatoryName)}}function Da(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",14),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(2,4,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(3,6,null==e?null:e.civility)," ")}}function Fa(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",22),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function Aa(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"input",30),t.\u0275\u0275listener("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.filterSignatoryUser(i.target.value,l,c.value.user_type_id))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"mat-autocomplete",31,32),t.\u0275\u0275template(5,Da,4,8,"mat-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,Fa,3,3,"span",16),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275reference(4),n=t.\u0275\u0275nextContext(),i=n.index,a=n.$implicit,l=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,6,"search")),t.\u0275\u0275property("matAutocomplete",e),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayWith",l.displayFullName.bind(l))("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",l.signatoryUserList[i]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.invalid&&a.touched)}}function Ba(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",26)(1,"div",27),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",28),t.\u0275\u0275template(4,Ea,3,4,"ng-container",17),t.\u0275\u0275template(5,Aa,7,8,"ng-container",17),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext(3);let a,l;t.\u0275\u0275property("formGroupName",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.invalid&&e.touched?"red":""),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",i.getNameOfUserType(e,"signatory"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.studentSignatory&&"5a067bba1c0217218c75f8ab"===(null==e||null==(a=e.get("user_type_id"))?null:a.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","5a067bba1c0217218c75f8ab"!==(null==e||null==(l=e.get("user_type_id"))?null:l.value)||!i.studentSignatory&&"5a067bba1c0217218c75f8ab"===(null==e||null==(l=e.get("user_type_id"))?null:l.value))}}function Na(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",23)(2,"h4",24),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275template(6,Ba,6,5,"div",25),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"SENDING_CONTRACT_DIALOG.assign user for signatory")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",null==e.signatoryArr?null:e.signatoryArr.controls)}}function La(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",27),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngClass",e.invalid&&e.touched?"red":""),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,n.getNameOfUserType(e,"validator")),"* ")}}function Va(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",36),t.\u0275\u0275listener("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.filterValidatorUser(i.target.value,l,c.value.validator))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementEnd()}if(2&o){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(1,2,"search")),t.\u0275\u0275property("matAutocomplete",e)}}function Ra(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",14),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(2,4,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(3,6,null==e?null:e.civility)," ")}}function Ua(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",22),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function Ha(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",28),t.\u0275\u0275template(2,Va,2,4,"input",35),t.\u0275\u0275elementStart(3,"mat-autocomplete",31,32)(5,"mat-option",14),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(8,Ra,4,8,"mat-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(9,Ua,3,3,"span",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(),n=e.$implicit,i=e.index,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.value.validator),t.\u0275\u0275advance(1),t.\u0275\u0275property("displayWith",a.displayFullName.bind(a))("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,7,"Any user for selected usertype")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",a.validatorUserList[i]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.invalid&&n.touched)}}function Ka(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275template(1,La,3,4,"div",34),t.\u0275\u0275template(2,Ha,10,9,"ng-container",17),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("formGroupName",r.index),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.value?null:e.value.validator),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.value?null:e.value.validator)}}function Wa(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",33)(2,"h4",24),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Ka,3,3,"div",25),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"SENDING_CONTRACT_DIALOG.assign user for step validatory")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",null==e.validatorArr?null:e.validatorArr.controls)}}function ja(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Na,7,4,"ng-container",17),t.\u0275\u0275template(2,Wa,6,4,"ng-container",17),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.signatoryArr||null==e.signatoryArr.controls?null:e.signatoryArr.controls.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.validatorArr||null==e.validatorArr.controls?null:e.validatorArr.controls.length)}}function $a(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",37),t.\u0275\u0275element(1,"mat-progress-spinner",38),t.\u0275\u0275elementEnd())}let qa=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u){this.translate=e,this.fb=n,this.dialogRef=i,this.formBuilderService=a,this.data=l,this.authService=c,this.intakeChannelService=g,this.teacherService=m,this.utilService=_,this.academicService=u,this.subs=new F.Y,this.listFormBuilder=[],this.isWaitingForResponse=!1,this.studentSignatoryName=new p.UntypedFormControl(null),this.allFormBuilderTempalate=[],this.studentSignatory=null,this.signatoryUserList=[],this.validatorUserList=[],this.studentsDropdown=[],this.firstLoad=!0}ngOnInit(){1===this.data?.students?.length&&(this.studentSignatory={name:this.data.students[0]?.last_name?.toUpperCase()+" "+this.data.students[0]?.first_name+" "+(""===this.data.students[0].civility?"":this.translate.instant(this.data.students[0].civility)),id:this.data.students[0]?.user_id?._id}),this.initFormBuilder(),this.patchValue(),this.getFormBuilder(),this.getAllUserType()}populatedData(){const e=h.cloneDeep(this.data?.selected[0]);if(e?.admission_document_template?.length){const n=this.listFormBuilder.filter(a=>a?._id===e?.admission_document_template[0]?._id);e?.adm_doc_validators?.length&&e?.adm_doc_validators.forEach(a=>{const l=n[0]?.steps?.findIndex(c=>c?._id===a?.form_builder_step_id?._id);l>=0&&(n[0].steps[l]={...n[0]?.steps[l],user_validator:a?.user_validator})}),this.typeForm?.patchValue({form_builder_id:e?.admission_document_template[0]?._id}),n?.length&&this.selectedTemplate(n[0])}}initFormBuilder(){this.typeForm=this.fb.group({form_builder_id:[null,[p.Validators.required]],program_ids:[null],step_validator_input:this.fb.array([]),contract_validator_signatory_status:this.fb.array([])})}initSignatoryForm(){return this.fb.group({user_type_id:[null],user_id:[null,[p.Validators.required]]})}initValidatorsForm(){return this.fb.group({user_validator:[null,[p.Validators.required]],validator:[null],pre_contract_template_step_id:[null]})}get validatorArr(){return this.typeForm.get("step_validator_input")}get signatoryArr(){return this.typeForm.get("contract_validator_signatory_status")}getSignatoryArray(){return this.typeForm.get("contract_validator_signatory_status")}getValidatorArray(){return this.typeForm.get("step_validator_input")}pushSignatory(){this.getSignatoryArray().push(this.initSignatoryForm())}pushValidator(){this.getValidatorArray().push(this.initValidatorsForm())}displayFullName(e){if(e&&"All"!==e){const n=e.civility&&"neutral"!==e.civility&&e.civility?this.translate?this.translate.instant(e.civility):e.civility:"";return e.last_name.toUpperCase()+" "+e.first_name+" "+n}return"All"===e?this.translate.instant("Any user for selected usertype"):null}getAllUserType(){this.subs.sink=this.academicService.getAllUserTypesIncludeStudent().subscribe(e=>{e&&(this.userTypeList=e)},e=>{this.authService.postErrorLog(e),s().fire({type:"error",title:"Error",text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}filterValidatorUser(e,n,i){if(e.length>2||0===e.length){const a=this.utilService.simpleDiacriticSensitiveRegex(e.toLowerCase());this.getFilterValidatorUser(i,n,a)}}getNameOfUserType(e,n){let i;const a=e.value;return this.userTypeList&&this.userTypeList.length&&(a&&"validator"===n?i=this.userTypeList.find(c=>c._id===a.validator):a&&"signatory"===n&&(i=this.userTypeList.find(c=>c._id===a.user_type_id))),i&&i.name?this.translate.instant("USER_TYPES."+i.name):""}getFilterSignatoryUser(e,n,i){this.isWaitingForResponse=!0,this.subs.sink=this.teacherService.GetAllUsers(e,i).subscribe(a=>{this.isWaitingForResponse=!1,a&&a.length&&(this.signatoryUserList[n]=a)},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectedTemplate(e){const n=h.cloneDeep(e),i=this.typeForm.get("step_validator_input").value,a=this.typeForm.get("contract_validator_signatory_status").value;if(i?.length)for(let m=i.length-1;m>=0;m--)this.validatorArr.removeAt(m);if(a?.length)for(let m=a.length-1;m>=0;m--)this.signatoryArr.removeAt(m);const l=n?.steps?.length?n.steps:[],c=l.find(m=>"step_with_signing_process"===m?.step_type);if(c?.contract_signatory?.length){c.contract_signatory.forEach(_=>{this.pushSignatory()});const m=c?.contract_signatory.map(_=>({user_id:this.studentSignatory&&"5a067bba1c0217218c75f8ab"===_?._id?this.studentSignatory?.id:null,user_type_id:_._id,is_already_sign:!1}));this.typeForm.get("contract_validator_signatory_status").patchValue(m),this.typeForm.get("contract_validator_signatory_status").value.forEach((_,u)=>{"5a067bba1c0217218c75f8ab"===_?.user_type_id?this.studentSignatory?this.studentSignatoryName.patchValue(this.studentSignatory?.name):this.data?.students?.length&&(!this.data?.isCheckedAll||this.data?.isCheckedAll&&this.data?.students?.length<=100)?(this.data.students.filter(y=>{y?.user_id?._id&&this.studentsDropdown.push({...y?.user_id})}),this.signatoryUserList[u]=this.studentsDropdown):this.getFilterSignatoryUserIncludeStudent(_?.user_type_id,u):this.getFilterSignatoryUser(_.user_type_id,u)})}const g=l.filter(m=>m&&m.validator);if(g&&g.length){g.forEach(u=>{u.validator&&this.pushValidator()});let m=g.map(u=>({user_validator:u?.user_validator?u.user_validator:null,validator:u&&u.validator?u.validator._id:null,pre_contract_template_step_id:u._id}));const _=this.data?.selected?.filter(u=>u?.adm_doc_validators?.filter(y=>!y?.user_validator));m=m.filter(u=>u.user_validator||u.validator),_?.length&&this.firstLoad?(m.forEach(u=>{u.user_validator||(u.user_validator="All")}),this.typeForm.get("step_validator_input").patchValue(m)):this.typeForm.get("step_validator_input").patchValue(m),this.typeForm.get("step_validator_input").value.forEach((u,y)=>{this.validatorUserList[y]=this.getFilterValidatorUser(u.validator,y)})}}getFilterValidatorUser(e,n,i){this.isWaitingForResponse=!0,this.subs.sink=this.teacherService.GetAllUsers(e,i).subscribe(a=>{this.isWaitingForResponse=!1,a&&a.length&&(this.validatorUserList[n]=a,this.firstLoad=!1)},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}filterSignatoryUser(e,n,i){if(e.length>2||0===e.length){const a=this.utilService.simpleDiacriticSensitiveRegex(e.toLowerCase());if("5a067bba1c0217218c75f8ab"===i)if(this.studentsDropdown?.length)if(e?.length>2&&a){const l=this.studentsDropdown.filter(c=>this.utilService.simpleDiacriticSensitiveRegex(c?.last_name?.toLowerCase())?.includes(a));l?.length?this.signatoryUserList[n]=l:this.getFilterSignatoryUserIncludeStudent(i,n,a)}else setTimeout(()=>{this.signatoryUserList[n]=this.studentsDropdown},600);else this.getFilterSignatoryUserIncludeStudent(i,n,a);else this.getFilterSignatoryUser(i,n,a)}}getFilterSignatoryUserIncludeStudent(e,n,i){this.subs.sink=this.teacherService.GetAllUsersIncludeStudent(e,i).subscribe(a=>{if(a&&a.length)if("5a067bba1c0217218c75f8ab"===e&&this.data?.students?.length){let l=[];h.cloneDeep(a).forEach(g=>{const m=this.data.students.find(_=>g._id===_?.user_id?._id);m&&l.push(m)}),this.signatoryUserList[n]=l}else this.signatoryUserList[n]=a},a=>{this.authService.postErrorLog(a),s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}patchValue(){this.data&&this.data.program_ids&&this.data.program_ids.length&&this.typeForm.patchValue(this.data)}getFormBuilder(){this.isWaitingForResponse=!0,this.subs.sink=this.formBuilderService.getAllFormBuildersByTemplate("one_time_form").subscribe(e=>{this.isWaitingForResponse=!1,e&&e.length?(this.listFormBuilder=e,"single"===this.data?.item&&this.populatedData()):this.listFormBuilder=[]},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnDestroy(){this.subs.unsubscribe()}onValidate(){if(this.typeForm.invalid)this.isWaitingForResponse=!0,s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}).then(()=>{this.isWaitingForResponse=!1,this.typeForm.markAllAsTouched()});else{const e=this.typeForm.value?.step_validator_input?.map(m=>"All"===m?.user_validator?{end_user_type_validator:m?.validator,form_builder_step_id:m?.pre_contract_template_step_id,validator:m?.validator}:{form_builder_step_id:m?.pre_contract_template_step_id,user_validator:m?.user_validator?._id,validator:m?.validator}),n=h.cloneDeep(this.data.program_ids),i=[];n&&n.length&&n.forEach(m=>{i.push(m.toString())});const a=this.typeForm.get("form_builder_id").value,l={admission_document_template:"None"!==a?[a]:null,adm_doc_validators:e},c=this.data?.filter,g=this.data?.select_all;if("None"===a){let m=3;s().fire({title:this.translate.instant("ADM_DOC_S1.TITLE"),html:this.translate.instant("ADM_DOC_S1.TEXT"),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("ADM_DOC_S1.BUTTON 1")+` (${m})`,cancelButtonText:this.translate.instant("ADM_DOC_S1.BUTTON 2"),allowOutsideClick:!1,allowEnterKey:!1,onOpen:()=>{s().disableConfirmButton();const _=s().getConfirmButton(),u=setInterval(()=>{m-=1,_.innerText=this.translate.instant("ADM_DOC_S1.BUTTON 1")+` (${m})`},1e3);this.timeOutVal=setTimeout(()=>{_.innerText=this.translate.instant("ADM_DOC_S1.BUTTON 1"),s().enableConfirmButton(),clearInterval(u),clearTimeout(this.timeOutVal)},1e3*m)}}).then(_=>{clearTimeout(this.timeOutVal),_?.value&&(this.isWaitingForResponse=!0,this.subs.sink=this.intakeChannelService.updatePrograms(i,l,g,c).subscribe(()=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},u=>{this.isWaitingForResponse=!1,s().fire({type:"error",title:"Error",text:u&&u.message?u.message:u,confirmButtonText:this.translate.instant("OK")})}))})}else this.isWaitingForResponse=!0,this.subs.sink=this.intakeChannelService.updatePrograms(i,l,g,c).subscribe(()=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},m=>{this.isWaitingForResponse=!1,s().fire({type:"error",title:"Error",text:m&&m.message?m.message:m,confirmButtonText:this.translate.instant("OK")})})}}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(Nt.c),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(Lt.I),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(Vt.P))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-connect-admission-document-dialog"]],decls:37,vars:22,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"w-30","no-padding"],[2,"vertical-align","middle"],[1,"p-col-10","acad-title"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right"],[3,"formGroup"],[1,"fontColor"],[1,"p-col-12","no-padding"],[1,"p-col","no-padding","custom-input"],["aria-required","true","bindLabel","form_builder_name","bindValue","_id","clearAllText","Clear","formControlName","form_builder_id",1,"mrgn-btn",3,"appendTo","placeholder","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["style","color: #f44336; font-size: 75%; margin: 0",4,"ngIf"],[4,"ngIf"],["align","right"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["class","loading-indicator",4,"ngIf"],[2,"color","#f44336","font-size","75%","margin","0"],["formArrayName","contract_validator_signatory_status",1,"assign-border"],[1,"section-title"],["class","p-grid",3,"formGroupName",4,"ngFor","ngForOf"],[1,"p-grid",3,"formGroupName"],[1,"p-col-4","section-field-title",3,"ngClass"],[1,"p-col-8"],["required","","matInput","","type","text","readonly","",1,"custom-input",3,"formControl","placeholder"],["required","","matInput","","type","text","formControlName","user_id",1,"custom-input",3,"placeholder","matAutocomplete","keyup"],[3,"displayWith","panelWidth"],["auto","matAutocomplete"],["formArrayName","step_validator_input",1,"assign-border"],["class","p-col-4 section-field-title",3,"ngClass",4,"ngIf"],["required","","matInput","","type","text","class","custom-input","formControlName","user_validator",3,"placeholder","matAutocomplete","keyup",4,"ngIf"],["required","","matInput","","type","text","formControlName","user_validator",1,"custom-input",3,"placeholder","matAutocomplete","keyup"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5,"add"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",7)(11,"button",8)(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(14,"form",9)(15,"div",10)(16,"mat-dialog-content")(17,"div",2)(18,"div",11)(19,"div",2)(20,"div",12)(21,"ng-select",13),t.\u0275\u0275listener("change",function(a){return n.selectedTemplate(a)}),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275elementStart(23,"ng-option",14),t.\u0275\u0275text(24),t.\u0275\u0275pipe(25,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(26,ka,2,2,"ng-option",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(27,Ia,3,3,"span",16),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(28,ja,3,2,"ng-container",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(29,"mat-dialog-actions",18)(30,"button",19),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(33,"button",20),t.\u0275\u0275listener("click",function(){return n.onValidate()}),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(36,$a,2,0,"div",21)),2&e&&(t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,12,"Connect admission document form")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.typeForm),t.\u0275\u0275advance(7),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(22,14,"Select Form Template")),t.\u0275\u0275property("appendTo","body"),t.\u0275\u0275advance(2),t.\u0275\u0275property("value","None"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(25,16,"None")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",n.listFormBuilder),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.typeForm.get("form_builder_id").hasError("required")&&(n.typeForm.get("form_builder_id").touched||n.typeForm.get("form_builder_id").dirty)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.typeForm?null:n.typeForm.get("form_builder_id").value),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(32,18,"FORM_BUILDER.Cancel")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,20,"FORM_BUILDER.Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.mk,d.sg,d.O5,A.Zt,A.Bh,ct.XC,ct.ZL,R.ey,D.lW,f.ZT,f.xY,f.H8,B.Hw,q.Nt,L.Ou,p.\u0275NgNoValidate,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.RequiredValidator,p.FormControlDirective,p.FormGroupDirective,p.FormControlName,p.FormGroupName,p.FormArrayName,st.oO,Y.w9,Y.jq,d.gd,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}.mrgn-btn[_ngcontent-%COMP%]{margin-bottom:15px}.icon-style[_ngcontent-%COMP%]{vertical-align:middle;margin-right:1rem;cursor:pointer}.imgContainer[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.imgContainer[_ngcontent-%COMP%]{width:172px;height:200px;line-height:200px;text-align:center;overflow:hidden;position:relative;background-color:transparent}.text[_ngcontent-%COMP%]{width:165px;color:#fff;font-size:20px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;margin-left:0}.no-image[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;line-height:200px;color:#fff;text-align:center;cursor:pointer;width:173px}.overlay[_ngcontent-%COMP%]{position:absolute;height:200px;width:173px;bottom:0;opacity:0;transition:.5s ease;background-color:#2f2f2f!important;cursor:pointer}.logo-img-wrapper[_ngcontent-%COMP%]{height:200px;background-color:#6f6f6f;text-align:center;overflow:hidden;position:relative;margin:auto auto auto 0;width:173px}.text-logo-section[_ngcontent-%COMP%]{width:200px;display:flex;justify-content:center}.buttonContainer[_ngcontent-%COMP%]{width:172px;text-align:center}.center-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto;padding:3px}.image-text[_ngcontent-%COMP%]{font-size:larger;font-weight:700;padding-top:1rem}.logo-spinner-wrapper[_ngcontent-%COMP%]{height:200px;width:173px;background-color:#6f6f6f;margin:auto;display:flex;align-items:center}.dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.specialization-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#4141cd;color:#fff;border-radius:4px;text-align:center;margin-top:5px}.level-pill[_ngcontent-%COMP%]{width:auto;display:inline-block;position:relative;margin-right:5px;padding:5px;background:#ffd740;color:#000;border-radius:4px;text-align:center;margin-top:5px}.icon-mat-change[_ngcontent-%COMP%]{font-size:14px;display:inline-block;position:relative;top:2px}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;margin-bottom:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.acad-title[_ngcontent-%COMP%]{padding:0;margin-right:25px}.w-30[_ngcontent-%COMP%]{padding-top:4px!important;margin-right:7px!important}.w-65[_ngcontent-%COMP%]{float:right;position:relative;right:-38px}.no-padding-left[_ngcontent-%COMP%]{padding-left:0!important}.label-align[_ngcontent-%COMP%]{align-self:center}.border-white[_ngcontent-%COMP%]{border:1px solid rgb(116,116,116)}.flex-hidden-mr-1[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow:hidden;margin-right:1rem!important}[_nghost-%COMP%]  .ng-select .ng-select-container{height:36px;border-left:0px!important;border-right:0px!important;border-top:0px!important;border-radius:0!important}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}.assign-border[_ngcontent-%COMP%]{border:2px solid #fdd835;padding:5px;margin:5px}.custom-input[_ngcontent-%COMP%]{border-bottom:1px solid rgb(241,241,241)!important}"]}),o})();function Ga(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ng-option",17),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.selectProgramDirector(null==a?null:a._id))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.last_name)+" "+(null==e?null:e.first_name)+" "+(null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(3,4,null==e?null:e.civility))," ")}}function za(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function Ya(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275element(1,"mat-progress-spinner",19),t.\u0275\u0275elementEnd())}let Rt=(()=>{class o{constructor(e,n,i,a,l){this.parentData=e,this.fb=n,this.dialogRef=i,this.translate=a,this.intakeChannelService=l,this.subs=new F.Y,this.listProgramDirector=["director 1","director 2","director 3"],this.collectAllUsers=[],this.isWaitingForResponse=!1}ngOnInit(){console.log("ini parentData Assign Program"),console.log(this.parentData),this.initForm(),this.getAllUsers()}initForm(){this.assignProgramDirectorForm=this.fb.group({programDirector:[null,p.Validators.required]})}submit(){if(this.checkFormValidity())return;const e=this.parentData?.intake.map(l=>l._id),n=this.assignProgramDirectorForm.get("programDirector").value,i=this.parentData?.filter,a=this.parentData?.select_all;this.isWaitingForResponse=!0,this.subs.sink=this.intakeChannelService.AssignProgramDirectorToManyPrograms(e,n,i,a).subscribe(l=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},l=>{this.isWaitingForResponse=!1,s().fire({type:"info",title:this.translate.instant("SORRY"),text:l&&l.message?this.translate.instant(l.message.replaceAll("GraphQL error: ","")):l,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}checkFormValidity(){return!!this.assignProgramDirectorForm.invalid&&(s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),html:this.translate.instant("Invalid_Form_Warning.TEXT"),confirmButtonText:this.translate.instant("Invalid_Form_Warning.BUTTON")}),this.assignProgramDirectorForm.markAllAsTouched(),!0)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}selectProgramDirector(e){console.log("ini item select Program Director"),console.log(e)}getAllUsers(){this.isWaitingForResponse=!0;const e=this.parentData?.intake.map(n=>n._id);this.subs.sink=this.intakeChannelService.GetAllUserAdmissionWithIntake(e).subscribe(n=>{if(this.isWaitingForResponse=!1,n)if(n.forEach(i=>{i?.entities?.forEach(a=>{"Academic Director"===a?.type?.name&&this.collectAllUsers.push({_id:i._id,first_name:i.first_name,last_name:i.last_name,civility:i.civility})})}),this.collectAllUsers?.length&&(this.collectAllUsers=this.collectAllUsers.sort((i,a)=>i?.last_name>a?.last_name?1:a?.last_name>i?.last_name?-1:0)),1===this.parentData?.intake?.length)this.assignProgramDirectorForm.get("programDirector").setValue(this.parentData?.intake[0]?.program_director_id?._id);else if(this.parentData?.intake?.length>1){const i=h.uniqBy(this.parentData?.intake,"program_director_id");1===i?.length&&this.assignProgramDirectorForm.get("programDirector").setValue(i[0]?.program_director_id?._id)}},n=>{this.isWaitingForResponse=!1,s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.FormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(I.p))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-assign-program-director-dialog"]],decls:31,vars:26,consts:[[3,"formGroup"],[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",2,"overflow","hidden !important"],[1,"p-col-12"],["clearAllText","Clear","formControlName","programDirector",1,"mrgn-btn",3,"appendTo","multiple","hideSelected","placeholder","notFoundText","searchable"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-button","","mat-raised-button","","color","warn","type","button",3,"click"],["mat-button","","mat-raised-button","","color","primary","type","submit",1,"mr-0",3,"click"],["class","loading-indicator",4,"ngIf"],[3,"value","click"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",6)(9,"button",7),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(10,"mat-icon"),t.\u0275\u0275text(11,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(12,"div",8)(13,"p"),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",3)(17,"div",9)(18,"ng-select",10),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275template(21,Ga,4,6,"ng-option",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(22,za,3,3,"mat-error",12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(23,"div",13)(24,"button",14),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"button",15),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(30,Ya,2,0,"div",16)),2&e&&(t.\u0275\u0275property("formGroup",n.assignProgramDirectorForm),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,14,"INTAKE_CHANNEL.Assign program director")),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(15,16,"INTAKE_CHANNEL.Please select a program director to assign to the selected program")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(19,18,"INTAKE_CHANNEL.Program Director"),"*"),t.\u0275\u0275propertyInterpolate("notFoundText",t.\u0275\u0275pipeBind1(20,20,"NOT RECORD FOUND")),t.\u0275\u0275property("appendTo","body")("multiple",!1)("hideSelected",!0)("searchable",!n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.collectAllUsers),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.assignProgramDirectorForm.get("programDirector").hasError("required")&&n.assignProgramDirectorForm.get("programDirector").touched),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(26,22,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(29,24,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.sg,d.O5,A.Zt,A.Bh,D.lW,f.xY,f.H8,B.Hw,T.TO,L.Ou,p.\u0275NgNoValidate,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,Y.w9,Y.jq,d.gd,O.X$],styles:[".dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.dialog-border[_ngcontent-%COMP%]   .dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:80px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px;padding:0}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container{padding-left:0}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-color:#ff5722!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-placeholder{color:#ff5722!important}"]}),o})();var Et=b(83515),Qa=b(96334),lt=b(99602);const Xa=["mobileNumber"];function Ja(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function Za(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275element(1,"mat-progress-spinner",22),t.\u0275\u0275elementEnd())}let tl=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_){this.parentData=e,this.fb=n,this.dialogRef=i,this.authService=a,this.router=l,this.intakeChannelService=c,this.translate=g,this.coreService=m,this.parseLocalToUTCPipe=_,this.subs=new F.Y,this.isWaitingForResponse=!1,this.today=new Date}ngOnInit(){this.initForm()}initForm(){this.startDateForm=this.fb.group({date:["",[p.Validators.required]],time:["15:59"]})}checkFormValidity(){return!!this.startDateForm.invalid&&(s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.startDateForm.markAllAsTouched(),!0)}submit(){if(this.checkFormValidity())return;this.isWaitingForResponse=!0;const e=h.cloneDeep(this.parentData.programIds),n=[];e&&e.length&&e.forEach(c=>{n.push(c._id.toString())});const i=j(this.today).format("HH:mm");let a=this.startDateForm.get("date").value;a=j(a).format("DD/MM/YYYY");const l={start_date:{date:this.parseLocalToUTCPipe.transformDate(a,i),time:this.parseLocalToUTCPipe.transform(i)}};this.updateProgramData(n,l)}updateProgramData(e,n){this.subs.sink=this.intakeChannelService.updateProgramStartDate(e,n).subscribe(i=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(i)})},i=>{this.isWaitingForResponse=!1,console.log(i,i.message),this.authService.postErrorLog(i),i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}ngOnDestroy(){this.subs.unsubscribe()}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.FormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(Qa.p),t.\u0275\u0275directiveInject(Et.w))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-assign-starting-date-dialog"]],viewQuery:function(e,n){if(1&e&&t.\u0275\u0275viewQuery(Xa,5),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.mobileNumberInput=i.first)}},features:[t.\u0275\u0275ProvidersFeature([Et.w])],decls:34,vars:20,consts:[[1,"dialog-border"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialogTitleWrapper"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",2,"overflow","hidden !important"],[3,"formGroup"],[1,"p-grid",2,"margin-bottom","0.5em"],[1,"p-col-7","pad-y-none",2,"align-self","center"],[1,"p-col-5","pad-y-none",2,"align-self","center"],["hideRequiredMarker",""],["matInput","","readonly","","formControlName","date",1,"form-field",3,"placeholder","matDatepicker","click"],["matSuffix","",3,"for"],["startDatePick",""],[4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",1,"mr-0",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){if(1&e){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"p"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"div",11)(19,"mat-form-field",12)(20,"input",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const l=t.\u0275\u0275reference(24);return t.\u0275\u0275resetView(l.open())}),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(22,"mat-datepicker-toggle",14)(23,"mat-datepicker",null,15),t.\u0275\u0275template(25,Ja,3,3,"mat-error",16),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275elementStart(26,"div",17)(27,"button",18),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(30,"button",19),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(31),t.\u0275\u0275pipe(32,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(33,Za,2,0,"div",20)}if(2&e){const i=t.\u0275\u0275reference(24);t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,10,"Assign starting date")),t.\u0275\u0275advance(7),t.\u0275\u0275property("formGroup",n.startDateForm),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(17,12,"Please select a starting date"),"*"),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(21,14,"Starting date")," *"),t.\u0275\u0275property("matDatepicker",i),t.\u0275\u0275advance(2),t.\u0275\u0275property("for",i),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.startDateForm.get("date").hasError("required")&&n.startDateForm.get("date").touched),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(29,16,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(32,18,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse)}},dependencies:[d.O5,A.Zt,A.Bh,D.lW,lt.Mq,lt.hl,lt.nW,f.xY,f.H8,B.Hw,T.TO,T.KE,T.R9,q.Nt,L.Ou,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.header-dialog[_ngcontent-%COMP%]{margin-top:15px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px;padding:0}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:80px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}"]}),o})();var vt=b(62416),Dt=b(10830);function el(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.item;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.form_builder_name," ")}}function nl(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error",15),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function il(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"input",27),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,2,"search")),t.\u0275\u0275property("formControl",e.studentSignatoryName)}}function ol(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",33),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(2,4,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(3,6,null==e?null:e.civility)," ")}}function al(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",34),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function ll(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"input",28),t.\u0275\u0275listener("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.filterSignatoryUser(i.target.value,l,c.value.user_type_id))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"mat-autocomplete",29,30),t.\u0275\u0275template(5,ol,4,8,"mat-option",31),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,al,3,3,"span",32),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275reference(4),n=t.\u0275\u0275nextContext(),i=n.index,a=n.$implicit,l=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,6,"search")),t.\u0275\u0275property("matAutocomplete",e),t.\u0275\u0275advance(2),t.\u0275\u0275property("displayWith",l.displayFullName.bind(l))("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",l.signatoryUserList[i]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.invalid&&a.touched)}}function rl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",25)(1,"div",26),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",1),t.\u0275\u0275template(4,il,3,4,"ng-container",16),t.\u0275\u0275template(5,ll,7,8,"ng-container",16),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit,n=r.index,i=t.\u0275\u0275nextContext(3);let a,l;t.\u0275\u0275property("formGroupName",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",e.invalid&&e.touched?"red":""),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",i.getNameOfUserType(e,"signatory"),"*"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.studentSignatory&&"5a067bba1c0217218c75f8ab"===(null==e||null==(a=e.get("user_type_id"))?null:a.value)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","5a067bba1c0217218c75f8ab"!==(null==e||null==(l=e.get("user_type_id"))?null:l.value)||!i.studentSignatory&&"5a067bba1c0217218c75f8ab"===(null==e||null==(l=e.get("user_type_id"))?null:l.value))}}function sl(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",22)(2,"h4",23),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275template(6,rl,6,5,"div",24),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"SENDING_CONTRACT_DIALOG.assign user for signatory")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",null==e.signatoryArr?null:e.signatoryArr.controls)}}function cl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",26),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngClass",e.invalid&&e.touched?"red":""),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,n.getNameOfUserType(e,"validator")),"* ")}}function dl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"input",38),t.\u0275\u0275listener("keyup",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(2),l=a.index,c=a.$implicit,g=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(g.filterValidatorUser(i.target.value,l,c.value.validator))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementEnd()}if(2&o){t.\u0275\u0275nextContext();const e=t.\u0275\u0275reference(4);t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(1,2,"search")),t.\u0275\u0275property("matAutocomplete",e)}}function pl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",33),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(2,4,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(3,6,null==e?null:e.civility)," ")}}function ml(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",34),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function hl(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275template(2,dl,2,4,"input",37),t.\u0275\u0275elementStart(3,"mat-autocomplete",29,30),t.\u0275\u0275template(5,pl,4,8,"mat-option",31),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,ml,3,3,"span",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(),n=e.$implicit,i=e.index,a=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.value.validator),t.\u0275\u0275advance(1),t.\u0275\u0275property("displayWith",a.displayFullName.bind(a))("panelWidth","fit"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",a.validatorUserList[i]),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.invalid&&n.touched)}}function gl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,cl,3,4,"div",36),t.\u0275\u0275template(2,hl,7,5,"ng-container",16),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("formGroupName",r.index),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.value?null:e.value.validator),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.value?null:e.value.validator)}}function _l(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",35)(2,"h4",23),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,gl,3,3,"div",24),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"SENDING_CONTRACT_DIALOG.assign user for step validatory")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",null==e.validatorArr?null:e.validatorArr.controls)}}function ul(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,sl,7,4,"ng-container",16),t.\u0275\u0275template(2,_l,6,4,"ng-container",16),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.signatoryArr||null==e.signatoryArr.controls?null:e.signatoryArr.controls.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.validatorArr||null==e.validatorArr.controls?null:e.validatorArr.controls.length)}}function fl(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",39),t.\u0275\u0275element(1,"mat-spinner",40),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let Ut=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u,y){this.dialogRef=e,this.parentData=n,this.translate=i,this.fb=a,this.parseStringDatePipe=l,this.formBuilderService=c,this.intakeChannelService=g,this.teacherService=m,this.authService=_,this.utilService=u,this.academicService=y,this.subs=new F.Y,this.isWaitingForResponse=!1,this.studentSignatoryName=new p.UntypedFormControl(null),this.allFormBuilderTempalate=[],this.studentSignatory=null,this.signatoryUserList=[],this.validatorUserList=[],this.studentsDropdown=[]}ngOnInit(){1===this.parentData?.students?.length&&(this.studentSignatory={name:this.parentData.students[0]?.last_name?.toUpperCase()+" "+this.parentData.students[0]?.first_name+" "+(""===this.parentData.students[0].civility?"":this.translate.instant(this.parentData.students[0].civility)),id:this.parentData.students[0]?.user_id?._id}),this.getAllFormBuilderTemplate(),this.initForm(),this.getAllUserType()}initForm(){this.cvecForm=this.fb.group({form_template:[null,p.Validators.required],send_date:[null,p.Validators.required],step_validator_input:this.fb.array([]),contract_validator_signatory_status:this.fb.array([])})}initSignatoryForm(){return this.fb.group({user_type_id:[null],user_id:[null,[p.Validators.required]]})}initValidatorsForm(){return this.fb.group({user_validator:[null,[p.Validators.required]],validator:[null],pre_contract_template_step_id:[null]})}get validatorArr(){return this.cvecForm.get("step_validator_input")}get signatoryArr(){return this.cvecForm.get("contract_validator_signatory_status")}getSignatoryArray(){return this.cvecForm.get("contract_validator_signatory_status")}getValidatorArray(){return this.cvecForm.get("step_validator_input")}pushSignatory(){this.getSignatoryArray().push(this.initSignatoryForm())}pushValidator(){this.getValidatorArray().push(this.initValidatorsForm())}displayFullName(e){if(e){const n=e.civility&&"neutral"!==e.civility&&e.civility?this.translate?this.translate.instant(e.civility):e.civility:"";return e.last_name.toUpperCase()+" "+e.first_name+" "+n}return null}getAllUserType(){this.subs.sink=this.academicService.getAllUserTypesIncludeStudent().subscribe(e=>{e&&(this.userTypeList=e)},e=>{this.authService.postErrorLog(e),s().fire({type:"error",title:"Error",text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}filterValidatorUser(e,n,i){if(e.length>2||0===e.length){const a=this.utilService.simpleDiacriticSensitiveRegex(e.toLowerCase());this.getFilterValidatorUser(i,n,a)}}getNameOfUserType(e,n){let i;const a=e.value;return this.userTypeList&&this.userTypeList.length&&(a&&"validator"===n?i=this.userTypeList.find(c=>c._id===a.validator):a&&"signatory"===n&&(i=this.userTypeList.find(c=>c._id===a.user_type_id))),i&&i.name?this.translate.instant("USER_TYPES."+i.name):""}getFilterSignatoryUser(e,n,i){this.isWaitingForResponse=!0,this.subs.sink=this.teacherService.GetAllUsers(e,i).subscribe(a=>{this.isWaitingForResponse=!1,a&&a.length&&(this.signatoryUserList[n]=a)},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}selectedTemplate(e){const n=h.cloneDeep(e),i=this.cvecForm.get("step_validator_input").value,a=this.cvecForm.get("contract_validator_signatory_status").value;if(i?.length)for(let m=i.length-1;m>=0;m--)this.validatorArr.removeAt(m);if(a?.length)for(let m=a.length-1;m>=0;m--)this.signatoryArr.removeAt(m);const l=n?.steps?.length?n.steps:[],c=l.find(m=>"step_with_signing_process"===m?.step_type);if(c?.contract_signatory?.length){c.contract_signatory.forEach(_=>{this.pushSignatory()});const m=c?.contract_signatory.map(_=>({user_id:this.studentSignatory&&"5a067bba1c0217218c75f8ab"===_?._id?this.studentSignatory?.id:null,user_type_id:_._id,is_already_sign:!1}));this.cvecForm.get("contract_validator_signatory_status").patchValue(m),this.cvecForm.get("contract_validator_signatory_status").value.forEach((_,u)=>{"5a067bba1c0217218c75f8ab"===_?.user_type_id?this.studentSignatory?this.studentSignatoryName.patchValue(this.studentSignatory?.name):this.parentData?.students?.length&&(!this.parentData?.isCheckedAll||this.parentData?.isCheckedAll&&this.parentData?.students?.length<=100)?(this.parentData.students.filter(y=>{y?.user_id?._id&&this.studentsDropdown.push({...y?.user_id})}),this.signatoryUserList[u]=this.studentsDropdown):this.getFilterSignatoryUserIncludeStudent(_?.user_type_id,u):this.getFilterSignatoryUser(_.user_type_id,u)})}const g=l.filter(m=>m&&m.validator);if(g&&g.length){g.forEach(_=>{_.validator&&this.pushValidator()});let m=g.map(_=>({user_validator:_?.user_validator?_.user_validator:null,validator:_&&_.validator?_.validator._id:null,pre_contract_template_step_id:_._id}));m=m.filter(_=>_.user_validator||_.validator),this.cvecForm.get("step_validator_input").patchValue(m),this.cvecForm.get("step_validator_input").value.forEach((_,u)=>{this.validatorUserList[u]=this.getFilterValidatorUser(_.validator,u)})}}getFilterValidatorUser(e,n,i){this.isWaitingForResponse=!0,this.subs.sink=this.teacherService.GetAllUsers(e,i).subscribe(a=>{this.isWaitingForResponse=!1,a&&a.length&&(this.validatorUserList[n]=a)},a=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}filterSignatoryUser(e,n,i){if(e.length>2||0===e.length){const a=this.utilService.simpleDiacriticSensitiveRegex(e.toLowerCase());if("5a067bba1c0217218c75f8ab"===i)if(this.studentsDropdown?.length)if(e?.length>2&&a){const l=this.studentsDropdown.filter(c=>this.utilService.simpleDiacriticSensitiveRegex(c?.last_name?.toLowerCase())?.includes(a));l?.length?this.signatoryUserList[n]=l:this.getFilterSignatoryUserIncludeStudent(i,n,a)}else setTimeout(()=>{this.signatoryUserList[n]=this.studentsDropdown},600);else this.getFilterSignatoryUserIncludeStudent(i,n,a);else this.getFilterSignatoryUser(i,n,a)}}getFilterSignatoryUserIncludeStudent(e,n,i){this.subs.sink=this.teacherService.GetAllUsersIncludeStudent(e,i).subscribe(a=>{if(a&&a.length)if("5a067bba1c0217218c75f8ab"===e&&this.parentData?.students?.length){let l=[];h.cloneDeep(a).forEach(g=>{const m=this.parentData.students.find(_=>g._id===_?.user_id?._id);m&&l.push(m)}),this.signatoryUserList[n]=l}else this.signatoryUserList[n]=a},a=>{this.authService.postErrorLog(a),s().fire({type:"error",title:"Error",text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}populatedData(){const e=h.cloneDeep(this.parentData?.programIds[0]),n=this.allFormBuilderTempalate.filter(l=>l?._id===e?.cvec_template_id?._id);e?.cvec_validators?.length&&e?.cvec_validators.forEach(l=>{const c=n[0]?.steps?.findIndex(g=>g?._id===l?.form_builder_step_id?._id);c>=0&&(n[0].steps[c]={...n[0]?.steps[c],user_validator:l?.user_validator})});const i=this.parseStringDatePipe?.transformStringToDate(e?.cvec_send_date);this.cvecForm?.patchValue({form_template:e?.cvec_template_id?._id,send_date:i}),n?.length&&this.selectedTemplate(n[0])}getAllFormBuilderTemplate(){this.isWaitingForResponse=!0,this.subs.sink=this.formBuilderService.getAllFormBuildersByTemplate("one_time_form").subscribe(e=>{this.isWaitingForResponse=!1,e?.length?(this.allFormBuilderTempalate=e,"single"===this.parentData?.item&&this.populatedData()):this.allFormBuilderTempalate=[]},()=>{this.isWaitingForResponse=!1})}validate(){if(this.isWaitingForResponse=!0,this.cvecForm.invalid)this.isWaitingForResponse=!1,s().fire({type:"info",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.cvecForm.markAllAsTouched()});else{const e=this.cvecForm.value?.step_validator_input?.map(_=>({form_builder_step_id:_?.pre_contract_template_step_id,user_validator:_?.user_validator?._id,validator:_?.validator})),n=h.cloneDeep(this.parentData.programIds),i=[];n&&n.length&&n.forEach(_=>{i.push(_._id.toString())});let a=this.cvecForm.get("send_date").value;a=j(a).format("DD/MM/YYYY");const c={cvec_template_id:this.cvecForm.get("form_template").value,cvec_send_date:a,cvec_validators:e},g=this.parentData?.filter,m=this.parentData?.select_all;this.subs.sink=this.intakeChannelService.updatePrograms(i,c,m,g).subscribe(_=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},_=>{this.isWaitingForResponse=!1,s().fire({type:"error",title:"Error",text:_&&_.message?_.message:_,confirmButtonText:this.translate.instant("OK")})})}}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(Dt.n),t.\u0275\u0275directiveInject(Nt.c),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(Lt.I),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(Vt.P))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-connect-cvec-form-dialog"]],features:[t.\u0275\u0275ProvidersFeature([Dt.n])],decls:39,vars:36,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"p-grid","p-0","dialog-border"],[1,"p-col-8"],[2,"margin-bottom","0 !important"],[1,"p-col"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",3,"formGroup"],[1,"p-grid"],["bindLabel","form_builder_name","bindValue","_id","clearAllText","Clear","formControlName","form_template",1,"mrgn-btn",3,"appendTo","multiple","items","hideSelected","placeholder","clearable","notFoundText","searchable","change"],["ng-option-tmp",""],["class","invalidValue",4,"ngIf"],[1,"p-col-4"],["floatLabel","never",1,"full-width"],["matInput","","readonly","","formControlName","send_date",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["myDatepicker",""],[1,"invalidValue"],[4,"ngIf"],["class","loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",3,"click"],[1,"break-space"],["formArrayName","contract_validator_signatory_status",1,"assign-border"],[1,"section-title"],["class","p-grid",3,"formGroupName",4,"ngFor","ngForOf"],[1,"p-grid",3,"formGroupName"],[1,"p-col-4","section-field-title",3,"ngClass"],["required","","matInput","","type","text","readonly","",1,"custom-input",3,"formControl","placeholder"],["required","","matInput","","type","text","formControlName","user_id",1,"custom-input",3,"placeholder","matAutocomplete","keyup"],[3,"displayWith","panelWidth"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["style","color: #f44336; font-size: 75%; margin: 0",4,"ngIf"],[3,"value"],[2,"color","#f44336","font-size","75%","margin","0"],["formArrayName","step_validator_input",1,"assign-border"],["class","p-col-4 section-field-title",3,"ngClass",4,"ngIf"],["required","","matInput","","type","text","class","custom-input","formControlName","user_validator",3,"placeholder","matAutocomplete","keyup",4,"ngIf"],["required","","matInput","","type","text","formControlName","user_validator",1,"custom-input",3,"placeholder","matAutocomplete","keyup"],[1,"loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){if(1&e){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(5,"div",3)(6,"button",4),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"close"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6)(11,"div",1)(12,"ng-select",7),t.\u0275\u0275listener("change",function(l){return n.selectedTemplate(l)}),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275template(15,el,2,1,"ng-template",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(16,nl,3,3,"mat-error",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",10)(18,"mat-form-field",11)(19,"mat-label"),t.\u0275\u0275text(20),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(22,"input",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const l=t.\u0275\u0275reference(26);return t.\u0275\u0275resetView(l.open())}),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(24,"mat-datepicker-toggle",13)(25,"mat-datepicker",null,14),t.\u0275\u0275elementStart(27,"mat-error",15),t.\u0275\u0275text(28),t.\u0275\u0275pipe(29,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275template(30,ul,3,2,"ng-container",16),t.\u0275\u0275template(31,fl,2,1,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(32,"div",18)(33,"button",19),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(34),t.\u0275\u0275pipe(35,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(36,"button",20),t.\u0275\u0275listener("click",function(){return n.validate()}),t.\u0275\u0275text(37),t.\u0275\u0275pipe(38,"translate"),t.\u0275\u0275elementEnd()()}if(2&e){const i=t.\u0275\u0275reference(26);t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,20,"Connect CVEC Form")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("formGroup",n.cvecForm),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(13,22,"Select the form to connect to the program(s)"),"*"),t.\u0275\u0275propertyInterpolate("notFoundText",t.\u0275\u0275pipeBind1(14,24,"NOT RECORD FOUND")),t.\u0275\u0275property("appendTo","body")("multiple",!1)("items",n.allFormBuilderTempalate)("hideSelected",!0)("clearable",!1)("searchable",!n.isWaitingForResponse),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",n.cvecForm.get("form_template").hasError("required")&&n.cvecForm.get("form_template").touched),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(21,26,"Select Send Date")),t.\u0275\u0275advance(2),t.\u0275\u0275property("matDatepicker",i)("placeholder",t.\u0275\u0275pipeBind1(23,28,"Select Send Date")),t.\u0275\u0275advance(2),t.\u0275\u0275property("for",i),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(29,30,"This field is required")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==n.cvecForm?null:n.cvecForm.get("form_template").value),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(35,32,"Cancel")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(38,34,"Validate")," ")}},dependencies:[d.mk,d.sg,d.O5,A.Zt,A.Bh,ct.XC,ct.ZL,R.ey,D.lW,lt.Mq,lt.hl,lt.nW,f.ZT,f.xY,f.H8,B.Hw,T.TO,T.KE,T.hX,T.R9,q.Nt,L.Ou,p.DefaultValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.RequiredValidator,p.FormControlDirective,p.FormGroupDirective,p.FormControlName,p.FormGroupName,p.FormArrayName,st.oO,Y.w9,Y.ir,d.gd,O.X$],styles:["[_nghost-%COMP%]  .mat-dialog-actions{padding:16px;padding-bottom:16px!important}[_nghost-%COMP%]  .mat-dialog-content{overflow:unset!important;margin:0;padding:16px}.doctype-input[_ngcontent-%COMP%]{width:90%}.uploaded-file-wrapper[_ngcontent-%COMP%]{display:block}.icon[_ngcontent-%COMP%]{vertical-align:middle}.no-padding[_ngcontent-%COMP%]{padding-top:0!important}h1[_ngcontent-%COMP%]{color:#000;margin-left:6px;margin-bottom:10px!important}.dialog-body[_ngcontent-%COMP%]{font-size:14px!important}.mat-select[_ngcontent-%COMP%]{margin-bottom:-7px}.disabled-text[_ngcontent-%COMP%]{color:#9e9e9ecf;font-weight:100}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black;padding:8px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;min-height:38px;align-items:center}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container{padding-left:0}[_nghost-%COMP%]  .ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{padding-left:0}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}.invalidValue[_ngcontent-%COMP%]{font-size:12px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-color:#ff5722!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-placeholder{color:#ff5722!important}.assign-border[_ngcontent-%COMP%]{border:2px solid #fdd835;padding:5px;margin:5px}.custom-input[_ngcontent-%COMP%]{border-bottom:1px solid rgb(241,241,241)!important}"]}),o})();function Cl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",17)(1,"mat-checkbox",18),t.\u0275\u0275listener("change",function(i){const a=t.\u0275\u0275restoreView(e),l=a.$implicit,c=a.index,g=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(g.onCheckTest(i,l,c))}),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",null==e?null:e.isChecked),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,null==e?null:e.name))}}function bl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"form",15),t.\u0275\u0275template(1,Cl,4,4,"div",16),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("formGroup",e.admissionDocForm),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.blockList)}}function xl(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," ! "))}function vl(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",20),t.\u0275\u0275element(1,"mat-spinner",21),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("diameter",100))}let Ht=(()=>{class o{constructor(e,n,i,a,l){this.dialogRef=e,this.parentData=n,this.fb=i,this.intakeChannelService=a,this.translate=l,this.subs=new F.Y,this.selectedTests=[],this.isValid=!0,this.blockList=[{name:"Baccalaur\xe9at ou \xe9quivalent",isChecked:!1},{name:"Justificatif / attestation validant 60 ECTS ou \xe9quivalent",isChecked:!1},{name:"Justificatif / attestation validant 120 ECTS ou \xe9quivalent",isChecked:!1},{name:"Justificatif / attestation validant 180 ECTS ou \xe9quivalent",isChecked:!1},{name:"Justificatif / attestation validant 240 ECTS ou \xe9quivalent",isChecked:!1},{name:"Pi\xe8ces d'identit\xe9",isChecked:!1}],this.isWaitingForResponse=!1}ngOnInit(){this.initAdmissionDocForm(),this.blockList?.forEach(e=>{this.addAdmissionChoises()}),"single"===this.parentData?.item&&this.populatedData()}populatedData(){const e=h.cloneDeep(this.parentData?.programIds[0]);e?.adm_doc_names?.length&&(this.selectedTests=e?.adm_doc_names,e?.adm_doc_names.forEach(n=>{const i=this.blockList?.findIndex(a=>a?.name===n);this.blockList[i].isChecked=!0}))}initAdmissionDocForm(){this.admissionDocForm=this.fb.group({choices:this.fb.array([])})}addAdmissionChoises(){this.getSegmentFormarray().push(new p.UntypedFormControl(null))}getSegmentFormarray(){return this.admissionDocForm.get("choices")}closeDialog(){this.dialogRef.close()}onCheckTest(e,n,i){if(e?.checked&&n?.name)this.selectedTests.includes(n?.name)||(this.isValid=!0,this.selectedTests.push(n?.name),this.getSegmentFormarray().at(i).patchValue(n?.name));else if(!e?.checked&&n?.name){const a=this.selectedTests.findIndex(l=>l===n?.name);(a||0===a)&&(this.selectedTests.splice(a,1),this.getSegmentFormarray().at(i).patchValue(null),this.selectedTests?.length||(this.isValid=!1))}}checkValidation(){return this.selectedTests?.length?(this.isValid=!0,!0):(this.isValid=!1,!1)}validate(){if(this.isWaitingForResponse=!0,this.checkValidation()){const e=h.cloneDeep(this.parentData.programIds),n=[];e&&e.length&&e.forEach(c=>{n.push(c._id.toString())});const a=this.parentData?.filter,l=this.parentData?.select_all;this.subs.sink=this.intakeChannelService.updatePrograms(n,{adm_doc_names:this.selectedTests},l,a).subscribe(()=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close(!0)})},c=>{this.isWaitingForResponse=!1,s().fire({type:"error",title:"Error",text:c&&c.message?c.message:c,confirmButtonText:this.translate.instant("OK")})})}else this.isWaitingForResponse=!1,s().fire({type:"info",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{})}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(O.sK))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-admission-document-dialog"]],decls:27,vars:15,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"w-90","no-padding"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body"],[1,"p-col-12"],["class","p-grid",3,"formGroup",4,"ngIf"],["style","color: #f44336; font-size: 16px; padding: 8px; transition: ease-in-out 0.5ms;",4,"ngIf"],["class","inner-loading-indicator",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","custom-padding"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",1,"mr-0",3,"click"],[1,"p-grid",3,"formGroup"],["class","test-item p-col-12 pad-y-none",4,"ngFor","ngForOf"],[1,"test-item","p-col-12","pad-y-none"],[3,"checked","change"],[2,"color","#f44336","font-size","16px","padding","8px","transition","ease-in-out 0.5ms"],[1,"inner-loading-indicator"],["color","accent",3,"diameter"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7)(12,"div",2)(13,"div",8),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",8),t.\u0275\u0275template(17,bl,2,2,"form",9),t.\u0275\u0275template(18,xl,3,3,"div",10),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(19,vl,2,1,"div",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"div",12)(21,"button",13),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(24,"button",14),t.\u0275\u0275listener("click",function(){return n.validate()}),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,7,"BTN_ADMISSIONDOCUMENT")),t.\u0275\u0275advance(9),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(15,9,"Tick the box of the document you wish to connect to be selected program(s)")," : * "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",null==n.blockList?null:n.blockList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isValid),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(23,11,"Cancel")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(26,13,"Validate")," "))},dependencies:[d.sg,d.O5,A.Zt,A.Bh,D.lW,_t.oG,f.xY,f.H8,B.Hw,L.Ou,p.\u0275NgNoValidate,p.NgControlStatusGroup,p.FormGroupDirective,O.X$],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}.mr-0[_ngcontent-%COMP%]{margin-right:0}.custom-padding[_ngcontent-%COMP%]{padding-bottom:8px;padding-top:0;padding-right:16px}.header-dialog[_ngcontent-%COMP%]{margin-top:10px;padding:0 5px 0 24px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-90[_ngcontent-%COMP%]{width:90px}.text-area-border[_ngcontent-%COMP%]{border:1px solid rgba(72,72,72,.2588235294);padding:10px}.invalid[_ngcontent-%COMP%]{border:1px solid red!important}.invalid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:red}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}[_nghost-%COMP%]     .mat-checkbox-layout .mat-checkbox-label{white-space:normal!important}[_nghost-%COMP%]     .mat-dialog-content{margin:0;padding:16px!important}"]}),o})();function Ol(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllRegistrationProfileForCheckbox(0,"remove"))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Remove registration profile")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"INTAKE_CHANNEL.Remove registration profile")," "))}function yl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.connectRegistration(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Connect registration profile")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"INTAKE_CHANNEL.Connect registration profile")," "))}function Sl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.addConditionCheck(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Add conditions")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"INTAKE_CHANNEL.Add conditions")," "))}function Pl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllDocumentFormForCheckbox(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Connect admission document form")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Connect admission document form")," "))}function Ml(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",60),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.getAllIdForCheckbox(0))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",61),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"EXPORT")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"Export")," ")}}function wl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",60),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.resetTable())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",62),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"Reset Filter")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"RESET")," ")}}function Tl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",52)(1,"div",53)(2,"div",54)(3,"button",55),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementStart(7,"mat-icon"),t.\u0275\u0275text(8,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"mat-menu",null,56)(11,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.getAllAssignStartDateForCheckbox(0))}),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,Ol,4,6,"button",58),t.\u0275\u0275template(16,yl,4,6,"button",58),t.\u0275\u0275template(17,Sl,4,6,"button",58),t.\u0275\u0275template(18,Pl,4,6,"button",58),t.\u0275\u0275elementStart(19,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.getAllDirectorProgramForCheckbox(0))}),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275text(21),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.getAllCVECFormForCheckBox(0))}),t.\u0275\u0275pipe(24,"translate"),t.\u0275\u0275text(25),t.\u0275\u0275pipe(26,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(27,"button",57),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.getAllAdmissionDocumentForCheckBox(0))}),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275text(29),t.\u0275\u0275pipe(30,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(31,Ml,5,7,"button",59),t.\u0275\u0275template(32,wl,5,7,"button",59),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275reference(10),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(4,18,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,20,"Action")," "),t.\u0275\u0275advance(6),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(12,22,"Assign starting date")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,24,"Assign starting date")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.removeRegistrationProfileIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.addRegistrationProfileIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.addConditionMultipleIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.addConditionMultipleIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(20,26,"INTAKE_CHANNEL.Assign a program director")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(22,28,"INTAKE_CHANNEL.Assign a program director")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(24,30,"INTAKE_CHANNEL.Connect CVEC Form")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(26,32,"INTAKE_CHANNEL.Connect CVEC Form")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(28,34,"BTN_ADMISSIONDOCUMENT")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(30,36,"BTN_ADMISSIONDOCUMENT")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.exportCsvIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.resetIntakeChannelSchoolAdmissionTabPerm())}}function kl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Il(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function El(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Dl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Fl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Al(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",63)(1,"mat-form-field",64)(2,"mat-select",65),t.\u0275\u0275template(3,Dl,3,4,"mat-option",66),t.\u0275\u0275template(4,Fl,2,2,"mat-option",67),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.campusFilterCtrl)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.campusList&&(null==e.campusList?null:e.campusList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.campusList)}}function Bl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Nl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Ll(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",63)(1,"mat-form-field",64)(2,"mat-select",65),t.\u0275\u0275template(3,Bl,3,4,"mat-option",66),t.\u0275\u0275template(4,Nl,2,2,"mat-option",67),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.levelFilterCtrl)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.levelList&&(null==e.levelList?null:e.levelList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.levelList)}}function Vl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Rl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Ul(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",63)(1,"mat-form-field",64)(2,"mat-select",65),t.\u0275\u0275template(3,Vl,3,4,"mat-option",66),t.\u0275\u0275template(4,Rl,2,2,"mat-option",67),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.sectorFilterCtrl)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sectorList&&(null==e.sectorList?null:e.sectorList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sectorList)}}function Hl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function Kl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("speciality"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.name)}}function Wl(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",63)(1,"mat-form-field",64)(2,"mat-select",65),t.\u0275\u0275template(3,Hl,3,4,"mat-option",66),t.\u0275\u0275template(4,Kl,2,2,"mat-option",67),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.specialityFilterCtrl)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialityList&&(null==e.specialityList?null:e.specialityList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.specialityList)}}function jl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",63)(1,"mat-form-field")(2,"input",69),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275reference(6);return t.\u0275\u0275resetView(i.open())}),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"mat-datepicker-toggle",70)(5,"mat-datepicker",null,71),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275reference(6),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"search")),t.\u0275\u0275property("matDatepicker",e)("formControl",n.startingDateFilterCtrl),t.\u0275\u0275advance(2),t.\u0275\u0275property("for",e)}}function $l(o,r){1&o&&(t.\u0275\u0275elementStart(0,"ng-option",75),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function ql(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"ng-option",75),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Gl(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",63)(1,"ng-select",72),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.selectRegist(i))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275template(3,$l,3,4,"ng-option",73),t.\u0275\u0275template(4,ql,2,2,"ng-option",74),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(2,7,"search")),t.\u0275\u0275property("appendTo","body")("multiple",!1)("clearable",!1)("formControl",e.regisFilterCtrl),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",e.regisList&&(null==e.regisList?null:e.regisList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.regisList)}}function zl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Yl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Ql(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Xl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Jl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function Zl(o,r){1&o&&t.\u0275\u0275element(0,"th",63)}function tr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",76)(1,"mat-checkbox",77),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?a.masterToggle():null)})("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.showOptions("all",""))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",e.selection.hasValue()&&e.isAllSelected()||e.isCheckedAll)("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function er(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",78)(1,"mat-checkbox",79),t.\u0275\u0275listener("click",function(i){return i.stopPropagation()})("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?c.selection.toggle(l._id):null)})("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.showOptions("one",a))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",n.selection.isSelected(e._id)||n.isCheckedAll&&!n.dataUnselectUser.includes(null==e?null:e._id))("aria-label",n.checkboxLabel(e))}}function nr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",81),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"INTAKE_CHANNEL.Scholar season"))}function ir(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.scholar_season),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.scholar_season," ")}}function or(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.School")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.School")))}function ar(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.school),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.school," ")}}function lr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Campus")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Campus")))}function rr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.campus),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.campus," ")}}function sr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Level")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Level")))}function cr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e?null:e.level),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.level," ")}}function dr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Sector")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Sector")))}function pr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e||null==e.sector_id?null:e.sector_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.sector_id?null:e.sector_id.name," ")}}function mr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Speciality")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Speciality")))}function hr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e||null==e.speciality_id?null:e.speciality_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.speciality_id?null:e.speciality_id.name," ")}}function gr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",83),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Starting date")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Starting date")))}function _r(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate1("matTooltip","\n      ",n.transformStartDate(e),""),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.transformStartDate(e)," ")}}function ur(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Registration profile")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Registration profile")))}function fr(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"span",85),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function Cr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275template(1,fr,3,1,"ng-container",84),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("matTooltip",n.renderTooltipProfileRate(null==e?null:e.profil_rate)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",null==e?null:e.profil_rate)}}function br(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Template doc expected")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Template doc expected")))}function xr(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275text(1),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.admission_document_template[(null==e?null:e.admission_document_template.length)-1]?null:e.admission_document_template[(null==e?null:e.admission_document_template.length)-1].form_builder_name," ")}}function vr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275template(1,xr,2,1,"ng-container",49),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275property("matTooltip",n.renderTooltipAdmissionDoc(null==e?null:e.admission_document_template)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==e||null==e.admission_document_template?null:e.admission_document_template.length)&&(null==e?null:e.admission_document_template[(null==e?null:e.admission_document_template.length)-1]))}}function Or(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Template CVEC")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Template CVEC")))}function yr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275elementContainerStart(1),t.\u0275\u0275text(2),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.cvec_template_id?null:e.cvec_template_id.form_builder_name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.cvec_template_id?null:e.cvec_template_id.form_builder_name," ")}}function Sr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Conditions")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Conditions")))}function Pr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",89),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onEditCondition(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Edit")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function Mr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",90),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onDownloadCondition(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"download"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Download")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function wr(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",86),t.\u0275\u0275template(1,Pr,4,4,"button",87),t.\u0275\u0275template(2,Mr,4,4,"button",88),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.editPermIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.admission_document?null:e.admission_document.s3_file_name)}}function Tr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",91),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,1,"INTAKE_CHANNEL.Flyer"))}function kr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",89),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onEditFlyer(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"edit"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Edit")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function Ir(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",89),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.onDownloadFlyer(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"download"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Download")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function Er(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",86),t.\u0275\u0275template(1,kr,4,4,"button",87),t.\u0275\u0275template(2,Ir,4,4,"button",87),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.editPermIntakeChannelSchoolAdmissionTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e||null==e.admission_flyer?null:e.admission_flyer.s3_file_name)}}function Dr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",92),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"INTAKE_CHANNEL.Program Director")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"INTAKE_CHANNEL.Program Director")))}const Fr=function(o,r){return{"green-icon":o,"red-icon":r}};function Ar(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",86)(1,"mat-icon",93),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3," lens "),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(2,2,null!=e&&null!=e.program_director_id&&e.program_director_id._id?"INTAKE_CHANNEL.Affected":"INTAKE_CHANNEL.Not Affected"))("ngClass",t.\u0275\u0275pureFunction2(4,Fr,null==e||null==e.program_director_id?null:e.program_director_id._id,!(null!=e&&null!=e.program_director_id&&e.program_director_id._id)))}}function Br(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",94)(1,"h5"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"Action")))}function Nr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",86)(1,"button",89),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.AssignProgramDirector("single",a))}),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275element(3,"mat-icon",95),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",89),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.connectCVECForm("single",a))}),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275element(6,"mat-icon",96),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"button",89),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.admissionDocument("single",a))}),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275element(9,"mat-icon",97),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(2,6,"INTAKE_CHANNEL.Assign a program director")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(5,8,"INTAKE_CHANNEL.Connect CVEC Form")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(8,10,"BTN_ADMISSIONDOCUMENT")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0||e.isCheckedAll)}}function Lr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",98)(1,"div",99),t.\u0275\u0275element(2,"mat-spinner",100),t.\u0275\u0275elementEnd()())}function Vr(o,r){1&o&&t.\u0275\u0275element(0,"tr",101)}function Rr(o,r){1&o&&t.\u0275\u0275element(0,"tr",101)}function Ur(o,r){1&o&&t.\u0275\u0275element(0,"tr",101)}function Hr(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",102),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function Kr(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",103),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function Wr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",105),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")," "))}function jr(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,Wr,3,3,"div",104),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.noData))}}const $r=function(){return["reset"]},qr=function(){return["loading"]},Gr=function(o){return{hide:o}},zr=function(o){return{"hide-pagination-buttons":o}},Yr=function(){return[10]};let Qr=(()=>{class o{constructor(e,n,i,a,l,c,g,m,_,u,y){this.intakeService=e,this.translate=n,this.dialog=i,this.utilityService=a,this.filterBreadCrumbService=l,this.exportCsvService=c,this.financesService=g,this.parseUtcToLocalPipe=m,this.permission=_,this.authService=u,this.httpClient=y,this.subs=new F.Y,this.dataSource=new S.by([]),this.displayedColumns=["select","scholar_season","school","campus","level","sector","speciality","startingDate","registration_profile","doc_expected","template_cvec","conditions","flyer","program_director","action"],this.filterColumns=["selectFilter","scholar_seasonFilter","schoolFilter","campusFilter","levelFilter","sectorFilter","specialityFilter","startingDateFilter","registration_profileFilter","doc_expectedFilter","templateCVECFilter","conditionsFilter","flyerFilter","program_directorFilter","actionFilter"],this.sortValue=null,this.dataCount=0,this.selection=new ft.Ov(!0,[]),this.isCheckedAll=!1,this.disabledExport=!0,this.userSelected=[],this.dataSelected=[],this.dataSelectedId=[],this.allStudentForCheckbox=[],this.pageSelected=[],this.filterBreadcrumbData=[],this.isReset=!1,this.isWaitingForResponse=!1,this.dataLoaded=!1,this.campusFilterCtrl=new p.UntypedFormControl(["All"]),this.levelFilterCtrl=new p.UntypedFormControl(["All"]),this.sectorFilterCtrl=new p.UntypedFormControl(["All"]),this.specialityFilterCtrl=new p.UntypedFormControl(["All"]),this.startingDateFilterCtrl=new p.UntypedFormControl(null),this.regisFilterCtrl=new p.UntypedFormControl("All"),this.campusList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.regisList=[],this.allFilter=[],this.filteredValues={scholar_season_ids:null,school:null,campus:null,level:null,speciality:null,sector:null,registration_profile:null,start_date:null,offset:j().utcOffset()},this.isLoading=!1,this.isLoading2=!1,this.isLoadingData=!1,this.hasNoRegistrationProfileConnected=!1,this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.isSelectAllRegis=!0,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allAssignStartDateForCheckbox=[],this.allRegistrationProfileForCheckbox=[],this.allProgramDirectorForCheckbox=[],this.allCVECFormForCheckbox=[],this.allDocumentFormForCheckbox=[],this.allConnectProfileForCheckbox=[],this.allAddConditionForCheckbox=[],this.allConnectAdmissionDocForCheckbox=[],this.isDummyProgramDirector=!0}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser();const e=this.authService.getPermission(),n=this.currentUser?.entities?.find(i=>i?.type?.name===e[0]);this.currentUserTypeId=n?.type?._id,this.filteredValues={scholar_season_ids:[this.scholarSeason._id],school:this.school.short_name,campus:null,level:null,speciality:null,sector:null,registration_profile:null,start_date:null,offset:j().utcOffset()},this.initFilter(),this.getDropdownFilter(0),this.getAllRegistrationProfile(),this.getSpecialityDropdown()}ngOnChanges(){this.filteredValues={scholar_season_ids:[this.scholarSeason._id],school:this.school.short_name,campus:null,level:null,speciality:null,sector:null,registration_profile:null,start_date:null,offset:j().utcOffset()},this.initFilter(),this.getDropdownFilter(0),this.getAllRegistrationProfile(),this.getSpecialityDropdown()}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,Z.O)(null),(0,ht.b)(()=>{this.isReset||this.getallIntakeChannels(),this.dataLoaded=!0})).subscribe()}getallIntakeChannels(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllSchoolIntakeChannel(this.filteredValues,{limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0},this.sortValue).subscribe(n=>{n&&n.length?(this.dataSource.data=h.cloneDeep(n),this.paginator.length=n[0]?.count_document,this.dataCount=n[0]?.count_document):(this.dataSource.data=[],this.paginator.length=0,this.dataCount=0),this.noData=this.dataSource.connect().pipe((0,nt.U)(i=>0===i.length)),this.isReset=!1,this.isWaitingForResponse=!1},n=>{n&&(this.dataSource.data=[],this.paginator.length=0,this.dataCount=0,this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")}))}),this.filterBreadcrumbFormat()}getAllRegistrationProfile(){this.isLoading2=!0,this.subs.sink=this.intakeService.GetAllRegistrationProfileForDropdown().subscribe(e=>{this.isLoading2=!1,this.regisList=e},e=>{this.isLoading2=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("OK")})})}getSpecialityDropdown(){this.specialityList=[];const e=this.school&&this.school._id?this.school._id:null,n=this.scholarSeason&&this.scholarSeason._id?this.scholarSeason._id:null;this.isLoadingData=!0,this.subs.sink=this.financesService.getSpecialityIntakeChannelDropDown(e,n).subscribe(i=>{i&&(this.specialityList=i),this.isLoadingData=!1},i=>{this.isLoadingData=!1,this.authService.postErrorLog(i),i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("OK")})})}getDropdownFilter(e){this.resetFilterDropdown(),this.isLoading=!0;const n={limit:300,page:e},i=[];this.school&&this.school._id&&i.push(this.school._id),this.subs.sink=this.intakeService.GetAllSelectedSchoolProgramScholarSeasonFilter({scholar_season_id:this.scholarSeason&&this.scholarSeason._id?this.scholarSeason._id:null,school_id:i},n,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe(c=>{if(c&&c.length)this.allFilter.push(...c),this.getDropdownFilter(e+1);else{this.isLoading=!1;const g=h.cloneDeep(this.allFilter);g&&g.length&&(g.forEach(m=>{m&&m.campus&&this.campusList.push(m.campus),m&&m.level&&this.levelList.push(m.level),m&&m.sector_id&&this.sectorList.push(m.sector_id)}),this.uniqByFilter())}},c=>{this.isLoading=!1,this.authService.postErrorLog(c),c&&c.message&&c.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:c&&c.message?this.translate.instant(c.message.replaceAll("GraphQL error: ","")):c,confirmButtonText:this.translate.instant("OK")})})}sortData(e){this.sortValue=e.active?{[e.active]:e.direction?e.direction:"asc"}:null,this.dataLoaded&&(this.paginator.pageIndex=0,this.isReset||this.getallIntakeChannels())}initFilter(){this.subs.sink=this.startingDateFilterCtrl.valueChanges.pipe((0,kt.b)(400)).subscribe(e=>{if(e){const n=j(e).format("DD/MM/YYYY");this.filteredValues.start_date=n,this.paginator.pageIndex=0,this.isReset||this.getallIntakeChannels()}})}uniqByFilter(){this.campusList&&this.campusList.length>0&&(this.campusList=h.uniqBy(this.campusList,"_id"),this.campusList=this.campusList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.levelList&&this.levelList.length>0&&(this.levelList=h.uniqBy(this.levelList,"_id"),this.levelList=this.levelList.sort((e,n)=>e.name>n.name?1:n.name>e.name?-1:0)),this.sectorList&&this.sectorList.length>0&&(this.sectorList=h.uniqBy(this.sectorList,"_id")),this.specialityList&&this.specialityList.length>0&&(this.specialityList=h.uniqBy(this.specialityList,"_id"))}selectRegist(e){"All"===e?(this.regisFilterCtrl.setValue("All"),this.filteredValues.registration_profile=null):(this.regisFilterCtrl.setValue(e),this.filteredValues.registration_profile=e),this.paginator.pageIndex=0,this.isReset||this.getallIntakeChannels()}setFilterSelected(e){switch(e){case"campus":if(this.isSelectAllCampus)this.selectAll("campus");else{const n=h.cloneDeep(this.campusFilterCtrl.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllCampus=!0,this.selectAll("campus");else{this.isSelectAllCampus=!1,this.campusFilterCtrl.setValue(i);const l=this.campusFilterCtrl.value;this.filteredValues.campus=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getallIntakeChannels()}}break;case"level":if(this.isSelectAllLevel)this.selectAll("level");else{this.isSelectAllLevel=!1;const n=h.cloneDeep(this.levelFilterCtrl.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllLevel=!0,this.selectAll("level");else{this.levelFilterCtrl.setValue(i);const l=this.levelFilterCtrl.value;this.filteredValues.level=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getallIntakeChannels()}}break;case"sector":if(this.isSelectAllSector)this.selectAll("sector");else{const n=h.cloneDeep(this.sectorFilterCtrl.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllSector=!0,this.selectAll("sector");else{this.isSelectAllSector=!1,this.sectorFilterCtrl.setValue(i);const l=this.sectorFilterCtrl.value;this.filteredValues.sector=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getallIntakeChannels()}}break;case"speciality":if(this.isSelectAllSpeciality)this.selectAll("speciality");else{const n=h.cloneDeep(this.specialityFilterCtrl.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllSpeciality=!0,this.selectAll("speciality");else{this.isSelectAllSpeciality=!1,this.specialityFilterCtrl.setValue(i);const l=this.specialityFilterCtrl.value;this.filteredValues.speciality=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getallIntakeChannels()}}}}selectAll(e){const n=["All"];if("campus"===e){if(this.campusList&&this.campusList.length)if(this.isSelectAllCampus){this.isSelectAllCampus=!1;const i=[];h.cloneDeep(this.campusFilterCtrl.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.campus=i&&i.length>0?i:null,this.campusFilterCtrl.setValue(i)}else this.isSelectAllCampus=!0,this.campusFilterCtrl.setValue(n),this.filteredValues.campus=null;else this.campusFilterCtrl?(this.campusFilterCtrl.setValue(n),this.isSelectAllCampus=!this.isSelectAllCampus):(this.campusFilterCtrl.setValue(null),this.isSelectAllCampus=!this.isSelectAllCampus);this.paginator.pageIndex=0,this.getallIntakeChannels()}else if("level"===e){if(this.levelList&&this.levelList.length)if(this.isSelectAllLevel){this.isSelectAllLevel=!1;const i=[];h.cloneDeep(this.levelFilterCtrl.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.level=i&&i.length>0?i:null,this.levelFilterCtrl.setValue(i)}else this.isSelectAllLevel=!0,this.levelFilterCtrl.setValue(n),this.filteredValues.level=null;else this.levelFilterCtrl?(this.levelFilterCtrl.setValue(n),this.isSelectAllCampus=!this.isSelectAllLevel):(this.levelFilterCtrl.setValue(null),this.isSelectAllCampus=!this.isSelectAllLevel);this.paginator.pageIndex=0,this.getallIntakeChannels()}else if("sector"===e){if(this.sectorList&&this.sectorList.length)if(this.isSelectAllSector){this.isSelectAllSector=!1;const i=[];h.cloneDeep(this.sectorFilterCtrl.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.sector=i&&i.length>0?i:null,this.sectorFilterCtrl.setValue(i)}else this.isSelectAllSector=!0,this.sectorFilterCtrl.setValue(n),this.filteredValues.sector=null;else this.sectorFilterCtrl?(this.sectorFilterCtrl.setValue(n),this.isSelectAllSector=!this.isSelectAllSector):(this.sectorFilterCtrl.setValue(null),this.isSelectAllSector=!this.isSelectAllSector);this.paginator.pageIndex=0,this.getallIntakeChannels()}else if("speciality"===e){if(this.specialityList&&this.specialityList.length)if(this.isSelectAllSpeciality){this.isSelectAllSpeciality=!1;const i=[];h.cloneDeep(this.specialityFilterCtrl.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.speciality=i&&i.length>0?i:null,this.specialityFilterCtrl.setValue(i)}else this.isSelectAllSpeciality=!0,this.specialityFilterCtrl.setValue(n),this.filteredValues.speciality=null;else this.specialityFilterCtrl?(this.specialityFilterCtrl.setValue(n),this.isSelectAllSpeciality=!this.isSelectAllSpeciality):(this.specialityFilterCtrl.setValue(null),this.isSelectAllSpeciality=!this.isSelectAllSpeciality);this.paginator.pageIndex=0,this.getallIntakeChannels()}}clearSelectIfFilter(){this.selection.clear(),this.isCheckedAll=!1,this.dataSelected=[],this.dataSelectedId=[],this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allAssignStartDateForCheckbox=[],this.allRegistrationProfileForCheckbox=[],this.allProgramDirectorForCheckbox=[],this.allCVECFormForCheckbox=[],this.allDocumentFormForCheckbox=[]}resetFilterDropdown(){this.campusList=[],this.levelList=[],this.sectorList=[]}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}isAllSelected(){const e=this.selection.selected.length,n=this.dataSource.data.length;return e===n||e>n}masterToggle(){this.isAllSelected()||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length?(this.selection.clear(),this.dataSelected=[],this.pageSelected=[],this.isCheckedAll=!1,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allAssignStartDateForCheckbox=[],this.allRegistrationProfileForCheckbox=[],this.allConnectProfileForCheckbox=[],this.allAddConditionForCheckbox=[],this.allConnectAdmissionDocForCheckbox=[],this.allProgramDirectorForCheckbox=[],this.allCVECFormForCheckbox=[],this.allDocumentFormForCheckbox=[]):(this.selection.clear(),this.dataSelected=[],this.allStudentForCheckbox=[],this.isCheckedAll=!0,this.dataUnselectUser=[],this.allExportForCheckbox=[],this.allAssignStartDateForCheckbox=[],this.allRegistrationProfileForCheckbox=[],this.allProgramDirectorForCheckbox=[],this.allCVECFormForCheckbox=[],this.allDocumentFormForCheckbox=[],this.allConnectProfileForCheckbox=[],this.allAddConditionForCheckbox=[],this.allConnectAdmissionDocForCheckbox=[],this.dataSource.data.forEach(e=>{this.dataUnselectUser.includes(e._id)||this.selection.select(e._id)}))}getAllIdForCheckbox(e){if(this.isCheckedAll)if(this.dataUnselectUser.length<1)this.downloadCSV();else{0===e&&(this.allExportForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllSchoolIntakeChannelIdCheckbox(this.filteredValues,n,this.sortValue).subscribe(i=>{i&&i.length?(this.allExportForCheckbox.push(...i),this.getAllIdForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.isCheckedAll&&this.allExportForCheckbox&&this.allExportForCheckbox.length&&(this.dataSelected=this.allExportForCheckbox.filter(a=>!this.dataUnselectUser.includes(a._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.downloadCSV()))})}else this.downloadCSV()}getAllAssignStartDateForCheckbox(e){if(this.isCheckedAll){0===e&&(this.allAssignStartDateForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0;const i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllSchoolIntakeChannelIdCheckbox(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{l&&l.length?(this.allAssignStartDateForCheckbox.push(...l),this.getAllAssignStartDateForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.isCheckedAll&&this.allAssignStartDateForCheckbox&&this.allAssignStartDateForCheckbox.length&&(this.dataSelected=this.allAssignStartDateForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.assignStartingDate()))},l=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(l)})}else this.assignStartingDate()}getAllRegistrationProfileForCheckbox(e,n){if(this.isCheckedAll){0===e&&(this.allRegistrationProfileForCheckbox=[],this.dataSelected=[]);const i={limit:500,page:e};this.isWaitingForResponse=!0,this.hasNoRegistrationProfileConnected=!1;const a=h.cloneDeep(this.filteredValues),l=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllRegistrationProfileForCheckbox(a,i,l).pipe((0,at.q)(1)).subscribe(c=>{c&&c.length?(this.allRegistrationProfileForCheckbox.push(...c),this.getAllRegistrationProfileForCheckbox(e+1,n)):(this.isWaitingForResponse=!1,this.allRegistrationProfileForCheckbox&&this.allRegistrationProfileForCheckbox.length&&(this.dataSelected=this.allRegistrationProfileForCheckbox.filter(g=>!this.dataUnselectUser.includes(g._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length?(this.hasNoRegistrationProfileConnected=!!this.dataSelected.find(m=>!m.profil_rate),"remove"===n&&this.removeRegistration()):this.hasNoRegistrationProfileConnected=!1))},c=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(c)})}else"remove"===n&&this.removeRegistration()}getAllDirectorProgramForCheckbox(e){if(this.isCheckedAll){0===e&&(this.allProgramDirectorForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0,this.hasNoRegistrationProfileConnected=!1;const i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllSchoolIntakeChannelDirectorCheckbox(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{l&&l.length?(this.allProgramDirectorForCheckbox.push(...l),this.getAllDirectorProgramForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.allProgramDirectorForCheckbox&&this.allProgramDirectorForCheckbox.length&&(this.dataSelected=this.allProgramDirectorForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.AssignProgramDirector("multiple")))})}else this.AssignProgramDirector("multiple")}getAllCVECFormForCheckBox(e){if(this.isCheckedAll){0===e&&(this.allCVECFormForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0,this.hasNoRegistrationProfileConnected=!1;const i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllSchoolIntakeChannel(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{l&&l.length?(this.allCVECFormForCheckbox.push(...l),this.getAllCVECFormForCheckBox(e+1)):(this.isWaitingForResponse=!1,this.allCVECFormForCheckbox&&this.allCVECFormForCheckbox.length&&(this.dataSelected=this.allCVECFormForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.connectCVECForm("multiple")))})}else this.connectCVECForm("multiple")}getAllAdmissionDocumentForCheckBox(e){if(this.isCheckedAll){0===e&&(this.allCVECFormForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0,this.hasNoRegistrationProfileConnected=!1;const i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllSchoolIntakeChannel(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{l&&l.length?(this.allCVECFormForCheckbox.push(...l),this.getAllAdmissionDocumentForCheckBox(e+1)):(this.isWaitingForResponse=!1,this.allCVECFormForCheckbox&&this.allCVECFormForCheckbox.length&&(this.dataSelected=this.allCVECFormForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.admissionDocument("multiple")))})}else this.admissionDocument("multiple")}getAllDocumentFormForCheckbox(e){if(this.isCheckedAll){0===e&&(this.allDocumentFormForCheckbox=[],this.dataSelected=[]);const n={limit:500,page:e};this.isWaitingForResponse=!0,this.hasNoRegistrationProfileConnected=!1;const i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.subs.sink=this.intakeService.GetAllSchoolIntakeChannel(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{l&&l.length?(this.allDocumentFormForCheckbox.push(...l),this.getAllDocumentFormForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.allDocumentFormForCheckbox&&this.allDocumentFormForCheckbox.length&&(this.dataSelected=this.allDocumentFormForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id"),this.dataSelected&&this.dataSelected.length&&this.connectAdmissionDoc()))})}else this.connectAdmissionDoc()}showOptions(e,n){if(this.isCheckedAll){if(n)if(this.dataUnselectUser.includes(n._id)){const l=this.dataUnselectUser.findIndex(c=>c===n._id);this.dataUnselectUser.splice(l,1),this.selection.select(n._id)}else this.dataUnselectUser.push(n._id),this.selection.deselect(n._id)}else if(n)if(this.dataSelected&&this.dataSelected.length){const l=this.dataSelected.filter(c=>c._id===n._id);if(l&&l.length<1)this.dataSelected.push(n);else{const c=this.dataSelected.findIndex(g=>g._id===n._id);this.dataSelected.splice(c,1)}}else this.dataSelected.push(n);if(this.disabledExport=this.dataSelected.length<=0,this.userSelected=[],this.dataSelectedId=[],this.selectType=e,(this.dataSelected&&this.dataSelected.length?this.dataSelected:this.selection.selected).forEach(l=>{this.dataSelectedId.push(l._id),this.userSelected.push(l)}),this.dataSelected&&this.dataSelected.length>0){const l=this.dataSelected.find(c=>!c.profil_rate);this.hasNoRegistrationProfileConnected=!!l}else this.hasNoRegistrationProfileConnected=!1}resetTable(){this.isReset=!0,this.selection.clear(),this.dataSelected=[],this.isCheckedAll=!1,this.paginator.pageIndex=0,this.sort.direction="",this.sort.active="",this.sortValue=null,this.sort.sort({id:"",start:"asc",disableClear:!1}),this.resetterFilter(),this.filteredValues={scholar_season_ids:[this.scholarSeason._id],school:this.school.short_name,campus:null,level:null,speciality:null,sector:null,registration_profile:null,start_date:null,offset:j().utcOffset()},this.getallIntakeChannels()}resetterFilter(){this.campusFilterCtrl.setValue(["All"],{emitEvent:!1}),this.levelFilterCtrl.setValue(["All"],{emitEvent:!1}),this.specialityFilterCtrl.setValue(["All"],{emitEvent:!1}),this.startingDateFilterCtrl.setValue(null,{emitEvent:!1}),this.sectorFilterCtrl.setValue(["All"],{emitEvent:!1}),this.regisFilterCtrl.setValue("All",{emitEvent:!1}),this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.isSelectAllRegis=!0}renderTooltipProfileRate(e){let n="",i=0;if(e&&e.length)for(const a of e)i++,i>1?a&&a.name&&(n+=", ",n+=a.name):a&&a.name&&(n+=a.name);return n}renderTooltipAdmissionDoc(e){let n="";return e&&e.length&&e[e.length-1]&&(n=e[e.length-1].form_builder_name),n}onEditFlyer(e){this.subs.sink=this.dialog.open(ba.j,{width:"600px",minHeight:"100px",data:e,disableClose:!0}).afterClosed().subscribe(n=>{n&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}onDownloadFlyer(e){const n=e.admission_flyer.s3_file_name;if(!n)return;const i=document.createElement("a");i.setAttribute("type","hidden"),i.download=n,i.href=`${ot.N.apiUrl}/fileuploads/${n}?download=true`.replace("/graphql",""),i.target="_blank",i.click(),i.remove()}onEditCondition(e){this.subs.sink=this.dialog.open(Bt,{width:"600px",minHeight:"100px",data:[e],disableClose:!0}).afterClosed().subscribe(n=>{n&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}onDownloadCondition(e){const n=e.admission_document.s3_file_name;if(!n)return;const i=document.createElement("a");i.setAttribute("type","hidden"),i.download=n,i.href=`${ot.N.apiUrl}/fileuploads/${n}?download=true`.replace("/graphql",""),i.target="_blank",i.click(),i.remove()}connectAdmissionDoc(){if(!0===(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)))return void s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});const e=this.dataSelected.map(i=>i._id),n=this.dataSelected.filter(i=>i.admission_document_template&&i.admission_document_template._id).map(i=>i.admission_document_template._id);this.subs.sink=this.dialog.open(qa,{width:"800px",disableClose:!0,data:{select_all:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0,filter:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0?this.generateFilterForMutation():this.filteredValues,program_ids:e,item:this.dataSelected.length>1?"multiple":"single",selected:this.dataSelected,form_builder_id:n&&n.length?n[0]:null}}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}AssignProgramDirector(e,n={}){if("single"===e)this.subs.sink=this.dialog.open(Rt,{width:"600px",minHeight:"100px",data:{intake:[n],filter:null,select_all:!1},disableClose:!0}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())});else if("multiple"===e){if(!0===(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)))return void s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});this.subs.sink=this.dialog.open(Rt,{width:"600px",minHeight:"100px",data:{intake:this.dataSelected,filter:this.filteredValues,select_all:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0},disableClose:!0}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}}connectCVECForm(e,n={}){if(console.log("_element",n),"single"===e)this.subs.sink=this.dialog.open(Ut,{width:"650px",panelClass:"certification-rule-pop-up",data:{programIds:[n],item:e,filter:null,select_all:!1},disableClose:!0}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())});else if("multiple"===e){if(!0===(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)))return void s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});this.subs.sink=this.dialog.open(Ut,{width:"650px",data:{programIds:this.dataSelected,filter:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0?this.generateFilterForMutation():this.filteredValues,select_all:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0,item:this.dataSelected.length>1?e:"single"},disableClose:!0,panelClass:"certification-rule-pop-up"}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}}admissionDocument(e,n={}){if(console.log("_element",n),"single"===e)this.subs.sink=this.dialog.open(Ht,{width:"650px",panelClass:"certification-rule-pop-up",data:{programIds:[n],item:e,filter:null,select_all:!1},disableClose:!0}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())});else if("multiple"===e){if(!0===(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)))return void s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});this.subs.sink=this.dialog.open(Ht,{width:"650px",data:{programIds:this.dataSelected,item:this.dataSelected.length>1?e:"single",filter:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0?this.generateFilterForMutation():this.filteredValues,select_all:(this.selection.hasValue()&&this.isAllSelected()||this.isCheckedAll)&&this.dataUnselectUser.length<=0},disableClose:!0,panelClass:"certification-rule-pop-up"}).afterClosed().subscribe(i=>{i&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}}generateFilterForMutation(){let e=h.cloneDeep(this.filteredValues);if(e?.campus){const n=[];e?.campus.forEach(i=>{const a=this.campusList.find(l=>l?.name===i);n.push(a?._id)}),e.campus=n}if(e?.level){const n=[];e?.level.forEach(i=>{const a=this.levelList.find(l=>l?.name===i);n.push(a?._id)}),e.level=n}return e?.school&&(e={...e,school_id:[this.school?._id]},delete e?.school),e}addConditionCheck(e){if(!0===(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)))return void s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});const n={limit:500,page:e},i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.getConnectRegistrationCheckboxId(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{if(l&&l.length){const c=h.cloneDeep(l);this.allAddConditionForCheckbox=h.concat(this.allAddConditionForCheckbox,c),this.addConditionCheck(e+1)}else this.isWaitingForResponse=!1,this.isCheckedAll&&this.allAddConditionForCheckbox&&this.allAddConditionForCheckbox.length&&(this.dataSelected=this.allAddConditionForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id")),this.subs.sink=this.dialog.open(Bt,{width:"600px",minHeight:"100px",data:this.dataSelected,disableClose:!0}).afterClosed().subscribe(c=>{c&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})},l=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(l)})}assignStartingDate(){!this.dataSelected||this.dataSelected.length||this.isCheckedAll&&!(this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length)?this.subs.sink=this.dialog.open(tl,{width:"600px",minHeight:"100px",disableClose:!0,data:{programIds:this.dataSelected,filter:this.filteredValues}}).afterClosed().subscribe(e=>{e&&(this.clearSelectIfFilter(),this.getallIntakeChannels())}):s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")})}removeRegistration(){if(!this.dataSelected||this.dataSelected.length||this.isCheckedAll&&!(this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length))if(this.hasNoRegistrationProfileConnected)s().fire({type:"info",title:this.translate.instant("ADMISSION_S1.TITLE"),html:this.translate.instant("ADMISSION_S1.TEXT"),confirmButtonText:this.translate.instant("ADMISSION_S1.BUTTON")});else{let e=[];this.dataSelected.map(n=>{if(n.profil_rate&&n.profil_rate.length>0)for(let i=0;i<n.profil_rate.length;i++)e.push(n.profil_rate[i])}),e=e.reduce((n,i)=>(n.some(a=>a._id===i._id&&a.name===i.name)||n.push(i),n),[]),this.dataSelected=this.dataSelected.map(n=>({scholar_season_id:this.scholarSeason._id,school_id:this.school._id,...n})),this.subs.sink=this.dialog.open(ya,{width:"600px",minHeight:"100px",disableClose:!0,data:{data:this.dataSelected,regisList:e}}).afterClosed().subscribe(n=>{n&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})}else s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")})}connectRegistration(e){if(!0!==(this.dataSelected&&!this.dataSelected.length&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length))){const n={limit:500,page:e},i=h.cloneDeep(this.filteredValues),a=h.cloneDeep(this.sortValue);this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.getConnectRegistrationCheckboxId(i,n,a).pipe((0,at.q)(1)).subscribe(l=>{if(l&&l.length){const c=h.cloneDeep(l);this.allConnectProfileForCheckbox=h.concat(this.allConnectProfileForCheckbox,c),this.connectRegistration(e+1)}else this.isWaitingForResponse=!1,this.isCheckedAll&&this.allConnectProfileForCheckbox&&this.allConnectProfileForCheckbox.length&&(this.dataSelected=this.allConnectProfileForCheckbox.filter(c=>!this.dataUnselectUser.includes(c._id)),this.dataSelected=h.uniqBy(this.dataSelected,"_id")),this.dataSelected=this.dataSelected.map(c=>({scholar_season_id:this.scholarSeason._id,school_id:this.school._id,...c})),this.subs.sink=this.dialog.open(Ta,{width:"600px",minHeight:"100px",data:this.dataSelected,disableClose:!0}).afterClosed().subscribe(c=>{c&&(this.clearSelectIfFilter(),this.getallIntakeChannels())})},l=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(l)})}else s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")})}cleanFilterDataCSV(){const e=h.cloneDeep(this.filteredValues);let n="";return Object.keys(e).forEach(i=>{if(e[i]||!1===e[i])if("campus"!==i&&"level"!==i&&"sector"!==i&&"speciality"!==i&&"school"!==i&&"scholar_season_ids"!==i)n=n?n+`,"${i}":"${e[i]}"`:n+`"${i}":"${e[i]}"`;else if("campus"===i){let a=[];this.filteredValues.campus&&this.filteredValues.campus.length&&(a=this.filteredValues.campus.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("school"===i)this.school&&this.school.short_name&&this.school.short_name.length&&(n=n?n+`,"${i}":["${this.school.short_name}"]`:n+`"${i}":["${this.school.short_name}"]`);else if("scholar_season_ids"===i)n=n?n+`,"${i}":["${this.scholarSeason._id}"]`:n+`"${i}":["${this.scholarSeason._id}"]`;else if("level"===i){let a=[];this.filteredValues.level&&this.filteredValues.level.length&&(a=this.filteredValues.level.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("sector"===i){let a=[];this.filteredValues.sector&&this.filteredValues.sector.length&&(a=this.filteredValues.sector.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}else if("speciality"===i){let a=[];this.filteredValues.speciality&&this.filteredValues.speciality.length&&(a=this.filteredValues.speciality.map(l=>'"'+l+'"')),n=n?n+`,"${i}":[${a}]`:n+`"${i}":[${a}]`}}),"filter={"+n+"}"}downloadCSV(){if(this.dataSelected&&this.dataSelected.length<1&&(!this.isCheckedAll||this.isCheckedAll&&this.dataUnselectUser&&this.dataUnselectUser.length))s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("Admission")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});else{const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translate.instant("EXPORT_DECISION.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translate&&"fr"===this.translate.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){a.target.value&&s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql",""),document.createElement("a");const a=this.translate.currentLang.toLowerCase();let c;if(this.dataSelected&&this.dataSelected.length&&!this.isCheckedAll||this.dataUnselectUser&&this.dataUnselectUser.length&&this.isCheckedAll){const u=this.dataSelected.map(y=>'"'+y._id+'"');c='filter={"scholar_season_ids": ["'+this.scholarSeason._id+'"], "program_ids": ['+u.toString()+'], "school": ["'+this.school.short_name+'"] }'}else c=this.cleanFilterDataCSV();const m=n+"downloadAdmissionChannel/"+e+"/"+a+"?"+c+"&"+this.sortingForExport()+`&user_type_id="${this.currentUserTypeId}"`;console.log(m,"fullURL::::::::::");const _={headers:new gt.WM({Authorization:JSON.parse(localStorage.getItem("admtc-token-encryption"))})};this.isWaitingForResponse=!0,this.httpClient.get(`${encodeURI(m)}`,_).subscribe(u=>{u?(console.log(u,"res"),this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("ReAdmission_S3.TITLE"),text:this.translate.instant("ReAdmission_S3.TEXT"),confirmButtonText:this.translate.instant("ReAdmission_S3.BUTTON"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>this.clearSelectIfFilter())):this.isWaitingForResponse=!1},u=>{this.isWaitingForResponse=!1,console.log("uat 389 error",u)})}sortingForExport(){let e="";if(this.sortValue){const n=h.cloneDeep(this.sortValue);Object.keys(n).forEach(i=>{n[i]&&(e=e?e+`,"${i}":"${n[i]}"`:e+`"${i}":"${n[i]}"`)})}return"sorting={"+e+"}"}exportAllData(e){const n=e,i=[];if(n&&n.length){for(const _ of n){let u="";const y=_.volume_hours&&_.volume_hours.length?_.volume_hours[_.volume_hours.length-1].volume_hour:"";for(const N of _.legal_entities_id)u=u?u+", "+(N.legal_entity_name?N.legal_entity_name:""):N.legal_entity_name?N.legal_entity_name:"";const P=[];P[0]=_.intake_channel,P[1]=_.season,P[2]=_.school,P[3]=_.campus,P[4]=_.level,P[5]=_.sector_id?_.sector_id.name:"-",P[6]=_.speciality_id?_.speciality_id.name:"-",P[7]=_.down_payment_id&&_.down_payment_id.internal?_.down_payment_id.internal:"-",P[8]=_.down_payment_id&&_.down_payment_id.external?_.down_payment_id.external:"-",P[9]=_.full_rate_id&&_.full_rate_id.amount_internal?_.full_rate_id.amount_internal:"-",P[10]=_.full_rate_id&&_.full_rate_id.amount_external?_.full_rate_id.amount_external:"-",P[11]=u||"-",P[12]=y||"-",i.push(P)}const a={values:i},l=j().format("DD-MM-YYYY");this.exportCsvService.createAndUpdateSpreadsheet(a,this.exportName+"_"+l,{spreadsheetId:"1j7EAJvvHoPC7DffQxfIPVNGKztSZc0YyjE-I2zf0r2I",sheetId:"en"===this.translate.currentLang?0:997136311,range:"A4"})}s().close()}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"table_filter",name:"campus",column:"Campus",isMultiple:!0,filterValue:this.filteredValues,filterList:this.campusList,filterRef:this.campusFilterCtrl,isSelectionInput:!0,displayKey:"name",savedValue:"name",noTranslate:!0,resetValue:"All"},{type:"table_filter",name:"level",column:"Level",isMultiple:!0,filterValue:this.filteredValues,filterList:this.levelList,filterRef:this.levelFilterCtrl,isSelectionInput:!0,displayKey:"name",savedValue:"name",noTranslate:!0,resetValue:"All"},{type:"table_filter",name:"sector",column:"Sector",isMultiple:!0,filterValue:this.filteredValues,filterList:this.sectorList,filterRef:this.sectorFilterCtrl,isSelectionInput:!0,displayKey:"name",savedValue:"_id",noTranslate:!0,resetValue:"All"},{type:"table_filter",name:"speciality",column:"Speciality",isMultiple:!0,filterValue:this.filteredValues,filterList:this.specialityList,filterRef:this.specialityFilterCtrl,isSelectionInput:!0,displayKey:"name",savedValue:"_id",noTranslate:!0,resetValue:"All"},{type:"table_filter",name:"start_date",column:"Starting date",isMultiple:!1,filterValue:this.filteredValues,filterList:null,filterRef:this.startingDateFilterCtrl,isSelectionInput:!1,displayKey:null,savedValue:null,noTranslate:!0,resetValue:"All"},{type:"table_filter",name:"registration_profile",column:"Registration Profile",isMultiple:!1,filterValue:this.filteredValues,filterList:this.regisList,filterRef:this.regisFilterCtrl,isSelectionInput:!0,displayKey:"name",savedValue:"name",noTranslate:!0,resetValue:"All"}],this.filterBreadcrumbData)}removeFilterBreadcrumb(e){e&&("table_filter"!==e?.type||"campus"!==e?.name&&"level"!==e?.name&&"sector"!==e?.name&&"speciality"!==e?.name?"registration_profile"===e?.name?this.selectRegist("All"):"start_date"===e?.name&&(this.startingDateFilterCtrl.patchValue(null,{emitEvent:!1}),this.filteredValues.start_date=null):this.selectAll(e?.name)),this.getallIntakeChannels()}ngOnDestroy(){this.subs.unsubscribe()}transformStartDate(e){return e&&e.start_date&&e.start_date.date&&e.start_date.time?this.parseUtcToLocalPipe.transformDate(e.start_date.date,e.start_date.time):""}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(Ct.q),t.\u0275\u0275directiveInject(Ot.J),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(vt.t),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(gt.eN))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-admission"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(et.NW,7),t.\u0275\u0275viewQuery(z.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{tabIndex:"tabIndex",school:"school",scholarSeason:"scholarSeason"},features:[t.\u0275\u0275ProvidersFeature([vt.t]),t.\u0275\u0275NgOnChangesFeature],decls:91,vars:22,consts:[[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"top-space"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","reset"],["mat-header-cell","","colspan","100%","class","action-header-column text-right",4,"matHeaderCellDef"],["matColumnDef","selectFilter","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","scholar_seasonFilter"],["matColumnDef","schoolFilter"],["matColumnDef","campusFilter"],["matColumnDef","levelFilter"],["matColumnDef","sectorFilter"],["matColumnDef","specialityFilter"],["matColumnDef","startingDateFilter"],["matColumnDef","registration_profileFilter"],["matColumnDef","doc_expectedFilter"],["matColumnDef","templateCVECFilter"],["matColumnDef","conditionsFilter"],["matColumnDef","flyerFilter"],["matColumnDef","program_directorFilter"],["matColumnDef","actionFilter"],["matColumnDef","select",1,"mat-column-select"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","scholar_season"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","school"],["matColumnDef","campus"],["matColumnDef","level"],["matColumnDef","sector"],["matColumnDef","speciality"],["matColumnDef","startingDate"],["mat-header-cell","","mat-sort-header","start_date",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","registration_profile"],["matColumnDef","doc_expected"],["matColumnDef","template_cvec"],["matColumnDef","conditions"],["mat-cell","",4,"matCellDef"],["matColumnDef","flyer"],["matColumnDef","program_director"],["mat-header-cell","","mat-sort-header","program_director",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","matTooltip","Action",4,"matHeaderCellDef"],["matColumnDef","loading"],["mat-header-cell","","colspan","100%","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","length","hidePageSize","pageSize"],["mat-header-cell","","colspan","100%",1,"action-header-column","text-right"],[1,"p-col-12","p-grid","no-padding"],[1,"p-col","text-right"],["mat-raised-button","","color","accent",2,"padding","0px 7px !important",3,"matTooltip","disabled","matMenuTriggerFor"],["action","matMenu"],["mat-menu-item","",3,"matTooltip","click"],["mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell",""],["appearance","legacy"],["multiple","","panelClass","filterPanel custom-matselect-dropdown-margin",3,"formControl","disableOptionCentering"],[3,"value","click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],["matInput","","readonly","",1,"form-field",3,"placeholder","matDatepicker","formControl","click"],["matSuffix","",3,"for"],["startingDatePick",""],[1,"dropdown","margin","custom-ngselect-whitespace",3,"appendTo","multiple","clearable","placeholder","formControl","change"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","",1,"text-center"],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"text-center"],[3,"checked","aria-label","click","change"],["mat-header-cell","",3,"matTooltip"],["svgIcon","account-school-outline",1,"mat-icon-svgIcon"],["mat-cell","",3,"matTooltip"],["mat-header-cell","","mat-sort-header","start_date",3,"matTooltip"],[4,"ngFor","ngForOf"],[1,"tags"],["mat-cell",""],["mat-icon-button","","class","margin-right-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","mat-icon-button","","class","margin-right-button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"margin-right-button",3,"disabled","matTooltip","click"],["mat-icon-button","","mat-icon-button","",1,"margin-right-button",3,"disabled","matTooltip","click"],["svgIcon","file-document-alert-outline",1,"mat-icon-svgIcon"],["mat-header-cell","","mat-sort-header","program_director",3,"matTooltip"],[3,"matTooltip","ngClass"],["mat-header-cell","","matTooltip","Action"],["svgIcon","account-plus"],["svgIcon","file-document-arrow-right-outline"],["svgIcon","file-document-plus-outline"],["mat-header-cell","","colspan","100%",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],["class","no-records",4,"ngIf"],[1,"no-records"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ms-filter-breadcrumb",0),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1)(2,"table",2),t.\u0275\u0275listener("matSortChange",function(a){return n.sortData(a)}),t.\u0275\u0275elementContainerStart(3,3),t.\u0275\u0275template(4,Tl,33,38,"th",4),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(5,5),t.\u0275\u0275template(6,kl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(7,7),t.\u0275\u0275template(8,Il,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(9,8),t.\u0275\u0275template(10,El,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(11,9),t.\u0275\u0275template(12,Al,5,4,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(13,10),t.\u0275\u0275template(14,Ll,5,4,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(15,11),t.\u0275\u0275template(16,Ul,5,4,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(17,12),t.\u0275\u0275template(18,Wl,5,4,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(19,13),t.\u0275\u0275template(20,jl,7,6,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(21,14),t.\u0275\u0275template(22,Gl,5,9,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(23,15),t.\u0275\u0275template(24,zl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(25,16),t.\u0275\u0275template(26,Yl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(27,17),t.\u0275\u0275template(28,Ql,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(29,18),t.\u0275\u0275template(30,Xl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(31,19),t.\u0275\u0275template(32,Jl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(33,20),t.\u0275\u0275template(34,Zl,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(35,21),t.\u0275\u0275template(36,tr,2,3,"th",22),t.\u0275\u0275template(37,er,2,2,"td",23),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(38,24),t.\u0275\u0275template(39,nr,3,3,"th",25),t.\u0275\u0275template(40,ir,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(41,27),t.\u0275\u0275template(42,or,5,6,"th",25),t.\u0275\u0275template(43,ar,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(44,28),t.\u0275\u0275template(45,lr,5,6,"th",25),t.\u0275\u0275template(46,rr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(47,29),t.\u0275\u0275template(48,sr,5,6,"th",25),t.\u0275\u0275template(49,cr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(50,30),t.\u0275\u0275template(51,dr,5,6,"th",25),t.\u0275\u0275template(52,pr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(53,31),t.\u0275\u0275template(54,mr,5,6,"th",25),t.\u0275\u0275template(55,hr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(56,32),t.\u0275\u0275template(57,gr,5,6,"th",33),t.\u0275\u0275template(58,_r,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(59,34),t.\u0275\u0275template(60,ur,5,6,"th",25),t.\u0275\u0275template(61,Cr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(62,35),t.\u0275\u0275template(63,br,5,6,"th",25),t.\u0275\u0275template(64,vr,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(65,36),t.\u0275\u0275template(66,Or,5,6,"th",25),t.\u0275\u0275template(67,yr,3,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(68,37),t.\u0275\u0275template(69,Sr,5,6,"th",25),t.\u0275\u0275template(70,wr,3,2,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(71,39),t.\u0275\u0275template(72,Tr,3,3,"th",25),t.\u0275\u0275template(73,Er,3,2,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(74,40),t.\u0275\u0275template(75,Dr,5,6,"th",41),t.\u0275\u0275template(76,Ar,4,7,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(77,42),t.\u0275\u0275template(78,Br,4,3,"th",43),t.\u0275\u0275template(79,Nr,10,12,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(80,44),t.\u0275\u0275template(81,Lr,3,0,"th",45),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(82,Vr,1,0,"tr",46),t.\u0275\u0275template(83,Rr,1,0,"tr",46),t.\u0275\u0275template(84,Ur,1,0,"tr",46),t.\u0275\u0275template(85,Hr,1,1,"tr",47),t.\u0275\u0275template(86,Kr,1,1,"tr",48),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(87,jr,3,3,"ng-container",49),t.\u0275\u0275elementStart(88,"div",50),t.\u0275\u0275pipe(89,"async"),t.\u0275\u0275element(90,"mat-paginator",51),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(2),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(80),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(15,$r)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(16,qr)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(17,Gr,t.\u0275\u0275pipeBind1(89,13,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(19,zr,n.dataCount<=10))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(21,Yr)))},dependencies:[d.mk,d.sg,d.O5,R.ey,D.lW,_t.oG,lt.Mq,lt.hl,lt.nW,B.Hw,T.KE,T.R9,q.Nt,W.VK,W.OP,W.p6,et.NW,L.Ou,Q.gD,z.YE,z.nU,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlDirective,st.oO,bt.r,Y.w9,Y.jq,d.Ov,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}#certifier[_ngcontent-%COMP%]{margin-left:20px}.mat-form-field[_ngcontent-%COMP%]{padding-top:6px}.pad-top-miss[_ngcontent-%COMP%]{padding-top:1.8px!important}.form-field[_ngcontent-%COMP%]{margin-top:.5px}.tag-container[_ngcontent-%COMP%]{white-space:normal;text-align:left!important;line-height:2.3;overflow-wrap:break-word}[_nghost-%COMP%]     table tr td:nth-child(10), [_nghost-%COMP%]     table tr td:nth-child(11){text-align:left!important}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{padding:8px;border-right:1px solid #545454;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:3%;min-width:28px;padding-left:8px!important}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:5%;min-width:75px;max-width:75px}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:10%}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:8%}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){width:3%}[_nghost-%COMP%]     table tr td:nth-child(5) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(5) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(6), [_nghost-%COMP%]     table tr th:nth-child(6){width:12%}[_nghost-%COMP%]     table tr td:nth-child(6) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(6) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(7), [_nghost-%COMP%]     table tr th:nth-child(7){width:10%}[_nghost-%COMP%]     table tr td:nth-child(7) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(7) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(8), [_nghost-%COMP%]     table tr th:nth-child(8){width:8%}[_nghost-%COMP%]     table tr td:nth-child(8) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(8) .mat-form-field{width:90%;padding-left:0rem!important}[_nghost-%COMP%]     table tr td:nth-child(9), [_nghost-%COMP%]     table tr th:nth-child(9){width:15%;padding-left:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(9) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(9) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(10), [_nghost-%COMP%]     table tr th:nth-child(10){width:15%}[_nghost-%COMP%]     table tr td:nth-child(10) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(10) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(11), [_nghost-%COMP%]     table tr th:nth-child(11){width:8%;min-width:110px;max-width:110px}[_nghost-%COMP%]     table tr td:nth-child(11) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(11) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(12), [_nghost-%COMP%]     table tr th:nth-child(12){width:5%;min-width:110px;max-width:110px}[_nghost-%COMP%]     table tr td:nth-child(12) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(12) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(13), [_nghost-%COMP%]     table tr th:nth-child(13){width:5%;min-width:90px;max-width:90px;margin:0;padding:0}[_nghost-%COMP%]     table tr td:nth-child(13) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(13) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(14), [_nghost-%COMP%]     table tr th:nth-child(14){width:5%;min-width:110px;max-width:110px;margin:0;padding:0}[_nghost-%COMP%]     table tr td:nth-child(14) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(14) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(15), [_nghost-%COMP%]     table tr th:nth-child(15){min-width:135px;max-width:135px;margin:0;padding:0}[_nghost-%COMP%]     table tr td:nth-child(15) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(15) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr th{vertical-align:top}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.left-margin[_ngcontent-%COMP%]{margin-left:3%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.pc-section[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:5px;display:inline-block}.cr-section[_ngcontent-%COMP%]{width:50%;text-align:left;display:inline-block}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}[_nghost-%COMP%]  .mat-select-arrow-wrapper{padding-right:5px}[_nghost-%COMP%]  .mat-select-value-text{margin-left:10px;font-size:13px}[_nghost-%COMP%]  .ng-select{padding-top:10px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#fff;border:none;border-radius:0!important;border-bottom:1px solid rgba(255,255,255,.7019607843)!important;min-height:36px;align-items:center}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#fff;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}[_nghost-%COMP%]  .ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{color:#000}[_nghost-%COMP%]  .ng-select.dropdown .ng-select-container{margin-left:.5rem!important;width:90%}[_nghost-%COMP%]  ng-dropdown-panel.dropdown{min-width:100%;width:auto!important}.border-button[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}[_nghost-%COMP%]  .filterPanel.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}[_nghost-%COMP%]  .filter-panel{margin-top:25px!important}  .custom-matselect-dropdown-margin.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}  .custom-ngselect-whitespace.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}.red-icon[_ngcontent-%COMP%]{color:red}.green-icon[_ngcontent-%COMP%]{color:green}"]}),o})();var Kt=b(54041);function Xr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"p",17),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"This field is required")," "))}function Jr(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"ng-select",15),t.\u0275\u0275listener("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.patchTemplate())}),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,Xr,3,3,"p",16),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();let n;t.\u0275\u0275property("formGroup",e.form),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(3,5,"course_sequence.Select template"),"*"),t.\u0275\u0275property("items",e.templateList)("appendTo","body"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==e.form||null==(n=e.form.get("template"))?null:n.hasError("required"))&&((null==e.form||null==(n=e.form.get("template"))?null:n.touched)||e.isEmpty))}}function Zr(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275element(1,"mat-progress-spinner",19),t.\u0275\u0275elementEnd())}let ts=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.fb=e,this.data=n,this.dialogRef=i,this.courseService=a,this.translate=l,this.route=c,this.utilService=g,this.authService=m,this.templateList=[],this.templateOrigin=[],this.subs=new F.Y,this.isWaitingForResponse=!1,this.schoolId=null,this.isEmpty=!1}ngOnInit(){this.subs.sink=this.route.paramMap.subscribe(e=>{this.schoolId=e.get("id")}),this.initForm(),this.getAllDropdown()}initForm(){this.form=this.fb.group({template:[null,p.Validators.required]})}getAllDropdown(){this.isWaitingForResponse=!0,this.subs.sink=this.courseService.GetAllTemplateCourseSequenceDropdown({is_published:!0}).subscribe(n=>{if(n){const i=(0,h.cloneDeep)(n);this.templateOrigin=(0,h.cloneDeep)(n),this.templateList=i.filter(a=>a.name).map(a=>({name:a.name,_id:a._id})),this.templateList=this.templateList.sort((a,l)=>this.utilService.simplifyRegex(a.name)<this.utilService.simplifyRegex(l.name)?-1:this.utilService.simplifyRegex(a.name)>this.utilService.simplifyRegex(l.name)?1:0)}this.isWaitingForResponse=!1},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}connectTemplate(){if(this.isWaitingForResponse=!0,this.form.invalid)return s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.form.markAllAsTouched(),this.isEmpty=!0,void(this.isWaitingForResponse=!1);const e=h.cloneDeep(this.templateForm.value);this.subs.sink=this.courseService.CreateUpdateProgramCourseAndSequence(e).subscribe(()=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:this.translate.instant("Bravo!"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.dialogRef.close("validate")})},n=>{this.authService.postErrorLog(n),this.isWaitingForResponse=!1,"GraphQL error: cannot update if session in teacher subject table already have assigned teacher"===n.message?s().fire({title:this.translate.instant("Course_and_Sequences_S1.TITLE"),text:this.translate.instant("Course_and_Sequences_S1.TEXT"),type:"warning",showConfirmButton:!0,confirmButtonText:this.translate.instant("Course_and_Sequences_S1.BUTTON")}):n&&n.message&&n.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}close(){this.dialogRef.close()}patchTemplate(){const e=this.form.get("template").value;if(e){const n=this.templateOrigin.find(i=>i._id===e);n&&n._id&&(this.initFormBuilder(),this.fetchTemplateSequence(n))}}initFormBuilder(){const e=this.data.map(n=>n._id);this.templateForm=this.fb.group({program_sequences:this.fb.array([]),is_published:[!1],name:[null],template_course_sequence_id:[this.form.get("template").value],program_id:[e],program_course_sequence_id:[null],description:[null]})}initSequenceFormArray(){return this.fb.group({template_sequence_id:[null],program_sequence_id:[null],sequence_id:[null],name:[null],description:[null],start_date:this.fb.group({date:[null],time:["15:59"]}),end_date:this.fb.group({date:[null],time:["15:59"]}),type_of_sequence:[null],number_of_week:[null],program_modules:this.fb.array([])})}initModuleFormArray(){return this.fb.group({template_module_id:[null],program_module_id:[null],module_id:[null],short_name:[null],english_name:[null],name:[null],ects:[null],program_subjects:this.fb.array([])})}initSubjectFormArray(){return this.fb.group({template_subject_id:[null],program_subject_id:[null],subject_id:[null],short_name:[null],english_name:[null],name:[null],volume_student_total:[null],volume_hours_total:[null],academic_objective:[null],note:[null],ects:[null],program_sessions_type:this.fb.array([])})}initSessionFormArray(){return this.fb.group({name:[null],volume_hours_student:[null],duration:[null],class_group:[null],volume_hours:[""],template_session_type:[null],program_session_type_id:[null]})}get sequenceFormArray(){return this.templateForm.get("program_sequences")}addEmptySequenceFormArray(){this.sequenceFormArray.push(this.initSequenceFormArray())}getModuleArray(e){return this.sequenceFormArray.at(e).get("program_modules")}addEmptyModuleFormArray(e){this.getModuleArray(e).push(this.initModuleFormArray())}getSubjectArray(e,n){return this.getModuleArray(e).get(n.toString()).get("program_subjects")}addEmptySubjectFormArray(e,n){this.getSubjectArray(e,n).push(this.initSubjectFormArray())}getSessionArray(e,n,i){return this.getSubjectArray(e,n).get(i.toString()).get("program_sessions_type")}addEmptySessionFormArray(e,n,i){this.getSessionArray(e,n,i).push(this.initSessionFormArray())}fetchTemplateSequence(e){const n=h.cloneDeep(e);n&&n._id&&(n.template_sequences_id&&n.template_sequences_id.length&&(n.program_sequences=n.template_sequences_id,n.program_sequences.forEach((i,a)=>{this.addEmptySequenceFormArray(),i&&i._id&&(i.template_sequence_id=i._id),i&&i.start_date&&i.start_date.date&&(i.start_date.date=i.start_date.date,i.start_date.time=i.start_date.time),i&&i.end_date&&i.end_date.date&&(i.end_date.date=i.end_date.date,i.end_date.time=i.end_date.time),i&&i.template_modules_id&&i.template_modules_id.length&&(i.program_modules=i.template_modules_id),i.program_modules&&i.program_modules.length&&i.program_modules.forEach((l,c)=>{this.addEmptyModuleFormArray(a),l&&l._id&&(l.template_module_id=l._id),l&&l.template_subjects_id&&l.template_subjects_id.length&&(l.program_subjects=l.template_subjects_id),l.program_subjects&&l.program_subjects.length&&l.program_subjects.forEach((g,m)=>{this.addEmptySubjectFormArray(a,c),g&&g._id&&(g.template_subject_id=g._id),g&&g.subject_id&&g.subject_id._id&&(g.subject_id=g.subject_id._id),g&&g.template_sessions_id&&g.template_sessions_id.length&&(g.program_sessions_type=g.template_sessions_id),g.program_sessions_type&&g.program_sessions_type.length&&g.program_sessions_type.forEach(_=>{this.addEmptySessionFormArray(a,c,m),_&&_._id&&(_.template_session_type=_._id),_&&_.volume_hours>=0&&(_.volume_hours=_.volume_hours)})})})})),this.templateForm.patchValue(n))}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(Kt.z),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-connect-sequences-dialog"]],features:[t.\u0275\u0275ProvidersFeature([Dt.n,Et.w,vt.t])],decls:21,vars:11,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"header-dialog"],[1,"dialog-border"],[1,"p-grid"],[1,"p-col-10","no-padding"],[1,"inline-block"],[1,"no-padding","p-col-2"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",2,"overflow","hidden !important"],["class","p-grid",3,"formGroup",4,"ngIf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-raised-button","","type","button","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["class","loading-indicator",4,"ngIf"],[1,"p-grid",3,"formGroup"],[1,"p-col-12"],["formControlName","template","bindLabel","name","bindValue","_id",1,"mrgn-btn",3,"items","placeholder","appendTo","change"],["style","color: #f44336; font-size: 75%; margin: 0",4,"ngIf"],[2,"color","#f44336","font-size","75%","margin","0"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",5)(8,"button",6),t.\u0275\u0275listener("click",function(){return n.close()}),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(11,"div",7),t.\u0275\u0275template(12,Jr,5,7,"div",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",9)(14,"button",10),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"button",11),t.\u0275\u0275listener("click",function(){return n.connectTemplate()}),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(20,Zr,2,0,"div",12)),2&e&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,5,"course_sequence.Connect template")),t.\u0275\u0275advance(7),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,7,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(19,9,"Validate")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.O5,A.Zt,A.Bh,D.lW,f.ZT,f.xY,f.H8,B.Hw,L.Ou,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,Y.w9,O.X$],styles:[".dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 15px;color:#000}.inline-block[_ngcontent-%COMP%]{display:inline-block}.mat-dialog-content[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:15px}.mr-10[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:10px}.action-button[_ngcontent-%COMP%]{margin-right:20px;margin-bottom:10px}[_nghost-%COMP%]  .ng-select .ng-select-container{background-color:#fff0;color:#000;border:none;border-radius:0!important;border-bottom:1px solid #8c8c8c!important;align-items:center;margin-top:5px!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-select-container{border-bottom:1px solid #f44336!important}[_nghost-%COMP%]  .ng-select.ng-invalid.ng-touched .ng-placeholder{color:#f44336!important}[_nghost-%COMP%]  .ng-select .ng-select-container .ng-value-container .ng-input>input{color:#000;box-sizing:content-box;background:none;border:0;box-shadow:none;outline:0;cursor:default;width:100%}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}"]}),o})();function es(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",49),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Updated")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Updated")," "))}function ns(o,r){1&o&&(t.\u0275\u0275elementStart(0,"span",50),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Update in progress")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"Update in progress"),""))}function is(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"span",62),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(2,2,"Selected Data")," : ",null==e.dataSelected?null:e.dataSelected.length,"")}}function os(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",60),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.connectTemplate())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"course_sequence.Connect template")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"course_sequence.Connect template")," "))}function as(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",63),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.resetFilter())}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",64),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,3,"RESET")),t.\u0275\u0275property("disabled",e.isWaitingForResponse),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,5,"RESET")," ")}}function ls(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",51)(1,"div",52)(2,"div",53),t.\u0275\u0275template(3,is,3,4,"span",54),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",55)(5,"button",56),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementStart(9,"mat-icon"),t.\u0275\u0275text(10,"expand_more"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"mat-menu",57,58),t.\u0275\u0275template(13,os,4,6,"button",59),t.\u0275\u0275elementStart(14,"button",60),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.updateHyperplanning())}),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(18,as,5,7,"button",61),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275reference(12),n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",!n.isCheckedAll&&(null==n.dataSelected?null:n.dataSelected.length)||n.isCheckedAll&&n.dataCount&&(null==n.dataSelected?null:n.dataSelected.length)),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate1("matTooltip","",t.\u0275\u0275pipeBind1(6,9,"Action")," "),t.\u0275\u0275property("disabled",n.isWaitingForResponse)("matMenuTriggerFor",e),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,11,"Action")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.connectTemplateIntakeChannelSchoolCoursesSequencesTabPerm()),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(15,13,"Update hyperplanning")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,15,"Update hyperplanning")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==n.permission?null:n.permission.resetIntakeChannelSchoolCoursesSequencesTabPerm())}}function rs(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function ss(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function cs(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function ds(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function ps(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",72),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function ms(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("campus"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function hs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"mat-form-field",66)(2,"mat-select",67),t.\u0275\u0275template(3,ds,3,4,"mat-option",68),t.\u0275\u0275template(4,ps,3,4,"mat-option",69),t.\u0275\u0275template(5,ms,2,2,"mat-option",70),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.campusFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.campusList&&(null==e.campusList?null:e.campusList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.campusList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.campusList)}}function gs(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function _s(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",72),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function us(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("level"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function fs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"mat-form-field",66)(2,"mat-select",73),t.\u0275\u0275template(3,gs,3,4,"mat-option",68),t.\u0275\u0275template(4,_s,3,4,"mat-option",69),t.\u0275\u0275template(5,us,2,2,"mat-option",70),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.levelFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.levelList&&(null==e.levelList?null:e.levelList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.levelList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.levelList)}}function Cs(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectAll("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function bs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",72),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function xs(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setFilterSelected("sector"))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function vs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"mat-form-field",66)(2,"mat-select",73),t.\u0275\u0275template(3,Cs,3,4,"mat-option",68),t.\u0275\u0275template(4,bs,3,4,"mat-option",69),t.\u0275\u0275template(5,xs,2,2,"mat-option",70),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.sectorFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.sectorList&&(null==e.sectorList?null:e.sectorList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.sectorList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.sectorList)}}function Os(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectSpeciality("All"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","All"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"AllS")))}function ys(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option",72),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275property("disabled",!0),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"NOT RECORD FOUND")))}function Ss(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectSpeciality("None"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275property("value","None"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,"None")))}function Ps(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.selectSpeciality(null==a?null:a._id))}),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e?null:e.name)}}function Ms(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"mat-form-field",66)(2,"mat-select",73),t.\u0275\u0275template(3,Os,3,4,"mat-option",68),t.\u0275\u0275template(4,ys,3,4,"mat-option",69),t.\u0275\u0275template(5,Ss,3,4,"mat-option",68),t.\u0275\u0275template(6,Ps,2,2,"mat-option",70),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.specialityFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialityList&&(null==e.specialityList?null:e.specialityList.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!e.specialityList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.specialityList.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.specialityList)}}function ws(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function Ts(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function ks(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function Is(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function Es(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",76),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.selectHyperPlanning("All"))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"AllS")))}function Ds(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",71),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.selectHyperPlanning(null==a?null:a.key))}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.key),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name))}}function Fs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",65)(1,"mat-form-field",66)(2,"mat-select",74),t.\u0275\u0275template(3,Es,3,3,"mat-option",75),t.\u0275\u0275template(4,Ds,3,4,"mat-option",70),t.\u0275\u0275elementEnd()()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",e.hyperplanningStatusFilter)("disableOptionCentering",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.dropdownHyperplanning&&(null==e.dropdownHyperplanning?null:e.dropdownHyperplanning.length)>=1),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.dropdownHyperplanning)}}function As(o,r){1&o&&t.\u0275\u0275element(0,"th",65)}function Bs(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",77)(1,"mat-checkbox",78),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?a.masterToggle():null)})("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.showOptions("all",""))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",e.selection.hasValue()&&e.isAllSelected()||e.isCheckedAll)("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Ns(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",79)(1,"mat-checkbox",80),t.\u0275\u0275listener("click",function(i){return i.stopPropagation()})("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?c.selection.toggle(null==l?null:l._id):null)})("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.showOptions("one",a))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",n.selection.isSelected(null==e?null:e._id))("aria-label",n.checkboxLabel(e))}}function Ls(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Scholar season")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Scholar season")))}function Vs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.scholar_season_id?null:e.scholar_season_id.scholar_season),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.scholar_season_id?null:e.scholar_season_id.scholar_season," ")}}function Rs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.School")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.School")))}function Us(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.school_id?null:e.school_id.short_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.school_id?null:e.school_id.short_name," ")}}function Hs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Campus")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Campus")))}function Ks(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.campus?null:e.campus.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.campus?null:e.campus.name," ")}}function Ws(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Level")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Level")))}function js(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.level?null:e.level.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.level?null:e.level.name," ")}}function $s(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Sector")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Sector")))}function qs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.sector_id?null:e.sector_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.sector_id?null:e.sector_id.name," ")}}function Gs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Program_Table_School_Detail.Speciality")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Program_Table_School_Detail.Speciality")))}function zs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.speciality_id?null:e.speciality_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.speciality_id?null:e.speciality_id.name," ")}}function Ys(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"course_sequence.Template")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"course_sequence.Template")))}function Qs(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip",null==e||null==e.course_sequence_id?null:e.course_sequence_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.course_sequence_id?null:e.course_sequence_id.name," ")}}function Xs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Added by")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Added by")))}function Js(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.last_name)," ",null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.first_name,"\n      ",null!=e&&null!=e.course_sequence_id&&null!=e.course_sequence_id.created_by&&e.course_sequence_id.created_by.civility&&"neutral"===(null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.civility)?"":t.\u0275\u0275pipeBind1(2,8,null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.civility),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.last_name)," ",null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.first_name," ",null!=e&&null!=e.course_sequence_id&&null!=e.course_sequence_id.created_by&&e.course_sequence_id.created_by.civility&&"neutral"===(null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.civility)?"":t.\u0275\u0275pipeBind1(5,12,null==e||null==e.course_sequence_id||null==e.course_sequence_id.created_by?null:e.course_sequence_id.created_by.civility)," ")}}function Zs(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Last modified by")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Last modified by")))}function tc(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","",t.\u0275\u0275pipeBind1(1,6,null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.last_name)," ",null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.first_name,"\n      ",null!=e&&null!=e.course_sequence_id&&null!=e.course_sequence_id.updated_by&&e.course_sequence_id.updated_by.civility&&"neutral"===(null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.civility)?"":t.\u0275\u0275pipeBind1(2,8,null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.civility),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.last_name)," ",null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.first_name," ",null!=e&&null!=e.course_sequence_id&&null!=e.course_sequence_id.updated_by&&e.course_sequence_id.updated_by.civility&&"neutral"===(null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.civility)?"":t.\u0275\u0275pipeBind1(5,12,null==e||null==e.course_sequence_id||null==e.course_sequence_id.updated_by?null:e.course_sequence_id.updated_by.civility)," ")}}function ec(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Last modification date")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Last modification date")))}function nc(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",82),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("matTooltip",n.transformDate(null==e||null==e.course_sequence_id?null:e.course_sequence_id.updated_date)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.transformDate(null==e||null==e.course_sequence_id?null:e.course_sequence_id.updated_date)," ")}}function ic(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Hyperplanning Status")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Hyperplanning Status")))}function oc(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",83)(1,"mat-icon",84),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3,"lens "),t.\u0275\u0275elementEnd()()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("matTooltip",t.\u0275\u0275pipeBind1(2,2,null!=e&&e.is_hyperplanning_updated?"hyperplanning_status.up_to_date":"hyperplanning_status.not_up_to_date"))("ngClass",null!=e&&e.is_hyperplanning_updated?"green-icon":"red-icon")}}function ac(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Action")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Action")))}function lc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",86),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.openTabDetail(i,null==i||null==i.course_sequence_id?null:i.course_sequence_id._id))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",87),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Edit")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0)}}function rc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",86),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.assignTeacher(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275element(2,"mat-icon",88),t.\u0275\u0275elementEnd()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"course_sequence.Details")),t.\u0275\u0275property("disabled",e.dataSelected&&e.dataSelected.length>0)}}function sc(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",83),t.\u0275\u0275template(1,lc,3,4,"button",85),t.\u0275\u0275template(2,rc,3,4,"button",85),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==e||null==e.course_sequence_id?null:e.course_sequence_id.name)&&(null==n.permission?null:n.permission.editPermIntakeChannelSchoolCoursesSequencesTabPerm())),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",(null==e||null==e.course_sequence_id?null:e.course_sequence_id._id)&&(null==n.permission?null:n.permission.detailsIntakeChannelSchoolCoursesSequencesTabPerm()))}}function cc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",89)(1,"div",90),t.\u0275\u0275element(2,"mat-spinner",91),t.\u0275\u0275elementEnd()())}function dc(o,r){1&o&&t.\u0275\u0275element(0,"tr",92)}function pc(o,r){1&o&&t.\u0275\u0275element(0,"tr",92)}function mc(o,r){1&o&&t.\u0275\u0275element(0,"tr",92)}function hc(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",93),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function gc(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",94),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function _c(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",96),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")," "))}function uc(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,_c,3,3,"div",95),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(2,1,e.noData))}}function fc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",97),t.\u0275\u0275element(1,"mat-progress-spinner",98),t.\u0275\u0275elementEnd())}const Cc=function(o){return{hidden:o}},bc=function(){return["reset"]},xc=function(){return["loading"]},vc=function(o){return{hide:o}},Oc=function(o){return{"hide-pagination-buttons":o}},yc=function(){return[10]};let Sc=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.courseSequenceService=e,this.dialog=n,this.translate=i,this.parseUTCToLocalPipe=a,this.authService=l,this.permission=c,this.router=g,this.filterBreadCrumbService=m,this.subs=new F.Y,this.selection=new ft.Ov(!0,[]),this.dataSource=new S.by([]),this.displayedColumns=["select","scholarSeason","school","campus","level","sector","speciality","template","addedBy","lastModifiedBy","lastModificationDate","hyperplanningStatus","action"],this.filterColumns=["selectFilter","scholarSeasonFilter","schoolFilter","campusFilter","levelFilter","sectorFilter","specialityFilter","templateFilter","addedByFilter","lastModifiedByFilter","lastModificationDateFilter","hyperplanningStatusFilter","actionFilter"],this.dropdownHyperplanning=[{name:"hyperplanning_status.up_to_date",key:!0},{name:"hyperplanning_status.not_up_to_date",key:!1}],this.isWaitingForResponse=!1,this.isLoading=!1,this.dataCount=0,this.isReset=!1,this.campusFilter=new p.UntypedFormControl(["All"]),this.levelFilter=new p.UntypedFormControl(["All"]),this.sectorFilter=new p.UntypedFormControl(["All"]),this.specialityFilter=new p.UntypedFormControl(["All"]),this.hyperplanningStatusFilter=new p.UntypedFormControl("All"),this.filteredValues={school_id:null,campus:null,level:null,sector:null,speciality:null,scholar_season_id:null,is_should_have_speciality:null,hyperplanning_status:null},this.allFilter=[],this.campusList=[],this.levelList=[],this.sectorList=[],this.specialityList=[],this.dataSelected=[],this.dataSelectedId=[],this.pageSelected=[],this.isCheckedAll=!1,this.allStudentForCheckbox=[],this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.isSelectAllHyperPlanning=!0,this.filterBreadcrumbData=[]}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.getDropdownFilter(0),this.getAllProgram(),this.initFilter()}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,Z.O)(null),(0,ht.b)(()=>{this.isReset||this.getAllProgram()})).subscribe()}openTabDetail(e,n){window.open("/template-sequences/program-sequence/"+n+"?programId="+e._id+"&schoolId="+this.schoolId,"_blank")}getAllProgram(){const e={limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0},i=this.scholarSeasonId?this.scholarSeasonId:null;this.filteredValues.school_id=[this.schoolId?this.schoolId:null],this.filteredValues.scholar_season_id=i,this.isWaitingForResponse=!0,this.subs.sink=this.courseSequenceService.getAllProgram(e,this.filteredValues,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe(l=>{this.getHyperplanningLatestStatus(),l&&l.length?(this.dataSource.data=h.cloneDeep(l),this.dataCount=l[0]&&l[0].count_document?l[0].count_document:0):(this.dataSource.data=[],this.paginator.length=0,this.dataCount=0),this.noData=this.dataSource.connect().pipe((0,nt.U)(c=>0===c.length)),this.isReset=!1,this.isWaitingForResponse=!1,this.filterBreadcrumbData=[],this.filterBreadcrumbFormat()},l=>{this.authService.postErrorLog(l),this.isWaitingForResponse=!1,l&&l.message&&l.message.includes("Network error: Http failure response for")&&s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1})})}getHyperplanningLatestStatus(){this.isWaitingForResponse=!0,this.subs.sink=this.courseSequenceService.getHyperplanningLatestStatus(this.schoolId,this.scholarSeasonId).subscribe(e=>{e&&(this.hyperplanningStatus=e),this.isWaitingForResponse=!1})}initFilter(){}selectCampus(e){const n=this.specialityFilter.value;if(n&&n.length)if("All"===e)this.filteredValues.campus=null,this.campusFilter.setValue(["All"]);else{let i=!1;n?.length&&(i=n.filter(a=>"None"!==a&&"All"!==a)),i?(this.filteredValues.campus=i,this.specialityFilter.setValue(i)):(this.filteredValues.campus=null,this.specialityFilter.setValue(null))}else this.filteredValues.campus=null,this.specialityFilter.setValue(null);this.paginator.pageIndex=0,this.isReset||this.getAllProgram()}setFilterSelected(e){switch(e){case"campus":if(this.isSelectAllCampus)this.selectAll("campus");else{const n=h.cloneDeep(this.campusFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllCampus=!0,this.selectAll("campus");else{this.isSelectAllCampus=!1,this.campusFilter.setValue(i);const l=this.campusFilter.value;this.filteredValues.campus=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAllProgram()}}break;case"level":if(this.isSelectAllLevel)this.selectAll("level");else{this.isSelectAllLevel=!1;const n=h.cloneDeep(this.levelFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllLevel=!0,this.selectAll("level");else{this.levelFilter.setValue(i);const l=this.levelFilter.value;this.filteredValues.level=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAllProgram()}}break;case"sector":if(this.isSelectAllSector)this.selectAll("sector");else{const n=h.cloneDeep(this.sectorFilter.value),i=[];if(n.filter(l=>{l&&i.push(l)}),i.some(l=>"All"===l))this.isSelectAllSector=!0,this.selectAll("sector");else{this.isSelectAllSector=!1,this.sectorFilter.setValue(i);const l=this.sectorFilter.value;this.filteredValues.sector=l&&l.length>0?l:null,this.paginator.pageIndex=0,this.getAllProgram()}}}}selectHyperPlanning(e){"All"===e?(this.hyperplanningStatusFilter.setValue("All"),this.filteredValues.hyperplanning_status=null):(this.hyperplanningStatusFilter.setValue(e),this.filteredValues.hyperplanning_status=e),this.paginator.pageIndex=0,this.isReset||this.getAllProgram()}selectSpeciality(e){const n=this.specialityFilter.value;if(n&&n.length>0){if("None"===e)this.specialityFilter.setValue(["None"]),this.filteredValues.speciality=null,this.filteredValues.is_should_have_speciality=!1;else if("All"===e)this.specialityFilter.setValue(["All"]),this.filteredValues.speciality=null,this.filteredValues.is_should_have_speciality=null;else if("None"!==e&&"All"!==e){const i=n.filter(a=>"None"!==a&&"All"!==a);i&&(this.specialityFilter.setValue(i),this.filteredValues.speciality=i,this.filteredValues.is_should_have_speciality=!0)}}else this.specialityFilter.setValue(null),this.filteredValues.speciality=null,this.filteredValues.is_should_have_speciality=null;this.paginator.pageIndex=0,this.isReset||this.getAllProgram()}clearSelect(){this.selection.clear(),this.isCheckedAll=!1,this.dataSelected=[],this.dataSelectedId=[],this.pageSelected=[],this.allStudentForCheckbox=[]}getDropdownFilter(e){this.campusList=[],this.isLoading=!0;const n={limit:300,page:e},a=this.scholarSeasonId?this.scholarSeasonId:null;this.filteredValues.school_id=[this.schoolId?this.schoolId:null],this.filteredValues.scholar_season_id=a,this.subs.sink=this.courseSequenceService.getAllProgram(n,this.filteredValues,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe(c=>{if(c&&c.length)this.allFilter.push(...c),this.getDropdownFilter(e+1);else{this.isLoading=!1;const g=h.cloneDeep(this.allFilter);g&&g.length&&(g.forEach(m=>{m&&m.campus&&this.campusList.push(m.campus),m&&m.level&&this.levelList.push(m.level),m&&m.sector_id&&this.sectorList.push(m.sector_id),m&&m.speciality_id&&this.specialityList.push(m.speciality_id)}),this.uniqByFilter())}},c=>{this.isLoading=!1,this.authService.postErrorLog(c),c&&c.message&&c.message.includes("Network error: Http failure response for")&&s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1})})}uniqByFilter(){this.campusList&&this.campusList.length>0&&(this.campusList=h.uniqBy(this.campusList,"_id"),this.campusList=this.campusList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.levelList&&this.levelList.length>0&&(this.levelList=h.uniqBy(this.levelList,"_id"),this.levelList=this.levelList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.sectorList&&this.sectorList.length>0&&(this.sectorList=h.uniqBy(this.sectorList,"_id"),this.sectorList=this.sectorList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase()))),this.specialityList&&this.specialityList.length>0&&(this.specialityList=h.uniqBy(this.specialityList,"_id"),this.specialityList=this.specialityList.sort((e,n)=>e.name.toLowerCase().localeCompare(n.name.toLowerCase())))}isAllSelected(){const e=this.selection.selected.length,n=this.dataSource.data.length;return e===n||e>n}masterToggle(){this.isAllSelected()?(this.selection.clear(),this.dataSelected=[],this.pageSelected=[],this.isCheckedAll=!1):(this.selection.clear(),this.dataSelected=[],this.allStudentForCheckbox=[],this.isCheckedAll=!0,this.isCheckedAll&&this.getDataAllForCheckbox(0))}getDataAllForCheckbox(e){this.isWaitingForResponse=!0;const n={limit:300,page:e};this.filteredValues.scholar_season_id=this.scholarSeasonId,this.filteredValues.school_id=[this.schoolId],this.subs.sink=this.courseSequenceService.getAllProgram(n,this.filteredValues,this.currentUserTypeId).subscribe(i=>{i&&i.length?(this.allStudentForCheckbox.push(...i),this.getDataAllForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.isCheckedAll?(this.allStudentForCheckbox&&this.allStudentForCheckbox.length&&this.allStudentForCheckbox.forEach(a=>{this.selection.select(a._id),this.dataSelected.push(a)}),this.pageSelected.push(this.paginator.pageIndex)):this.pageSelected=[])},i=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(i),i&&i.message&&i.message.includes("Network error: Http failure response for")&&s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1})})}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}showOptions(e,n){if(n)if(this.dataSelected&&this.dataSelected.length){const i=this.dataSelected.filter(a=>a._id===n._id);if(i&&i.length<1)this.dataSelected.push(n);else{const a=this.dataSelected.findIndex(l=>l._id===n._id);this.dataSelected.splice(a,1)}}else this.dataSelected.push(n);this.selectedType=e}resetFilter(){this.clearSelect(),this.resetterFilter(),this.filteredValues={school_id:null,campus:null,level:null,sector:null,speciality:null,scholar_season_id:null,is_should_have_speciality:null,hyperplanning_status:null},this.paginator.pageIndex=0,this.isReset=!0,this.filterBreadcrumbData=[],this.getAllProgram()}resetterFilter(){this.campusFilter.setValue(["All"],{emitEvent:!1}),this.levelFilter.setValue(["All"],{emitEvent:!1}),this.sectorFilter.setValue(["All"],{emitEvent:!1}),this.specialityFilter.setValue(["All"],{emitEvent:!1}),this.hyperplanningStatusFilter.setValue("All",{emitEvent:!1}),this.isSelectAllCampus=!0,this.isSelectAllLevel=!0,this.isSelectAllSector=!0,this.isSelectAllSpeciality=!0,this.isSelectAllHyperPlanning=!0}connectTemplate(){this.dataSelected&&this.dataSelected.length<=0?s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("CONTRACT_PROCESS_FORM.Program")}),confirmButtonText:this.translate.instant("Followup_S8.Button")}):this.subs.sink=this.dialog.open(ts,{width:"700px",disableClose:!0,minHeight:"16vh",panelClass:"certification-rule-pop-up",data:this.dataSelected}).afterClosed().subscribe(e=>{e&&(this.clearSelect(),this.getAllProgram())})}updateHyperplanning(){let e;this.dataSelected&&this.dataSelected.length?(this.dataSelected&&this.dataSelected.length&&(e=this.dataSelected.map(n=>n._id)),this.isWaitingForResponse=!0,this.subs.sink=this.courseSequenceService.sendProgramsToHyperplanning(e).subscribe(n=>{n&&s().fire({type:"success",title:this.translate.instant("Bravo!"),text:this.translate.instant("We are updating hyperplanning, it can take few minutes before the status change"),confirmButtonText:this.translate.instant("OK"),allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}),this.isWaitingForResponse=!1,this.clearSelect(),this.getAllProgram()},n=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(n),n&&n.message&&n.message.includes("There is no template connected to this program")?s().fire({type:"info",title:this.translate.instant("BAD_CONNECTION.Title"),text:this.translate.instant("There is no template connected to this program"),confirmButtonText:this.translate.instant("Okay"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")})})):s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("CONTRACT_PROCESS_FORM.Program")}),confirmButtonText:this.translate.instant("Followup_S8.Button")})}assignTeacher(e){const i=this.router.createUrlTree(["/schools/teachers/assign-teachers"],{queryParams:{programId:e._id}});window.open(i.toString(),"_blank")}transformDate(e){if(e&&e.date){const a=this.parseUTCToLocalPipe.transformDate(e.date,e.time?e.time:"15:59");return"Invalid date"!==a?a:""}return""}translateTime(e){if(e){const n=this.parseUTCToLocalPipe.transform(e);return n&&"Invalid date"!==n&&"Invalid date"!==j(n,"HH:mm").format("HH[h]mm")?j(n,"HH:mm").format("HH[h]mm"):"00h00"}return""}translateDate(e,n){return e&&n?this.parseUTCToLocalPipe.transformDate(e,n):""}selectAll(e){const n=["All"];if("campus"===e){if(this.campusList&&this.campusList.length)if(this.isSelectAllCampus){this.isSelectAllCampus=!1;const i=[];h.cloneDeep(this.campusFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.campus=i&&i.length>0?i:null,this.campusFilter.setValue(i)}else this.isSelectAllCampus=!0,this.campusFilter.setValue(n),this.filteredValues.campus=null;else this.isSelectAllCampus?(this.campusFilter.setValue(n),this.isSelectAllCampus=!this.isSelectAllCampus):(this.campusFilter.setValue(null),this.isSelectAllCampus=!this.isSelectAllCampus);this.paginator.pageIndex=0,this.getAllProgram()}else if("level"===e){if(this.levelList&&this.levelList.length)if(this.isSelectAllLevel){this.isSelectAllLevel=!1;const i=[];h.cloneDeep(this.levelFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.level=i&&i.length>0?i:null,this.levelFilter.setValue(i)}else this.isSelectAllLevel=!0,this.levelFilter.setValue(n),this.filteredValues.level=null;else this.isSelectAllLevel?(this.levelFilter.setValue(n),this.isSelectAllLevel=!this.isSelectAllLevel):(this.levelFilter.setValue(null),this.isSelectAllLevel=!this.isSelectAllLevel);this.paginator.pageIndex=0,this.getAllProgram()}else if("sector"===e){if(this.sectorList&&this.sectorList.length)if(this.isSelectAllSector){this.isSelectAllSector=!1;const i=[];h.cloneDeep(this.sectorFilter.value).filter(l=>{"All"!==l&&i.push(l)}),this.filteredValues.sector=i&&i.length>0?i:null,this.sectorFilter.setValue(i)}else this.isSelectAllSector=!0,this.sectorFilter.setValue(n),this.filteredValues.sector=null;else this.isSelectAllSector?(this.sectorFilter.setValue(n),this.isSelectAllSector=!this.isSelectAllSector):(this.sectorFilter.setValue(null),this.isSelectAllSector=!this.isSelectAllSector);this.paginator.pageIndex=0,this.getAllProgram()}else"speciality"===e&&(this.specialityList&&this.specialityList.length?this.isSelectAllSpeciality?(this.isSelectAllSpeciality=!1,this.specialityFilter.setValue(null)):(this.isSelectAllSpeciality=!0,this.specialityFilter.setValue(n)):this.isSelectAllSpeciality?(this.specialityFilter.setValue(n),this.isSelectAllSpeciality=!this.isSelectAllSpeciality):(this.specialityFilter.setValue(null),this.isSelectAllSpeciality=!this.isSelectAllSpeciality),this.paginator.pageIndex=0,this.getAllProgram())}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"table_filter",name:"campus",column:"Program_Table_School_Detail.Campus",isMultiple:!0,filterValue:this.filteredValues,filterList:this.campusList,filterRef:this.campusFilter,isSelectionInput:!0,displayKey:"name",savedValue:"_id",resetValue:["All"]},{type:"table_filter",name:"level",column:"Program_Table_School_Detail.Level",isMultiple:!0,filterValue:this.filteredValues,filterList:this.levelList,filterRef:this.levelFilter,isSelectionInput:!0,displayKey:"name",savedValue:"_id",resetValue:["All"]},{type:"table_filter",name:"sector",column:"Program_Table_School_Detail.Sector",isMultiple:!0,filterValue:this.filteredValues,filterList:this.sectorList,filterRef:this.sectorFilter,isSelectionInput:!0,displayKey:"name",savedValue:"_id",resetValue:["All"]},{type:"table_filter",name:"speciality",column:"Program_Table_School_Detail.Speciality",isMultiple:!0,filterValue:this.filteredValues,filterList:this.specialityList,filterRef:this.specialityFilter,isSelectionInput:!0,displayKey:"name",savedValue:"_id",resetValue:["All"]},{type:"table_filter",name:"hyperplanning_status",column:"Hyperplanning Status",isMultiple:!1,filterValue:this.filteredValues,filterList:this.dropdownHyperplanning,filterRef:this.hyperplanningStatusFilter,isSelectionInput:!0,displayKey:"name",savedValue:"key",resetValue:"All"}],this.filterBreadcrumbData)}removeFilterBreadcrumb(e){this.filterBreadCrumbService.removeFilterBreadcrumb(e,null,this.filteredValues),"speciality"===e.name&&(this.filteredValues.is_should_have_speciality=null),this.paginator.pageIndex=0,this.clearSelect(),this.getAllProgram()}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(Kt.z),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(vt.t),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(Ct.q))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-courses-sequences-program"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(et.NW,7),t.\u0275\u0275viewQuery(z.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},inputs:{schoolId:"schoolId",scholarSeasonId:"scholarSeasonId"},features:[t.\u0275\u0275ProvidersFeature([vt.t])],decls:92,vars:33,consts:[[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"mt-10",3,"ngClass"],[1,"text-info"],["class","status ml-2",3,"matTooltip",4,"ngIf"],["class","status-re ml-2",3,"matTooltip",4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"margin-top","10px",3,"dataSource"],["matColumnDef","reset"],["mat-header-cell","","colspan","100%","class","action-header-column text-right",4,"matHeaderCellDef"],["matColumnDef","selectFilter","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","scholarSeasonFilter"],["matColumnDef","schoolFilter"],["matColumnDef","campusFilter"],["matColumnDef","levelFilter"],["matColumnDef","sectorFilter"],["matColumnDef","specialityFilter"],["matColumnDef","templateFilter"],["matColumnDef","addedByFilter"],["matColumnDef","lastModifiedByFilter"],["matColumnDef","lastModificationDateFilter"],["matColumnDef","hyperplanningStatusFilter"],["matColumnDef","actionFilter"],["matColumnDef","select",1,"mat-column-select"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","scholarSeason"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","school"],["matColumnDef","campus"],["matColumnDef","level"],["matColumnDef","sector"],["matColumnDef","speciality"],["matColumnDef","template"],["matColumnDef","addedBy"],["matColumnDef","lastModifiedBy"],["matColumnDef","lastModificationDate"],["matColumnDef","hyperplanningStatus"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["matColumnDef","loading"],["mat-header-cell","","colspan","100%","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","length","hidePageSize","pageSize"],["class","loading-indicator",4,"ngIf"],[1,"status","ml-2",3,"matTooltip"],[1,"status-re","ml-2",3,"matTooltip"],["mat-header-cell","","colspan","100%",1,"action-header-column","text-right"],[1,"p-grid"],[1,"text-right","text-count","p-col-6"],["style","font-family: 'firaSans' !important",4,"ngIf"],[1,"p-col-6","text-right"],["mat-raised-button","","color","accent",3,"matTooltip","disabled","matMenuTriggerFor"],[1,"action-dropdown-button-above-table"],["action","matMenu"],["mat-menu-item","",3,"matTooltip","click",4,"ngIf"],["mat-menu-item","",3,"matTooltip","click"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],[2,"font-family","'firaSans' !important"],["mat-raised-button","","color","primary",3,"matTooltip","disabled","click"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell",""],["appearance","legacy"],["multiple","","panelClass","filterPanel custom-matselect-margin",3,"formControl","disableOptionCentering"],[3,"value","click",4,"ngIf"],[3,"disabled",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"],[3,"disabled"],["multiple","","panelClass","filterPanel custom-matselect-dropdown-margin",3,"formControl","disableOptionCentering"],["panelClass","filterPanel custom-matselect-dropdown-margin",3,"formControl","disableOptionCentering"],["value","All",3,"click",4,"ngIf"],["value","All",3,"click"],["mat-header-cell","",1,"text-center"],[3,"checked","indeterminate","aria-label","change"],["mat-cell","",1,"text-center"],[3,"checked","aria-label","click","change"],["mat-header-cell","",3,"matTooltip"],["mat-cell","",3,"matTooltip"],["mat-cell",""],["matTooltipPosition","above","aria-hidden","true",3,"matTooltip","ngClass"],["mat-icon-button","","class","margin-right-button","matTooltipPosition","above",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",1,"margin-right-button",3,"matTooltip","disabled","click"],["svgIcon","pencil"],["svgIcon","event_note"],["mat-header-cell","","colspan","100%",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],["class","no-records",4,"ngIf"],[1,"no-records"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ms-filter-breadcrumb",0),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"span"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"span"),t.\u0275\u0275text(7,":"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span"),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(10,es,4,6,"span",3),t.\u0275\u0275template(11,ns,4,6,"span",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"table",5),t.\u0275\u0275elementContainerStart(13,6),t.\u0275\u0275template(14,ls,19,17,"th",7),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(15,8),t.\u0275\u0275template(16,rs,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(17,10),t.\u0275\u0275template(18,ss,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(19,11),t.\u0275\u0275template(20,cs,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(21,12),t.\u0275\u0275template(22,hs,6,5,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(23,13),t.\u0275\u0275template(24,fs,6,5,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(25,14),t.\u0275\u0275template(26,vs,6,5,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(27,15),t.\u0275\u0275template(28,Ms,7,6,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(29,16),t.\u0275\u0275template(30,ws,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(31,17),t.\u0275\u0275template(32,Ts,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(33,18),t.\u0275\u0275template(34,ks,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(35,19),t.\u0275\u0275template(36,Is,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(37,20),t.\u0275\u0275template(38,Fs,5,4,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(39,21),t.\u0275\u0275template(40,As,1,0,"th",9),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(41,22),t.\u0275\u0275template(42,Bs,2,3,"th",23),t.\u0275\u0275template(43,Ns,2,2,"td",24),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(44,25),t.\u0275\u0275template(45,Ls,5,6,"th",26),t.\u0275\u0275template(46,Vs,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(47,28),t.\u0275\u0275template(48,Rs,5,6,"th",26),t.\u0275\u0275template(49,Us,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(50,29),t.\u0275\u0275template(51,Hs,5,6,"th",26),t.\u0275\u0275template(52,Ks,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(53,30),t.\u0275\u0275template(54,Ws,5,6,"th",26),t.\u0275\u0275template(55,js,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(56,31),t.\u0275\u0275template(57,$s,5,6,"th",26),t.\u0275\u0275template(58,qs,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(59,32),t.\u0275\u0275template(60,Gs,5,6,"th",26),t.\u0275\u0275template(61,zs,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(62,33),t.\u0275\u0275template(63,Ys,5,6,"th",26),t.\u0275\u0275template(64,Qs,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(65,34),t.\u0275\u0275template(66,Xs,5,6,"th",26),t.\u0275\u0275template(67,Js,6,14,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(68,35),t.\u0275\u0275template(69,Zs,5,6,"th",26),t.\u0275\u0275template(70,tc,6,14,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(71,36),t.\u0275\u0275template(72,ec,5,6,"th",26),t.\u0275\u0275template(73,nc,2,2,"td",27),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(74,37),t.\u0275\u0275template(75,ic,5,6,"th",26),t.\u0275\u0275template(76,oc,4,4,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(77,39),t.\u0275\u0275template(78,ac,5,6,"th",26),t.\u0275\u0275template(79,sc,3,2,"td",38),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(80,40),t.\u0275\u0275template(81,cc,3,0,"th",41),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(82,dc,1,0,"tr",42),t.\u0275\u0275template(83,pc,1,0,"tr",42),t.\u0275\u0275template(84,mc,1,0,"tr",42),t.\u0275\u0275template(85,hc,1,1,"tr",43),t.\u0275\u0275template(86,gc,1,1,"tr",44),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(87,uc,3,3,"ng-container",45),t.\u0275\u0275elementStart(88,"div",46),t.\u0275\u0275pipe(89,"async"),t.\u0275\u0275element(90,"mat-paginator",47),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(91,fc,2,0,"div",48)),2&e&&(t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(24,Cc,n.isLoading)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(5,20,"Last update Hyperplanning")," "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate2("",n.translateDate(null==n.hyperplanningStatus||null==n.hyperplanningStatus.latest_hyperplanning_updated?null:n.hyperplanningStatus.latest_hyperplanning_updated.date,null==n.hyperplanningStatus||null==n.hyperplanningStatus.latest_hyperplanning_updated?null:n.hyperplanningStatus.latest_hyperplanning_updated.time)," - ",n.translateTime(null==n.hyperplanningStatus||null==n.hyperplanningStatus.latest_hyperplanning_updated?null:n.hyperplanningStatus.latest_hyperplanning_updated.time),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==n.hyperplanningStatus?null:n.hyperplanningStatus.is_hyperplanning_updated),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=n.hyperplanningStatus&&n.hyperplanningStatus.is_hyperplanning_updated)),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(70),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(26,bc)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(27,xc)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(28,vc,t.\u0275\u0275pipeBind1(89,22,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(30,Oc,n.dataCount<=10))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(32,yc)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isLoading))},dependencies:[d.mk,d.sg,d.O5,R.ey,D.lW,_t.oG,B.Hw,T.KE,W.VK,W.OP,W.p6,et.NW,L.Ou,Q.gD,z.YE,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,it.gM,p.NgControlStatus,p.FormControlDirective,st.oO,bt.r,d.Ov,d.gd,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){width:3%;padding-left:0rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){width:7%;text-align:center!important;padding-left:.5rem!important;padding-right:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(2) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){width:7%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(3) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){width:9%;text-align:center!important;padding-left:.5rem!important;padding-right:.5rem!important}[_nghost-%COMP%]     table tr td:nth-child(4) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){width:5%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(5) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(5) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(6), [_nghost-%COMP%]     table tr th:nth-child(6){width:9%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(6) .mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(6) .mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(7), [_nghost-%COMP%]     table tr th:nth-child(7){width:9%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(8), [_nghost-%COMP%]     table tr th:nth-child(8){width:9%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(9), [_nghost-%COMP%]     table tr th:nth-child(9){width:9%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(10), [_nghost-%COMP%]     table tr th:nth-child(10){width:9%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(11), [_nghost-%COMP%]     table tr th:nth-child(11){width:6%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(12), [_nghost-%COMP%]     table tr th:nth-child(12){width:8%;min-width:100px;max-width:100px;padding-left:.3rem!important;padding-right:.3rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td:last-child, [_nghost-%COMP%]     table tr th:last-child{width:14%;padding-left:.5rem!important;padding-right:.5rem!important;text-align:center!important}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr th{vertical-align:top}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.hidden[_ngcontent-%COMP%]{display:none}.red-icon[_ngcontent-%COMP%]{color:#ff4040}.green-icon[_ngcontent-%COMP%]{color:#adff2f}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}.text-info[_ngcontent-%COMP%]{margin:0;display:flex;flex-direction:row;align-items:center;justify-content:center;margin-left:.25rem}.status[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:green;color:#fff;font-size:.75rem;border-radius:.375rem;cursor:pointer}.status-re[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:#f49f36;color:#fff;font-size:.75rem;border-radius:.375rem;cursor:pointer}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.mt-10[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]  .filterPanel.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}[_nghost-%COMP%]:ng-deep.filter-panel{margin-top:25px!important}  .custom-matselect-dropdown-margin.mat-select-panel{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-top:32px!important}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{white-space:normal!important}.text-count[_ngcontent-%COMP%]{font-size:15px;color:#fff;text-align:left!important;margin:auto 0}"]}),o})();function Pc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"INTAKE_CHANNEL.School details")))}function Mc(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"ms-school-detail",7),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("schoolId",e.schoolId)}}function wc(o,r){if(1&o&&t.\u0275\u0275template(0,Mc,2,1,"ng-container",5),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngIf",!e.isWaitingForResponse)}}function Tc(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"h5"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e?null:e.scholar_season," ")}}function kc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275element(1,"mat-progress-spinner",11),t.\u0275\u0275elementEnd())}function Ic(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275element(1,"ms-program",15),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext(5).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("schoolData",n.schoolData)("schoolId",n.schoolId)("scholarSeasonId",null==e?null:e._id)("scholarSeason",e)}}function Ec(o,r){if(1&o&&t.\u0275\u0275template(0,Ic,2,4,"ng-container",5),2&o){const e=t.\u0275\u0275nextContext(6);t.\u0275\u0275property("ngIf",!e.isWaitingForResponse&&!e.isLoading)}}function Dc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Ec,1,1,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"School-Tab.Programs"))}function Fc(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-down-payment",16),2&o){const e=t.\u0275\u0275nextContext(4).$implicit;t.\u0275\u0275property("scholarSeason",e)}}function Ac(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Fc,1,1,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"School-Tab.Down payment"))}function Bc(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-full-rate",16),2&o){const e=t.\u0275\u0275nextContext(4).$implicit;t.\u0275\u0275property("scholarSeason",e)}}function Nc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Bc,1,1,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"School-Tab.Full rate"))}function Lc(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-legal",16),2&o){const e=t.\u0275\u0275nextContext(4).$implicit;t.\u0275\u0275property("scholarSeason",e)}}function Vc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Lc,1,1,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"School-Tab.Legal"))}function Rc(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-admission",17),2&o){const e=t.\u0275\u0275nextContext(4).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("scholarSeason",e)("school",n.schoolData)("tabIndex",n.tabIndex)}}function Uc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Rc,1,3,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"School-Tab.Admission"))}function Hc(o,r){if(1&o&&t.\u0275\u0275element(0,"ms-courses-sequences-program",18),2&o){const e=t.\u0275\u0275nextContext(4).$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("schoolId",n.schoolId)("scholarSeasonId",null==e?null:e._id)}}function Kc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-tab",14),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275template(2,Hc,1,2,"ng-template",4),t.\u0275\u0275elementEnd()),2&o&&t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,1,"course_sequence.Courses & Sequences"))}function Wc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-tab-group",12),t.\u0275\u0275listener("selectedIndexChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(a.tabIndex=i)})("selectedTabChange",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(a.selectedTabIndex(i.tab.textLabel,i.index))}),t.\u0275\u0275template(2,Dc,3,3,"mat-tab",13),t.\u0275\u0275template(3,Ac,3,3,"mat-tab",13),t.\u0275\u0275template(4,Nc,3,3,"mat-tab",13),t.\u0275\u0275template(5,Vc,3,3,"mat-tab",13),t.\u0275\u0275template(6,Uc,3,3,"mat-tab",13),t.\u0275\u0275template(7,Kc,3,3,"mat-tab",13),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&o){const e=t.\u0275\u0275nextContext(4);t.\u0275\u0275advance(1),t.\u0275\u0275property("selectedIndex",e.tabIndex),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showProgramIntakeChanelSchool()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showDownPaymentIntakeChanelSchool()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showFullRateIntakeChanelSchool()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showLegalIntakeChanelSchool()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showAdmissionIntakeChanelSchool()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e.permissionService.showCourseSequenceIntakeChanelSchool())}}function jc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",19)(2,"div",20)(3,"div",21)(4,"button",22),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(i.openForm())})("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2).$implicit,a=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(a.createFromZero(i))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",23),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",24)(11,"button",22),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(i.openSelectExisting())}),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementContainerEnd()}2&o&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,3,"INTAKE_CHANNEL.Create starting from zero")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(9,5,"OR")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(13,7,"INTAKE_CHANNEL.Duplicate from another scholar season")," "))}function $c(o,r){if(1&o&&(t.\u0275\u0275template(0,kc,2,0,"div",6),t.\u0275\u0275template(1,Wc,8,7,"ng-container",5),t.\u0275\u0275template(2,jc,14,9,"ng-container",5)),2&o){const e=t.\u0275\u0275nextContext().$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275property("ngIf",!n.programsData),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.programsData&&n.programsData.length>0||n.checkDataCreateFromZero(e)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.programsData&&0===n.programsData.length&&!n.checkDataCreateFromZero(e))}}function qc(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-tab",9),t.\u0275\u0275template(2,Tc,2,1,"ng-template",3),t.\u0275\u0275template(3,$c,3,3,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",null==e?null:e._id)}}function Gc(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,qc,4,1,"ng-container",8),t.\u0275\u0275elementContainerEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.scholarSeasonData)}}function zc(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",10),t.\u0275\u0275element(1,"mat-progress-spinner",11),t.\u0275\u0275elementEnd())}let Wt=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.intakeService=e,this.pageTitleService=n,this.translate=i,this.router=a,this.route=l,this.dialog=c,this.permissionService=g,this.authService=m,this.subs=new F.Y,this.isWaitingForResponse=!1,this.tabIndex=0}ngOnInit(){this.pageTitleService.setTitle(this.translate.instant("Schools")),this.subs.sink=this.route.paramMap.subscribe(e=>{this.schoolId=e.get("id")}),this.schoolId&&this.getSchoolData(),this.getAllSchoolarSeason()}checkDataCreateFromZero(e){let n=!1;return this.schoolData&&this.schoolData.empty_scholar_seasons&&this.schoolData.empty_scholar_seasons.length&&e&&e._id&&this.schoolData.empty_scholar_seasons.forEach(i=>{i._id===e._id&&(n=!0)}),n}createFromZero(e){if(this.schoolData&&this.schoolData._id){let n=this.schoolData.empty_scholar_seasons&&this.schoolData.empty_scholar_seasons.length?this.schoolData.empty_scholar_seasons.map(a=>a._id):[];n.push(e._id),n=h.uniqBy(n);const i={empty_scholar_seasons:n};this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.updateCommonCandidateSchool(this.schoolData._id,i).subscribe(a=>{this.isWaitingForResponse=!1,this.schoolId&&this.getSchoolData(),this.getAllSchoolarSeason(),this.getSchoolPrograms(e._id)},a=>{this.isWaitingForResponse=!0,this.authService.postErrorLog(a),a&&a.message&&a.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:a&&a.message?this.translate.instant(a.message.replaceAll("GraphQL error: ","")):a,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}}getSchoolData(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetOneSchool(this.schoolId).subscribe(e=>{e&&(this.schoolData=h.cloneDeep(e),console.log("SchoolData",this.schoolData),this.refreshTitle(),this.isWaitingForResponse=!1)},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}refreshTitle(){this.schoolData?(this.pageTitleService.setTitle(this.translate.instant("Schools")+" - "+this.schoolData.short_name),this.subs.sink=this.translate.onLangChange.subscribe(e=>{this.pageTitleService.setTitle(this.translate.instant("Schools")+" - "+this.schoolData.short_name)})):(this.pageTitleService.setTitle(this.translate.instant("Schools")),this.subs.sink=this.translate.onLangChange.subscribe(e=>{this.pageTitleService.setTitle(this.translate.instant("Schools"))}))}selectTab(e){console.log("tab",e),this.programsData=[],this.scholarId="","schoolDetail"!==e&&(this.scholarId=e,this.getSchoolPrograms(e))}selectedTabIndex(e,n){console.log("tab",e,n,this.tabIndex)}getSchoolPrograms(e){if(this.schoolId){const n={school_id:this.schoolId,scholar_season_id:e};this.isLoading=!0,this.subs.sink=this.intakeService.GetAllSchoolProgram(n).subscribe(i=>{this.isLoading=!1,i&&(this.programsData=h.cloneDeep(i),console.log("ProgramData",this.programsData))},i=>{this.isLoading=!1,this.authService.postErrorLog(i),i&&i.message&&i.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}else this.programsData=[]}getAllSchoolarSeason(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllPublishedScholarSeasons(!0).subscribe(e=>{this.isWaitingForResponse=!1,e&&(this.scholarSeasonData=h.cloneDeep(e),console.log("PublishedScholarSeason",this.scholarSeasonData))},e=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"warning",title:this.translate.instant("Invalid_Form_Warning.TITLE"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}openSelectExisting(){this.subs.sink=this.dialog.open(Tt,{width:"600px",minHeight:"100px",disableClose:!0,data:{scholar_season_destination_id:this.scholarId,school_id:this.schoolId}}).afterClosed().subscribe(e=>{e&&this.getSchoolPrograms(e)})}openForm(){}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(mt.Z),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-school-scholar-season"]],decls:7,vars:3,consts:[[3,"selectedIndex","selectedIndexChange","selectedTabChange"],["templateMatGroup",""],["label","schoolDetail"],["mat-tab-label",""],["matTabContent",""],[4,"ngIf"],["class","loading-indicator",4,"ngIf"],[3,"schoolId"],[4,"ngFor","ngForOf"],[1,"white-tabs",3,"label"],[1,"loading-indicator"],["mode","indeterminate","color","accent"],["animationDuration","200ms",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label",4,"ngIf"],[3,"label"],[3,"schoolData","schoolId","scholarSeasonId","scholarSeason"],[3,"scholarSeason"],[3,"scholarSeason","school","tabIndex"],[3,"schoolId","scholarSeasonId"],[1,"top-space"],[1,"p-grid"],[1,"p-col-5","text-right"],["mat-raised-button","","color","accent",3,"click"],[1,"p-col-2","text-center"],[1,"p-col-5"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"mat-tab-group",0,1),t.\u0275\u0275listener("selectedIndexChange",function(a){return n.selectedIndex=a})("selectedTabChange",function(a){return n.selectTab(a.tab.textLabel)}),t.\u0275\u0275elementStart(2,"mat-tab",2),t.\u0275\u0275template(3,Pc,3,3,"ng-template",3),t.\u0275\u0275template(4,wc,1,1,"ng-template",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(5,Gc,2,1,"ng-container",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(6,zc,2,0,"div",6)),2&e&&(t.\u0275\u0275property("selectedIndex",n.selectedIndex),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",n.schoolId&&n.scholarSeasonData&&n.scholarSeasonData.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse||n.isLoading))},dependencies:[d.sg,d.O5,D.lW,L.Ou,v.SP,v.uD,v.uX,v.Vc,me,un,li,qi,ma,Qr,Sc,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}"]}),o})();var Yc=b(21406),Qc=b(27221),Xc=b(13119),jt=b(58800);function Jc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",28),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.addTeacher())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Add Teacher")))}function Zc(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",29),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.setTeacher(null==a?null:a._id))}),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate3("value","",t.\u0275\u0275pipeBind1(1,6,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(2,8,null==e?null:e.civility),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e?null:e.last_name)," ",null==e?null:e.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.civility)?"":t.\u0275\u0275pipeBind1(5,12,null==e?null:e.civility)," ")}}function td(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function ed(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function nd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"You cannot assign more group than it exists")))}function id(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Cannot assign 0 group to teacher")))}function od(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-option"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"No type of intervention available")," "))}function ad(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",30),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("value",e._id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e.type_of_intervention)," ")}}function ld(o,r){1&o&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"This field is required")))}function rd(o,r){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",31),t.\u0275\u0275element(2,"mat-progress-spinner",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function sd(o,r){1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",31),t.\u0275\u0275element(2,"mat-progress-spinner",32),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}let cd=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.parentData=e,this.fb=n,this.dialogRef=i,this.teacherManagementService=a,this.translate=l,this.dialog=c,this.router=g,this.userService=m,this.isWaitingForResponse=!1,this.subs=new F.Y,this.max_group=this.parentData.data.number_of_group,this.type_of_intervention_list=[],this.teacherList=[],this.teacherFilter=new p.UntypedFormControl(""),this.isLoading=!1}ngOnInit(){this.isPermission=this.userService.getPermission(),this.currentUser=this.userService.getLocalStorageUser();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,console.log(this.parentData),this.initForm(),this.getTeacherDropDown(),this.initFilter()}getTeacherDropDown(){this.isLoading=!0,this.subs.sink=this.teacherManagementService.getTeacherDropdown(this.currentUserTypeId,null,{limit:10,page:0}).subscribe(i=>{i&&i.length&&(this.teacherList=h.cloneDeep(i),this.filteredTeacher=h.cloneDeep(i),this.isLoading=!1)},i=>{console.error(i),this.isLoading=!1,this.userService.postErrorLog(i)})}onWheel(e){e?.preventDefault()}setTeacher(e){this.isWaitingForResponse=!0;let n=[];console.log("PARENTDATA",this.parentData.legalEntities),this.parentData.legalEntities.forEach(a=>{a.legal_entities_id.forEach(l=>{console.log(l),n.push(l._id)})}),e&&(this.assignTeacher.get("teacher").setValue(e),this.type_of_intervention_list=[],this.isWaitingForResponse=!1);const i={teacher_id:e,legal_entity_id:[...n]};this.subs.sink=this.teacherManagementService.getTypeOfInterventionAssignTeacher(i).subscribe({next:a=>{this.type_of_intervention_list=h.cloneDeep(a),console.log(this.type_of_intervention_list),this.isWaitingForResponse=!1},error:a=>{console.log(a),this.isWaitingForResponse=!1,this.userService.postErrorLog(a)}})}initFilter(){this.subs.sink=this.teacherFilter.valueChanges.pipe((0,Z.O)(""),(0,kt.b)(500),(0,ht.b)(()=>this.isWaitingForResponse=!0),(0,Yc.b)(e=>e?this.teacherManagementService.getTeacherDropdown(this.currentUserTypeId,{name:e},{limit:10,page:0}).pipe((0,at.q)(1)):(0,ut.of)(this.teacherList)),(0,Qc.K)(e=>(this.isWaitingForResponse=!1,(0,ut.of)([])))).subscribe(e=>{this.isWaitingForResponse=!1,this.filteredTeacher=e}),this.subs.sink=this.teacherFilter.valueChanges.subscribe(e=>{e||(this.type_of_intervention_list=[],this.assignTeacher.get("teacher").setValue(""),this.assignTeacher.get("type_of_intervention").setValue(""),this.assignTeacher.get("type_of_intervention").markAsUntouched())})}initForm(){this.assignTeacher=this.fb.group({teacher:["",[p.Validators.required]],nb_of_group:[null,[p.Validators.required,p.Validators.max(this.max_group),this.cantBeZero()]],type_of_intervention:["",[p.Validators.required]]})}cantBeZero(){return e=>{let i=!0;return 0===e.value&&(i=!1),i?null:{zeroValue:!0}}}addTeacher(){this.subs.sink=this.dialog.open(Xc.K,{panelClass:"certification-rule-pop-up",disableClose:!0,width:"660px",data:{type:"create-teacher"}}).afterClosed().subscribe(e=>{e&&(this.closeDialog(),this.goToTeacherCardDetail(e._id))})}goToTeacherCardDetail(e){const i=this.router.createUrlTree(["users/teacher-list"],{queryParams:{teacherId:e,tab:"details"}});window.open(i.toString(),"_blank")}closeDialog(){this.dialogRef.close()}submit(){if(this.checkFormValidity())return;this.isWaitingForResponse=!0;const e={teacher_subject_id:this.parentData.data?this.parentData.data._id:"",teacher_id:this.assignTeacher.get("teacher").value,number_of_group:this.assignTeacher.get("nb_of_group").value,type_of_intervention_id:this.assignTeacher.get("type_of_intervention").value};this.subs.sink=this.teacherManagementService.assignTeacherToSubject(e).subscribe({next:n=>{this.isWaitingForResponse=!1,s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}),this.dialogRef.close(!0)},error:n=>{this.isWaitingForResponse=!1,this.userService.postErrorLog(n),s().fire({type:"info",title:this.translate.instant("SORRY"),text:n&&n.message?this.translate.instant(n.message.replaceAll("GraphQL error: ","")):n,confirmButtonText:this.translate.instant("OK")})}})}checkFormValidity(){return!!this.assignTeacher.invalid&&(s().fire({type:"warning",title:this.translate.instant("FormSave_S1.TITLE"),html:this.translate.instant("FormSave_S1.TEXT"),confirmButtonText:this.translate.instant("FormSave_S1.BUTTON")}),this.assignTeacher.markAllAsTouched(),!0)}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(f.WI),t.\u0275\u0275directiveInject(p.UntypedFormBuilder),t.\u0275\u0275directiveInject(f.so),t.\u0275\u0275directiveInject(jt.D),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-add-assign-teacher-dialog"]],decls:50,vars:32,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle","",1,"dialog-border"],[1,"dialogTitleWrapper","header-dialog"],[1,"p-grid"],[1,"w-30","no-padding"],["mat-icon-button","",1,"mt-5px"],[1,"p-col-10","no-padding"],[1,"dialogTitle"],[1,"w-65","no-padding"],["mat-icon-button","","tabindex","-1",1,"close-icon","float-right",3,"click"],["mat-dialog-content","",1,"mat-dialog-content","dialog-body",2,"overflow","hidden !important"],[3,"formGroup"],[1,"p-col-12"],[1,"full-wid"],["matInput","","required","",1,"form-field",3,"matAutocomplete","formControl","placeholder"],["autoTeacher","matAutocomplete"],[3,"click",4,"ngIf"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-grid",2,"margin-bottom","0.5em"],[1,"p-col-12","pad-y-none",2,"align-self","center"],["color","accent",1,"full-wid"],["type","number","matInput","","formControlName","nb_of_group","required","","onkeypress","if(event.key === '.' || event.key === ',') event.preventDefault()",3,"placeholder","wheel"],["hideRequiredMarker","",1,"full-wid"],["formControlName","type_of_intervention",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"justify-content-end","mr-10"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-button","","mat-raised-button","","color","primary",1,"mr-0",3,"click"],[3,"click"],[3,"value","click"],[3,"value"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.\u0275\u0275text(5," person_add_alt_1 "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",5)(7,"h3",6),t.\u0275\u0275text(8),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",7)(11,"button",8),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275elementStart(12,"mat-icon"),t.\u0275\u0275text(13,"close"),t.\u0275\u0275elementEnd()()()()()(),t.\u0275\u0275elementStart(14,"div",9),t.\u0275\u0275elementContainerStart(15),t.\u0275\u0275elementStart(16,"div",10)(17,"div",11)(18,"mat-form-field",12),t.\u0275\u0275element(19,"input",13),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementStart(21,"mat-autocomplete",null,14),t.\u0275\u0275template(23,Jc,3,3,"mat-option",15),t.\u0275\u0275template(24,Zc,6,14,"mat-option",16),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,td,3,3,"mat-error",17),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"div",18)(27,"div",19)(28,"mat-form-field",20)(29,"input",21),t.\u0275\u0275listener("wheel",function(a){return n.onWheel(a)}),t.\u0275\u0275pipe(30,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(31,ed,3,3,"mat-error",17),t.\u0275\u0275template(32,nd,3,3,"mat-error",17),t.\u0275\u0275template(33,id,3,3,"mat-error",17),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(34,"div",11)(35,"mat-form-field",22)(36,"mat-select",23),t.\u0275\u0275pipe(37,"translate"),t.\u0275\u0275template(38,od,3,3,"mat-option",17),t.\u0275\u0275template(39,ad,3,4,"mat-option",24),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(40,ld,3,3,"mat-error",17),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(41,"div",25)(42,"button",26),t.\u0275\u0275listener("click",function(){return n.closeDialog()}),t.\u0275\u0275text(43),t.\u0275\u0275pipe(44,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(45,"button",27),t.\u0275\u0275listener("click",function(){return n.submit()}),t.\u0275\u0275text(46),t.\u0275\u0275pipe(47,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(48,rd,3,0,"ng-container",17),t.\u0275\u0275template(49,sd,3,0,"ng-container",17)),2&e){const i=t.\u0275\u0275reference(22);t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(9,20,"Assign Teacher")),t.\u0275\u0275advance(8),t.\u0275\u0275property("formGroup",n.assignTeacher),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(20,22,"ASSIGN_TEACHER.Teacher")),t.\u0275\u0275property("matAutocomplete",i)("formControl",n.teacherFilter),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",!n.teacherFilter.value),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.filteredTeacher),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.assignTeacher.get("teacher").hasError("required")&&n.teacherFilter.hasError("required")),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(30,24,"ASSIGN_TEACHER.NB of Groups")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.assignTeacher.get("nb_of_group").hasError("required")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.assignTeacher.get("nb_of_group").hasError("max")),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.assignTeacher.get("nb_of_group").hasError("zeroValue")),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate1("placeholder","",t.\u0275\u0275pipeBind1(37,26,"Type of intervention")," *"),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!n.assignTeacher.get("teacher").value||!n.type_of_intervention_list.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n.type_of_intervention_list),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.assignTeacher.get("type_of_intervention").hasError("required")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(44,28,"CANCEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(47,30,"VALIDATE")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",n.isWaitingForResponse),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isLoading)}},dependencies:[A.Zt,A.Bh,ct.XC,ct.ZL,R.ey,D.lW,f.xY,f.H8,B.Hw,T.TO,T.KE,q.Nt,L.Ou,Q.gD,p.DefaultValueAccessor,p.NumberValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.RequiredValidator,p.FormControlDirective,p.FormGroupDirective,p.FormControlName,d.sg,d.O5,O.X$,d.gd],styles:[".dialogTitle[_ngcontent-%COMP%]{display:inline-block}.dialogTitleWrapper[_ngcontent-%COMP%]{color:#000}.dialog-border[_ngcontent-%COMP%]{border-bottom:1px solid black}.no-padding[_ngcontent-%COMP%]{padding:0}.float-right[_ngcontent-%COMP%]{float:right}.mt-15[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]  .mat-radio-outer-circle{border-color:#0000008a!important}[_nghost-%COMP%]  .mat-form-field-underline{background-color:#0000001f!important}.mr-0[_ngcontent-%COMP%]{margin-right:0}.mr-10[_ngcontent-%COMP%]{margin-right:10px}.header-dialog[_ngcontent-%COMP%]{margin-top:15px;padding:0 5px 0 15px}.mat-dialog-content[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-top:15px}.w-30[_ngcontent-%COMP%]{width:30px}.w-65[_ngcontent-%COMP%]{width:65px}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}"]}),o})();function dd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",61)(1,"div",1)(2,"div",62)(3,"button",63),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.exportTeacherAssignTable())}),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275element(5,"mat-icon",64),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",63),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.resetFilter())}),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275element(10,"mat-icon",65),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd()()()()}2&o&&(t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(4,4,"Export")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,6,"Export")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(9,8,"Reset")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(12,10,"Reset")," "))}function pd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function md(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setSequenceFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name),"")}}function hd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setSequenceFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,md,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"Sequence")),t.\u0275\u0275property("formControl",e.sequenceFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.sequenceList)}}function gd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setModulFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name),"")}}function _d(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setModulFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,gd,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"Module")),t.\u0275\u0275property("formControl",e.moduleFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.moduleList)}}function ud(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setSubjectFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",null==e?null:e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,null==e?null:e.name),"")}}function fd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setSubjectFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,ud,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"ASSIGN_TEACHER.Subject")),t.\u0275\u0275property("formControl",e.subjectFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.subjectList)}}function Cd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function bd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function xd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function vd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setTypeGroupFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ","Class"===e?t.\u0275\u0275pipeBind1(2,2,"Class"):e," ")}}function Od(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setTypeGroupFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,vd,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"ASSIGN_TEACHER.Type of groups")),t.\u0275\u0275property("formControl",e.typeOfGroupFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.typeOfGroupList)}}function yd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function Sd(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function Pd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field"),t.\u0275\u0275element(2,"input",71),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,2,"search")),t.\u0275\u0275property("formControl",e.teacherFilter)}}function Md(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setTypeInterventionFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e),"")}}function wd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setTypeInterventionFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,Md,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"Type of Intervention")),t.\u0275\u0275property("formControl",e.typeOfInterventionFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.typeOfInterventionList)}}function Td(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function kd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-option",70),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(i.setTypeContractFilter())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&o){const e=r.$implicit;t.\u0275\u0275property("value",e),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,e),"")}}function Id(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",66)(1,"mat-form-field")(2,"mat-select",67),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"mat-option",68),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.setTypeContractFilter("All"))}),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,kd,3,4,"mat-option",69),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(3,4,"ASSIGN_TEACHER.Type of contract")),t.\u0275\u0275property("formControl",e.typeOfContractFilter),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(6,6,"All")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.typeOfContractList)}}function Ed(o,r){1&o&&t.\u0275\u0275element(0,"th",66)}function Dd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"th",72)(1,"mat-checkbox",73),t.\u0275\u0275listener("change",function(i){t.\u0275\u0275restoreView(e);const a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?a.masterToggle():null)})("change",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.showOptions("all",""))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",e.selection.hasValue()&&e.isAllSelected()||e.isCheckedAll)("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Fd(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",74)(1,"mat-checkbox",75),t.\u0275\u0275listener("click",function(i){return i.stopPropagation()})("change",function(i){const l=t.\u0275\u0275restoreView(e).$implicit,c=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i?c.selection.toggle(l._id):null)})("change",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.showOptions("one",a))}),t.\u0275\u0275elementEnd()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("checked",n.selection.isSelected(e._id))("aria-label",n.checkboxLabel(e))}}function Ad(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",76),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Sequence")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Sequence")))}function Bd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e.program_sequence_id?null:e.program_sequence_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e.program_sequence_id?null:e.program_sequence_id.name," ")}}function Nd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",78),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Module")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Module")))}function Ld(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e.program_module_id?null:e.program_module_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e.program_module_id?null:e.program_module_id.name," ")}}function Vd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",79),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Subject")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Subject")))}function Rd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e.program_subject_id?null:e.program_subject_id.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e.program_subject_id?null:e.program_subject_id.name," ")}}function Ud(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",80),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Nb of Sessions")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Nb of Sessions")))}function Hd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e||null==e.program_session?null:e.program_session.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(null==e||null==e.program_session?null:e.program_session.name)}}function Kd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",81),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Duration")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Duration")))}function Wd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e||null==e.program_session?null:e.program_session.duration),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.program_session?null:e.program_session.duration," ")}}function jd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",82),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Volume of hours/student")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Volume of hours/student")))}function $d(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e||null==e.program_session?null:e.program_session.volume_hours_student),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e||null==e.program_session?null:e.program_session.volume_hours_student," ")}}function qd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",83),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Type of groups")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Type of groups")))}function Gd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275property("matTooltip","Class"===(null==e||null==e.program_session?null:e.program_session.class_group)?t.\u0275\u0275pipeBind1(1,2,"Class"):null==e||null==e.program_session?null:e.program_session.class_group),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ","Class"===(null==e||null==e.program_session?null:e.program_session.class_group)?t.\u0275\u0275pipeBind1(3,4,"Class"):null==e||null==e.program_session?null:e.program_session.class_group," ")}}function zd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",84),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Groups")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Groups")))}function Yd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null!=e.teacher_id&&e.teacher_id._id?e.number_of_group_assigned:e.number_of_group),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null!=e.teacher_id&&e.teacher_id._id?e.number_of_group_assigned:e.number_of_group," ")}}function Qd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",85),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Volume of Hours")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Volume of Hours")))}function Xd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null!=e.teacher_id&&e.teacher_id._id?null==e?null:e.volume_hours_assigned:(null==e||null==e.program_session?null:e.program_session.volume_hours)-(null==e||null==e.program_session?null:e.program_session.volume_hours_assigned)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null!=e.teacher_id&&e.teacher_id._id?null==e?null:e.volume_hours_assigned:(null==e||null==e.program_session?null:e.program_session.volume_hours)-(null==e||null==e.program_session?null:e.program_session.volume_hours_assigned)," ")}}function Jd(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",86),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Teacher")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Teacher")))}function Zd(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275pipe(1,"uppercase"),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"uppercase"),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate3("matTooltip","",t.\u0275\u0275pipeBind1(1,6,null==e.teacher_id?null:e.teacher_id.last_name)," ",null==e||null==e.teacher_id?null:e.teacher_id.first_name," ",null!=e&&e.civility&&"neutral"===(null==e?null:e.teacher_id.civility)?"":t.\u0275\u0275pipeBind1(2,8,null==e.teacher_id?null:e.teacher_id.civility),""),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate3(" ",t.\u0275\u0275pipeBind1(4,10,null==e.teacher_id?null:e.teacher_id.last_name)," ",null==e.teacher_id?null:e.teacher_id.first_name," ",null!=e.teacher_id&&e.teacher_id.civility&&"neutral"===(null==e.teacher_id?null:e.teacher_id.civility)?"":t.\u0275\u0275pipeBind1(5,12,null==e.teacher_id?null:e.teacher_id.civility)," ")}}function tp(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",87),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Type of Intervention")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Type of Intervention")))}function ep(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null!=e&&null!=e.type_of_intervention_id&&e.type_of_intervention_id.type_of_intervention?t.\u0275\u0275pipeBind1(1,2,e.type_of_intervention_id.type_of_intervention):""),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null!=e&&null!=e.type_of_intervention_id&&e.type_of_intervention_id.type_of_intervention?t.\u0275\u0275pipeBind1(3,4,e.type_of_intervention_id.type_of_intervention):""," ")}}function np(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",88),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Hourly Rate")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Hourly Rate")))}function ip(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",null==e.type_of_intervention_id?null:e.type_of_intervention_id.hourly_rate),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",null==e.type_of_intervention_id?null:e.type_of_intervention_id.hourly_rate," ")}}function op(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",89),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"ASSIGN_TEACHER.Type of contract")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"ASSIGN_TEACHER.Type of contract")))}function ap(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",77),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,null==e.type_of_intervention_id?null:e.type_of_intervention_id.type_of_contract)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,null==e.type_of_intervention_id?null:e.type_of_intervention_id.type_of_contract)," ")}}function lp(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",90),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"h5"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Action")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,4,"Action")))}function rp(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",92),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.assignTeacher(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon")(3,"span",93),t.\u0275\u0275text(4," person_add "),t.\u0275\u0275elementEnd()()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Assign Teacher")),t.\u0275\u0275property("disabled",e.isWaitingForResponse)}}function sp(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",92),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext().$implicit,a=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(a.deleteTeacherFromSubject(i))}),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"mat-icon"),t.\u0275\u0275text(3,"delete"),t.\u0275\u0275elementEnd()()}if(2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(1,2,"Remove Teacher")),t.\u0275\u0275property("disabled",e.isWaitingForResponse)}}function cp(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"td",74),t.\u0275\u0275template(1,rp,5,4,"button",91),t.\u0275\u0275template(2,sp,4,4,"button",91),t.\u0275\u0275elementEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.teacher_id||null!=e&&null!=e.teacher_id&&e.teacher_id._id||0===(null==e?null:e.number_of_group))),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",null==e.teacher_id?null:e.teacher_id._id)}}function dp(o,r){1&o&&(t.\u0275\u0275elementStart(0,"th",94)(1,"div",95),t.\u0275\u0275element(2,"mat-spinner",96),t.\u0275\u0275elementEnd()())}function pp(o,r){1&o&&t.\u0275\u0275element(0,"tr",97)}function mp(o,r){1&o&&t.\u0275\u0275element(0,"tr",97)}function hp(o,r){1&o&&t.\u0275\u0275element(0,"tr",97)}function gp(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",98),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!e.isWaitingForResponse)}}function _p(o,r){if(1&o&&t.\u0275\u0275element(0,"tr",99),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",e.isWaitingForResponse)}}function up(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",100),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"NOT RECORD FOUND")))}const fp=function(){return["buttons"]},Cp=function(){return["loading"]},bp=function(o){return{hide:o}},xp=function(o){return{"hide-pagination-buttons":o}},vp=function(){return[10]};let Op=(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.translate=e,this.router=n,this.route=i,this.dialog=a,this.teacherManagementService=l,this.pageTitleService=c,this.financeService=g,this.authService=m,this.subs=new F.Y,this.dataSource=new S.by([]),this.displayedColumns=["checkbox","sequence","module","subject","nb_of_session","duration","volume_of_hours_student","type_of_groups","groups","volume_of_hours","teacher","type_of_intervention","hourly_rate","type_of_contract","action"],this.filterColumns=["checkboxFilter","sequenceFilter","moduleFilter","subjectFilter","nb_of_sessionFilter","durationFilter","volume_of_hours_studentFilter","type_of_groupsFilter","groupsFilter","volume_of_hoursFilter","teacherFilter","type_of_interventionFilter","hourly_rateFilter","type_of_contractFilter","actionFilter"],this.isWaitingForResponse=!1,this.dataCount=0,this.disabledActions=!1,this.isCheckedAll=!1,this.dataSelected=[],this.pageSelected=[],this.allDataForCheckbox=[],this.selection=new ft.Ov(!0,[]),this.sortValue=null,this.filteredValue={sequence_id:null,module_id:null,subject_id:null,type_of_group:null,teacher_name:null,type_of_intervention:null,type_of_contract:null,scholar_season_id:null,schools_id:null,campuses_id:null,levels_id:null,program_id:null,legal_entity_id:null,subject:null,status:null},this.teacherFilter=new p.UntypedFormControl("",[]),this.sequenceFilter=new p.UntypedFormControl([],[]),this.moduleFilter=new p.UntypedFormControl([],[]),this.subjectFilter=new p.UntypedFormControl([],[]),this.typeOfGroupFilter=new p.UntypedFormControl([],[]),this.typeOfInterventionFilter=new p.UntypedFormControl([],[]),this.typeOfContractFilter=new p.UntypedFormControl([],[]),this.sequenceList=[],this.moduleList=[],this.subjectList=[],this.typeOfGroupList=[],this.typeOfInterventionList=[],this.typeOfContractList=[],this.legalEntities=[]}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.programId=this.route.snapshot.queryParamMap.get("programId"),this.programId&&(this.filteredValue.program_id=[this.programId]),this.getDropdownData(),this.initializeUserFilter(),this.subs.sink=this.translate.onLangChange.subscribe(()=>{this.setPageTitle()}),this.getEntityForAssignTeacher()}getAllSubjectData(){this.isWaitingForResponse=!0,this.subs.sink=this.teacherManagementService.getAllTeacherSubjectsAssignTable({limit:this.paginator.pageSize?this.paginator.pageSize:10,page:this.paginator.pageIndex?this.paginator.pageIndex:0},this.filteredValue,this.sortValue,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe({next:i=>{i&&i.length?(this.setPageTitle(),this.dataSource.data=h.cloneDeep(i),this.programData=h.cloneDeep(i&&i.length?i[0].program_id:null),this.dataCount=i&&i.length?i[0].count_document:0,this.isWaitingForResponse=!1):(this.isWaitingForResponse=!1,this.dataSource.data=[],this.paginator.length=0,this.dataCount=0),this.noData=this.dataSource.connect().pipe((0,nt.U)(a=>0===a.length))},error:i=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(i),s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}})}setPageTitle(){if(this.programData){const i=this.translate.instant("Title Assign Teacher",{school:this.programData.school_id.short_name,program:this.programData.program});this.pageTitleService.setTitle(i)}else this.subs.sink=this.teacherManagementService.getOneProgram(this.programId).subscribe({next:e=>{console.log("Title",e);const n=this.translate.instant("Title Assign Teacher",{school:e.program,program:e.school_id.short_name});this.pageTitleService.setTitle(n)},error:e=>{this.authService.postErrorLog(e)}})}getDropdownData(){let e;this.isWaitingForResponse=!0,this.programId&&(e={program_id:[this.programId]}),this.subs.sink=this.teacherManagementService.getAllTeacherSubjectsAssignTableDropdown(e,this.currentUser&&this.currentUser.app_data?this.currentUser.app_data.user_type_id:[]).subscribe({next:i=>{this.setDropDownData(i),this.isWaitingForResponse=!1},error:i=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(i),s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})}})}setDropDownData(e){e.forEach(n=>{n.program_sequence_id&&this.sequenceList.push(n.program_sequence_id),n.program_module_id&&this.moduleList.push(n.program_module_id),n.program_subject_id&&this.subjectList.push(n.program_subject_id),n.type_of_intervention_id&&(this.typeOfInterventionList.push(n.type_of_intervention_id.type_of_intervention),this.typeOfContractList.push(n.type_of_intervention_id.type_of_contract)),n.program_subject_id.program_sessions_id[0]&&n.program_subject_id.program_sessions_id[0].class_group&&this.typeOfGroupList.push(n.program_subject_id.program_sessions_id[0].class_group)}),this.sequenceList=h.uniqBy(this.sequenceList,"name"),this.moduleList=h.uniqBy(this.moduleList,"name"),this.subjectList=h.uniqBy(this.subjectList,"name"),this.typeOfInterventionList=h.uniqBy(this.typeOfInterventionList),this.typeOfContractList=h.uniqBy(this.typeOfContractList),this.typeOfGroupList=h.uniqBy(this.typeOfGroupList)}initializeUserFilter(){this.subs.sink=this.teacherFilter.valueChanges.pipe((0,kt.b)(400)).subscribe(e=>{this.selection.clear(),this.isCheckedAll=!1,this.subjectSelected=[],this.subjectSelectedId=[],e.match(/[()|{}\[\]:;<>?,\/]/)||e.match(/\\/)?(this.teacherFilter.setValue(""),this.filteredValue.teacher_name="",this.paginator.pageIndex=0,this.getAllSubjectData()):(this.filteredValue.teacher_name=e,this.paginator.pageIndex=0,this.getAllSubjectData())})}setSequenceFilter(e){const n=this.sequenceFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.sequenceFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.sequence_id=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.sequenceFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.sequenceFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.sequence_id=this.sequenceFilter.value,this.getAllSubjectData()}}setModulFilter(e){const n=this.moduleFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.moduleFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.module_id=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.moduleFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.moduleFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.module_id=this.moduleFilter.value,this.getAllSubjectData()}}setSubjectFilter(e){const n=this.subjectFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.subjectFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.subject_id=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.subjectFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.subjectFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.subject_id=this.subjectFilter.value,this.getAllSubjectData()}}setTypeGroupFilter(e){const n=this.typeOfGroupFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.typeOfGroupFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.type_of_group=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.typeOfGroupFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.typeOfGroupFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.type_of_group=this.typeOfGroupFilter.value,this.getAllSubjectData()}}setTypeInterventionFilter(e){const n=this.typeOfInterventionFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.typeOfInterventionFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.type_of_intervention=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.typeOfInterventionFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.typeOfInterventionFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.type_of_intervention=this.typeOfInterventionFilter.value,this.getAllSubjectData()}}setTypeContractFilter(e){const n=this.typeOfContractFilter.value;if(e&&"All"===e||n&&0===n.length)n&&n.length>0&&this.typeOfContractFilter.setValue(["All"]),this.clearSelectIfFilter(),this.filteredValue.type_of_contract=null,this.getAllSubjectData();else{const i=h.cloneDeep(this.typeOfContractFilter.value),a=[];i.filter(l=>{"All"!==l&&a.push(l)}),this.typeOfContractFilter.setValue(a),this.clearSelectIfFilter(),this.filteredValue.type_of_contract=this.typeOfContractFilter.value,this.getAllSubjectData()}}clearSelectIfFilter(){this.selection.clear(),this.isCheckedAll=!1,this.dataSelected=[],this.subjectSelected=[],this.subjectSelectedId=[],this.paginator.pageIndex=0,this.disabledActions=!1}sortData(e){this.sortValue=e.active?{[e.active]:e.direction?e.direction:null}:null,this.paginator.pageIndex=0,this.getAllSubjectData()}resetFilter(){this.programId=this.route.snapshot.queryParamMap.get("programId"),this.teacherFilter.setValue("",{emitEvent:!1}),this.sequenceFilter.setValue([]),this.moduleFilter.setValue([]),this.subjectFilter.setValue([]),this.typeOfGroupFilter.setValue([]),this.typeOfInterventionFilter.setValue([]),this.typeOfContractFilter.setValue([]),this.filteredValue={sequence_id:null,module_id:null,subject_id:null,type_of_group:null,teacher_name:null,type_of_intervention:null,type_of_contract:null,scholar_season_id:null,schools_id:null,campuses_id:null,levels_id:null,program_id:this.programId,legal_entity_id:null,subject:null,status:null},this.sort.sort({id:"",start:"asc",disableClear:!1}),this.sort.direction="",this.sort.active="",this.paginator.pageIndex=0,this.selection.clear(),this.isCheckedAll=!1,this.subjectSelected=[],this.subjectSelectedId=[],this.dataSelected=[],this.getAllSubjectData()}isAllSelected(){const e=this.selection.selected.length,n=this.dataSource.data.length;return e===n||e>n}masterToggle(){this.isAllSelected()?(this.selection.clear(),this.dataSelected=[],this.pageSelected=[],this.isCheckedAll=!1):(console.log("master else masuk"),this.selection.clear(),this.dataSelected=[],this.isCheckedAll=!0,this.allDataForCheckbox=[],this.getDataAllForCheckbox(0))}getDataAllForCheckbox(e){console.log("GetAllData Masuk");const n={limit:300,page:e};this.isWaitingForResponse=!0,this.subs.sink=this.teacherManagementService.getAllTeacherSubjectsAssignTable(n,this.filteredValue).subscribe(i=>{i&&i.length?(this.allDataForCheckbox.push(...i),this.getDataAllForCheckbox(e+1)):(this.isWaitingForResponse=!1,this.isCheckedAll?(this.allDataForCheckbox&&this.allDataForCheckbox.length&&(this.allDataForCheckbox.forEach(a=>{this.selection.select(a._id),this.dataSelected.push(a)}),this.disabledActions=!1),this.pageSelected.push(this.paginator.pageIndex)):this.pageSelected=[])},i=>{this.isWaitingForResponse=!1,this.authService.postErrorLog(i),s().fire({type:"info",title:this.translate.instant("SORRY"),text:i&&i.message?this.translate.instant(i.message.replaceAll("GraphQL error: ","")):i,confirmButtonText:this.translate.instant("OK")})})}showOptions(e,n){if(n){const l=this.dataSelected.filter(c=>c._id===n._id);if(l&&l.length<1)this.dataSelected.push(n);else{const c=this.dataSelected.findIndex(g=>g._id===n._id);this.dataSelected.splice(c,1)}}this.disabledActions=this.selection.selected.length>0,this.subjectSelected=[],this.subjectSelectedId=[],this.selectType=e,(this.dataSelected&&this.dataSelected.length?this.dataSelected:this.selection.selected).forEach(l=>{this.subjectSelected.push(l),this.subjectSelectedId.push(l._id)}),console.log(this.dataSelected),console.log(this.subjectSelected)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}getEntityForAssignTeacher(){let e;this.subs.sink=this.teacherManagementService.getOneProgram(this.programId).subscribe(n=>{e=h.cloneDeep(n),this.getAllIntakeChanels(e)},n=>{this.authService.postErrorLog(n)})}getAllIntakeChanels(e){const n={scholar_season_ids:e&&e.scholar_season_id?[e.scholar_season_id._id]:[],school:e&&e.school_id?[e.school_id.short_name]:[],campus:e&&e.campus?[e.campus.name]:[],level:e&&e.level?[e.level.name]:[],sectors:e&&e.sector_id?[e.sector_id.name]:[],speciality:e&&e.speciality_id?[e.speciality_id._id]:[]};console.log("PROGRAM",e.program),console.log("GETONEPROGRAM",`${e.school_id.short_name} ${e.campus.name} ${e.level.name} ${e.sector_id?e.sector_id.name:""} ${e.speciality_id?e.speciality_id.name:""}`);const i=`${e.school_id.short_name} ${e.campus.name} ${e.level.name} ${e.sector_id?e.sector_id.name:""} ${e.speciality_id?e.speciality_id.name:""}`;this.subs.sink=this.financeService.GetAllIntakeChannelsAssignTeacher(n).subscribe(a=>{a.forEach(l=>{console.log("GETALLINTAKECHANELS",`${l.school} ${l.campus} ${l.level} ${l.sector_id?l.sector_id.name:""} ${l.speciality_id?l.speciality_id.name:""}`),`${l.school} ${l.campus} ${l.level} ${l.sector_id?l.sector_id.name:""} ${l.speciality_id?l.speciality_id.name:""}`===i&&this.legalEntities.push(l)})},a=>{this.authService.postErrorLog(a)})}assignTeacher(e){this.subs.sink=this.dialog.open(cd,{panelClass:"certification-rule-pop-up",disableClose:!0,autoFocus:!1,width:"600px",data:{type:"assign_teacher",data:e,legalEntities:this.legalEntities}}).afterClosed().subscribe(n=>{n&&this.getAllSubjectData()})}deleteTeacherFromSubject(e){const n="neutral"!==e.teacher_id.civility?this.translate.instant(e.teacher_id.civility):"",i=e.teacher_id.first_name.charAt(0).toUpperCase()+e.teacher_id.first_name.slice(1),a=e.teacher_id.last_name.toUpperCase();s().fire({title:this.translate.instant("DELETE_ORGANIZATION.TITLE"),html:this.translate.instant("CONFIRMDELETE",{value:n+" "+i+" "+a}),type:"warning",allowEscapeKey:!0,showCancelButton:!0,confirmButtonText:this.translate.instant("DeleteAssignedTeacher_S1.BUTTON1"),cancelButtonText:this.translate.instant("No"),allowOutsideClick:!1,allowEnterKey:!1}).then(l=>{l.value&&(this.subs.sink=this.teacherManagementService.deleteTeacherFromSubject(e._id,e.teacher_id._id,e.number_of_group,e.type_of_intervention_id._id).subscribe({next:u=>{console.log(u),s().fire({type:"success",title:"Bravo!",confirmButtonText:"OK",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(()=>{this.getAllSubjectData()})},error:u=>{this.authService.postErrorLog(u),"GraphQL error: Cant remove teacher that already have contract process"===u.message?s().fire({title:this.translate.instant("DeleteAssignedTeacher_S2.TITLE"),html:this.translate.instant("DeleteAssignedTeacher_S2.TEXT",{civility:"neutral"!==e.teacher_id.civility?this.translate.instant(e.teacher_id.civility):"",firstName:e.teacher_id.first_name.charAt(0).toUpperCase()+e.teacher_id.first_name.slice(1),lastName:e.teacher_id.last_name.toUpperCase()}),type:"info",showConfirmButton:!0,confirmButtonText:this.translate.instant("DeleteAssignedTeacher_S2.BUTTON1")}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:u&&u.message?this.translate.instant(u.message.replaceAll("GraphQL error: ","")):u,confirmButtonText:this.translate.instant("OK")})}}))})}exportTeacherAssignTable(){if(this.selection.selected.length<1)s().fire({type:"info",title:this.translate.instant("Followup_S8.Title"),html:this.translate.instant("Followup_S8.Text",{menu:this.translate.instant("teacher")}),confirmButtonText:this.translate.instant("Followup_S8.Button")});else{const e={",":this.translate.instant("IMPORT_DECISION_S1.COMMA"),";":this.translate.instant("IMPORT_DECISION_S1.SEMICOLON"),tab:this.translate.instant("IMPORT_DECISION_S1.TAB")};s().fire({type:"question",title:this.translate.instant("IMPORT_DECISION_S1.TITLE"),width:465,allowEscapeKey:!0,showCancelButton:!0,cancelButtonText:this.translate.instant("IMPORT_DECISION_S1.CANCEL"),confirmButtonText:this.translate.instant("IMPORT_DECISION_S1.OK"),input:"radio",inputOptions:e,inputValue:this.translate&&"fr"===this.translate.currentLang?";":"",inputValidator:n=>new Promise((i,a)=>{n?(i(""),s().enableConfirmButton()):(s().disableConfirmButton(),a(this.translate.instant("IMPORT_DECISION_S1.INVALID")))}),onOpen:function(){s().disableConfirmButton(),s().getContent().addEventListener("click",function(a){s().enableConfirmButton()}),";"===s().getInput().getAttribute("value")&&s().enableConfirmButton()}}).then(n=>{n.value&&this.openDownloadCsv(n.value)})}}openDownloadCsv(e){let n=ot.N.apiUrl;n=n.replace("graphql","");const i=document.createElement("a"),a=this.translate.currentLang.toLowerCase(),l=this.cleanFilterDataDownload();let c;if(console.log("filter",l),this.dataSelected.length&&!this.isCheckedAll){const u='"teacher_subject_ids":['+this.dataSelected.map(y=>'"'+y._id+'"').toString()+"]";c=l.length>9?l.slice(0,8)+u+","+l.slice(8):l.slice(0,8)+u+l.slice(8)}else this.isCheckedAll&&(c=l);console.log("_fil",c);const g="exportAssignTeacherTable/";let m;m=c?n+g+e+"/"+a+"?"+c:n+g+e+"/"+a,console.log("fullURL",m),i.href=encodeURI(m),i.target="_blank",i.download="Teachers Export CSV",document.body.appendChild(i),i.click(),document.body.removeChild(i)}cleanFilterDataDownload(){const e=h.cloneDeep(this.filteredValue);let i,a,l,c,g,m,n="";return Object.keys(e).forEach(_=>{(e[_]||!1===e[_])&&("teacher_name"===_||"program_id"===_||"scholar_season_id"===_||"schools_id"===_||"campuses_id"===_||"levels_id"===_||"legal_entity_id"===_||"subject"===_||"status"===_?n=n?n+`,"${_}":"${e[_]}"`:n+`"${_}":"${e[_]}"`:"sequence_id"===_?(i=e.sequence_id.map(u=>'"'+u+'"'),n=n?n+`,"sequence_id":[${i}]`:n+`"sequence_id":[${i}]`):"module_id"===_?(a=e.module_id.map(u=>'"'+u+'"'),n=n?n+`,"module_id":[${a}]`:n+`"module_id":[${a}]`):"subject_id"===_?(l=e.subject_id.map(u=>'"'+u+'"'),n=n?n+`,"subject_id":[${l}]`:n+`"subject_id":[${l}]`):"type_of_group"===_?(c=e.type_of_group.map(u=>'"'+u+'"'),n=n?n+`,"type_of_group":[${c}]`:n+`"type_of_group":[${c}]`):"type_of_intervention"===_?(g=e.type_of_intervention.map(u=>'"'+u+'"'),n=n?n+`,"type_of_intervention":[${g}]`:n+`"type_of_intervention":[${g}]`):"type_of_contract"===_&&(m=e.type_of_contract.map(u=>'"'+u+'"'),n=n?n+`,"type_of_contract":[${m}]`:n+`"type_of_contract":[${m}]`))}),"filter={"+n+"}"}ngOnDestroy(){this.subs.unsubscribe()}ngAfterViewInit(){this.subs.sink=this.paginator.page.pipe((0,Z.O)(null),(0,ht.b)(()=>{this.getAllSubjectData()})).subscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(V.gz),t.\u0275\u0275directiveInject(f.uw),t.\u0275\u0275directiveInject(jt.D),t.\u0275\u0275directiveInject(mt.Z),t.\u0275\u0275directiveInject(dt.N),t.\u0275\u0275directiveInject(k.e))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-teacher-management-assign-table"]],viewQuery:function(e,n){if(1&e&&(t.\u0275\u0275viewQuery(et.NW,7),t.\u0275\u0275viewQuery(z.YE,7)),2&e){let i;t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.paginator=i.first),t.\u0275\u0275queryRefresh(i=t.\u0275\u0275loadQuery())&&(n.sort=i.first)}},decls:94,vars:28,consts:[[1,"top-space"],[1,"p-grid"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource","matSortChange"],["matColumnDef","buttons"],["mat-header-cell","","colspan","15","class","action-header-column text-right",4,"matHeaderCellDef"],["matColumnDef","checkboxFilter"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","sequenceFilter"],["matColumnDef","moduleFilter"],["matColumnDef","subjectFilter"],["matColumnDef","nb_of_sessionFilter"],["matColumnDef","durationFilter"],["matColumnDef","volume_of_hours_studentFilter"],["matColumnDef","type_of_groupsFilter"],["matColumnDef","groupsFilter"],["matColumnDef","volume_of_hoursFilter"],["matColumnDef","teacherFilter"],["matColumnDef","type_of_interventionFilter"],["matColumnDef","hourly_rateFilter"],["matColumnDef","type_of_contractFilter"],["matColumnDef","actionFilter"],["matColumnDef","checkbox"],["mat-header-cell","","matTooltip","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sequence"],["mat-header-cell","","mat-sort-header","sequence_name",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","module"],["mat-header-cell","","mat-sort-header","module_name",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","subject"],["mat-header-cell","","mat-sort-header","subject_name",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","nb_of_session"],["mat-header-cell","","mat-sort-header","number_of_session",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","duration"],["mat-header-cell","","mat-sort-header","duration",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","volume_of_hours_student"],["mat-header-cell","","mat-sort-header","volume_of_hours_student",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","type_of_groups"],["mat-header-cell","","mat-sort-header","type_of_group",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","groups"],["mat-header-cell","","mat-sort-header","groups",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","volume_of_hours"],["mat-header-cell","","mat-sort-header","volume_of_hours",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","teacher"],["mat-header-cell","","mat-sort-header","teacher_name",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","type_of_intervention"],["mat-header-cell","","mat-sort-header","type_of_intervention_name",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","hourly_rate"],["mat-header-cell","","mat-sort-header","hourly_rate",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","type_of_contract"],["mat-header-cell","","mat-sort-header","type_of_contract",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","",3,"matTooltip",4,"matHeaderCellDef"],["matColumnDef","loading"],["mat-header-cell","","colspan","15","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",3,"hidden",4,"matRowDef","matRowDefColumns"],["class","no-records",4,"ngIf"],[3,"ngClass"],["showFirstLastButtons","",3,"ngClass","length","hidePageSize","pageSize"],["mat-header-cell","","colspan","15",1,"action-header-column","text-right"],[1,"p-col-12","text-right"],["mat-raised-button","","color","primary",3,"matTooltip","click"],["svgIcon","file-excel",1,"mat-icon-svgIcon"],["svgIcon","loop",1,"mat-icon-svgIcon"],["mat-header-cell",""],["multiple","",3,"formControl","placeholder"],["value","All",1,"width-size",3,"click"],["class","width-size",3,"value","click",4,"ngFor","ngForOf"],[1,"width-size",3,"value","click"],["matInput","",1,"form-field",3,"formControl","placeholder"],["mat-header-cell","","matTooltip",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header","sequence_name",3,"matTooltip"],["mat-cell","",3,"matTooltip"],["mat-header-cell","","mat-sort-header","module_name",3,"matTooltip"],["mat-header-cell","","mat-sort-header","subject_name",3,"matTooltip"],["mat-header-cell","","mat-sort-header","number_of_session",3,"matTooltip"],["mat-header-cell","","mat-sort-header","duration",3,"matTooltip"],["mat-header-cell","","mat-sort-header","volume_of_hours_student",3,"matTooltip"],["mat-header-cell","","mat-sort-header","type_of_group",3,"matTooltip"],["mat-header-cell","","mat-sort-header","groups",3,"matTooltip"],["mat-header-cell","","mat-sort-header","volume_of_hours",3,"matTooltip"],["mat-header-cell","","mat-sort-header","teacher_name",3,"matTooltip"],["mat-header-cell","","mat-sort-header","type_of_intervention_name",3,"matTooltip"],["mat-header-cell","","mat-sort-header","hourly_rate",3,"matTooltip"],["mat-header-cell","","mat-sort-header","type_of_contract",3,"matTooltip"],["mat-header-cell","",3,"matTooltip"],["mat-icon-button","","class","margin-right-button","matTooltipPosition","above",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",1,"margin-right-button",3,"matTooltip","disabled","click"],[1,"material-symbols-outlined"],["mat-header-cell","","colspan","15",1,"text-center"],[1,"center-spinner"],["color","accent"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row","",3,"hidden"],[1,"no-records"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h4"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"table",2),t.\u0275\u0275listener("matSortChange",function(a){return n.sortData(a)}),t.\u0275\u0275elementContainerStart(5,3),t.\u0275\u0275template(6,dd,13,12,"th",4),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(7,5),t.\u0275\u0275template(8,pd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(9,7),t.\u0275\u0275template(10,hd,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(11,8),t.\u0275\u0275template(12,_d,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(13,9),t.\u0275\u0275template(14,fd,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(15,10),t.\u0275\u0275template(16,Cd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(17,11),t.\u0275\u0275template(18,bd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(19,12),t.\u0275\u0275template(20,xd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(21,13),t.\u0275\u0275template(22,Od,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(23,14),t.\u0275\u0275template(24,yd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(25,15),t.\u0275\u0275template(26,Sd,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(27,16),t.\u0275\u0275template(28,Pd,4,4,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(29,17),t.\u0275\u0275template(30,wd,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(31,18),t.\u0275\u0275template(32,Td,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(33,19),t.\u0275\u0275template(34,Id,8,8,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(35,20),t.\u0275\u0275template(36,Ed,1,0,"th",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(37,21),t.\u0275\u0275template(38,Dd,2,3,"th",22),t.\u0275\u0275template(39,Fd,2,2,"td",23),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(40,24),t.\u0275\u0275template(41,Ad,5,6,"th",25),t.\u0275\u0275template(42,Bd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(43,27),t.\u0275\u0275template(44,Nd,5,6,"th",28),t.\u0275\u0275template(45,Ld,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(46,29),t.\u0275\u0275template(47,Vd,5,6,"th",30),t.\u0275\u0275template(48,Rd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(49,31),t.\u0275\u0275template(50,Ud,5,6,"th",32),t.\u0275\u0275template(51,Hd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(52,33),t.\u0275\u0275template(53,Kd,5,6,"th",34),t.\u0275\u0275template(54,Wd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(55,35),t.\u0275\u0275template(56,jd,5,6,"th",36),t.\u0275\u0275template(57,$d,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(58,37),t.\u0275\u0275template(59,qd,5,6,"th",38),t.\u0275\u0275template(60,Gd,4,6,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(61,39),t.\u0275\u0275template(62,zd,5,6,"th",40),t.\u0275\u0275template(63,Yd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(64,41),t.\u0275\u0275template(65,Qd,5,6,"th",42),t.\u0275\u0275template(66,Xd,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(67,43),t.\u0275\u0275template(68,Jd,5,6,"th",44),t.\u0275\u0275template(69,Zd,6,14,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(70,45),t.\u0275\u0275template(71,tp,5,6,"th",46),t.\u0275\u0275template(72,ep,4,6,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(73,47),t.\u0275\u0275template(74,np,5,6,"th",48),t.\u0275\u0275template(75,ip,2,2,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(76,49),t.\u0275\u0275template(77,op,5,6,"th",50),t.\u0275\u0275template(78,ap,4,6,"td",26),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(79,51),t.\u0275\u0275template(80,lp,5,6,"th",52),t.\u0275\u0275template(81,cp,3,2,"td",23),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementContainerStart(82,53),t.\u0275\u0275template(83,dp,3,0,"th",54),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275template(84,pp,1,0,"tr",55),t.\u0275\u0275template(85,mp,1,0,"tr",55),t.\u0275\u0275template(86,hp,1,0,"tr",55),t.\u0275\u0275template(87,gp,1,1,"tr",56),t.\u0275\u0275template(88,_p,1,1,"tr",57),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(89,up,3,3,"div",58),t.\u0275\u0275pipe(90,"async"),t.\u0275\u0275elementStart(91,"div",59),t.\u0275\u0275pipe(92,"async"),t.\u0275\u0275element(93,"mat-paginator",60),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate5(" ",null==n.programData||null==n.programData.school_id?null:n.programData.school_id.short_name," ",null==n.programData||null==n.programData.campus?null:n.programData.campus.name," ",null==n.programData||null==n.programData.level?null:n.programData.level.name," ",null==n.programData||null==n.programData.sector_id?null:n.programData.sector_id.name," ",null==n.programData||null==n.programData.speciality_id?null:n.programData.speciality_id.name," "),t.\u0275\u0275advance(1),t.\u0275\u0275property("dataSource",n.dataSource),t.\u0275\u0275advance(80),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(21,fp)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",n.filterColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("matHeaderRowDef",t.\u0275\u0275pureFunction0(22,Cp)),t.\u0275\u0275advance(1),t.\u0275\u0275property("matRowDefColumns",n.displayedColumns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(90,17,n.noData)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(23,bp,t.\u0275\u0275pipeBind1(92,19,n.noData))),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(25,xp,n.dataCount<=10))("length",n.dataCount)("hidePageSize",!0)("pageSize",t.\u0275\u0275pureFunction0(27,vp)))},dependencies:[d.mk,d.sg,d.O5,R.ey,D.lW,_t.oG,B.Hw,T.KE,q.Nt,et.NW,L.Ou,Q.gD,z.YE,z.nU,S.BZ,S.fO,S.as,S.w1,S.Dz,S.nj,S.ge,S.ev,S.XQ,S.Gk,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlDirective,st.oO,d.Ov,d.gd,O.X$],styles:[".top-space[_ngcontent-%COMP%]{margin-top:30px}table[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{display:inline-table}table[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{display:table-cell;max-width:0}table[_ngcontent-%COMP%]   .mat-select-arrow-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) th{font-weight:400}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:first-child{height:40px}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-child(2){border-top:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table:not(.no-action-header):not(.notif-table) tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}[_nghost-%COMP%]     table.no-action-header th{font-weight:400}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-child(1){border-top:4px solid #607d8b;border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:not(:first-child){border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:nth-last-child(2){border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header thead>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr{border-left:4px solid #607d8b;border-right:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody>tr:last-child{border-bottom:4px solid #607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd){background-color:#607d8b}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(odd) .mat-icon-button{background:#353535;line-height:0!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even){background-color:#353535}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button .mat-icon{line-height:1!important}[_nghost-%COMP%]     table.no-action-header tbody tr:nth-child(even) .mat-icon-button{background:#607d8b;line-height:0!important}.horizontal[_ngcontent-%COMP%]{overflow:auto}.child-tab-font[_ngcontent-%COMP%]{font-size:.8rem}.center-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.hide[_ngcontent-%COMP%], .hidden[_ngcontent-%COMP%]{display:none!important}.header-div[_ngcontent-%COMP%]{border-bottom:1px solid black;display:flex;padding:1rem}.header-text[_ngcontent-%COMP%]{color:#000;margin-left:1rem;margin-bottom:0!important}.header-icon[_ngcontent-%COMP%]{align-self:center;margin-left:auto!important;background-color:transparent!important}.baseline-align[_ngcontent-%COMP%]{align-items:baseline}.admtc-table-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2.8em;font-size:1.2em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-table-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.5em;margin-right:.3em}.admtc-normal-button[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]{min-width:7em;height:2em;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif!important}.admtc-normal-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%]   .mat-icon[svgicon][_ngcontent-%COMP%]{margin-top:.3em;margin-right:.2em}.background-accent[_ngcontent-%COMP%], button.yellow-button-normal.mat-raised-button[_ngcontent-%COMP%], button.yellow-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#fdd835!important;color:#000000de}.background-warn[_ngcontent-%COMP%]{background-color:red!important;color:#fff}.background-success[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.background-primary[_ngcontent-%COMP%]{background-color:#607d8b!important;color:#fff}.background-medium-grey[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff}.background-black[_ngcontent-%COMP%]{background-color:#212121!important;color:#fff}button.blue-patina-button.mat-raised-button[_ngcontent-%COMP%]{background-color:#607d8b!important}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar .mat-slide-toggle-thumb{background-color:#fdd835}[_nghost-%COMP%]     .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#ffc10780}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-infix{padding:.15rem}[_nghost-%COMP%]     mat-form-field.mat-form-field-should-float label{font-size:18px;font-weight:600;color:#000}.status-icon[_ngcontent-%COMP%], .red-icon[_ngcontent-%COMP%], .purple-icon[_ngcontent-%COMP%], .black-icon[_ngcontent-%COMP%], .greenyellow-icon[_ngcontent-%COMP%], .yellow-icon[_ngcontent-%COMP%], .green-icon[_ngcontent-%COMP%]{font-size:25px;width:30px}.is-loading[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.display-flex[_ngcontent-%COMP%]{display:flex}.green-icon[_ngcontent-%COMP%]{color:#4caf50}.yellow-icon[_ngcontent-%COMP%]{color:#ff0}.greenyellow-icon[_ngcontent-%COMP%]{color:#adff2f}.black-icon[_ngcontent-%COMP%]{color:#000}.purple-icon[_ngcontent-%COMP%]{color:purple}.red-icon[_ngcontent-%COMP%], .red-text[_ngcontent-%COMP%]{color:red}.text-white[_ngcontent-%COMP%]{color:#fff}.greenyellow-text[_ngcontent-%COMP%]{color:#adff2f!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center}.tags[_ngcontent-%COMP%]{background-color:#fdd835;color:#000;padding:3px 5px;border-radius:3px;margin-right:5px}.p-grid[_ngcontent-%COMP%]{margin-right:unset!important;margin-left:unset!important;margin-top:unset!important}.add-btn[_ngcontent-%COMP%]{background:#fdd835;width:10rem}.color[_ngcontent-%COMP%]{background:#607d8b;width:10rem}.alignment[_ngcontent-%COMP%]{text-align:right;padding-right:0}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:50px;border:1px solid #b8b8b8;background:white;color:#000}.fontColor[_ngcontent-%COMP%]{color:#000}.yellow-border[_ngcontent-%COMP%]{border:2px solid #fdd835}.silver-border[_ngcontent-%COMP%]{border:2px solid whitesmoke}.red-border[_ngcontent-%COMP%]{border:2px solid red}.certification-rule-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0}.one-time-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:800px!important}.dark-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#303030}.grey-mode-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{color:#fff;background:#7c7c7c}.view-step-validation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{max-height:590px}.image-preview-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.231372549);box-shadow:none;padding:0;overflow:hidden}.pass-fail-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0 24px 18px}.expected-doc-task[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:16px!important;overflow:visible}.no-padding-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;overflow:visible}.questionnaire-simulation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:scroll;width:60vw;max-height:90vh;background-color:#607d8b;color:#fff}.reply-message-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px}.send-pro-evaluation-pop-up[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{padding:0;min-height:430px;visibility:hidden}.banner-connect-snackbar[_ngcontent-%COMP%]{padding:0!important;min-height:0!important;max-height:0!important}.editor-background-white[_ngcontent-%COMP%]{background-color:#fafafa;color:#000}.editor-background-white[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important}.small-text-fieldset[_ngcontent-%COMP%]{font-size:12px}.small-icon[_ngcontent-%COMP%]{transform:scale(.6)}.padding-0[_ngcontent-%COMP%]{padding:0!important}.mt-1rem[_ngcontent-%COMP%]{margin-top:1rem}.mr-1rem[_ngcontent-%COMP%]{margin-right:1rem}.mb-1rem[_ngcontent-%COMP%]{margin-bottom:1rem}.ellipsis-one-line[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.span-block[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:block;max-width:-webkit-fill-available;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dialog-title[_ngcontent-%COMP%]{color:#000}.icon-self-right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.dialog-body[_ngcontent-%COMP%]{color:#000}.no-padding[_ngcontent-%COMP%]{padding:0!important}.no-padding-x[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}.no-padding-y[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}.no-padding-r[_ngcontent-%COMP%]{padding-right:0!important}.no-padding-l[_ngcontent-%COMP%]{padding-left:0!important}.no-padding-t[_ngcontent-%COMP%]{padding-top:0!important}.no-padding-b[_ngcontent-%COMP%]{padding-bottom:0!important}.no-margin[_ngcontent-%COMP%]{margin:0}.align-center[_ngcontent-%COMP%]{text-align:center}.align-end[_ngcontent-%COMP%]{text-align:end}.one-line-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:#00000080;box-shadow:0 0 1px #ffffff80;-webkit-box-shadow:0 0 1px rgba(255,255,255,.5)}.ckeditor-small[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:140px!important;max-height:140px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-medium[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:300px!important;max-height:300px!important;border:1px solid rgba(0,0,0,.5)!important}.ckeditor-big[_ngcontent-%COMP%]   .ck-editor__editable[_ngcontent-%COMP%]{min-height:500px!important;max-height:500px!important}.ckeditor-white-background[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.custom-dialog-container-publishable-doc[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:unset;padding:15px}.align-input-field[_ngcontent-%COMP%]{margin-bottom:9px}.hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-first[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-previous[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-next[_ngcontent-%COMP%], .hide-pagination-buttons[_ngcontent-%COMP%]   .mat-paginator-navigation-last[_ngcontent-%COMP%]{display:none!important}.clickable[_ngcontent-%COMP%]{cursor:pointer}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.flex-layout-row-wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;box-sizing:border-box}#certifier[_ngcontent-%COMP%]{margin-left:20px}.pad-top-miss[_ngcontent-%COMP%]{padding-top:1.8px!important}.form-field[_ngcontent-%COMP%]{margin-top:.5px}.tag-container[_ngcontent-%COMP%]{white-space:normal;text-align:left!important;line-height:2.3;overflow-wrap:break-word}[_nghost-%COMP%]     table tr td, [_nghost-%COMP%]     table tr th{border-right:1px solid #545454;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(1), [_nghost-%COMP%]     table tr th:nth-child(1){padding-left:0rem!important;text-align:center!important;width:3%}[_nghost-%COMP%]     table tr td:nth-child(2), [_nghost-%COMP%]     table tr th:nth-child(2){text-align:center!important;width:8%}[_nghost-%COMP%]     table tr td:nth-child(2) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(2) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(3), [_nghost-%COMP%]     table tr th:nth-child(3){text-align:center!important;width:8%}[_nghost-%COMP%]     table tr td:nth-child(3) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(3) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(4), [_nghost-%COMP%]     table tr th:nth-child(4){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(4) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(4) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(5), [_nghost-%COMP%]     table tr th:nth-child(5){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(6), [_nghost-%COMP%]     table tr th:nth-child(6){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(7), [_nghost-%COMP%]     table tr th:nth-child(7){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(8), [_nghost-%COMP%]     table tr th:nth-child(8){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(8) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(8) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(9), [_nghost-%COMP%]     table tr th:nth-child(9){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(10), [_nghost-%COMP%]     table tr th:nth-child(10){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(11), [_nghost-%COMP%]     table tr th:nth-child(11){text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(11) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(11) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(12), [_nghost-%COMP%]     table tr th:nth-child(12){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(12) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(12) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(13), [_nghost-%COMP%]     table tr th:nth-child(13){text-align:center!important;width:6%}[_nghost-%COMP%]     table tr td:nth-child(14), [_nghost-%COMP%]     table tr th:nth-child(14){width:6%;text-align:center!important}[_nghost-%COMP%]     table tr td:nth-child(14) mat-form-field, [_nghost-%COMP%]     table tr th:nth-child(14) mat-form-field{width:90%}[_nghost-%COMP%]     table tr td:nth-child(15), [_nghost-%COMP%]     table tr th:nth-child(15){width:8%;text-align:center!important}[_nghost-%COMP%]     table tr td{overflow:hidden;text-overflow:ellipsis;max-width:0;white-space:nowrap;padding-top:.5em;padding-bottom:.5em}[_nghost-%COMP%]     table tr td p{margin-bottom:0}[_nghost-%COMP%]     table tr td.mat-cell:last-of-type, [_nghost-%COMP%]     table tr td.mat-footer-cell:last-of-type, [_nghost-%COMP%]     table tr th.mat-header-cell:last-of-type{padding-right:0!important}[_nghost-%COMP%]     table tr th{vertical-align:top}[_nghost-%COMP%]     table tr th .mat-form-field-infix{width:unset!important}[_nghost-%COMP%]     table tr:nth-child(2) th{padding-top:.9em}[_nghost-%COMP%]     table thead tr:nth-child(2){height:35px}[_nghost-%COMP%]     table thead tr:nth-child(2), [_nghost-%COMP%]     table thead tr:nth-child(3){background:#212121}[_nghost-%COMP%]     table thead tr:nth-child(2) th, [_nghost-%COMP%]     table thead tr:nth-child(3) th{color:#fff}.action-header-column[_ngcontent-%COMP%]{vertical-align:middle!important;padding-right:0!important}.action-header-column[_ngcontent-%COMP%]   .p-grid[_ngcontent-%COMP%]{margin-top:unset!important}.left-margin[_ngcontent-%COMP%]{margin-left:3%}[_nghost-%COMP%]     .swal2-checkbox label, .swal2-radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1em!important}.school-backdrop[_ngcontent-%COMP%] + .cdk-overlay-pane[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{overflow:visible}.mat-column-select[_ngcontent-%COMP%]{overflow:initial}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.pc-section[_ngcontent-%COMP%]{width:50%;text-align:right;padding-right:5px;display:inline-block}.cr-section[_ngcontent-%COMP%]{width:50%;text-align:left;display:inline-block}.no-records[_ngcontent-%COMP%]{background-color:#424242;font-size:14px;padding:10px 12px;border-right:1px solid #545454;border-bottom:1px solid #545454}"]}),o})();var yp=b(44850);function Sp(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const i=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(i.schoolDetail())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&o&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"Add school")))}const yt=function(){return{first:!1,second:!0}},$t=function(){return{second:!1,third:!0}};function Pp(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"mat-card",16)(2,"mat-card-content",17),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.schoolDetail(a._id))}),t.\u0275\u0275elementStart(3,"h5",18)(4,"b",19),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"slice"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",20)(8,"div",21),t.\u0275\u0275element(9,"mat-divider"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",22),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd()()()()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass.md",t.\u0275\u0275pureFunction0(12,yt))("ngClass.sm",t.\u0275\u0275pureFunction0(13,yt))("ngClass.xs",t.\u0275\u0275pureFunction0(14,$t)),t.\u0275\u0275advance(2),t.\u0275\u0275styleProp("font-size",n.getFontSize(e.short_name),"px"),t.\u0275\u0275propertyInterpolate("matTooltip",e.short_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind3(6,8,e.short_name,0,11)," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",e.long_name," ")}}function Mp(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275template(1,Pp,12,15,"div",12),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.listSchoolCards)}}function wp(o,r){if(1&o){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"mat-card",16)(2,"mat-card-content",17),t.\u0275\u0275listener("click",function(){const a=t.\u0275\u0275restoreView(e).$implicit,l=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(l.schoolDetail(a._id))}),t.\u0275\u0275elementStart(3,"h5",18)(4,"b",19),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"slice"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",20)(8,"div",21),t.\u0275\u0275element(9,"mat-divider"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",22),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd()()()()()}if(2&o){const e=r.$implicit,n=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275property("ngClass.md",t.\u0275\u0275pureFunction0(12,yt))("ngClass.sm",t.\u0275\u0275pureFunction0(13,yt))("ngClass.xs",t.\u0275\u0275pureFunction0(14,$t)),t.\u0275\u0275advance(2),t.\u0275\u0275styleProp("font-size",n.getFontSize(e.short_name),"px"),t.\u0275\u0275propertyInterpolate("matTooltip",e.short_name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind3(6,8,e.short_name,0,11)," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",e.long_name," ")}}function Tp(o,r){if(1&o&&(t.\u0275\u0275elementStart(0,"div",15),t.\u0275\u0275template(1,wp,12,15,"div",12),t.\u0275\u0275elementEnd()),2&o){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e.listSchoolCards)}}function kp(o,r){if(1&o&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"mat-tab",10),t.\u0275\u0275pipe(2,"uppercase"),t.\u0275\u0275template(3,Tp,2,1,"ng-template",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()),2&o){const e=r.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,1,null==e?null:e.short_name))}}function Ip(o,r){1&o&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275element(1,"mat-progress-spinner",24),t.\u0275\u0275elementEnd())}const Ep=[{path:"",component:(()=>{class o{constructor(e,n,i,a,l,c,g,m){this.intakeService=e,this.utilService=n,this.translate=i,this.authService=a,this.router=l,this.permission=c,this.filterBreadCrumbService=g,this.pageTitleService=m,this.searchForm=new p.UntypedFormControl(""),this.subs=new F.Y,this.listSchoolCards=[],this.listBlackSchool=[],this.isWaitingForResponse=!1,this.tabIndex=0,this.fromBlackCard=!1,this.filteredValue={search:""},this.filterBreadcrumbData=[]}ngOnInit(){this.currentUser=this.authService.getLocalStorageUser(),this.isPermission=this.authService.getPermission();const e=this.currentUser?.entities?.find(n=>n?.type?.name===this.isPermission[0]);this.currentUserTypeId=e?.type?._id,this.getAllSchools(),this.initForm(),this.pageTitleService.setTitle("INTAKE_CHANNEL.PAGE_TITLE.Schools")}getAllSchools(){this.isWaitingForResponse=!0,this.subs.sink=this.intakeService.GetAllSchools(this.currentUserTypeId).subscribe(e=>{this.listSchoolCards=[],this.listBlackSchool=[],this.isWaitingForResponse=!1,e&&e.length&&(e.forEach((n,i)=>{n.short_name&&(e[i].short_name=n.short_name.toLowerCase())}),this.listSchoolCards=h.cloneDeep(e),this.listBlackSchool=h.cloneDeep(e)),this.filterBreadcrumbData=[],this.filterBreadcrumbFormat()},e=>{this.isWaitingForResponse=!1,this.listSchoolCards=[],this.listBlackSchool=[],this.authService.postErrorLog(e),e&&e.message&&e.message.includes("Network error: Http failure response for")?s().fire({type:"warning",title:this.translate.instant("BAD_CONNECTION.Title"),html:this.translate.instant("BAD_CONNECTION.Text"),confirmButtonText:this.translate.instant("BAD_CONNECTION.Button"),allowOutsideClick:!1,allowEnterKey:!1,allowEscapeKey:!1}):s().fire({type:"info",title:this.translate.instant("SORRY"),text:e&&e.message?this.translate.instant(e.message.replaceAll("GraphQL error: ","")):e,confirmButtonText:this.translate.instant("DISCONNECT_SCHOOL.BUTTON3")})})}initForm(){this.subs.sink=this.searchForm.valueChanges.pipe((0,Z.O)("")).subscribe(e=>{this.filteredValue.search=e,setTimeout(()=>{this.fromBlackCard&&(this.tabIndex=0),this.listSchoolCards=this.listBlackSchool.filter(n=>!!n.short_name&&-1!==this.utilService.simpleDiacriticSensitiveRegex(n.short_name).toLowerCase().indexOf(this.utilService.simpleDiacriticSensitiveRegex(e).toLowerCase().trim())),this.filterBreadcrumbData=[],this.filterBreadcrumbFormat()},500)})}ngOnDestroy(){this.subs.unsubscribe(),this.pageTitleService.setTitle(null)}schoolDetail(e){const n="/schools/school-detail";if(e){const i=this.router.createUrlTree([n+"/"+e]);window.open(i.toString(),"_blank")}else{const i=this.router.createUrlTree([n]);window.open(i.toString(),"_blank")}}getFontSize(e){return 26}filterBlackCard(e){"all"===e||""===e||"All"===e||"Tous"===e?(this.listSchoolCards=this.listBlackSchool,this.fromBlackCard=!1):(this.listSchoolCards=this.listBlackSchool.filter(n=>n.short_name.toLowerCase()===e.toLowerCase()),this.fromBlackCard=!0),this.fromBlackCard&&this.searchForm.patchValue("",{emitEvent:!1}),console.log("schoolSelected",e,this.listSchoolCards,this.listBlackSchool)}filterBreadcrumbFormat(){this.filterBreadcrumbData=this.filterBreadCrumbService.filterBreadcrumbFormat([{type:"super_filter",name:"search",column:"Search by name",isMultiple:!1,filterValue:this.filteredValue,filterList:null,filterRef:this.searchForm,isSelectionInput:!1,displayKey:null,savedValue:null}],this.filterBreadcrumbData)}removeFilterBreadcrumb(e){this.filterBreadCrumbService.removeFilterBreadcrumb(e,this.filteredValue),this.searchForm.setValue("")}resetSearch(){this.tabIndex=0,this.filteredValue.search="",this.filterBreadcrumbData=[],this.searchForm.patchValue(""),this.listSchoolCards=this.listBlackSchool}}return o.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(I.p),t.\u0275\u0275directiveInject(K.t),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(k.e),t.\u0275\u0275directiveInject(V.F0),t.\u0275\u0275directiveInject(J.$),t.\u0275\u0275directiveInject(Ct.q),t.\u0275\u0275directiveInject(mt.Z))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["ms-school"]],decls:21,vars:18,consts:[[3,"filterBreadcrumbData","removeFilterTrigger"],[1,"p-grid","p-justify-end","search-title-row"],[1,"p-col","content-end"],[1,"search-field"],[1,"full-width"],["matInput","",3,"placeholder","formControl"],[1,"search-btn"],["mat-raised-button","","color","primary",3,"matTooltip","click"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["animationDuration","500ms",3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label"],["matTabContent",""],[4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"center-card","mrgn-btn50","mrgn-t1","flex-layout-row-wrap"],[1,"rncp-title-tile","card-dashboard"],["ngClass","first content-dashboard",3,"ngClass.md","ngClass.sm","ngClass.xs","click"],[1,"little-title","only-2-line",2,"-webkit-box-orient","vertical !important"],["matTooltipPosition","above",1,"test",3,"matTooltip"],[1,"detail-content"],[1,"divider-line-container"],["matTooltip","",1,"season",2,"-webkit-box-orient","vertical !important","display","-webkit-box !important","overflow","hidden","height","auto !important"],[1,"loading-indicator"],["mode","indeterminate","color","accent"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"ms-filter-breadcrumb",0),t.\u0275\u0275listener("removeFilterTrigger",function(a){return n.removeFilterBreadcrumb(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4),t.\u0275\u0275element(5,"input",5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",6)(8,"button",7),t.\u0275\u0275listener("click",function(){return n.resetSearch()}),t.\u0275\u0275pipe(9,"translate"),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"div",6),t.\u0275\u0275template(13,Sp,3,3,"button",8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(14,"div")(15,"mat-tab-group",9),t.\u0275\u0275listener("selectedIndexChange",function(a){return n.tabIndex=a})("selectedTabChange",function(a){return n.filterBlackCard(a.tab.textLabel)}),t.\u0275\u0275elementStart(16,"mat-tab",10),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275template(18,Mp,2,1,"ng-template",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(19,kp,4,3,"ng-container",12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(20,Ip,2,0,"div",13)),2&e&&(t.\u0275\u0275property("filterBreadcrumbData",n.filterBreadcrumbData),t.\u0275\u0275advance(5),t.\u0275\u0275propertyInterpolate("placeholder",t.\u0275\u0275pipeBind1(6,10,"Search by name")),t.\u0275\u0275property("formControl",n.searchForm),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("matTooltip",t.\u0275\u0275pipeBind1(9,12,"Reset Filter")),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,14,"Reset")," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",n.permission.addSchoolInIntakeChanelSchool()),t.\u0275\u0275advance(2),t.\u0275\u0275property("selectedIndex",n.tabIndex),t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(17,16,"All")),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n.listBlackSchool),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",n.isWaitingForResponse))},dependencies:[d.mk,d.sg,d.O5,D.lW,It.a8,It.dn,yp.d,T.KE,q.Nt,L.Ou,v.SP,v.uX,v.Vc,it.gM,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlDirective,st.oO,bt.r,d.gd,d.OU,O.X$],styles:["[_nghost-%COMP%]     h5{font-size:23px}[_nghost-%COMP%]     p{height:37px;overflow:hidden}[_nghost-%COMP%]     .mat-card{text-align:center;display:block;margin:7px;padding:5.5px;color:#fff;overflow:hidden;word-wrap:break-word}[_nghost-%COMP%]     .mat-card h5{height:30%;text-transform:uppercase}[_nghost-%COMP%]     .mat-button-toggle-label-content{line-height:28px!important}.content[_ngcontent-%COMP%]{display:contents!important}.container[_ngcontent-%COMP%]{border:1px solid #607d8b!important;margin-top:1em;margin-bottom:1em;background-color:#fff;width:100%;box-sizing:border-box;display:flex;overflow-x:scroll}.container[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px;width:4px;border:1px solid #d5d5d5}.container[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:0;background:#212121}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:50px;background:rgba(96,125,139,.4117647059)}.add-rncp-button[_ngcontent-%COMP%]{float:right}.search-title-row[_ngcontent-%COMP%]{margin-top:1em;margin-left:10px;text-align:left}.search-field[_ngcontent-%COMP%]{display:inline-block;width:15rem;margin-right:8px}.search-btn[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .mat-tab-label{min-width:90px!important;background-color:#000!important;font-size:15px;opacity:1!important;color:#fff!important;font-weight:900!important}[_nghost-%COMP%]     .mat-tab-list .mat-tab-labels .mat-tab-label-active{border:1px solid #607d8b!important;background-color:#607d8b!important;color:#ffe77a!important}[_nghost-%COMP%]     .mat-ink-bar{background-color:unset!important}.content-end[_ngcontent-%COMP%]{text-align:end}.rncp-title-tile[_ngcontent-%COMP%]{background-color:#607d8b!important;border-radius:0!important}.rncp-title-tile[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#d28104!important;box-shadow:0 0 10px #a0a0a0!important}.rncp-title-tile-not-published[_ngcontent-%COMP%]{background-color:#9d3730!important;border-radius:0}.rncp-title-tile-not-published[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#d28104!important;box-shadow:0 0 10px #a0a0a0!important}.first[_ngcontent-%COMP%]{height:190px;width:223px}.test[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.second[_ngcontent-%COMP%]{height:200px;width:202px;font-size:20px}.third[_ngcontent-%COMP%]{height:160px;width:160px;font-size:14px}.rncp-menu-btn[_ngcontent-%COMP%]{background-color:#212121;border:none!important}.rncp-menu-btn-selected[_ngcontent-%COMP%]{background-color:#607d8b;border:none!important}.center-card[_ngcontent-%COMP%]{justify-content:center}.divider-line-container[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{border-color:#fff!important;width:90%;margin-left:1rem}.title-long-name[_ngcontent-%COMP%]{font-size:14px;height:25%!important;max-height:25%;margin-top:1rem}.card-dashboard[_ngcontent-%COMP%]{padding:0!important}.mrgn-t1[_ngcontent-%COMP%]{margin-top:1rem}.content-dashboard[_ngcontent-%COMP%]{padding:1rem 0px 0px;margin-bottom:0;position:relative}.detail-title[_ngcontent-%COMP%]{height:auto!important;margin-top:2px;word-break:break-word;overflow:visible;margin-bottom:10px}.icon-status[_ngcontent-%COMP%]{font-size:14px!important}.little-title[_ngcontent-%COMP%]{padding:0;height:auto!important;margin-bottom:0;width:100%;overflow:hidden;text-align:center}.font-26[_ngcontent-%COMP%]{font-size:26px}.font-16[_ngcontent-%COMP%]{font-size:16px}.mrgn-t10[_ngcontent-%COMP%]{margin-top:10px}.detail-content[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;padding:0rem 1rem}.detail-content[_ngcontent-%COMP%]   .date-season[_ngcontent-%COMP%]{text-align:start;padding-top:5px;font-size:16px}.detail-content[_ngcontent-%COMP%]   .season[_ngcontent-%COMP%]{padding-top:5px;font-size:16px;position:relative;min-height:48px}.only-2-line[_ngcontent-%COMP%]{display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important}.mrgn-btn50[_ngcontent-%COMP%]{margin-bottom:50px}.certifier-logo-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;left:0;padding-bottom:5px}.logo-white-bg[_ngcontent-%COMP%]{background-color:#fff;width:150px;height:50px;border-radius:5px}.certifier-logo[_ngcontent-%COMP%]{height:50px!important}"]}),o})(),canActivate:[$.n],data:{permission:"intake_channel.school.show_perm"}},{path:"school-detail",canActivate:[$.n],data:{permission:"intake_channel.school.show_perm"},children:[{path:"",component:Wt},{path:":id",component:Wt}]},{path:"teachers",children:[{path:"assign-teachers",component:Op}]},{path:"**",redirectTo:"",pathMatch:"full"}];let Dp=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[V.Bz.forChild(Ep),V.Bz]}),o})();var Fp=b(93730),Ap=b(37204);let Bp=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[d.ez,Dp,Fp.m,Y.A0,Ap.d,pt.ii.forRoot()]}),o})()},12334:(St,rt,b)=>{b.d(rt,{T:()=>f});var d=b(24850),V=b(591),$=b(13125),F=b(68745),x=b(94650),s=b(18497),h=b(84075),p=b(89383);let f=(()=>{class t{constructor(I,k,R){this.apollo=I,this.utilService=k,this.translate=R,this.subs=new F.Y,this.isAllCountryAlreadyPopulated=new V.X(!1),this.isAllCountryAlreadyPopulated$=this.isAllCountryAlreadyPopulated.asObservable()}getAllCountriesNationality(){let I=[];return this.isAllCountryAlreadyPopulated.next(!1),this.subs.sink=this.getAllCountries().subscribe(k=>{k?.length&&(k?.map(R=>{I.push({name:R?.country_id?.country,flagIcon:R?.nationality_id?.nationality_en,dialCode:R?.country_id?.phone_number_indicative})}),I.sort((R,D)=>this.utilService.simplifyRegex(this.translate.instant(R?.name))<this.utilService.simplifyRegex(this.translate.instant(D?.name))?-1:this.utilService.simplifyRegex(this.translate.instant(R?.name))>this.utilService.simplifyRegex(this.translate.instant(D?.name))?1:0),this.isAllCountryAlreadyPopulated.next(!0))}),I}getAllCountries(){return this.apollo.query({query:$.ZP`
          query GetAllVisaPermits {
            GetAllVisaPermits {
              country_id {
                country
                phone_number_indicative
              }
              nationality_id {
                nationality_en
              }
            }
          }
        `,fetchPolicy:"network-only"}).pipe((0,d.U)(I=>I.data.GetAllVisaPermits))}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(I){return new(I||t)(x.\u0275\u0275inject(s._M),x.\u0275\u0275inject(h.t),x.\u0275\u0275inject(p.sK))},t.\u0275prov=x.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);