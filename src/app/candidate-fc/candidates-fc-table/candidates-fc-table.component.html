<ms-filter-breadcrumb
  [filterBreadcrumbData]="filterBreadcrumbData"
  (removeFilterTrigger)="removeFilterBreadcrumb($event)"
></ms-filter-breadcrumb>

<div class="p-grid" style="position: relative">
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <div class="p-col-12 no-padding filter-input">
      <label class="float-label" *ngIf="scholarFilter?.value && scholarFilter?.value?.length !== 0">
        {{ 'CARDDETAIL.Scholar Season' | translate }}
      </label>
      <ng-select
        [items]="scholars"
        bindValue="_id"
        bindLabel="scholar_season"
        class="custom-dropdownpanel"
        [appendTo]="'body'"
        [formControl]="scholarFilter"
        [multiple]="false"
        notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
        placeholder="{{ 'CARDDETAIL.Scholar Season' | translate }}"
        [clearable]="false"
        [closeOnSelect]="false"
        (close)="scholarSelect()"
      >
        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
          <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" />
          {{ item.scholar_season }}
        </ng-template>
      </ng-select>
    </div>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="schoolsFilter?.value && schoolsFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.School' | translate }}
    </label>
    <ng-select
      [items]="school"
      bindValue="_id"
      bindLabel="short_name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.School' | translate }}"
      [formControl]="schoolsFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectSchoolFilter()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.short_name | translate }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="school?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('school')"
          [indeterminate]="isSomeDropdownSelected('school')"
          (change)="selectAllData($event, 'school')"
        >
          {{ 'AllM' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="campusFilter?.value && campusFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Campus' | translate }}
    </label>
    <ng-select
      [items]="campusList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Campus' | translate }}"
      [formControl]="campusFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectCampusFilter()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="campusList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('campus')"
          [indeterminate]="isSomeDropdownSelected('campus')"
          (change)="selectAllData($event, 'campus')"
        >
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="levelFilter?.value && levelFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Level' | translate }}
    </label>
    <ng-select
      [items]="levels"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Level' | translate }}"
      [formControl]="levelFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectLevelFilter()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="levels?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('level')"
          [indeterminate]="isSomeDropdownSelected('level')"
          (change)="selectAllData($event, 'level')"
        >
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="sectorFilter?.value && sectorFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Sector' | translate }}
    </label>
    <ng-select
      [items]="sectorList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Sector' | translate }}"
      [formControl]="sectorFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectSectorFilter()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="sectorList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('sector')"
          [indeterminate]="isSomeDropdownSelected('sector')"
          (change)="selectAllData($event, 'sector')"
        >
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="specialityFilter?.value && specialityFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Speciality' | translate }}
    </label>
    <ng-select
      [items]="specialityList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Speciality' | translate }}"
      [formControl]="specialityFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectSpecialityFilter()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="specialityList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('speciality')"
          [indeterminate]="isSomeDropdownSelected('speciality')"
          (change)="selectAllData($event, 'speciality')"
        >
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding super-filter">
    <label class="float-label" *ngIf="tagFilter?.value && tagFilter?.value?.length !== 0">
      {{ 'All_Students.Tag' | translate }}
    </label>
    <ng-select
      [items]="tags"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'All_Students.Tag' | translate }}"
      [formControl]="tagFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkSuperFilterTags()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="tags?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('tags')"
          [indeterminate]="isSomeDropdownSelected('tags')"
          (change)="selectAllData($event, 'tags')"
        >
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="float: left; padding-right: 15px !important; margin-top: 13px">
    <button mat-button mat-raised-button color="accent" [disabled]="isDisabled || isLoading" (click)="applySuperFilter()">
      {{ 'Apply Filter' | translate }}
    </button>
  </div>
</div>
<div style="margin-top: 15px">
  <div class="horizontal header-button header-action">
    <div class="text-right" style="display: inline-block; float: right">
      <button
        matTooltip="{{ 'Action' | translate }} "
        style="padding: 0px 7px !important"
        mat-raised-button
        color="accent"
        [disabled]="isLoading"
        [matMenuTriggerFor]="action"
        *ngIf="showActionButton()"
      >
        {{ 'Action' | translate }}
        <mat-icon>expand_more</mat-icon>
      </button>
      <mat-menu #action="matMenu">
        <button
          mat-menu-item
          (click)="buttonClicked = 'crm'; controllerButton('crm')"
          matTooltip="{{ 'CRM OK' | translate }}"
          class="border-button"
          *ngIf="permissionService.crmOkFollowUpContinuous()"
        >
          {{ 'CRM OK' | translate }}
        </button>
        <button
          mat-menu-item
          (click)="buttonClicked = 'regis'; controllerButton('regis')"
          matTooltip="{{ 'Assign Registration Profile' | translate }}"
          class="border-button"
          *ngIf="permissionService.assignRegistrationProfileMultipleFollowUpContinuous()"
        >
          <!-- <mat-icon svgIcon="clipboard-account-outline" class="mat-icon-svgIcon icon-svgIcon-menu mr-left"> </mat-icon> -->
          {{ 'Assign Registration Profile' | translate }}
        </button>

        <button
          mat-menu-item
          *ngIf="showMultipleCall && permissionService.firstCallDoneMultipleFollowUpContinuous()"
          (click)="buttonClicked = 'call'; controllerButton('call')"
          matTooltip="{{ '1st Call done' | translate }}"
          class="border-button"
        >
          {{ '1st Call done' | translate }}
        </button>

        <button
          mat-menu-item
          (click)="buttonClicked = 'announcment'; controllerButton('announcment')"
          matTooltip="{{ '1st Email of Announcement' | translate }}"
          class="border-button"
          *ngIf="permissionService.firstEmailMultipleFollowUpContinuous()"
        >
          <!-- <mat-icon class="mat-icon-status icon-menu"> mark_email_read </mat-icon> -->
          {{ '1st Email of Announcement' | translate }}
        </button>

        <button
          mat-menu-item
          matTooltip="{{ 'Transfer to another member' | translate }}"
          (click)="buttonClicked = 'member'; controllerButton('member')"
          class="border-button"
          *ngIf="permissionService.transferToAnotherMemberMultipleFollowUpContinuous()"
        >
          <!-- <mat-icon svgIcon="account-switch" class="mat-icon-svgIcon icon-svgIcon-menu"> </mat-icon> -->
          {{ 'Transfer to another member' | translate }}
        </button>

        <button
          mat-menu-item
          matTooltip="{{ 'Send email' | translate }} "
          (click)="buttonClicked = 'email'; controllerButton('email')"
          *ngIf="permissionService.sendEmailMultipleFollowUpContinuous()"
        >
          <!-- <mat-icon svgIcon="email" class="mat-icon-svgIcon icon-svgIcon-menu"></mat-icon> -->
          {{ 'Send email' | translate }}
        </button>
      </mat-menu>
      <button
        [disabled]="isLoading"
        [matTooltipDisabled]="false"
        mat-raised-button
        color="primary"
        (click)="buttonClicked = 'export'; controllerButton('export')"
        matTooltip="{{ 'Export the entire table of candidates' | translate }}"
        *ngIf="permissionService.exportFollowUpContinuous()"
        class="button-above"
      >
        <mat-icon svgIcon="file-excel" class="mat-icon-svgIcon"> </mat-icon>
        {{ 'Export' | translate }}
      </button>
      <button
        [matTooltipDisabled]="false"
        [disabled]="isLoading"
        (click)="resetCandidate()"
        color="primary"
        mat-raised-button
        matTooltip="{{ 'Reset Filter' | translate }} "
        *ngIf="permissionService.resetFollowUpContinuous()"
        class="button-above"
      >
        <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
        {{ 'Reset' | translate }}
      </button>
    </div>
    <div class="text-right text-count">
      <span style="font-family: 'firaSans' !important" *ngIf="dataSelected?.length || (isCheckedAll && dataCount)"
        >{{ 'Selected Data' | translate }} : {{ isCheckedAll ? dataCount - dataUnselectUser?.length : dataSelected?.length }}</span
      >
    </div>
  </div>

  <div class="horizontal mat-elevation-z8 finance-table" style="font-family: 'firaSans' !important">
    <table #matTable mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="mat-elevation-z8">
      <!---FILTERS START-->
      <ng-container matColumnDef="selectFilter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>
      <ng-container matColumnDef="typeFormationFilter" sticky>
        <th mat-header-cell *matHeaderCellDef>
          <!-- <mat-form-field floatLabel="auto">
            <mat-select
              [formControl]="sigleFilter"
              [matTooltip]="sigleFilter.value"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record" *ngFor="let record of listSigle" (click)="selectSigle(record)">{{ record }} </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="listSigle"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="selectSigle()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="sigleFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="listSigle?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('sigle')"
                [indeterminate]="isSomeDropdownSelected('sigle')"
                (change)="selectAllData($event, 'sigle')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="studentNumberFilter" sticky>
        <th mat-header-cell *matHeaderCellDef>
          <mat-form-field>
            <input
              matInput
              class="form-field"
              [formControl]="studentNumberFilter"
              [readonly]="isLoading ? true : false"
              placeholder="{{ 'search' | translate }}"
            />
          </mat-form-field>
        </th>
      </ng-container>
      <ng-container matColumnDef="lastNameFilter" sticky>
        <th mat-header-cell *matHeaderCellDef>
          <mat-form-field>
            <input
              matInput
              class="form-field"
              [readonly]="isLoading ? true : false"
              [formControl]="lastNameFilter"
              placeholder="{{ 'search' | translate }}"
            />
          </mat-form-field>
        </th>
      </ng-container>
      <ng-container matColumnDef="nationalityFilter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="nationalityFilter"
              [matTooltip]="nationalityFilter.value | translate"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="'AllF'">{{ 'AllF' | translate }} </mat-option>
              <mat-option [value]="record" *ngFor="let record of nationalityFilterList">{{ record | translate }} </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="nationalityFilterList"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="selectNationality()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="nationalityFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item | translate }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="nationalityFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('nationality')"
                [indeterminate]="isSomeDropdownSelected('nationality')"
                (change)="selectAllData($event, 'nationality')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="entryWayFilter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <ng-select
            class="auto-grow margin custom-style-ngselect-fc"
            [appendTo]="'body'"
            [multiple]="false"
            [clearable]="false"
            placeholder="{{ 'search' | translate }}"
            [formControl]="entryWayFilter"
            (change)="intakeSelected($event)"
            clear
            [readonly]="isLoading ? true : false"
          >
            <ng-option value="All">{{ 'All' | translate }}</ng-option>
            <ng-option *ngFor="let record of entryWayFilterList" [value]="record">
              {{ record?.intake_channel }}
            </ng-option>
          </ng-select> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="entryWayFilterList"
            bindValue="_id"
            bindLabel="intake_channel"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="intakeSelected()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="entryWayFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.intake_channel }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="entryWayFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('entry_way')"
                [indeterminate]="isSomeDropdownSelected('entry_way')"
                (change)="selectAllData($event, 'entry_way')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="studentStatusFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field appearance="legacy">
            <mat-select [formControl]="studentStatusFilter" multiple [disableOptionCentering]="true"
              panelClass="filterPanel">
              <mat-option
                *ngIf="studentStatusFilterList && studentStatusFilterList?.length >= 1"
                [value]="'All'"
                (close)="setStatusFilter('All')">{{ 'All' | translate }}</mat-option>
              <mat-option *ngFor="let record of studentStatusFilterList" [value]="record?.value"
                (close)="setStatusFilter()">{{
                record?.key | translate
              }}</mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="studentStatusFilterList"
            bindValue="value"
            bindLabel="key"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="setStudentStatusFilter()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="studentStatusFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.key | translate }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="studentStatusFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('studentStatus')"
                [indeterminate]="isSomeDropdownSelected('studentStatus')"
                (change)="selectAllData($event, 'studentStatus')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="profileRateFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field appearance="legacy">
            <mat-select [formControl]="profileRateFilter" multiple [disableOptionCentering]="true"
              panelClass="filterPanel">
              <mat-option
                *ngIf="profileRateFilterList && profileRateFilterList?.length >= 1"
                [value]="'All'"
                (click)="setProfileSelected('All')"
                >{{ 'All' | translate }}</mat-option
              >
              <mat-option [value]="'affected'" (click)="setProfileSelected('affected')">{{ 'Affected' | translate }} </mat-option>
              <mat-option [value]="'not_affected'" (click)="setProfileSelected('not_affected')">{{
                'Not affected' | translate
              }}</mat-option>
              <mat-option *ngFor="let profile of profileRateFilterList" [value]="profile._id" (click)="setProfileSelected()">{{
                profile.name
              }}</mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="profileRateFilterList"
            bindValue="_id"
            bindLabel="name"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="setProfileSelected()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="profileRateFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="profileRateFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('profileRate')"
                [indeterminate]="isSomeDropdownSelected('profileRate')"
                (change)="selectAllData($event, 'profileRate')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="admissionDocumentFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center custom-filter-table">
          <ng-select
            [items]="listAdmission"
            bindValue="value"
            bindLabel="label"
            class="custom-dropdownpanel"
            [appendTo]="'body'"
            [multiple]="true"
            notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
            placeholder="{{ 'search' | translate }}"
            [formControl]="admissionDocumentFilter"
            [clearable]="false"
            [closeOnSelect]="false"
            (close)="setAdmissionDocumentStatusFilter()"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="listAdmission?.length">
              <mat-checkbox
                class="all-input"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('admissionDocument')"
                [indeterminate]="isSomeDropdownSelected('admissionDocument')"
                (change)="selectAllData($event, 'admissionDocument')"
              >
                {{ 'AllM' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="announcementCallFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="announcementCallFilter"
              [matTooltip]="announcementCallFilter.value | translate"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record.value" *ngFor="let record of announcementCallFilterList"
                >{{ record.key | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="announcementCallFilterList"
            bindValue="value"
            bindLabel="key"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="selectAnnouncementCall()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="announcementCallFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.key | translate }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="announcementCallFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('announcement_call')"
                [indeterminate]="isSomeDropdownSelected('announcement_call')"
                (change)="selectAllData($event, 'announcement_call')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="announcementEmailFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="announcementEmailFilter"
              [matTooltip]="announcementEmailFilter.value === 'not_done' ? 'Not sent' : (announcementEmailFilter.value | translate)"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record.value" *ngFor="let record of announcementEmailFilterList"
                >{{ record.key | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="announcementEmailFilterList"
            bindValue="value"
            bindLabel="key"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="selectAnnouncementEmail()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="announcementEmailFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.key | translate }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="announcementEmailFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('announcement_email')"
                [indeterminate]="isSomeDropdownSelected('announcement_email')"
                (change)="selectAllData($event, 'announcement_email')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container *ngIf="stepColumn && stepColumn.length && steps?.length">
        <ng-container *ngFor="let step of stepColumn; let i = index" matColumnDef="S{{ i + 1 }}_filter">
          <th mat-header-cell *matHeaderCellDef class="text-center">
            <ng-select
              placeholder="{{ 'search' | translate }}"
              [formControl]="steps.controls[i]"
              [items]="listStepSone"
              bindValue="key"
              bindLabel="label"
              [appendTo]="'body'"
              [multiple]="true"
              [closeOnSelect]="false"
              [clearable]="false"
              (close)="stepFiltered('not_optional')"
              appendTo="body"
              class="custom-style-ngselect-fc"
            >
              <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
              </ng-template>
              <ng-template ng-header-tmp *ngIf="listStepSone?.length">
                <mat-checkbox
                  class="margin custom-ngselect-content"
                  style="cursor: pointer"
                  [checked]="isAllDropdownSelected('steps', i)"
                  [indeterminate]="isSomeDropdownSelected('steps', i)"
                  (change)="selectAllData($event, 'steps', i)"
                >
                  {{ 'AllF' | translate }}
                </mat-checkbox>
              </ng-template>
              <!-- <ng-option *ngFor="let status of stepStatusList" [value]="status?.value">
                {{ 'Step_Statuses.' + status.value | translate }}
              </ng-option> -->
            </ng-select>
          </th>
        </ng-container>
      </ng-container>

      <ng-container *ngIf="optionalStepColumns && optionalStepColumns.length && steps?.length">
        <ng-container *ngFor="let step of optionalStepColumns; let i = index" matColumnDef="O{{ i + 1 }}_filter">
          <th mat-header-cell *matHeaderCellDef class="text-center">
            <ng-select
              placeholder="{{ 'search' | translate }}"
              [formControl]="optionalSteps.controls[i]"
              [items]="listStepSone"
              bindValue="key"
              bindLabel="label"
              [appendTo]="'body'"
              [multiple]="true"
              [closeOnSelect]="false"
              [clearable]="false"
              (close)="stepFiltered('not_optional')"
              appendTo="body"
              class="custom-style-ngselect-fc"
            >
              <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
              </ng-template>
              <ng-template ng-header-tmp *ngIf="listStepSone?.length">
                <mat-checkbox
                  class="margin custom-ngselect-content"
                  style="cursor: pointer"
                  [checked]="isAllDropdownSelected('optionalSteps', i)"
                  [indeterminate]="isSomeDropdownSelected('optionalSteps', i)"
                  (change)="selectAllData($event, 'optionalSteps', i)"
                >
                  {{ 'AllF' | translate }}
                </mat-checkbox>
              </ng-template>
              <!-- <ng-option *ngFor="let status of stepStatusList" [value]="status?.value">
                          {{ 'Step_Statuses.' + status.value | translate }}
                        </ng-option> -->
            </ng-select>
          </th>
        </ng-container>
      </ng-container>
      <ng-container matColumnDef="downPaymentFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="paymentFilter"
              [matTooltip]="paymentFilter.value ? ('DP_Status.' + paymentFilter.value | translate) : ''"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record.value" *ngFor="let record of DPFilterList">
                {{ 'DP_Status.' + record?.value | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            [items]="DPFilterList"
            bindValue="value"
            bindLabel="label"
            class="custom-dropdownpanel"
            [appendTo]="'body'"
            [multiple]="true"
            notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
            placeholder="{{ 'search' | translate }}"
            [formControl]="paymentFilter"
            [clearable]="false"
            [closeOnSelect]="false"
            (close)="setDownPaymentFilter()"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="DPFilterList?.length">
              <mat-checkbox
                class="all-input"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('DPFilter')"
                [indeterminate]="isSomeDropdownSelected('DPFilter')"
                (change)="selectAllData($event, 'DPFilter')"
              >
                {{ 'AllM' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="fcFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="financementFilter"
              [matTooltip]="financementFilter.value ? ('Step_Statuses.' + financementFilter.value | translate) : ''"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record.value" *ngFor="let record of financementFilterList">
                {{ 'Step_Statuses.' + record?.key | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="financementFilterList"
            bindValue="value"
            bindLabel="label"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="selectFinancement()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="financementFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="financementFilterList?.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('financement')"
                [indeterminate]="isSomeDropdownSelected('financement')"
                (change)="selectAllData($event, 'financement')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="registrationDateFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <input
              matInput
              (click)="registrationDatePick.open()"
              readonly
              class="form-field"
              placeholder="{{ 'search' | translate }}"
              [matDatepicker]="registrationDatePick"
              [formControl]="registrationDateFilter"
            />
            <mat-datepicker-toggle matSuffix [for]="registrationDatePick"></mat-datepicker-toggle>
            <mat-datepicker #registrationDatePick [disabled]="isLoading ? true : false"></mat-datepicker>
          </mat-form-field>
        </th>
      </ng-container>
      <ng-container matColumnDef="trialFilter">
        <th mat-header-cell *matHeaderCellDef>
          <!-- <mat-form-field> -->
          <!-- <input matInput class="form-field" [formControl]="trialDateCtrl" placeholder="{{ 'search' | translate }}" /> -->
          <!-- <input
              matInput
              class="form-field"
              [matAutocomplete]="trialDateAuto"
              [formControl]="trialDateCtrl"
              placeholder="{{ 'search' | translate }}"
              (keyup.enter)="enterIntakeFilter(trialDateAuto); triggerTrialAuto.closePanel()"
              #triggerTrialAuto="matAutocompleteTrigger"
              [readonly]="isLoading ? true : false"
            />
            <mat-autocomplete [panelWidth]="'fit'" class="width-size" #trialDateAuto="matAutocomplete">
              <mat-option class="width-sizes" value="{{ 'All' | translate }}" (click)="setTrialDate(null)">{{
                'All' | translate
              }}</mat-option>
              <mat-option
                class="width-size"
                *ngFor="let record of filteredTrialDateList | async"
                [value]="record"
                (click)="setTrialDate(record)"
              >
                {{ record }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            [items]="trialDateList"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="setTrialDate()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="trialDateCtrl"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="trialDateList.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('trialDate')"
                [indeterminate]="isSomeDropdownSelected('trialDate')"
                (change)="selectAllData($event, 'trialDate')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="devMemberFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <input
              matInput
              class="form-field"
              [formControl]="devMemberFilter"
              [readonly]="isLoading ? true : false"
              placeholder="{{ 'search' | translate }}"
            />
          </mat-form-field>
        </th>
      </ng-container>
      <ng-container matColumnDef="fcMemberFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <input
              matInput
              class="form-field"
              [formControl]="fcMemberFilter"
              [readonly]="isLoading ? true : false"
              placeholder="{{ 'search' | translate }}"
            />
          </mat-form-field>
        </th>
      </ng-container>
      <ng-container matColumnDef="crmFilter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <!-- <mat-form-field>
            <mat-select
              [formControl]="crmFilter"
              [matTooltip]="crmFilter.value | translate"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
              [disabled]="isLoading ? true : false"
            >
              <mat-option [value]="record.value" *ngFor="let record of listCrm">
                {{ record.key | translate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <ng-select
            class="margin custom-dropdownpanel"
            bindValue="value"
            bindLabel="key"
            [items]="listCrm"
            [appendTo]="'body'"
            [multiple]="true"
            [closeOnSelect]="false"
            [clearable]="false"
            (close)="setCRM()"
            placeholder="{{ 'search' | translate }}"
            [formControl]="crmFilter"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.key }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="listCrm.length">
              <mat-checkbox
                class="margin custom-ngselect-content"
                style="cursor: pointer"
                [checked]="isAllDropdownSelected('crm')"
                [indeterminate]="isSomeDropdownSelected('crm')"
                (change)="selectAllData($event, 'crm')"
              >
                {{ 'AllF' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>
      <ng-container matColumnDef="actionFilter" stickyEnd>
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>
      <!---FILTERS END-->
      <!---ROW DATA START-->
      <ng-container matColumnDef="select" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-checkbox
            (change)="$event ? masterToggle() : null"
            (change)="showOptions('all', '')"
            [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
            [indeterminate]="selection.hasValue() && (dataUnselectUser?.length > 0 || !isAllSelected())"
            [aria-label]="checkboxLabel()"
          >
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row" class="text-center">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row._id) : null"
            [checked]="selection.isSelected(row?._id) || (isCheckedAll && !dataUnselectUser.includes(row?._id))"
            (change)="showOptions('one', row)"
            [aria-label]="checkboxLabel(row)"
          >
          </mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="typeFormation" sticky>
        <th
          mat-header-cell
          *matHeaderCellDef
          matTooltip="{{ 'AdmissionFollowUp.Type of formation' | translate }}"
          matTooltipPosition="above"
        >
          <h5>
            <img class="img-responsive engagement-level-icon" [src]="shieldAccountIcon" />
          </h5>
        </th>
        <!-- <ng-container *matCellDef="let element"> -->
        <td mat-cell *matCellDef="let element" matTooltip="{{ element?.type_of_formation_id?.sigle }}">
          <span>{{ element?.type_of_formation_id?.sigle }}</span>
        </td>
        <!-- </ng-container> -->
      </ng-container>
      <ng-container matColumnDef="studentNumber" sticky>
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'student number' | translate }}" matTooltipPosition="above">
          <h5>
            <mat-icon class="mat-icon-status"> account_box </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element" matTooltip="{{ element?.candidate_unique_number }}">
          {{ element?.candidate_unique_number }}
        </td>
      </ng-container>
      <ng-container matColumnDef="name" sticky>
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Name' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="candidate">{{ 'AdmissionFollowUp.Name' | translate }}</h5>
        </th>
        <td
          matTooltip="
              {{ element?.last_name | uppercase }} {{ element?.first_name }} {{
            element?.civility && element?.civility === 'neutral' ? '' : (element?.civility | translate)
          }}
            "
          mat-cell
          *matCellDef="let element"
          style="text-align: start; padding-left: 0.5rem !important"
        >
          <div *ngIf="!element?.photo" class="person-image">
            <img
              class="img-responsive img-circle person-image"
              [src]="element?.civility === 'MR' ? maleIcon : femaleIcon"
              height="20"
              width="20"
            />
          </div>
          <div *ngIf="element?.photo" class="person-image">
            <img class="img-responsive img-circle person-image" height="20" [src]="serverimgPath + element?.photo" width="20" />
          </div>
          <div style="display: contents" *ngIf="element?.last_name !== null">
            {{
              (element?.last_name | uppercase) +
                ' ' +
                element?.first_name +
                ' ' +
                (element?.civility && element?.civility === 'neutral' ? '' : (element?.civility | translate))
            }}
          </div>
        </td>
      </ng-container>
      <ng-container matColumnDef="nationality" sticky>
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Nationality' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="nationality">
            <mat-icon svgIcon="flag-variant-outline" class="mat-icon-svgIcon"> </mat-icon>
          </h5>
        </th>
        <td [matTooltip]="element?.nationality | translate" mat-cell *matCellDef="let element">
          <span class="tw-flex tw-justify-center">
            <img *ngIf="element?.nationality" class="flag-icon" [src]="flagsIconPath + element?.nationality + '.svg'" />
          </span>
          <!-- <img alt="user list image" class="img-responsive img-circle" height="30" src="assets/img/pro-thumb.jpg" width="30" /> -->
        </td>
      </ng-container>
      <ng-container matColumnDef="entryWay" sticky>
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Intake channel' | translate }}" matTooltipPosition="above">
          <h5>{{ 'AdmissionFollowUp.Intake channel' | translate }}</h5>
        </th>
        <td
          [matTooltip]="intakeChannel(element) | translate"
          mat-cell
          *matCellDef="let element"
          style="text-align: start; padding-left: 0.5rem !important"
        >
          <!-- {{ element?.intake_channel?.program | translate }} -->
          {{ intakeChannel(element) }}
        </td>
      </ng-container>
      <ng-container matColumnDef="studentStatus">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Status' | translate }}" matTooltipPosition="above">
          <h5>
            <mat-icon svgIcon="file-document-edit" class="mat-icon-svgIcon mat-icon-default"></mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span
            *ngIf="element?.candidate_admission_status === 'admitted' || element?.candidate_admission_status === 'admission_in_progress'"
            [matTooltip]="'Admitted' | translate"
          >
            {{ 'Adm.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_admission_status === 'bill_validated'"
            [matTooltip]="element?.candidate_admission_status | translate"
          >
            {{ 'Bil.' | translate }}
          </span>
          <span *ngIf="element?.candidate_admission_status === 'engaged'" [matTooltip]="element?.candidate_admission_status | translate">
            {{ 'Eng.' | translate }}
          </span>
          <span *ngIf="element?.candidate_admission_status === 'registered'" [matTooltip]="element?.candidate_admission_status | translate">
            {{ 'Reg.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_admission_status === 'resign_after_school_begins'"
            [matTooltip]="'Resigned after school begins' | translate"
          >
            {{ 'status_resign_after_school_begins' | translate }}
          </span>
          <span *ngIf="element?.candidate_admission_status === 'no_show'" [matTooltip]="element?.candidate_admission_status | translate">
            {{ 'No.' | translate }}
          </span>
          <span *ngIf="element?.candidate_admission_status === 'resigned'" [matTooltip]="element?.candidate_admission_status | translate">
            {{ 'Res.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_admission_status === 'mission_card_validated'"
            [matTooltip]="element?.candidate_admission_status | translate"
          >
            {{ 'Miss.' | translate }}
          </span>

          <span
            *ngIf="element?.candidate_admission_status === 'resigned_after_engaged'"
            [matTooltip]="element?.candidate_admission_status | translate"
          >
            {{ 'ResAfter.' | translate }}
          </span>

          <span *ngIf="element?.candidate_admission_status === 'financement_validated'" [matTooltip]="'financement_validated' | translate">
            {{ 'Await.' | translate }}
          </span>

          <span *ngIf="element?.candidate_admission_status === 'in_scholarship'" [matTooltip]="'in_scholarship' | translate">
            {{ 'Sch.' | translate }}
          </span>

          <span
            *ngIf="element?.candidate_admission_status === 'resignation_missing_prerequisites'"
            [matTooltip]="'resignation_missing_prerequisites' | translate"
          >
            {{ 'Ren. PM' | translate }}
          </span>

          <span
            *ngIf="element?.candidate_admission_status === 'resigned_after_registered'"
            [matTooltip]="element?.candidate_admission_status | translate"
          >
            {{ 'ResReg.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_admission_status === 'report_inscription'"
            [matTooltip]="element?.candidate_admission_status | translate"
          >
            {{ 'Post.' | translate }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="profileRate">
        <th
          mat-header-cell
          *matHeaderCellDef
          matTooltip="{{ 'AdmissionFollowUp.Registration profile' | translate }}"
          matTooltipPosition="above"
        >
          <h5>
            <mat-icon svgIcon="clipboard-account-outline" class="mat-icon-svgIcon"> </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-icon
            [matTooltip]="element?.registration_profile?.name ? element?.registration_profile?.name : ('not_affected' | translate)"
            [ngClass]="{
              red: !element?.registration_profile?.name,
              green: element?.registration_profile?.name
            }"
            aria-hidden="true"
            class="mat-icon-status"
            >lens
          </mat-icon>
        </td>
      </ng-container>
      <ng-container matColumnDef="admissionDocument">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Admission doc' | translate }}" matTooltipPosition="above">
          <h5  mat-sort-header="admission_document_process_status">
            {{ 'Admission doc' | translate }}
          </h5>
        </th>
        <td mat-cell *matCellDef="let element" [matTooltip]="getTooltip(element?.admission_document_process_status)">
          <mat-icon
            *ngIf="element?.admission_document_process_status"
            [ngClass]="{
              red: element?.admission_document_process_status === 'red',
              green: element?.admission_document_process_status === 'green',
              yellow: element?.admission_document_process_status === 'yellow',
              orange: element?.admission_document_process_status === 'orange'
            }"
            aria-hidden="true"
            class="mat-icon-status"
            >lens
          </mat-icon>
          <ng-container *ngIf="!element?.admission_document_process_status">-</ng-container>
        </td>
      </ng-container>
      <ng-container matColumnDef="announcementCall">
        <th
          mat-header-cell
          *matHeaderCellDef
          matTooltip="{{ 'AdmissionFollowUp.Announcement call' | translate }}"
          matTooltipPosition="above"
        >
          <h5>
            <mat-icon svgIcon="phone-check-outline" class="mat-icon-svgIcon"> </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-icon
            [matTooltip]="element?.announcement_call | translate"
            [ngClass]="{
              red: element?.announcement_call === 'not_done',
              green: element?.announcement_call === 'done'
            }"
            aria-hidden="true"
            class="mat-icon-status"
            >lens
          </mat-icon>
        </td>
      </ng-container>
      <ng-container matColumnDef="announcementEmail">
        <th
          mat-header-cell
          *matHeaderCellDef
          matTooltip="{{ 'AdmissionFollowUp.Registration Email' | translate }}"
          matTooltipPosition="above"
        >
          <h5>
            <mat-icon class="mat-icon-status"> mark_email_read </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-icon
            *ngIf="
              (!element?.reg_n8_sent_date?.sent_date && !element?.announcement_email?.sent_date) ||
              (element?.reg_n8_sent_date === null && !element?.announcement_email?.sent_date)
            "
            [matTooltip]="'Not sent' | translate"
            class="red mat-icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <ng-container *ngIf="element?.reg_n8_sent_date && element?.reg_n8_sent_date?.sent_date; else announcementEmail">
            <span [matTooltip]="transformDate(element?.reg_n8_sent_date)" style="cursor: default">{{
              transformDate(element?.reg_n8_sent_date)
            }}</span>
          </ng-container>
          <ng-template #announcementEmail>
            <span [matTooltip]="transformDate(element?.announcement_email)" style="cursor: default">{{
              transformDate(element?.announcement_email)
            }}</span>
          </ng-template>
        </td>
      </ng-container>

      <ng-container *ngIf="stepColumn && stepColumn?.length" class="scroll-eval">
        <ng-container *ngFor="let step of stepColumn; let i = index" [matColumnDef]="step">
          <th mat-header-cell *matHeaderCellDef matTooltip="S{{ i + 1 }}" matTooltipPosition="above" class="custom-panel-dropdown">
            <h5>S{{ i + 1 }}</h5>
          </th>
          <td mat-cell *matCellDef="let element; let currentRow = index">
            <mat-icon
              *ngIf="
                dataWithFilteredSteps[currentRow].admission_process_id?.steps[i]?.step_status &&
                dataWithFilteredSteps[currentRow].admission_process_id?.steps[i]?.step_status !== 'pending'
              "
              matTooltip="{{ dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_title }}: {{
                'Step_Statuses.' + dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status | translate
              }}"
              [ngClass]="{
                redicon: dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'not_started',
                green: dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'accept',
                orange: dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'need_validation',
                yellow: dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'ask_for_revision',
                red: dataWithFilteredSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'reject_and_stop'
              }"
              class="mat-icon-status"
              aria-hidden="true"
              >lens
            </mat-icon>
          </td>
        </ng-container>
      </ng-container>

      <ng-container *ngIf="optionalStepColumns && optionalStepColumns?.length" class="scroll-eval">
        <ng-container *ngFor="let step of optionalStepColumns; let i = index" [matColumnDef]="step">
          <th mat-header-cell *matHeaderCellDef matTooltip="O{{ i + 1 }}" matTooltipPosition="above" class="custom-panel-dropdown">
            <h5>O{{ i + 1 }}</h5>
          </th>
          <td mat-cell *matCellDef="let element; let currentRow = index">
            <mat-icon
              *ngIf="
                dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status &&
                dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status !== 'pending'
              "
              matTooltip="{{ dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_title }}: {{
                'Step_Statuses.' + dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status | translate
              }}"
              [ngClass]="{
                redicon: dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'not_started',
                green: dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'accept',
                orange: dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'need_validation',
                yellow: dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'ask_for_revision',
                red: dataWithFilteredOptionalSteps[currentRow]?.admission_process_id?.steps[i]?.step_status === 'reject_and_stop'
              }"
              class="mat-icon-status"
              aria-hidden="true"
              >lens
            </mat-icon>
          </td>
        </ng-container>
      </ng-container>
      <ng-container matColumnDef="downPayment">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Down payment' | translate }}" matTooltipPosition="above">
          <h5>
            <mat-icon class="mat-icon-status"> euro_symbol </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <!-- *************** new code-->
          <!-- *************** Finance V2 Updates -->
          <!-- *************** not paid icon-->
          <ng-container *ngIf="checkIconDownPayment(element) === 'not_paid'">
            <mat-icon matTooltip="{{ 'DP_Status.not_paid' | translate }}" class="red mat-icon-status" aria-hidden="true">lens </mat-icon>
          </ng-container>
          <!-- *************** reject icon -->
          <ng-container *ngIf="checkIconDownPayment(element) === 'rejected'">
            <mat-icon matTooltipPosition="above" matTooltip="{{ 'Refused' | translate }}" class="mat-icon-status red" aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <!-- *************** paid icon -->
          <ng-container *ngIf="checkIconDownPayment(element) === 'paid'">
            <mat-icon matTooltipPosition="above" matTooltip="{{ 'Paid' | translate }}" class="mat-icon-status green" aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <!-- *************** partially_paid icon need checked-->
          <ng-container *ngIf="checkIconDownPayment(element) === 'partially_paid'">
            <mat-icon
              *ngIf="element?.billing_id?.deposit_status === 'partially_paid'"
              matTooltipPosition="above"
              matTooltip="{{ 'Partially paid' | translate }}"
              class="mat-icon-status yellow"
              aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <!-- *************** generated/billed icon-->
          <ng-container *ngIf="checkIconDownPayment(element) === 'generated'">
            <mat-icon matTooltip="{{ 'Generated' | translate }}" class="red mat-icon-status" aria-hidden="true">lens </mat-icon>
          </ng-container>
          <!-- *************** pending icon -->
          <ng-container *ngIf="checkIconDownPayment(element) === 'pending'">
            <mat-icon matTooltipPosition="above" matTooltip="{{ 'Pending' | translate }}" class="mat-icon-status orange" aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <!-- *************** chargeback -->
          <ng-container *ngIf="checkIconDownPayment(element) === 'chargeback'">
            <mat-icon
              matTooltipPosition="above"
              matTooltip="{{ 'chargeback' | translate }}"
              class="mat-icon-status magenta"
              aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <!-- *************** not_billed icon -->
          <ng-container *ngIf="checkIconDownPayment(element) === 'not_billed'">
            <mat-icon matTooltipPosition="above" matTooltip="{{ 'not_billed' | translate }}" class="mat-icon-status red" aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>
          <ng-container *ngIf="!checkIconDownPayment(element)">
            <span style="color: #b7b7b7">x</span>
          </ng-container>
        </td>
      </ng-container>

      <ng-container matColumnDef="financement">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Financement' | translate }}" matTooltipPosition="above">
          <h5 class="tw-flex tw-justify-center financement-header">
            <svg viewBox="0 0 24 24" class="financement-logo">
              <path
                fill="currentColor"
                d="M9,7H15V9H11V11H14V13H11V17H9V7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z"
              />
            </svg>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <ng-container *ngIf="element?.financement === 'no_financement'">
            <span style="color: #b7b7b7">x</span>
          </ng-container>

          <ng-container *ngIf="element?.financement === 'not_started' || !element?.financement">
            <mat-icon [matTooltip]="'Step_Statuses.not_started' | translate" class="red mat-icon-status" aria-hidden="true">lens </mat-icon>
          </ng-container>

          <ng-container *ngIf="element?.financement === 'need_validation' || element?.financement === 'ask_for_revision'">
            <mat-icon [matTooltip]="'Step_Statuses.need_validation' | translate" class="orange mat-icon-status" aria-hidden="true"
              >lens
            </mat-icon>
          </ng-container>

          <ng-container *ngIf="element?.financement === 'accept'">
            <mat-icon [matTooltip]="'Step_Statuses.accept' | translate" class="green mat-icon-status" aria-hidden="true">lens </mat-icon>
          </ng-container>
        </td>
      </ng-container>

      <ng-container matColumnDef="registrationDate">
        <th
          mat-header-cell
          *matHeaderCellDef
          matTooltip="{{ 'AdmissionFollowUp.Registration Date' | translate }}"
          matTooltipPosition="above"
        >
          <h5>
            <mat-icon svgIcon="calendar-check-outline" class="mat-icon-svgIcon"> </mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <ng-container *ngIf="element?.candidate_admission_status === 'registered'">
            <!-- <span [matTooltip]="transformRegistrationDate(element)" style="cursor: default">{{ transformRegistrationDate(element) }}</span> -->
            <span [matTooltip]="element?.registered_at?.date" style="cursor: default">{{ element?.registered_at?.date }}</span>
          </ng-container>
        </td>
      </ng-container>

      <ng-container matColumnDef="trial_date">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Trial date' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="trial_date" style="text-align: center !important">
            {{ 'Trial date' | translate }}
          </h5>
        </th>
        <td mat-cell *matCellDef="let element" class="pad-l-xs" [matTooltip]="element?.trial_date">
          {{ element?.trial_date }}
        </td>
      </ng-container>

      <ng-container matColumnDef="devMember">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'AdmissionFollowUp.Dev member' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="admission_member">
            <mat-icon svgIcon="target-account" class="mat-icon-svgIcon"></mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <div
            *ngIf="element?.admission_member_id"
            [matTooltip]="
              element?.admission_member_id?.last_name +
              ' ' +
              element?.admission_member_id?.first_name +
              ' ' +
              (element?.admission_member_id?.civility && element?.admission_member_id?.civility === 'neutral'
                ? ''
                : (element?.admission_member_id?.civility | translate))
            "
            class="person-image"
          >
            <div *ngIf="!element?.admission_member_id?.profile_picture">
              <img
                class="img-responsive img-circle"
                height="30"
                [src]="
                  element?.admission_member_id?.civility === 'MR'
                    ? maleIcon
                    : element?.admission_member_id?.civility === 'neutral'
                    ? neutralStudentIcon
                    : femaleIcon
                "
                width="30"
                style="width: 20px; height: 20px"
              />
            </div>
            <div *ngIf="element?.admission_member_id?.profile_picture">
              <img
                class="img-responsive img-circle"
                height="30"
                [src]="serverimgPath + element?.admission_member_id?.profile_picture"
                width="30"
                style="width: 20px; height: 20px"
              />
            </div>
          </div>
          <div *ngIf="!element?.admission_member_id" class="person-image" [matTooltip]="'No Dev Member affected' | translate">
            <img class="img-responsive img-circle" height="30" [src]="maleIcon" width="30" />
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="fcMember">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'FC Member' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="continuous_formation_manager">
            <mat-icon svgIcon="target-account" class="mat-icon-svgIcon"></mat-icon>
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <div
            *ngIf="element?.continuous_formation_manager_id"
            [matTooltip]="
              (element?.continuous_formation_manager_id?.last_name | uppercase) +
              ' ' +
              element?.continuous_formation_manager_id?.first_name +
              ' ' +
              (element?.continuous_formation_manager_id?.civility && element?.continuous_formation_manager_id?.civility === 'neutral'
                ? ''
                : (element?.continuous_formation_manager_id?.civility | translate))
            "
            class="person-image"
          >
            <div *ngIf="!element?.continuous_formation_manager_id?.profile_picture">
              <img
                class="img-responsive img-circle"
                height="30"
                [src]="
                  element?.continuous_formation_manager_id?.civility === 'MR'
                    ? maleIcon
                    : element?.continuous_formation_manager_id?.civility === 'neutral'
                    ? neutralStudentIcon
                    : femaleIcon
                "
                width="30"
                style="width: 20px; height: 20px"
              />
            </div>
            <div *ngIf="element?.continuous_formation_manager_id?.profile_picture">
              <img
                class="img-responsive img-circle"
                height="30"
                [src]="serverimgPath + element?.continuous_formation_manager_id?.profile_picture"
                width="30"
                style="width: 20px; height: 20px"
              />
            </div>
          </div>
          <div
            *ngIf="!element?.continuous_formation_manager_id"
            class="person-image"
            [matTooltip]="'No Continuos Formation Manager affected' | translate"
          >
            <img class="img-responsive img-circle" height="30" [src]="maleIcon" width="30" />
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="crm">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'CRM' | translate }}" matTooltipPosition="above">
          <h5 mat-sort-header="is_oscar_updated">
            {{ 'CRM' | translate }}
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <mat-icon
            *ngIf="element?.is_oscar_updated || element?.is_hubspot_updated || element?.is_manual_updated"
            [ngClass]="{
              red:
                element?.is_oscar_updated === 'update_failed' ||
                element?.is_hubspot_updated === 'update_failed' ||
                element?.is_manual_updated === 'update_failed',
              green:
                element?.is_oscar_updated === 'update_success' ||
                element?.is_hubspot_updated === 'update_success' ||
                element?.is_manual_updated === 'update_success'
            }"
            aria-hidden="true"
            class="mat-icon-status"
            >lens
          </mat-icon>
        </td>
      </ng-container>
      <ng-container matColumnDef="action" stickyEnd>
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Action' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Action' | translate }}</h5>
        </th>
        <td mat-cell *matCellDef="let element" class="action-buttons">
          <button
            mat-icon-button
            *ngIf="
              hideActionButtonRate(element) && permissionService.assignRegistrationProfileFollowUpContinuous() && checkStatusButton(element)
            "
            [matTooltipDisabled]="false"
            [disabled]="!validateActionButtonRate(element)"
            class="margin-right-button admission-button"
            (click)="openAssignRateProfile(element, 'one')"
            matTooltip="{{ 'Assign Registration Profile' | translate }}"
          >
            <mat-icon>
              <svg style="width: 18px; height: 18px" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H9.18C9.6,1.84 10.7,1 12,1C13.3,1 14.4,1.84 14.82,3H19M12,3A1,1 0 0,0 11,4A1,1 0 0,0 12,5A1,1 0 0,0 13,4A1,1 0 0,0 12,3M7,7V5H5V19H19V5H17V7H7M12,9A2,2 0 0,1 14,11A2,2 0 0,1 12,13A2,2 0 0,1 10,11A2,2 0 0,1 12,9M8,17V16C8,14.9 9.79,14 12,14C14.21,14 16,14.9 16,16V17H8Z"
                />
              </svg>
            </mat-icon>
          </button>

          <button
            mat-icon-button
            *ngIf="hideActionButtonCall(element) && permissionService.firstCallDoneFollowUpContinuous() && checkStatusButton(element)"
            [matTooltipDisabled]="false"
            class="margin-right-button admission-button"
            [disabled]="validateActionButtonCall(element)"
            (click)="inCallCandidates(element)"
            matTooltip="{{ 'Call done' | translate }}"
          >
            <mat-icon
              ><svg style="width: 18px; height: 18px" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M6.62 10.79A15.1 15.1 0 0 0 13.21 17.38L15.41 15.18A1 1 0 0 1 16.41 14.93A11.36 11.36 0 0 0 20 15.5A1 1 0 0 1 21 16.5V20A1 1 0 0 1 20 21A17 17 0 0 1 3 4A1 1 0 0 1 4 3H7.5A1 1 0 0 1 8.5 4A11.36 11.36 0 0 0 9.07 7.57A1 1 0 0 1 8.82 8.57M21.71 4.71L20.29 3.29L15 8.59L12.71 6.29L11.29 7.71L15 11.41Z"
                />
              </svg>
            </mat-icon>
          </button>
          <button
            mat-icon-button
            *ngIf="hideActionButtonMail(element) && permissionService.firstEmailFollowUpContinuous() && checkStatusButton(element)"
            [matTooltipDisabled]="false"
            [disabled]="validateActionButtonMail(element)"
            class="margin-right-button admission-button"
            (click)="sendAnnoucment(element)"
            matTooltip="{{ 'Send 1st Email Registration' | translate }}"
          >
            <mat-icon>mark_email_read </mat-icon>
          </button>
          <div
            *ngIf="hideActionButtonMail(element) && permissionService.firstEmailFollowUpContinuous() && checkStatusButton(element)"
            class="border-group-button"
          ></div>
          <button
            mat-icon-button
            [matTooltipDisabled]="false"
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            class="margin-right-button"
            (click)="sendMail(element)"
            matTooltip="{{ 'Send email' | translate }}"
            *ngIf="permissionService.sendEmailFollowUpContinuous() && checkStatusButton(element)"
          >
            <mat-icon> send </mat-icon>
          </button>

          <button
            *ngIf="
              element?.admission_member_id && permissionService.transferToAnotherMemberFollowUpContinuous() && checkStatusButton(element)
            "
            mat-icon-button
            [matTooltipDisabled]="false"
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            class="margin-right-button"
            (click)="openAssignMemberFc(element, 'one')"
            matTooltip="{{ 'Transfer to another member' | translate }}"
          >
            <mat-icon svgIcon="account-switch"> </mat-icon>
          </button>
          <button
            *ngIf="permissionService.transferToAnotherProgramFollowUpContinuous() && checkStatusButton(element)"
            mat-icon-button
            [matTooltipDisabled]="false"
            class="margin-right-button"
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            matTooltip="{{ 'Transfer to another program' | translate }}"
            (click)="getAllAdmissionFinancement(element)"
          >
            <mat-icon svgIcon="bank-transfer"> </mat-icon>
          </button>
          <button
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            mat-icon-button
            [matTooltipDisabled]="false"
            class="margin-right-button"
            matTooltip="{{ 'View student card' | translate }}"
            (click)="viewCandidateInfo(element._id)"
            *ngIf="permissionService.viewStudentCardFollowUpContinuous()"
          >
            <mat-icon svgIcon="eye"> </mat-icon>
          </button>

          <button
            *ngIf="
              hideActionButtonSeeAdmissionFile(element) &&
              element?.admission_process_id?._id &&
              element?._id &&
              permissionService.viewAdmissionFileFollowUpContinuous() &&
              checkStatusButton(element)
            "
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            mat-icon-button
            [matTooltipDisabled]="false"
            class="margin-right-button"
            matTooltip="{{ 'See_admission_file' | translate }}"
            (click)="viewAdmissionFile(element?.admission_process_id?._id)"
          >
            <mat-icon>
              <svg style="width: 18px; height: 18px" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M22,3H2C0.91,3.04 0.04,3.91 0,5V19C0.04,20.09 0.91,20.96 2,21H22C23.09,20.96 23.96,20.09 24,19V5C23.96,3.91 23.09,3.04 22,3M22,19H2V5H22V19M14,17V15.75C14,14.09 10.66,13.25 9,13.25C7.34,13.25 4,14.09 4,15.75V17H14M9,7A2.5,2.5 0 0,0 6.5,9.5A2.5,2.5 0 0,0 9,12A2.5,2.5 0 0,0 11.5,9.5A2.5,2.5 0 0,0 9,7M14,7V8H20V7H14M14,9V10H20V9H14M14,11V12H18V11H14"
                />
              </svg>
            </mat-icon>
          </button>

          <button
            *ngIf="
              hideActionButtonReSendMail(element) &&
              permissionService.resendRegistrationEmailFollowUpContinuous() &&
              checkStatusButton(element)
            "
            [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
            mat-icon-button
            [matTooltipDisabled]="false"
            class="margin-right-button"
            matTooltip="{{ 'Re_send_registration_email' | translate }}"
            (click)="reSendMail(element)"
          >
            <mat-icon>
              <svg style="width: 18px; height: 18px" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M19 15V18H16V20H19V23H21V20H24V18H21V15H19M14 18H3V8L11 13L19 8V13H21V6C21 4.9 20.1 4 19 4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H14V18M19 6L11 11L3 6H19Z"
                />
              </svg>
            </mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="loading">
        <th mat-header-cell *matHeaderCellDef colspan="23" style="text-align: center !important">
          <div class="center-spinner">
            <mat-spinner color="accent"></mat-spinner>
          </div>
        </th>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-header-row *matHeaderRowDef="filterColumns"></tr>
      <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isLoading"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
    </table>
  </div>

  <div class="horizontal" style="margin-bottom: 40px">
    <div [ngClass]="{ hide: noData | async }">
      <mat-paginator
        [ngClass]="{ 'hide-pagination-buttons': dataCount <= 10 }"
        [length]="dataCount"
        [hidePageSize]="true"
        [pageSize]="[10]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
    <div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isLoading }">
      {{ 'NOT RECORD FOUND' | translate }}
    </div>
  </div>
</div>
<div *ngIf="isWaitingForResponse" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
<swal #exportSwal title="{{ 'Export Title' | translate }}" [showConfirmButton]="false">
  <div *swalPartial class="">
    <div class="">
      {{ 'Export Text1' | translate }}
    </div>
    <div class="">
      {{ 'Export Text2' | translate }}
    </div>
    <div class="">
      {{ 'Export Text3' | translate }}
    </div>
    <div class="">
      {{ 'Export Text4' | translate }}
    </div>
    <div class="">
      <mat-form-field color="accent" class="full-wid">
        <input matInput [(ngModel)]="exportName" type="text" placeholder="{{ 'ExportName' | translate }}" />
      </mat-form-field>
    </div>
    <!-- (click)="exportData()" -->
    <button mat-raised-button color="primary">
      {{ 'OK' | translate }}
    </button>
  </div>
</swal>
