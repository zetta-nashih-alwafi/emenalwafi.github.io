<div class="row">
  <div class="col-lg-12">
    <div class="card-document web-display">
      <div class="row">
        <div class="col-lg-12" style="text-align: end; padding-right: 11px; margin-bottom: 10px">
          <button
            color="accent"
            mat-raised-button
            class="btn-save"
            [disabled]="!candidateData?.school?.short_name"
            (click)="exportPDF()"
            matTooltip="{{ 'PDF' | translate }} "
          >
            <mat-icon class="mat-icon-default">save</mat-icon>
            {{ 'PDF' | translate }}
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div class="pdf-document">
            <!-- Header Document -->
            <div class="p-grid">
              <div class="p-col-12">
                <div class="p-grid">
                  <div class="p-col-6 no-padding" style="text-align: center">
                    <div class="schoolLogo" *ngIf="schoolLogo">
                      <img class="school" [src]="serverimgPath + schoolLogo" />
                    </div>
                  </div>
                  <div class="p-col-6 no-padding box">
                    <div class="signedAt" *ngIf="candidateData?.candidate_sign_date?.date">
                      <div style="padding-top: 3px; padding-bottom: 3px">
                        {{ 'School contract signed' | translate }}
                      </div>
                      <div style="padding-bottom: 5px">
                        {{ translateDate(candidateData?.candidate_sign_date) }} -
                        {{ 'JURY_ORGANIZATION.ABSENT_JUSTIFY.at' | translate }}
                        {{ translateTime(candidateData?.candidate_sign_date?.time) }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-col-12">
                <div class="p-grid">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4 style="margin-top: 0">
                      <b>{{ 'School contract' | translate }} </b>
                    </h4>
                  </div>
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4>
                      {{ 'Registerd to' | translate }} {{ candidateData?.school?.short_name }}
                      <span [innerHTML]="getLevelSchool(candidateData?.level?.name)"></span>
                      {{ candidateData?.sector?.name }}
                      <span *ngIf="candidateData?.speciality?.name">
                        {{ 'Speciality' | translate }} {{ candidateData?.speciality?.name }}
                      </span>
                    </h4>
                  </div>
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4>{{ 'scholar season' | translate }} {{ candidateData?.scholar_season?.scholar_season }}</h4>
                  </div>
                </div>
              </div>
            </div>

            <div style="border: 1px solid black">
              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  padding-left: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  border-bottom: 1px solid black;
                  -webkit-print-color-adjust: exact;
                "
              >
                <div style="display: flex">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Student Identity' | translate }}</b>
                  </div>
                </div>
              </div>
              <div class="p-col-12 pad-ver-none">
                <div class="p-grid">
                  <div class="p-col-6 no-padding">
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'CARDDETAIL.Last Name (Identity card)' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.last_name ? (candidateData?.last_name | uppercase) : '' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'CARDDETAIL.First Name (Identity card)' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.first_name ? (candidateData?.first_name | titlecase) : '' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Date of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.date_of_birth ? candidateData?.date_of_birth : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Post code of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.post_code_of_birth ? candidateData?.post_code_of_birth : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'City of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.city_of_birth ? candidateData?.city_of_birth : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Country of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.country_of_birth ? ('COUNTRY.' + candidateData?.country_of_birth | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Nationality 1' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.nationality ? ('NATIONALITY.' + candidateData?.nationality | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Nationality 2' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          {{ candidateData?.nationality_second ? ('NATIONALITY.' + candidateData?.nationality_second | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <div class="p-grid">
                          <div class="p-col-1 no-padding" style="width: 4%">-</div>
                          <div class="p-col no-padding" style="padding-right:5px">
                            {{ 'FORM_BUILDER_FIELD.emergency_contact_first_name' | translate }}
                          </div>
                          <div class="p-col-1 no-padding" style="margin: auto 0">:</div>
                        </div>
                      </div>
                      <div class="p-col-8 no-padding" style="margin: auto 0">
                        <p>
                          {{
                            candidateData?.emergency_contacts?.length && candidateData?.emergency_contacts[0]?.name
                              ? candidateData?.emergency_contacts[0]?.name
                              : '-'
                          }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <div class="p-grid">
                          <div class="p-col-1 no-padding" style="width: 4%">-</div>
                          <div class="p-col no-padding" style="padding-right:5px">
                            {{ 'FORM_BUILDER_FIELD.emergency_contact_last_name' | translate }}
                          </div>
                          <div class="p-col-1 no-padding" style="margin: auto 0">:</div>
                        </div>
                      </div>
                      <div class="p-col-8 no-padding" style="margin: auto 0">
                        <p>
                          {{
                            candidateData?.emergency_contacts?.length && candidateData?.emergency_contacts[0]?.family_name
                              ? candidateData?.emergency_contacts[0]?.family_name
                              : '-'
                          }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'IBAN' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.iban || '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'BIC' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.bic || '-' }}</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Name of Usage' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.last_name_used ? candidateData?.last_name_used : '' }}
                        {{ candidateData?.first_name_used ? candidateData?.first_name_used : '' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Phone number' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.telephone ? candidateData?.telephone : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'E-mail' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.email ? candidateData?.email : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Date of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.date_of_birth ? candidateData?.date_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Additional Address' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.additional_address ? candidateData?.additional_address : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Nationality 1' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.nationality ? (candidateData?.nationality | translate) : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Sector' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.sector ? candidateData?.sector?.name : '-' }}</div>
                    </div> -->
                  </div>
                  <div class="p-col-6 no-padding">
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'E-mail' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.email ? candidateData?.email : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Phone number' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.phone_number_indicative ? '+' + candidateData?.phone_number_indicative : '' }}{{ candidateData?.telephone ? candidateData?.telephone : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Address' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.address ? candidateData?.address : '-' }}</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Country' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.country ? candidateData?.country : '-' }}</div>
                    </div> -->
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Post code' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.post_code ? candidateData?.post_code : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'City' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.city ? candidateData?.city : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Country' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.country ? ('COUNTRY.' + candidateData?.country | translate) : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <div class="p-grid">
                          <div class="p-col-1 no-padding" style="width: 4%">-</div>
                          <div class="p-col no-padding" style="padding-right:5px">
                            {{ 'FORM_BUILDER_FIELD.emergency_contact_telephone' | translate }}
                          </div>
                          <div class="p-col-1 no-padding" style="margin: auto 0">:</div>
                        </div>
                      </div>
                      <div class="p-col-8 no-padding" style="margin: auto 0">
                        <p>
                          {{
                            candidateData?.emergency_contacts?.length && candidateData?.emergency_contacts[0]?.tele_phone
                              ? candidateData?.emergency_contacts[0]?.tele_phone
                              : '-'
                          }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <div class="p-grid">
                          <div class="p-col-1 no-padding" style="width: 4%">-</div>
                          <div class="p-col no-padding" style="padding-right:5px">
                            {{ 'FORM_BUILDER_FIELD.emergency_contact_email' | translate }}
                          </div>
                          <div class="p-col-1 no-padding" style="margin: auto 0">:</div>
                        </div>
                      </div>
                      <div class="p-col-8 no-padding" style="margin: auto 0">
                        <p>
                          {{
                            candidateData?.emergency_contacts?.length && candidateData?.emergency_contacts[0]?.email
                              ? candidateData?.emergency_contacts[0]?.email
                              : '-'
                          }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <div class="p-grid">
                          <div class="p-col-1 no-padding" style="width: 4%">-</div>
                          <div class="p-col no-padding" style="padding-right:5px">
                            {{ 'FORM_BUILDER_FIELD.emergency_contact_relation' | translate }}
                          </div>
                          <div class="p-col-1 no-padding" style="margin: auto 0">:</div>
                        </div>
                      </div>
                      <div class="p-col-8 no-padding" style="margin: auto 0">
                        <p>
                          {{
                            candidateData?.emergency_contacts?.length && candidateData?.emergency_contacts[0]?.relation
                              ? ('CARDDETAIL.RELATION.' + candidateData?.emergency_contacts[0]?.relation | translate)
                              : '-'
                          }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Account Holder Name' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.account_holder_name || '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Cost coverage' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.cost || 0 | currency : 'EURO' : '' : '0.2' }} €</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Country of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.country_of_birth ? candidateData?.country_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Post code of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.post_code_of_birth ? candidateData?.post_code_of_birth : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'City of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.city_of_birth ? candidateData?.city_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Nationality 2' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.nationality_second ? (candidateData?.nationality_second | translate) : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Speciality' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.speciality ? candidateData?.speciality?.name : '-' }}</div>
                    </div> -->
                  </div>
                </div>
                <div class="p-col-12 no-padding">
                  <mat-checkbox [checked]="candidateData?.autorization_account" [disabled]="true">
                    {{
                      'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                        | translate
                    }}
                  </mat-checkbox>
                </div>
                <div class="p-grid" style="padding-top: 15px" *ngIf="candidateData?.finance === 'my_self'">
                  <p>{{ 'Payment my self' | translate }}</p>
                </div>
              </div>

              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  margin: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  -webkit-print-color-adjust: exact;
                  border-top: 1px solid black;
                  border-bottom: 1px solid black;
                "
              >
                <div class="p-grid">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Payment plan of the year' | translate }}</b>
                  </div>
                </div>
              </div>
              <div class="p-col-12 pad-ver-none">
                <div class="p-grid">
                  <div class="p-col-6 no-padding">
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate === 100 && !additionalCost">
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>{{ 'Payment Plan' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ 'None' | translate }}</p>
                        </div>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate !== 100">
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>{{ 'Payment Plan' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p *ngIf="candidateData?.method_of_payment !== 'avoir'">
                            {{
                              candidateData?.method_of_payment ? ('method_of_payment.' + candidateData?.method_of_payment | translate) : ' '
                            }}
                            -
                            {{ candidateData?.selected_payment_plan?.times ? candidateData?.selected_payment_plan?.times : '0' }}
                            {{ 'times' | translate }}
                          </p>
                          <p *ngIf="candidateData?.method_of_payment === 'avoir'">
                            {{ 'None' | translate }}
                          </p>
                        </div>
                      </div>
                    </ng-container>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Scholarship fees' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ rateAmount && candidateData?.method_of_payment !== 'avoir' ? (rateAmount | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid" *ngIf="discount !== 0">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Discount' | translate }} ({{ discount ? discount : 0 }}%) :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>-{{ discountCalculted && candidateData?.method_of_payment !== 'avoir' ? (discountCalculted | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'OPERATION_NAME.additional_cost' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ additionalCost && candidateData?.method_of_payment !== 'avoir' ? (additionalCost | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'OPERATION_NAME.modality_fee' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ modalityFee && candidateData?.method_of_payment !== 'avoir' ? (modalityFee | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>
                          <b>{{ 'TOTAL' | translate }} :</b>
                        </p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>
                          <b>{{ calcTotal() && candidateData?.method_of_payment !== 'avoir' ? (calcTotal() | currency : 'EURO' : '' : '0.2') : '0' }} €</b>
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-12 no-padding">
                        <p>
                          {{ 'ADMISSION_PAYMENT.Down payment to pay' | translate }} :
                          <span
                            >{{
                              candidateData?.selected_payment_plan?.down_payment && candidateData?.method_of_payment !== 'avoir'
                                ? (candidateData?.selected_payment_plan?.down_payment | currency : 'EURO' : '' : '0.2')
                                : '0'
                            }}
                            €</span
                          >
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-6 no-padding">
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'How to Pay' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.finance ? (candidateData?.finance | translate) : '-' }} -
                        {{
                          candidateData?.method_of_payment
                            ? candidateData?.method_of_payment === 'credit_card'
                              ? ('Bank Debit' | translate)
                              : (candidateData?.method_of_payment | translate)
                            : '-'
                        }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Deposit' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        :
                        {{
                          candidateData?.selected_payment_plan?.down_payment
                            ? (candidateData?.selected_payment_plan?.down_payment | currency: 'EURO':'':'0.2')
                            : '0'
                        }}
                        €
                      </div>
                    </div> -->
                    <div class="p-grid">
                      <div class="p-col-12 no-padding">
                        <b>{{ 'Amount to pay after the down payment is paid' | translate }} :</b>
                      </div>
                      <div class="p-col-8 no-padding">
                        <b> {{ calcTotalToPay() && candidateData?.method_of_payment !== 'avoir' ? (calcTotalToPay() | currency : 'EURO' : '' : '0.2') : '0' }} € </b>
                      </div>
                    </div>
                    <br />
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate !== 100 && candidateData?.method_of_payment !== 'avoir'">
                      <div class="p-grid">
                        <div class="p-col-8 no-padding">
                          <b>{{ 'Details of the terms' | translate }} :</b>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p *ngFor="let pay of candidateData?.selected_payment_plan?.payment_date">
                            > {{ pay?.date }} - {{ pay?.amount ? (pay?.amount | currency : 'EURO' : '' : '0.2') : '0' }} €
                          </p>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
                <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'my_self'">
                  <div class="p-col-fixed no-padding" style="min-width: 30px">
                    <mat-icon style="transform: scale(2); margin-left: 14px; margin-top: 10px">☑</mat-icon>
                  </div>
                  <div class="p-col-11" style="margin-top: 2px; margin-left: -19px">
                    {{
                      'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                        | translate
                    }}
                    :
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'my_self'">
                    <div class="p-col-12" style="margin-left: 20px; padding-top: 0">
                      <span style="margin-right: 25px">IBAN : {{ generateIban(candidateData?.iban) }} </span>
                      <span>BIC : {{ candidateData?.bic }} </span>
                    </div>
                  </div>
                </div>
              </div>

              <ng-container
                *ngIf="candidateData?.payment_supports && candidateData?.payment_supports.length && candidateData?.finance === 'family'"
              >
                <div
                  class="p-col-12"
                  style="
                    text-align: center;
                    background-color: #c9c9c9 !important;
                    margin: 0px;
                    padding-left: 0px;
                    padding-right: 0px;
                    -webkit-print-color-adjust: exact;
                    border-top: 1px solid black;
                    border-bottom: 1px solid black;
                  "
                >
                  <div class="p-grid">
                    <div class="p-col-12 no-padding" style="text-align: center">
                      <b>{{ 'Financial Support' | translate }}</b>
                    </div>
                  </div>
                </div>
                <div class="p-col-12 pad-ver-none" *ngFor="let supports of candidateData?.payment_supports; index as i">
                  <div class="p-grid">
                    <div class="p-col-6 no-padding">
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'Parental link' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>
                            {{ supports?.relation ? ('CARDDETAIL.RELATION.' + supports?.relation | translate) : '' }}
                          </p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'FamilyName' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.family_name ? supports?.family_name : '' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'FirstName' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.name ? supports?.name : '' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'E-mail' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.email ? supports?.email : '-' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'Phone number' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.phone_number_indicative ? '+' + supports?.phone_number_indicative : '' }}{{ supports?.tele_phone ? supports?.tele_phone : '-' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'IBAN' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.iban || '-' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'BIC' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.bic || '-' }}</p>
                        </div>
                      </div>
                      <!-- <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>{{ 'Relation' | translate }}</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          : {{ supports?.relation ? ('CARDDETAIL.RELATION.' + supports?.relation | translate) : '' }}
                        </div>
                      </div> -->
                    </div>
                    <div class="p-col-6 no-padding">
                      <ng-container *ngIf="supports?.parent_address && supports?.parent_address.length">
                        <div class="p-grid">
                          <div class="p-col-4 no-padding">
                            <p>- {{ 'Address' | translate }} :</p>
                          </div>
                          <div class="p-col-8 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.address ? supports?.parent_address[0]?.address : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-4 no-padding">
                            <p>- {{ 'Post code' | translate }} :</p>
                          </div>
                          <div class="p-col-8 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.postal_code ? supports?.parent_address[0]?.postal_code : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-4 no-padding">
                            <p>- {{ 'City' | translate }} :</p>
                          </div>
                          <div class="p-col-8 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.city ? supports?.parent_address[0]?.city : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-4 no-padding">
                            <p>- {{ 'Country' | translate }} :</p>
                          </div>
                          <div class="p-col-8 no-padding">
                            <p>
                              {{
                                supports?.parent_address[0]?.country ? ('COUNTRY.' + supports?.parent_address[0]?.country | translate) : '-'
                              }}
                            </p>
                          </div>
                        </div>
                      </ng-container>
                      <div class="p-grid" *ngIf="candidateData.payment_splits && candidateData.payment_splits.length">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'Split of the terms' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ getSplitTerms(supports, candidateData) }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'Account Holder Name' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.account_holder_name || '-' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>- {{ 'Cost coverage' | translate }} :</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p>{{ supports?.cost || 0 | currency : 'EURO' : '' : '0.2' }} €</p>
                        </div>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-12">
                        <mat-checkbox [checked]="supports?.autorization_account" [disabled]="true">
                          {{
                            'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                              | translate
                          }}
                        </mat-checkbox>
                      </div>
                    </div>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'family'">
                    <div class="p-col-fixed no-padding" style="min-width: 30px">
                      <mat-icon style="transform: scale(2); margin-left: 14px; margin-top: 10px">☑</mat-icon>
                    </div>
                    <div class="p-col-11" style="margin-top: 2px; margin-left: -19px">
                      {{
                        'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                          | translate
                      }}
                      :
                    </div>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'family'">
                    <div class="p-col-12" style="margin-left: 20px; padding-top: 0">
                      <span style="margin-right: 25px">IBAN : {{ generateIban(supports?.iban) }} </span>
                      <span>BIC : {{ supports?.bic }} </span>
                    </div>
                  </div>
                  <hr />
                </div>
              </ng-container>
              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  margin: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  -webkit-print-color-adjust: exact;
                  border-top: 1px solid black;
                  border-bottom: 1px solid black;
                "
              >
                <div class="p-grid" *ngIf="documentOnPreviewUrl">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Conditions' | translate }}</b>
                  </div>
                </div>
              </div>
              <div class="p-col-12 pad-ver-none" style="padding: 0px">
                <div class="p-grid" *ngIf="documentOnPreviewUrl">
                  <div class="ql-editor document-parent" style="width: 100%; margin-top: 0px">
                    <ng-container>
                      <div
                        [ngStyle]="{
                          display: documentOnPreviewUrl ? 'block' : 'none'
                        }"
                        class="img-preview container-view-lanscape"
                      >
                        <iframe
                          [src]="documentOnPreviewUrl"
                          frameBorder="0"
                          style="width: 100%; min-height: 650px; border-bottom: 10px solid #646464"
                        ></iframe>
                      </div>
                    </ng-container>
                  </div>
                </div>

                <fieldset
                  [disabled]="
                    candidateData?.candidate_admission_status === 'engaged' ||
                    candidateData?.candidate_admission_status === 'registered' ||
                    isForLegalRepresentative
                  "
                >
                  <div class="p-grid">
                    <div class="p-col-12">
                      <div style="color: red; margin-left: 13px; margin-bottom: 10px">
                        {{ 'Please check this box which is valid for signing the school contract' | translate }}
                      </div>
                      <mat-checkbox style="padding-left: 15px" [formControl]="signature">{{ 'Signature' | translate }}</mat-checkbox>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12" style="text-align: end; padding-right: 11px; margin-bottom: 10px">
                      <button
                        style="margin-right: 15px"
                        [disabled]="!signature?.value || isForLegalRepresentative"
                        color="accent"
                        mat-raised-button
                        class="btn-save"
                        (click)="finalValidationData()"
                        matTooltip="{{ 'Next' | translate }} "
                      >
                        <mat-icon class="mat-icon-default">save</mat-icon>
                        {{ 'Next' | translate }}
                      </button>
                    </div>
                  </div>
                </fieldset>
              </div>
              <!-- <div style="page-break-after: always; position: relative"></div> -->
              <!-- <div style="page-break-before: always; position: relative"></div> -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card-document mobile-display">
      <div class="row">
        <div class="col-lg-12" style="text-align: center; padding-right: 15px; margin-bottom: 10px">
          <button
            color="accent"
            mat-raised-button
            style="width: 100%"
            [disabled]="!candidateData?.school?.short_name"
            (click)="exportPDF()"
            matTooltip="{{ 'PDF' | translate }} "
          >
            <mat-icon class="mat-icon-default">save</mat-icon>
            {{ 'PDF' | translate }}
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div class="pdf-document">
            <!-- Header Document -->
            <div class="p-grid">
              <div class="p-col-12">
                <div class="p-grid">
                  <div class="p-col-12 no-padding" style="text-align: center; justify-content: center; display: flex">
                    <div class="schoolLogo" style="padding-bottom: 10px" *ngIf="schoolLogo">
                      <img class="school" [src]="serverimgPath + schoolLogo" />
                    </div>
                  </div>
                  <div class="p-col-12 no-padding box">
                    <div class="signedAt" *ngIf="candidateData?.candidate_sign_date?.date">
                      <div style="padding-top: 3px; padding-bottom: 3px">
                        {{ 'School contract signed' | translate }}
                      </div>
                      <div style="padding-bottom: 5px">
                        {{ translateDate(candidateData?.candidate_sign_date) }} -
                        {{ 'JURY_ORGANIZATION.ABSENT_JUSTIFY.at' | translate }}
                        {{ translateTime(candidateData?.candidate_sign_date?.time) }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-col-12">
                <div class="p-grid">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4 style="margin-top: 0">
                      <b>{{ 'School contract' | translate }} </b>
                    </h4>
                  </div>
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4>
                      {{ 'Registerd to' | translate }} {{ candidateData?.school?.short_name }}
                      <span [innerHTML]="getLevelSchool(candidateData?.level?.name)"></span>
                      {{ candidateData?.sector?.name }}
                      <span *ngIf="candidateData?.speciality?.name">
                        {{ 'Speciality' | translate }} {{ candidateData?.speciality?.name }}
                      </span>
                    </h4>
                  </div>
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <h4>{{ 'scholar season' | translate }} {{ candidateData?.scholar_season?.scholar_season }}</h4>
                  </div>
                </div>
              </div>
            </div>

            <div style="border: 1px solid black">
              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  padding-left: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  border-bottom: 1px solid black;
                  -webkit-print-color-adjust: exact;
                "
              >
                <div style="display: flex">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Student Identity' | translate }}</b>
                  </div>
                </div>
              </div>
              <div class="p-col-12 pad-ver-none">
                <div class="p-grid">
                  <div class="p-col-12 no-padding">
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'CARDDETAIL.Last Name (Identity card)' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.last_name ? (candidateData?.last_name | uppercase) : '' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'CARDDETAIL.First Name (Identity card)' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.first_name ? (candidateData?.first_name | titlecase) : '' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Date of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.date_of_birth ? candidateData?.date_of_birth : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Post code of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.post_code_of_birth ? candidateData?.post_code_of_birth : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'City of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.city_of_birth ? candidateData?.city_of_birth : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Country of birth' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.country_of_birth ? ('COUNTRY.' + candidateData?.country_of_birth | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Nationality 1' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.nationality ? ('NATIONALITY.' + candidateData?.nationality | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Nationality 2' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          {{ candidateData?.nationality_second ? ('NATIONALITY.' + candidateData?.nationality_second | translate) : '-' }}
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'IBAN' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.iban || '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'BIC' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.bic || '-' }}</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Name of Usage' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.last_name_used ? candidateData?.last_name_used : '' }}
                        {{ candidateData?.first_name_used ? candidateData?.first_name_used : '' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Phone number' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.telephone ? candidateData?.telephone : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'E-mail' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.email ? candidateData?.email : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Date of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.date_of_birth ? candidateData?.date_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Additional Address' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.additional_address ? candidateData?.additional_address : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Nationality 1' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.nationality ? (candidateData?.nationality | translate) : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Sector' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.sector ? candidateData?.sector?.name : '-' }}</div>
                    </div> -->
                  </div>
                  <div class="p-col-12 no-padding">
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'E-mail' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p style="word-wrap: break-word">{{ candidateData?.email ? candidateData?.email : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Phone number' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.telephone ? candidateData?.telephone : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Address' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.address ? candidateData?.address : '-' }}</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Country' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.country ? candidateData?.country : '-' }}</div>
                    </div> -->
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Post code' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.post_code ? candidateData?.post_code : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'City' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.city ? candidateData?.city : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>- {{ 'Country' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ candidateData?.country ? ('COUNTRY.' + candidateData?.country | translate) : '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Account Holder Name' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.account_holder_name || '-' }}</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>- {{ 'Cost coverage' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        <p>{{ candidateData?.cost || 0 | currency : 'EURO' : '' : '0.2' }} €</p>
                      </div>
                    </div>
                    <!-- <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Country of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.country_of_birth ? candidateData?.country_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Post code of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.post_code_of_birth ? candidateData?.post_code_of_birth : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'City of birth' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.city_of_birth ? candidateData?.city_of_birth : '-' }}</div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Nationality 2' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        : {{ candidateData?.nationality_second ? (candidateData?.nationality_second | translate) : '-' }}
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-4 no-padding">
                        <p>{{ 'Speciality' | translate }}</p>
                      </div>
                      <div class="p-col-8 no-padding">: {{ candidateData?.speciality ? candidateData?.speciality?.name : '-' }}</div>
                    </div> -->
                  </div>
                  <div class="p-col-12 no-padding">
                    <mat-checkbox [checked]="candidateData?.autorization_account" [disabled]="true">
                      {{
                        'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                          | translate
                      }}
                    </mat-checkbox>
                  </div>
                </div>
                <div class="p-grid" style="padding-top: 15px" *ngIf="candidateData?.finance === 'my_self'">
                  <p>{{ 'Payment my self' | translate }}</p>
                </div>
              </div>

              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  margin: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  -webkit-print-color-adjust: exact;
                  border-top: 1px solid black;
                  border-bottom: 1px solid black;
                "
              >
                <div class="p-grid">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Payment plan of the year' | translate }}</b>
                  </div>
                </div>
              </div>

              <div class="p-col-12 pad-ver-none">
                <div class="p-grid">
                  <div class="p-col-12 no-padding">
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate === 100 && !additionalCost">
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>{{ 'Payment Plan' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>{{ 'None' | translate }}</p>
                        </div>
                      </div>
                    </ng-container>
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate !== 100">
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>{{ 'Payment Plan' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p *ngIf="candidateData?.method_of_payment !== 'avoir'">
                            <span
                              >{{
                                candidateData?.method_of_payment
                                  ? ('method_of_payment.' + candidateData?.method_of_payment | translate)
                                  : ' '
                              }}
                              -
                              {{ candidateData?.selected_payment_plan?.times ? candidateData?.selected_payment_plan?.times : '0' }}
                              {{ 'times' | translate }}</span
                            >
                          </p>
                          <p *ngIf="candidateData?.method_of_payment === 'avoir'">
                            <span>{{ 'None' | translate }}</span>
                          </p>
                        </div>
                      </div>
                    </ng-container>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>{{ 'Scholarship fees' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ rateAmount && candidateData?.method_of_payment !== 'avoir' ? (rateAmount | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid" *ngIf="discount !== 0">
                      <div class="p-col-6 no-padding">
                        <p>{{ 'Total with discount' | translate }} ({{ discount ? discount : 0 }}%) :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>-{{ discountCalculted && candidateData?.method_of_payment !== 'avoir' ? (discountCalculted | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>{{ 'OPERATION_NAME.additional_cost' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ additionalCost && candidateData?.method_of_payment !== 'avoir' ? (additionalCost | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>{{ 'OPERATION_NAME.modality_fee' | translate }} :</p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>{{ modalityFee && candidateData?.method_of_payment !== 'avoir' ? (modalityFee | currency : 'EURO' : '' : '0.2') : '0' }} €</p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-6 no-padding">
                        <p>
                          <b>{{ 'TOTAL' | translate }} :</b>
                        </p>
                      </div>
                      <div class="p-col-6 no-padding">
                        <p>
                          <b>{{ calcTotal() && candidateData?.method_of_payment !== 'avoir' ? (calcTotal() | currency : 'EURO' : '' : '0.2') : '0' }} €</b>
                        </p>
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-12 no-padding">
                        <p>{{ 'Down payment to pay' | translate }} :</p>
                      </div>
                      <div class="p-col-8 no-padding">
                        {{
                          candidateData?.selected_payment_plan?.down_payment && candidateData?.method_of_payment !== 'avoir'
                            ? (candidateData?.selected_payment_plan?.down_payment | currency : 'EURO' : '' : '0.2')
                            : '0'
                        }}
                        €
                      </div>
                    </div>
                    <div class="p-grid">
                      <div class="p-col-12 no-padding">
                        <b>{{ 'Amount to pay after the down payment is paid' | translate }} :</b>
                      </div>
                      <div class="p-col-8 no-padding">
                        <b> {{ calcTotalToPay() && candidateData?.method_of_payment !== 'avoir' ? (calcTotalToPay() | currency : 'EURO' : '' : '0.2') : '0' }} € </b>
                      </div>
                    </div>
                    <br />
                    <ng-container *ngIf="candidateData?.registration_profile?.discount_on_full_rate !== 100 && candidateData?.method_of_payment !== 'avoir'">
                      <div class="p-grid">
                        <div class="p-col-8 no-padding">
                          <b>{{ 'Details of the terms' | translate }} :</b>
                        </div>
                        <div class="p-col-8 no-padding">
                          <p *ngFor="let pay of candidateData?.selected_payment_plan?.payment_date">
                            > {{ pay?.date }} - {{ pay?.amount ? (pay?.amount | currency : 'EURO' : '' : '0.2') : '0' }} €
                          </p>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'my_self'">
                    <div class="p-col-fixed no-padding" style="min-width: 50px">
                      <mat-icon style="transform: scale(2); margin-left: 14px; margin-top: 10px">☑</mat-icon>
                    </div>
                    <div class="p-col" style="margin-left: -25px">
                      {{
                        'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                          | translate
                      }}
                      :
                    </div>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'my_self'">
                    <p>IBAN : {{ generateIban(candidateData?.iban) }}</p>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'my_self'">
                    <p>BIC : {{ candidateData?.bic }}</p>
                    <!-- <div class="p-col-12" style="margin-left: 25px; padding-top: 0">
                    </div> -->
                  </div>
                </div>
              </div>

              <ng-container
                *ngIf="candidateData?.payment_supports && candidateData?.payment_supports.length && candidateData?.finance === 'family'"
              >
                <div
                  class="p-col-12"
                  style="
                    text-align: center;
                    background-color: #c9c9c9 !important;
                    margin: 0px;
                    padding-left: 0px;
                    padding-right: 0px;
                    -webkit-print-color-adjust: exact;
                    border-top: 1px solid black;
                    border-bottom: 1px solid black;
                  "
                >
                  <div class="p-grid">
                    <div class="p-col-12 no-padding" style="text-align: center">
                      <b>{{ 'Financial Support' | translate }}</b>
                    </div>
                  </div>
                </div>
                <div class="p-col-12 pad-ver-none" *ngFor="let supports of candidateData?.payment_supports; index as i">
                  <div class="p-grid">
                    <div class="p-col-12 no-padding">
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'Parental link' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>
                            {{ supports?.relation ? ('CARDDETAIL.RELATION.' + supports?.relation | translate) : '' }}
                          </p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'FamilyName' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>{{ supports?.family_name ? supports?.family_name : '' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'FirstName' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>{{ supports?.name ? supports?.name : '' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'E-mail' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p style="word-wrap: break-word">{{ supports?.email ? supports?.email : '-' }}</p>
                        </div>
                      </div>
                      <div class="p-grid">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'Phone number' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>{{ supports?.phone_number_indicative ? '+' + supports?.phone_number_indicative : '' }}{{ supports?.tele_phone ? supports?.tele_phone : '-' }}</p>
                        </div>
                      </div>
                      <!-- <div class="p-grid">
                        <div class="p-col-4 no-padding">
                          <p>{{ 'Relation' | translate }}</p>
                        </div>
                        <div class="p-col-8 no-padding">
                          : {{ supports?.relation ? ('CARDDETAIL.RELATION.' + supports?.relation | translate) : '' }}
                        </div>
                      </div> -->
                    </div>
                    <div class="p-col-12 no-padding">
                      <ng-container *ngIf="supports?.parent_address && supports?.parent_address.length">
                        <div class="p-grid">
                          <div class="p-col-6 no-padding">
                            <p>- {{ 'Address' | translate }} :</p>
                          </div>
                          <div class="p-col-6 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.address ? supports?.parent_address[0]?.address : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-6 no-padding">
                            <p>- {{ 'Post code' | translate }} :</p>
                          </div>
                          <div class="p-col-6 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.postal_code ? supports?.parent_address[0]?.postal_code : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-6 no-padding">
                            <p>- {{ 'City' | translate }} :</p>
                          </div>
                          <div class="p-col-6 no-padding">
                            <p>
                              {{ supports?.parent_address[0]?.city ? supports?.parent_address[0]?.city : '-' }}
                            </p>
                          </div>
                        </div>
                        <div class="p-grid">
                          <div class="p-col-6 no-padding">
                            <p>- {{ 'Country' | translate }} :</p>
                          </div>
                          <div class="p-col-6 no-padding">
                            <p>
                              {{
                                supports?.parent_address[0]?.country ? ('COUNTRY.' + supports?.parent_address[0]?.country | translate) : '-'
                              }}
                            </p>
                          </div>
                        </div>
                      </ng-container>
                      <div class="p-grid" *ngIf="candidateData.payment_splits && candidateData.payment_splits.length">
                        <div class="p-col-6 no-padding">
                          <p>- {{ 'Split of the terms' | translate }} :</p>
                        </div>
                        <div class="p-col-6 no-padding">
                          <p>{{ getSplitTerms(supports, candidateData) }}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'family'">
                    <div class="p-col-fixed no-padding" style="min-width: 50px">
                      <mat-icon style="transform: scale(2); margin-left: 14px; margin-top: 10px">☑</mat-icon>
                    </div>
                    <div class="p-col" style="margin-left: -25px">
                      {{
                        'I validate the mandate authorizing the school to present direct debit orders to the bank account indicated below'
                          | translate
                      }}
                      :
                    </div>
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'family'">
                    <p>IBAN : {{ generateIban(supports?.iban) }}</p>
                    <!-- <div class="p-col-12" style="margin-left: 25px; padding-top: 0">
                    </div> -->
                  </div>
                  <div class="p-grid" *ngIf="candidateData?.method_of_payment === 'credit_card' && candidateData?.finance === 'family'">
                    <p>BIC : {{ supports?.bic }}</p>
                    <!-- <div class="p-col-12" style="margin-left: 25px; padding-top: 0">
                    </div> -->
                  </div>
                  <hr />
                </div>
              </ng-container>
              <div
                class="p-col-12"
                style="
                  text-align: center;
                  background-color: #c9c9c9 !important;
                  margin: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  -webkit-print-color-adjust: exact;
                  border-top: 1px solid black;
                  border-bottom: 1px solid black;
                "
              >
                <div class="p-grid" *ngIf="documentOnPreviewUrl">
                  <div class="p-col-12 no-padding" style="text-align: center">
                    <b>{{ 'Conditions' | translate }}</b>
                  </div>
                </div>
              </div>
              <div class="p-col-12 pad-ver-none" style="padding: 0px">
                <div class="p-grid" *ngIf="documentOnPreviewUrl">
                  <div class="ql-editor document-parent" style="width: 100%; margin-top: 0px">
                    <ng-container>
                      <div
                        [ngStyle]="{
                          display: documentOnPreviewUrl ? 'block' : 'none'
                        }"
                        class="img-preview container-view-lanscape"
                      >
                        <iframe
                          [src]="documentOnPreviewUrl"
                          frameBorder="0"
                          style="width: 100%; min-height: 650px; border-bottom: 10px solid #646464"
                        ></iframe>
                      </div>
                    </ng-container>
                  </div>
                </div>

                <fieldset
                  [disabled]="
                    candidateData?.candidate_admission_status === 'engaged' ||
                    candidateData?.candidate_admission_status === 'registered' ||
                    isForLegalRepresentative
                  "
                >
                  <div class="p-grid">
                    <div class="p-col-12">
                      <div style="color: red; margin-left: 13px; margin-bottom: 10px">
                        {{ 'Please check this box which is valid for signing the school contract' | translate }}
                      </div>
                      <mat-checkbox style="padding-left: 15px" [formControl]="signature">{{ 'Signature' | translate }}</mat-checkbox>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12" style="text-align: end; padding-right: 11px; margin-bottom: 10px">
                      <button
                        style="margin-right: 15px"
                        [disabled]="!signature?.value"
                        color="accent"
                        mat-raised-button
                        (click)="finalValidationData()"
                        matTooltip="{{ 'Next' | translate }} "
                      >
                        <mat-icon class="mat-icon-default">save</mat-icon>
                        {{ 'Next' | translate }}
                      </button>
                    </div>
                  </div>
                </fieldset>
              </div>
              <!-- <div style="page-break-after: always; position: relative"></div> -->
              <!-- <div style="page-break-before: always; position: relative"></div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isWaitingForResponse || isLoading" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
