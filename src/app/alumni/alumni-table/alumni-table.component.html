<ms-filter-breadcrumb [filterBreadcrumbData]="filterBreadcrumbData" (removeFilterTrigger)="removeFilterBreadcrumb($event)"></ms-filter-breadcrumb>
<div class="p-grid" style="margin-bottom: 10px; font-family: firaSans !important; position: relative">
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
      <label class="float-label" *ngIf="promoYearsFilter?.value && promoYearsFilter?.value?.length !== 0">
        {{ 'ALUMNI.Promo year' | translate }}
      </label>
      <ng-select
        [items]="promotionList"
        class="custom-dropdownpanel"
        [appendTo]="'body'"
        [multiple]="true"
        notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
        placeholder="{{ 'ALUMNI.Promo year' | translate }}"
        [formControl]="promoYearsFilter"
        [clearable]="false"
        [closeOnSelect]="false"
        (close)="checkAllFilterPromoYears()"
      >
        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
          <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item | translate }}
        </ng-template>
        <ng-template ng-header-tmp *ngIf="promotionList?.length">
          <mat-checkbox
            class="all-input"
            style="cursor: pointer"
            [checked]="isAllDropdownSelected('promo')"
            [indeterminate]="isSomeDropdownSelected('promo')"
            (change)="selectAllData($event, 'promo')"
          >
            {{ 'All' | translate }}
          </mat-checkbox>
        </ng-template>
      </ng-select>
  </div>

  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="schoolsFilter?.value && schoolsFilter?.value?.length !== 0">
      {{ 'ALUMNI.School' | translate }}
    </label>
    <ng-select
      [items]="schoolsList"
      bindValue="short_name"
      bindLabel="short_name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ALUMNI.School' | translate }}"
      [formControl]="schoolsFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkAllFilterSchool()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.short_name | translate }}
      </ng-template>
      <ng-template ng-header-tmp  *ngIf="schoolsList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('school')"
          [indeterminate]="isSomeDropdownSelected('school')"
          (change)="selectAllData($event, 'school')"
        >
          {{ 'All' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>

  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="campusesFilter?.value && campusesFilter?.value?.length !== 0">
      {{ 'ALUMNI.Campus' | translate }}
    </label>
    <ng-select
      [items]="campusList"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ALUMNI.Campus' | translate }}"
      [formControl]="campusesFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkAllFilterCampus()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="campusList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('campus')"
          [indeterminate]="isSomeDropdownSelected('campus')"
          (change)="selectAllData($event, 'campus')"
        >
          {{ 'All' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="sectorsFilter?.value && sectorsFilter?.value?.length !== 0">
      {{ 'ALUMNI.Sector' | translate }}
    </label>
    <ng-select
      [items]="sectorList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ALUMNI.Sector' | translate }}"
      [formControl]="sectorsFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkAllFilterSector()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="sectorList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('sector')"
          [indeterminate]="isSomeDropdownSelected('sector')"
          (change)="selectAllData($event, 'sector')"
        >
          {{ 'All' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 180px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="specialitiesFilter?.value && specialitiesFilter?.value?.length !== 0">
      {{ 'ALUMNI.Speciality' | translate }}
    </label>
    <ng-select
      [items]="specilityList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ALUMNI.Speciality' | translate }}"
      [formControl]="specialitiesFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkAllFilterSpeciality()"
    >
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="specilityList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('speciality')"
          [indeterminate]="isSomeDropdownSelected('speciality')"
          (change)="selectAllData($event, 'speciality')"
        >
          {{ 'All' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed" style="float: left; padding-right: 15px !important; margin-top: 2px !important">
    <button
      mat-button
      mat-raised-button
      color="accent"
      [disabled]="
        (!promoYearsFilter?.value?.length &&
          !schoolsFilter?.value?.length &&
          !campusesFilter?.value?.length &&
          !sectorsFilter?.value?.length &&
          !specialitiesFilter?.value?.length) ||
        isLoading ||
        checkCurrentSuperFilterValue()
      "
      (click)="applySuperFilter()"
    >
      {{ 'Apply Filter' | translate }}
    </button>
  </div>
</div>
<div class="horizontal header-button header-action">
  <div class="text-right" style="display: inline-block; float: right">
    <button matTooltip="{{ 'Action' | translate }} " mat-raised-button color="accent" [matMenuTriggerFor]="action" [disabled]="isLoading">
      {{ 'Action' | translate }}
      <mat-icon>expand_more</mat-icon>
    </button>
    <mat-menu #action="matMenu" class="action-dropdown-button-above-table">
      <button
        mat-menu-item
        (click)="buttonClicked = 'survey'; controllerButton('survey')"
        matTooltip="{{ 'ALUMNI.Send survey' | translate }} "
        *ngIf="permission.sendSurveyMultipleAlumniFollowUpPerm()"
      >
        <!-- <mat-icon svgIcon="form-select" class="mat-icon-svgIcon icon-svgIcon-menu"></mat-icon> -->
        {{ 'ALUMNI.Send survey' | translate }}
      </button>
    </mat-menu>
    <button
      class="text-right"
      [disabled]="isLoading"
      mat-raised-button
      color="primary"
      matTooltip="{{ 'ALUMNI.Export' | translate }} "
      (click)="buttonClicked = 'export'; controllerButton('export')"
      *ngIf="permission.exportAlumniFollowUpPerm()"
    >
      <mat-icon svgIcon="file-excel-outline" class="mat-icon-svgIcon"></mat-icon>
      {{ 'ALUMNI.Export' | translate }}
    </button>
    <button
      class="text-right"
      [disabled]="isLoading"
      mat-raised-button
      (click)="resetTable()"
      color="primary"
      matTooltip="{{ 'ALUMNI.Reset' | translate }}"
      *ngIf="permission.resetAlumniFollowUpPerm()"
    >
      <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
      {{ 'ALUMNI.Reset' | translate }}
    </button>
  </div>
  <div class="btn-left action-filter">
    <div class="p-col-fixed no-padding text-info" style="width: auto; float: left; padding-right: 15px !important">
      <span>{{ 'ALUMNI.Filter on last sent survey' | translate }}</span>
    </div>

    <div class="p-col-fixed no-padding" style="width: 290px; float: left; padding-right: 15px !important">
      <ng-select
        class="mrgn-btn custom-ngselect-contentspace"
        [appendTo]="'body'"
        [multiple]="false"
        placeholder="{{ 'ALUMNI.Last sent survey' | translate }}"
        [formControl]="lastSentSurveyFilter"
      >
        <ng-option value="three_month">{{ 'ALUMNI.3 Month and more' | translate }}</ng-option>
        <ng-option value="six_month">{{ 'ALUMNI.6 Month and more' | translate }}</ng-option>
        <ng-option value="nine_month">{{ 'ALUMNI.9 Month and more' | translate }}</ng-option>
        <ng-option value="one_year">{{ 'ALUMNI.1 Year and more' | translate }}</ng-option>
      </ng-select>
    </div>
  </div>
</div>

<div class="horizontal mat-elevation-z8 finance-table" style="font-family: 'firaSans' !important">
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="sortData($event)"
    class="mat-elevation-z8"
    style="font-family: 'firaSans'"
  >
    <ng-container matColumnDef="select" sticky>
      <th mat-header-cell *matHeaderCellDef class="text-center">
        <mat-checkbox
          (change)="$event ? masterToggle() : null"
          (change)="showOptions('all', '')"
          [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
          [indeterminate]="selection.hasValue() && !isAllSelected()"
          [aria-label]="checkboxLabel()"
        >
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row" class="text-center">
        <mat-checkbox
          (click)="$event.stopPropagation()"
          (change)="$event ? selection.toggle(row._id) : null"
          [checked]="selection.isSelected(row?._id) || (isCheckedAll && !dataUnselectUser.includes(row?._id))"
          (change)="showOptions('one', row)"
          [aria-label]="checkboxLabel(row)"
        >
        </mat-checkbox>
      </td>
    </ng-container>

    <ng-container matColumnDef="lastNameFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <mat-form-field>
          <input matInput class="form-field" [formControl]="familyNameFilter" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="usedLastNameFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <mat-form-field>
          <input matInput class="form-field" [formControl]="usedFamilyNameFilter" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="firstNameFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <mat-form-field>
          <input matInput class="form-field" [formControl]="nameFilter" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>
    <ng-container matColumnDef="promoYearFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="promoYearFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let promo of promotionList" [value]="promo">
            {{ promo }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="schoolFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="schoolFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let school of schoolsList" [value]="school._id">
            {{ school.short_name }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="campusFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="campusFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let campus of campusList" [value]="campus?._id">
            {{ campus?.short_name }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="sectorFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="sectorFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let sector of sectorList" [value]="sector._id">
            {{ sector.name }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="specialityFilter" sticky>
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="specialityFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let spec of specilityList" [value]="spec._id">
            {{ spec.name }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="rncpFilter" sticky>
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input matInput class="form-field" [formControl]="rncpFilter" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>
    <ng-container matColumnDef="cityFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="cityFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let city of cityList" [value]="city">
            {{ city }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="countryFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="countryFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let country of countryList" [value]="country">
            {{ country }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="professionalStatusFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="professionalStatusFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let proStat of profesionalStatusList" [value]="proStat">
            {{ 'ALUMNI.' + proStat | translate }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="companyFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="companyFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let company of companyList" [value]="company">
            {{ company }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="activitySectorFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="jobNameFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="lastSurveySentFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important">
        <mat-form-field class="example-full-width" style="margin-top: 5px">
          <input matInput (click)="picker.open()" [formControl]="updateDateFilter" [matDatepicker]="picker" placeholder="Date" readonly />
          <mat-datepicker-toggle matSuffix [for]="picker" style="margin-right: 5px"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="lastSurveyCompletedFilter">
      <th mat-header-cell *matHeaderCellDef style="padding-left: 8px !important; padding-right: 8px !important; padding-top: 6px">
        <mat-form-field *ngIf="isDisplaySurveyCompletedFilter">
          <mat-select [formControl]="lastSurveyCompletedFilter" panelClass="custom-matselect-dropdown">
            <mat-option [value]="record.value" *ngFor="let record of lastSurveyCompletedList">{{ record.survey | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="sentByFilter">
      <th mat-header-cell *matHeaderCellDef>
        <ng-select
          class="dropdown margin custom-ngselect-contentspace"
          [appendTo]="'body'"
          [multiple]="false"
          [clearable]="false"
          placeholder="{{ 'search' | translate }}"
          [formControl]="sentByFilter"
          clear
        >
          <ng-option value="All">{{ 'AllS' | translate }}</ng-option>
          <ng-option *ngFor="let sender of surveySender" [value]="sender._id">
            {{ sender.last_name | uppercase }} {{ sender.first_name }}
            {{ sender.civility && sender.civility === 'neutral' ? '' : (sender.civility | translate) }}
          </ng-option>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="emailStatusFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="actionFilter" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="selectFilter" sticky>
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="lastName" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Last name' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; font-weight: 500; text-align: center !important" mat-sort-header="family_name">
          {{ 'ALUMNI.Last name' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        class="pad-l-xs"
        style="padding-left: 8px !important"
        [matTooltip]="element?.last_name | uppercase"
      >
        {{ element?.last_name | uppercase }}
      </td>
    </ng-container>

    <ng-container matColumnDef="usedLastName" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Used last name' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; font-weight: 500; text-align: center !important" mat-sort-header="used_family_name">
          {{ 'ALUMNI.Used last name' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        class="pad-l-xs"
        style="padding-left: 8px !important"
        [matTooltip]="element?.used_last_name | uppercase"
      >
        {{ element?.used_last_name | uppercase }}
      </td>
    </ng-container>

    <ng-container matColumnDef="firstName" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.First name' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; font-weight: 500; text-align: center !important" mat-sort-header="first_name">
          {{ 'ALUMNI.First name' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" style="text-align: center !important" [matTooltip]="element?.first_name">
        {{ element?.first_name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="promoYear" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Promo year' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px" mat-sort-header="promo_year">{{ 'ALUMNI.Promo year' | translate }}</h5>
      </th>

      <td mat-cell *matCellDef="let element" class="pad-l-xs" [matTooltip]="element?.promo_year">
        {{ element?.promo_year }}
      </td>
    </ng-container>

    <ng-container matColumnDef="school" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip=" {{ 'ALUMNI.School' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px" mat-sort-header="school">
          {{ 'ALUMNI.School' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element?.school?.short_name | translate" class="pad-l-xs">
        {{ element?.school?.short_name | translate }}
      </td>
    </ng-container>

    <ng-container matColumnDef="campus" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Campus' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px" mat-sort-header="campus">
          {{ 'ALUMNI.Campus' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element?.campus?.name" class="pad-l-xs">
        {{ element?.campus?.name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="sector" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Sector' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; text-align: center; padding: 0px !important; font-weight: 500" mat-sort-header="sector">
          {{ 'ALUMNI.Sector' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element?.sector?.name" class="pad-l-xs">
        {{ element?.sector?.name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="speciality" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Speciality' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; text-align: center; padding: 0px !important; font-weight: 500" mat-sort-header="speciality">
          {{ 'ALUMNI.Speciality' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="element?.speciality?.name | translate"
        class="pad-l-xs"
        style="padding-left: 8px !important"
      >
        {{ element?.speciality?.name | translate }}
      </td>
    </ng-container>

    <ng-container matColumnDef="rncp" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.RNCP/Diploma' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; text-align: center; padding: 0px !important; font-weight: 500" mat-sort-header="rncp_title">
          {{ 'ALUMNI.RNCP/Diploma' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="element?.rncp_title | translate"
        class="pad-l-xs"
        style="padding-left: 8px !important"
      >
        {{ element?.rncp_title | translate }}
      </td>
    </ng-container>

    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.City' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important" mat-sort-header="city">
          {{ 'ALUMNI.City' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element?.city | translate" class="pad-l-xs">
        {{ element?.city }}
      </td>
    </ng-container>

    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Country' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important" mat-sort-header="country">
          {{ 'ALUMNI.Country' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element?.country | translate" class="pad-l-xs">
        {{ element?.country }}
      </td>
    </ng-container>

    <ng-container matColumnDef="professionalStatus">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Professional status' | translate }}" matTooltipPosition="above">
        <h5
          style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important"
          mat-sort-header="professional_status"
        >
          {{ 'ALUMNI.Professional status' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" matTooltip="{{ 'ALUMNI.' + element?.professional_status | translate }}">
        <mat-icon
          *ngIf="element?.professional_status"
          matTooltipPosition="above"
          [ngClass]="{
            red:
              element?.professional_status === 'Sans activité' ||
              element?.professional_status === 'Sans Activité' ||
              element?.professional_status === 'unemployed',
            green: element?.professional_status === 'En poste' || element?.professional_status === 'employed',
            black:
              element?.company &&
              element?.professional_status !== 'Sans activité' &&
              element?.professional_status !== 'En poste' &&
              element?.professional_status !== 'En Poste' &&
              element?.professional_status !== 'unemployed' &&
              element?.professional_status !== 'employed' &&
              element?.professional_status !== 'Sans Activité'
          }"
          class="green icon-status"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="company">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Company' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500" mat-sort-header="company">
          {{ 'ALUMNI.Company' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" style="padding-left: 8px !important" [matTooltip]="element?.company">
        {{ element?.company }}
      </td>
    </ng-container>

    <ng-container matColumnDef="activitySector">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Activity sector' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important" mat-sort-header="activity_sector">
          {{ 'ALUMNI.Activity sector' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" [matTooltip]="element?.activity_sector">
        {{ element?.activity_sector }}
      </td>
    </ng-container>

    <ng-container matColumnDef="jobName">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'ALUMNI.Job name' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important" mat-sort-header="job_name">
          {{ 'ALUMNI.Job name' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" [matTooltip]="element?.job_name">
        {{ element?.job_name }}
      </td>
    </ng-container>

    <ng-container matColumnDef="lastSurveySent">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'ALUMNI.Last sent survey' | translate }}"
        matTooltipPosition="above"
      >
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important" mat-sort-header="last_survey_sent">
          {{ 'ALUMNI.Last sent survey' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" [matTooltip]="element?.last_survey_sent?.date">
        {{ element?.last_survey_sent?.date }}
      </td>
    </ng-container>

    <ng-container matColumnDef="lastSurveyCompleted">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'ALUMNI.Last survey completed' | translate }}"
        matTooltipPosition="above"
      >
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500; text-align: center !important">
          {{ 'ALUMNI.Last survey completed' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        class="pad-l-xs"
        [matTooltip]="element?.last_survey_completed ? ('Yes' | translate) : ('No' | translate)"
      >
        <mat-icon
          matTooltipPosition="above"
          [ngClass]="{
            red: element?.last_survey_completed === false,
            green: element?.last_survey_completed === true
          }"
          class="green icon-status"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="sentBy">
      <th mat-header-cell *matHeaderCellDef="let element" matTooltip="{{ 'ALUMNI.Sent by' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; text-align: center !important" mat-sort-header="sent_by">{{ 'ALUMNI.Sent by' | translate }}</h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        class="pad-l-xs"
        matTooltip="{{ element?.sent_by?.last_name | uppercase }} {{ element?.sent_by?.first_name }} {{
          element?.sent_by?.civility && element?.sent_by?.civility === 'neutral' ? '' : (element?.sent_by?.civility | translate)
        }}"
      >
        {{ element?.sent_by?.last_name | uppercase }} {{ element?.sent_by?.first_name }}
        {{ element?.sent_by?.civility && element?.sent_by?.civility === 'neutral' ? '' : (element?.sent_by?.civility | translate) }}
      </td>
    </ng-container>

    <ng-container matColumnDef="emailStatus">
      <th mat-header-cell *matHeaderCellDef="let element" matTooltip="{{ 'ALUMNI.Email status' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px; text-align: center !important" mat-sort-header="email_status">
          {{ 'ALUMNI.Email status' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs"></td>
    </ng-container>

    <ng-container matColumnDef="action" stickyEnd>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Action' | translate }}" matTooltipPosition="above">
        <h5 style="font-size: 11px">
          {{ 'Action' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <button
          mat-icon-button
          class="margin-right-button"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          (click)="internshipMailDialog(element)"
          matTooltip="{{ 'ALUMNI.Send email' | translate }}"
          *ngIf="permission.sendEmailAlumniFollowUpPerm()"
        >
          <mat-icon> send </mat-icon>
        </button>

        <button
          mat-icon-button
          class="margin-right-button"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          (click)="sendSurvey(element?._id)"
          matTooltip="{{ 'ALUMNI.Send survey' | translate }}"
          *ngIf="permission.sendSurveyAlumniFollowUpPerm()"
        >
          <mat-icon svgIcon="form-select"> </mat-icon>
        </button>
        <!-- <button
          mat-icon-button
          class="margin-right-button"
          (click)="viewProfileInfo(element?._id, 'information-tab')"
          matTooltip="{{ 'Edit  Alumni' | translate }}"
        >
          <mat-icon svgIcon="pencil"> </mat-icon>
        </button> -->
        <button
          mat-icon-button
          class="margin-right-button"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          (click)="viewProfileInfo(element?._id, 'respondant-tab')"
          matTooltip="{{ 'ALUMNI.View alumni card' | translate }}"
          *ngIf="permission.viewAlumniFollowUpPerm()"
        >
          <mat-icon svgIcon="eye"> </mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="loading">
      <th mat-header-cell *matHeaderCellDef colspan="26" style="text-align: center !important">
        <div class="center-spinner">
          <mat-spinner color="accent"></mat-spinner>
        </div>
      </th>
    </ng-container>

    <!-- <tr mat-header-row *matHeaderRowDef="['reset']"></tr> -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="filterColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isLoading"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
  </table>
</div>
<div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isLoading }">
  {{ 'NOT RECORD FOUND' | translate }}
</div>

<div class="horizontal" style="margin-bottom: 40px">
  <div [ngClass]="{ hide: noData | async }">
    <mat-paginator
      [ngClass]="{ 'hide-pagination-buttons': paginator.length <= 10 }"
      [hidePageSize]="true"
      [pageSize]="[10]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
