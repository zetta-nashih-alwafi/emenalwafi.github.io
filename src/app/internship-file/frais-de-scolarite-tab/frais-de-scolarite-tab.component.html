<div class="p-grid top-space">
  <div class="p-col-12 no-padding">
    <h4>{{ 'Student status' | translate }}</h4>
  </div>
</div>

<div class="p-grid">
  <div class="p-col-12 no-padding">
    <div class="card admtc-black">
      <div class="card-header">{{ 'Amount Billed' | translate }}</div>
    </div>
    <div class="card admtc-black">
      <div class="card-header">{{ 'Amount Paid' | translate }}</div>
    </div>
    <div class="card admtc-black">
      <div class="card-header">{{ 'Remaining Due' | translate }}</div>
    </div>
    <div class="card admtc-black">
      <div class="card-header">{{ 'Amount Late' | translate }}</div>
    </div>
    <div class="card admtc-black">
      <div class="card-header">{{ 'Accumultated Late (d)' | translate }}</div>
    </div>
    <div class="card admtc-grey">
      <div class="card-header">
        <mat-icon
          svgIcon="credit-card-check"
          matTooltip="{{ 'Deposit' | translate }}"
          style="margin-top: 0px !important"
          class="mat-icon-svgIcon"
        >
          credit-card-check
        </mat-icon>
      </div>
    </div>
    <div class="card admtc-grey">
      <div class="card-header">{{ 'Terms Not respected' | translate }}</div>
    </div>
    <div class="card admtc-grey">
      <div class="card-header">{{ 'Terms Not Respected & till not Settled up today' | translate }}</div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-1-box" class="mat-icon-svgIcon"> numeric-1-box </mat-icon>
        <span class="date-term">{{ 'Oct' | translate }}</span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-2-box" class="mat-icon-svgIcon"> numeric-2-box </mat-icon>
        <span class="date-term">{{ 'Nov' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-3-box" class="mat-icon-svgIcon"> numeric-3-box </mat-icon>
        <span class="date-term">{{ 'Dec' | translate }}</span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-4-box" class="mat-icon-svgIcon"> numeric-4-box </mat-icon>
        <span class="date-term">{{ 'Jan' | translate }}</span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-5-box" class="mat-icon-svgIcon"> numeric-5-box </mat-icon>
        <span class="date-term">{{ 'Feb' | translate }}</span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-6-box" class="mat-icon-svgIcon"> numeric-6-box </mat-icon>
        <span class="date-term">{{ 'March' | translate }}</span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-7-box" class="mat-icon-svgIcon"> numeric-7-box </mat-icon>
        <span class="date-term">{{ 'April' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-8-box" class="mat-icon-svgIcon"> numeric-8-box </mat-icon>
        <span class="date-term">{{ 'May' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon svgIcon="numeric-9-box" class="mat-icon-svgIcon"> numeric-9-box </mat-icon>
        <span class="date-term">{{ 'June' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header">
        <mat-icon class="mat-icon-svgIcon" style="margin-top: -15px !important">
          <svg style="width: 16px; height: 16px" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M14,9H16V15H14V9M21,5V19C21,20.11 20.11,21 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19C20.11,3 21,3.9 21,5M10,7H6V9H8V17H10V7M18,9A2,2 0 0,0 16,7H14A2,2 0 0,0 12,9V15C12,16.11 12.9,17 14,17H16C17.11,17 18,16.11 18,15V9Z"
            />
          </svg>
        </mat-icon>
        <span class="date-term">{{ 'July' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header" style="margin-top: -1px !important">
        <span class="box-outline">11</span>
        <span class="date-term" style="margin-top: 3px">{{ 'Aug' | translate }} </span>
      </div>
    </div>
    <div class="card admtc-grey" style="min-width: 50px">
      <div class="card-header" style="margin-top: -1px !important">
        <span class="box-outline">12</span>
        <span class="date-term" style="margin-top: 3px">{{ 'Sept' | translate }} </span>
      </div>
    </div>
  </div>

  <div class="p-col-12 no-padding">
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.amount_billed ? formatCurrency(studentBilling?.billing_id?.amount_billed) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.amount_paid ? formatCurrency(studentBilling?.billing_id?.amount_paid) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.remaining_billed ? formatCurrency(studentBilling?.billing_id?.remaining_billed) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.amount_late ? formatCurrency(studentBilling?.billing_id?.amount_late) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.accumulated_late ? studentBilling?.billing_id?.accumulated_late : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.deposit ? formatCurrency(studentBilling?.billing_id?.deposit) : '' }}
          <mat-icon
            matTooltipPosition="above"
            [ngClass]="{
              red: !studentBilling?.billing_id?.is_deposit_completed,
              green: studentBilling?.billing_id?.is_deposit_completed
            }"
            class="green icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.overdue ? formatCurrency(studentBilling?.billing_id?.overdue) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table">
      <div class="card-body">
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
        >
          {{ studentBilling?.billing_id?.overdue_not_paid ? formatCurrency(studentBilling?.billing_id?.overdue_not_paid) : '' }}
        </ng-container>
        <ng-container
          *ngIf="
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
        >
          <span style="color: #b7b7b7"> X </span>
        </ng-container>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_1 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_1?.term_pay_amount && studentBilling?.terms_1?.term_pay_amount !== studentBilling?.terms_1?.term_amount
                ? formatCurrency(studentBilling?.terms_1?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_1?.term_pay_amount &&
                studentBilling?.terms_1?.term_pay_amount !== studentBilling?.terms_1?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >
          <span
            *ngIf="
              !studentBilling?.terms_1?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_1?.term_amount)
                ? formatCurrency(studentBilling?.terms_1?.term_amount)
                : (studentBilling?.terms_1?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_1?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_1?.term_amount - studentBilling?.terms_1?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_1?.term_amount - studentBilling?.terms_1?.term_pay_amount)
                : (studentBilling?.terms_1?.term_amount - studentBilling?.terms_1?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_1?.is_term_paid &&
              !studentBilling?.terms_1?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            matTooltipPosition="above"
            class="icon-status green"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/10/' + year) && !studentBilling?.terms_1?.is_term_paid && studentBilling?.terms_1?.term_amount) ||
              (studentBilling?.terms_1?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_1) && studentBilling?.terms_1?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_1) ||
            !studentBilling?.terms_1?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_2 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_2?.term_pay_amount && studentBilling?.terms_2?.term_pay_amount !== studentBilling?.terms_2?.term_amount
                ? formatCurrency(studentBilling?.terms_2?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_2?.term_pay_amount &&
                studentBilling?.terms_2?.term_pay_amount !== studentBilling?.terms_2?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >
          <span
            *ngIf="
              !studentBilling?.terms_2?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_2?.term_amount)
                ? formatCurrency(studentBilling?.terms_2?.term_amount)
                : (studentBilling?.terms_2?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_2?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_2?.term_amount - studentBilling?.terms_2?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_2?.term_amount - studentBilling?.terms_2?.term_pay_amount)
                : (studentBilling?.terms_2?.term_amount - studentBilling?.terms_2?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_2?.is_term_paid &&
              !studentBilling?.terms_2?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            matTooltipPosition="above"
            class="icon-status green"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('30/11/' + year) && !studentBilling?.terms_2?.is_term_paid && studentBilling?.terms_2?.term_amount) ||
              (studentBilling?.terms_2?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_2) && studentBilling?.terms_2?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_2) ||
            !studentBilling?.terms_2?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_3 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_3?.term_pay_amount && studentBilling?.terms_3?.term_pay_amount !== studentBilling?.terms_3?.term_amount
                ? formatCurrency(studentBilling?.terms_3?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_3?.term_pay_amount &&
                studentBilling?.terms_3?.term_pay_amount !== studentBilling?.terms_3?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >
          <span
            *ngIf="
              !studentBilling?.terms_3?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_3?.term_amount)
                ? formatCurrency(studentBilling?.terms_3?.term_amount)
                : (studentBilling?.terms_3?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_3?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_3?.term_amount - studentBilling?.terms_3?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_3?.term_amount - studentBilling?.terms_3?.term_pay_amount)
                : (studentBilling?.terms_3?.term_amount - studentBilling?.terms_3?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_3?.is_term_paid &&
              !studentBilling?.terms_3?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            matTooltipPosition="above"
            class="icon-status green"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/12/' + year) && !studentBilling?.terms_3?.is_term_paid && studentBilling?.terms_3?.term_amount) ||
              (studentBilling?.terms_3?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_3) && studentBilling?.terms_3?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_3) ||
            !studentBilling?.terms_3?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_4 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_4?.term_pay_amount && studentBilling?.terms_4?.term_pay_amount !== studentBilling?.terms_4?.term_amount
                ? formatCurrency(studentBilling?.terms_4?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_4?.term_pay_amount &&
                studentBilling?.terms_4?.term_pay_amount !== studentBilling?.terms_4?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_4?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_4?.term_amount)
                ? formatCurrency(studentBilling?.terms_4?.term_amount)
                : (studentBilling?.terms_4?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_4?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_4?.term_amount - studentBilling?.terms_4?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_4?.term_amount - studentBilling?.terms_4?.term_pay_amount)
                : (studentBilling?.terms_4?.term_amount - studentBilling?.terms_4?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_4?.is_term_paid &&
              !studentBilling?.terms_4?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            matTooltipPosition="above"
            class="icon-status green"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/01/' + yearPlusOne) &&
                !studentBilling?.terms_4?.is_term_paid &&
                studentBilling?.terms_4?.term_amount) ||
              (studentBilling?.terms_4?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_4) && studentBilling?.terms_4?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_4) ||
            !studentBilling?.terms_4?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_5 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_5?.term_pay_amount && studentBilling?.terms_5?.term_pay_amount !== studentBilling?.terms_5?.term_amount
                ? formatCurrency(studentBilling?.terms_5?.term_pay_amount)
                : ''
            }}

            <mat-icon
              *ngIf="
                studentBilling?.terms_5?.term_pay_amount &&
                studentBilling?.terms_5?.term_pay_amount !== studentBilling?.terms_5?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon>
          </span>
          <span
            *ngIf="
              !studentBilling?.terms_5?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_5?.term_amount)
                ? formatCurrency(studentBilling?.terms_5?.term_amount)
                : (studentBilling?.terms_5?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_5?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_5?.term_amount - studentBilling?.terms_5?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_5?.term_amount - studentBilling?.terms_5?.term_pay_amount)
                : (studentBilling?.terms_5?.term_amount - studentBilling?.terms_5?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_5?.is_term_paid &&
              !studentBilling?.terms_5?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            matTooltipPosition="above"
            class="icon-status green"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('28/02/' + yearPlusOne) &&
                !studentBilling?.terms_5?.is_term_paid &&
                studentBilling?.terms_5?.term_amount) ||
              (studentBilling?.terms_5?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_5) && studentBilling?.terms_5?.term_payment_deferment?.date
            }"
            aria-hidden="true"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_5) ||
            !studentBilling?.terms_5?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_6 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_6?.term_pay_amount && studentBilling?.terms_6?.term_pay_amount !== studentBilling?.terms_6?.term_amount
                ? formatCurrency(studentBilling?.terms_6?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_6?.term_pay_amount &&
                studentBilling?.terms_6?.term_pay_amount !== studentBilling?.terms_6?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_6?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_6?.term_amount)
                ? formatCurrency(studentBilling?.terms_6?.term_amount)
                : (studentBilling?.terms_6?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_6?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_6?.term_amount - studentBilling?.terms_6?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_6?.term_amount - studentBilling?.terms_6?.term_pay_amount)
                : (studentBilling?.terms_6?.term_amount - studentBilling?.terms_6?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_6?.is_term_paid &&
              !studentBilling?.terms_6?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_6?.term_amount !== studentBilling?.terms_6?.term_pay_amount,
              green: studentBilling?.terms_6?.term_amount === studentBilling?.terms_6?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/03/' + yearPlusOne) &&
                !studentBilling?.terms_6?.is_term_paid &&
                studentBilling?.terms_6?.term_amount) ||
              (studentBilling?.terms_6?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_6) && studentBilling?.terms_6?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_6) ||
            !studentBilling?.terms_6?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_7 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_7?.term_pay_amount && studentBilling?.terms_7?.term_pay_amount !== studentBilling?.terms_7?.term_amount
                ? formatCurrency(studentBilling?.terms_7?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_7?.term_pay_amount &&
                studentBilling?.terms_7?.term_pay_amount !== studentBilling?.terms_7?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_7?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_7?.term_amount)
                ? formatCurrency(studentBilling?.terms_7?.term_amount)
                : (studentBilling?.terms_7?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_7?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_7?.term_amount - studentBilling?.terms_7?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_7?.term_amount - studentBilling?.terms_7?.term_pay_amount)
                : (studentBilling?.terms_7?.term_amount - studentBilling?.terms_7?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_7?.is_term_paid &&
              !studentBilling?.terms_7?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_7?.term_amount !== studentBilling?.terms_7?.term_pay_amount,
              green: studentBilling?.terms_7?.term_amount === studentBilling?.terms_7?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('30/04/' + yearPlusOne) &&
                !studentBilling?.terms_7?.is_term_paid &&
                studentBilling?.terms_7?.term_amount) ||
              (studentBilling?.terms_7?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_7) && studentBilling?.terms_7?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_7) ||
            !studentBilling?.terms_7?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_8 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_8?.term_pay_amount && studentBilling?.terms_8?.term_pay_amount !== studentBilling?.terms_8?.term_amount
                ? formatCurrency(studentBilling?.terms_8?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_8?.term_pay_amount &&
                studentBilling?.terms_8?.term_pay_amount !== studentBilling?.terms_8?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_8?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_8?.term_amount)
                ? formatCurrency(studentBilling?.terms_8?.term_amount)
                : (studentBilling?.terms_8?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_8?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_8?.term_amount - studentBilling?.terms_8?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_8?.term_amount - studentBilling?.terms_8?.term_pay_amount)
                : (studentBilling?.terms_8?.term_amount - studentBilling?.terms_8?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_8?.is_term_paid &&
              !studentBilling?.terms_8?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_8?.term_amount !== studentBilling?.terms_8?.term_pay_amount,
              green: studentBilling?.terms_8?.term_amount === studentBilling?.terms_8?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/05/' + yearPlusOne) &&
                !studentBilling?.terms_8?.is_term_paid &&
                studentBilling?.terms_8?.term_amount) ||
              (studentBilling?.terms_8?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_8) && studentBilling?.terms_8?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_8) ||
            !studentBilling?.terms_8?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_9 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_9?.term_pay_amount && studentBilling?.terms_9?.term_pay_amount !== studentBilling?.terms_9?.term_amount
                ? formatCurrency(studentBilling?.terms_9?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_9?.term_pay_amount &&
                studentBilling?.terms_9?.term_pay_amount !== studentBilling?.terms_9?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_9?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_9?.term_amount)
                ? formatCurrency(studentBilling?.terms_9?.term_amount)
                : (studentBilling?.terms_9?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_9?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_9?.term_amount - studentBilling?.terms_9?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_9?.term_amount - studentBilling?.terms_9?.term_pay_amount)
                : (studentBilling?.terms_9?.term_amount - studentBilling?.terms_9?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_9?.is_term_paid &&
              !studentBilling?.terms_9?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_9?.term_amount !== studentBilling?.terms_9?.term_pay_amount,
              green: studentBilling?.terms_9?.term_amount === studentBilling?.terms_9?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('30/06/' + yearPlusOne) &&
                !studentBilling?.terms_9?.is_term_paid &&
                studentBilling?.terms_9?.term_amount) ||
              (studentBilling?.terms_9?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_9) && studentBilling?.terms_9?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_9) ||
            !studentBilling?.terms_9?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_10 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_10?.term_pay_amount &&
              studentBilling?.terms_10?.term_pay_amount !== studentBilling?.terms_10?.term_amount
                ? formatCurrency(studentBilling?.terms_10?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_10?.term_pay_amount &&
                studentBilling?.terms_10?.term_pay_amount !== studentBilling?.terms_10?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_10?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_10?.term_amount)
                ? formatCurrency(studentBilling?.terms_10?.term_amount)
                : (studentBilling?.terms_10?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_10?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_10?.term_amount - studentBilling?.terms_10?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_10?.term_amount - studentBilling?.terms_10?.term_pay_amount)
                : (studentBilling?.terms_10?.term_amount - studentBilling?.terms_10?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_10?.is_term_paid &&
              !studentBilling?.terms_10?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_10?.term_amount !== studentBilling?.terms_10?.term_pay_amount,
              green: studentBilling?.terms_10?.term_amount === studentBilling?.terms_10?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/07/' + yearPlusOne) &&
                !studentBilling?.terms_10?.is_term_paid &&
                studentBilling?.terms_10?.term_amount) ||
              (studentBilling?.terms_10?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_10) && studentBilling?.terms_10?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_10) ||
            !studentBilling?.terms_10?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_11 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_11?.term_pay_amount &&
              studentBilling?.terms_11?.term_pay_amount !== studentBilling?.terms_11?.term_amount
                ? formatCurrency(studentBilling?.terms_11?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_11?.term_pay_amount &&
                studentBilling?.terms_11?.term_pay_amount !== studentBilling?.terms_11?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_11?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_11?.term_amount)
                ? formatCurrency(studentBilling?.terms_11?.term_amount)
                : (studentBilling?.terms_11?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_11?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_11?.term_amount - studentBilling?.terms_11?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_11?.term_amount - studentBilling?.terms_11?.term_pay_amount)
                : (studentBilling?.terms_11?.term_amount - studentBilling?.terms_11?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_11?.is_term_paid &&
              !studentBilling?.terms_11?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_11?.term_amount !== studentBilling?.terms_11?.term_pay_amount,
              green: studentBilling?.terms_11?.term_amount === studentBilling?.terms_11?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('31/08/' + yearPlusOne) &&
                !studentBilling?.terms_11?.is_term_paid &&
                studentBilling?.terms_11?.term_amount) ||
              (studentBilling?.terms_11?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_11) && studentBilling?.terms_11?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_11) ||
            !studentBilling?.terms_11?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
    <div class="card admtc-table" style="min-width: 50px">
      <div class="card-body">
        <div
          *ngIf="
            studentBilling &&
            studentBilling?.terms_12 &&
            studentBilling?.candidate_admission_status !== 'admitted' &&
            studentBilling?.candidate_admission_status !== 'admission_in_progress'
          "
          style="text-align: end; margin-right: 4px"
        >
          <span class="date-terms"
            >{{
              studentBilling?.terms_12?.term_pay_amount &&
              studentBilling?.terms_12?.term_pay_amount !== studentBilling?.terms_12?.term_amount
                ? formatCurrency(studentBilling?.terms_12?.term_pay_amount)
                : ''
            }}
            <mat-icon
              *ngIf="
                studentBilling?.terms_12?.term_pay_amount &&
                studentBilling?.terms_12?.term_pay_amount !== studentBilling?.terms_12?.term_amount &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress'
              "
              matTooltipPosition="above"
              class="icon-status green"
              aria-hidden="true"
              >lens
            </mat-icon></span
          >

          <span
            *ngIf="
              !studentBilling?.terms_12?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_12?.term_amount)
                ? formatCurrency(studentBilling?.terms_12?.term_amount)
                : (studentBilling?.terms_12?.term_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <span
            *ngIf="
              studentBilling?.terms_12?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            >{{
              checkIsNumber(studentBilling?.terms_12?.term_amount - studentBilling?.terms_12?.term_pay_amount)
                ? formatCurrency(studentBilling?.terms_12?.term_amount - studentBilling?.terms_12?.term_pay_amount)
                : (studentBilling?.terms_12?.term_amount - studentBilling?.terms_12?.term_pay_amount | currency: 'EURO':'':'0.2')
            }}
          </span>
          <mat-icon
            *ngIf="
              studentBilling?.terms_12?.is_term_paid &&
              !studentBilling?.terms_12?.is_partial &&
              studentBilling?.candidate_admission_status !== 'admitted' &&
              studentBilling?.candidate_admission_status !== 'admission_in_progress'
            "
            [ngClass]="{
              orange: studentBilling?.terms_12?.term_amount !== studentBilling?.terms_12?.term_pay_amount,
              green: studentBilling?.terms_12?.term_amount === studentBilling?.terms_12?.term_pay_amount
            }"
            matTooltipPosition="above"
            class="icon-status"
            aria-hidden="true"
            >lens
          </mat-icon>
          <mat-icon
            *ngIf="
              (checkPaymentLate('30/09/' + yearPlusOne) &&
                !studentBilling?.terms_12?.is_term_paid &&
                studentBilling?.terms_12?.term_amount) ||
              (studentBilling?.terms_12?.is_partial &&
                studentBilling?.candidate_admission_status !== 'admitted' &&
                studentBilling?.candidate_admission_status !== 'admission_in_progress')
            "
            matTooltipPosition="above"
            class="icon-status red"
            aria-hidden="true"
            [ngClass]="{
              blue: changedPlan(studentBilling?.terms_12) && studentBilling?.terms_12?.term_payment_deferment?.date
            }"
            >lens
          </mat-icon>
        </div>
        <div
          *ngIf="
            (studentBilling && !studentBilling?.terms_12) ||
            !studentBilling?.terms_12?.term_amount ||
            studentBilling?.candidate_admission_status === 'admitted' ||
            studentBilling?.candidate_admission_status === 'admission_in_progress'
          "
          style="color: #b7b7b7"
        >
          X
        </div>
      </div>
    </div>
  </div>
</div>

<div class="p-grid top-space">
  <div class="p-col-12 no-padding">
    <h4>{{ 'Student History' | translate }}</h4>
  </div>
</div>
<div>
  <div class="horizontals">
    <table mat-table [dataSource]="dataSources" matSort class="mat-elevation-z8" style="font-family: 'firaSans'">
      <!-- RESET START-->
      <ng-container matColumnDef="table-balance">
        <th mat-header-cell *matHeaderCellDef colspan="4" class="action-header-column">
          <div class="finance">
            <div class="finance-text">{{ 'Financial Profile' | translate }} :</div>
            <div class="finance-option">
              <mat-form-field>
                <mat-select [formControl]="financeFilter">
                  <mat-option (click)="updateFinancialStatus()" [value]="record.value" *ngFor="let record of financeFilterList"
                    >{{ record.key | translate }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="balance">Balance : {{ formatCurrency(totalBalance) ? formatCurrency(totalBalance) : '0' }} €</div>
        </th>
      </ng-container>
      <ng-container matColumnDef="table-debit">
        <th mat-header-cell *matHeaderCellDef colspan="1" class="action-header-column" style="text-align: center !important">
          {{ formatCurrency(totalDebit) ? formatCurrency(totalDebit) : '0' }} €
        </th>
      </ng-container>
      <ng-container matColumnDef="table-credit">
        <th mat-header-cell *matHeaderCellDef colspan="1" class="action-header-column" style="text-align: center !important">
          {{ formatCurrency(totalCredit) ? formatCurrency(totalCredit) : '0' }} €
        </th>
      </ng-container>
      <ng-container matColumnDef="table-action">
        <th
          mat-header-cell
          *matHeaderCellDef
          colspan="4"
          class="action-header-column"
          style="padding-right: 0px !important; padding-bottom: 0px !important"
        >
          <button
            color="accent"
            style="padding: 0px 5px"
            mat-raised-button
            (click)="decaissementDialog()"
            matTooltip="{{ 'Refund' | translate }} "
          >
            <mat-icon svgIcon="credit-card-refund-outline" class="mat-icon-svgIcon"></mat-icon>
            {{ 'Refund' | translate }}
          </button>
          <button color="accent" style="padding: 0px 5px" (click)="avoirDialog()" mat-raised-button matTooltip="{{ 'Avoir' | translate }} ">
            <mat-icon svgIcon="card-text-outline" class="mat-icon-svgIcon"></mat-icon>
            {{ 'Avoir' | translate }}
          </button>
          <button
            color="primary"
            style="padding: 0px 5px"
            (click)="resetTable()"
            mat-raised-button
            matTooltip="{{ 'Reset Filter' | translate }} "
          >
            <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
            {{ 'Reset' | translate }}
          </button>
        </th>
      </ng-container>
      <!-- RESET END-->
      <!---ROW DATA START-->
      <ng-container matColumnDef="select" class="mat-column-select">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-checkbox
            (change)="$event ? masterToggle() : null"
            (change)="showOptions('all')"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()"
          ></mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row" class="text-center">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)"
            (change)="showOptions('one')"
          ></mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="accounting">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Accounting Document' | translate }}" matTooltipPosition="above">
          <h5>
            {{ 'Accounting Document' | translate }}
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element?.accounting_document }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Date' | translate }}" matTooltipPosition="above">
          <h5>
            {{ 'Date' | translate }}
          </h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ translateDate(element?.transaction_date, element?.transaction_time) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="transaction">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Transaction' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Transaction' | translate }}</h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element?.transaction | translate }} </span>
          <span *ngIf="element.transaction === 'term'">
            {{ parseIndex(element?.term_index) + 1 }}/{{ studentBilling?.billing_id?.terms?.length }} - {{ element?.transaction_date }} -
            {{ element?.amount }}</span
          >
          <span *ngIf="element.transaction === 'Avoir'"> {{ element?.reference ? ' - ' + element?.reference : '' }} </span>
          <span *ngIf="element.transaction === 'Refund'"> {{ element?.reference ? ' - ' + element?.reference : '' }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="debit">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Debit €' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Debit' | translate }} <span class="currency">€</span></h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ formatCurrency(element?.debit) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="credit">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Credit €' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Credit' | translate }}<span class="currency">€</span></h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ formatCurrency(element?.credit) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="solde">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Solde €' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Solde' | translate }}<span class="currency">€</span></h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element?.balance === 0 ? '0' : formatCurrency(element?.balance) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="rec">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Type of transaction' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Type of transaction' | translate }}</h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span></span>
        </td>
      </ng-container>
      <ng-container matColumnDef="pay">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Payeur' | translate }}" matTooltipPosition="above">
          <h5 style="text-align: center">{{ 'Payeur' | translate }}</h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <span>{{ translateCivility(element?.from) }} </span>
        </td>
      </ng-container>

      <!-- <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Action' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Action' | translate }}</h5>
        </th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button *ngIf="element?.status" class="margin-right-button">
            <mat-icon svgIcon="eye"> eye </mat-icon>
          </button>
          <button mat-icon-button *ngIf="!element?.status" class="margin-right-button">
            <mat-icon> edit </mat-icon>
          </button>
        </td>
      </ng-container> -->

      <tr mat-header-row *matHeaderRowDef="['table-balance', 'table-debit', 'table-credit', 'table-action']"></tr>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
    </table>
  </div>
  <div class="table-section-height">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" style="font-family: 'firaSans'">
      <!---ROW DATA START-->
      <ng-container matColumnDef="select" class="mat-column-select">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row" class="text-center">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)"
            (change)="showOptions('one')"
          ></mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="accounting">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element?.accounting_document }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ translateDate(element?.transaction_date, element?.transaction_time) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="transaction">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span [matTooltip]="element?.transaction | translate">{{ element?.transaction | translate }} </span>
          <span
            *ngIf="element.transaction === 'term'"
            matTooltip="{{ element?.transaction | translate }} {{ parseIndex(element?.term_index) + 1 }}/{{
              studentBilling?.billing_id?.terms?.length
            }} - {{ element?.transaction_date }} -
          {{ element?.amount }}"
          >
            {{ parseIndex(element?.term_index) + 1 }}/{{ studentBilling?.billing_id?.terms?.length }} - {{ element?.transaction_date }} -
            {{ element?.amount }}</span
          >
          <span
            *ngIf="element.transaction === 'Avoir'"
            [matTooltip]="
              element?.reference ? (element?.transaction | translate) + ' - ' + element?.reference : (element?.transaction | translate)
            "
          >
            {{ element?.reference ? ' - ' + element?.reference : '' }}
          </span>
          <span
            *ngIf="element.transaction === 'Refund'"
            [matTooltip]="
              element?.reference ? (element?.transaction | translate) + ' - ' + element?.reference : (element?.transaction | translate)
            "
          >
            {{ element?.reference ? ' - ' + element?.reference : '' }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="debit">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ formatCurrency(element?.debit) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="credit">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ formatCurrency(element?.credit) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="solde">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ element?.balance === 0 ? '0' : formatCurrency(element?.balance) }} </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="rec">
        <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Type of transaction' | translate }}" matTooltipPosition="above">
          <h5>{{ 'Type of transaction' | translate }}</h5>
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          [matTooltip]="element?.payment_method ? ('method.' + element?.payment_method | translate) : '-'"
        >
          <span>{{ element?.payment_method ? ('method.' + element?.payment_method | translate) : '-' }}</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="pay">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <span>{{ translateCivility(element?.from) }} </span>
        </td>
      </ng-container>

      <!-- <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button *ngIf="element?.status" class="margin-right-button">
            <mat-icon svgIcon="eye"> eye </mat-icon>
          </button>
          <button mat-icon-button *ngIf="!element?.status" class="margin-right-button">
            <mat-icon> edit </mat-icon>
          </button>
        </td>
      </ng-container> -->

      <ng-container matColumnDef="loading">
        <th mat-header-cell *matHeaderCellDef colspan="23" style="text-align: center !important">
          <div class="center-spinner">
            <mat-spinner color="accent"></mat-spinner>
          </div>
        </th>
      </ng-container>

      <!-- <tr mat-header-row *matHeaderRowDef="['table-balance', 'table-debit', 'table-credit', 'table-action']; sticky: true"></tr> -->
      <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns" [style.display]="0"></tr> -->
      <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isLoading"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
    </table>
    <div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isLoading }">
      {{ 'NOT RECORD FOUND' | translate }}
    </div>
  </div>
  <div [ngClass]="{ hide: noData | async }">
    <mat-paginator
      [ngClass]="{ 'hide-pagination-buttons': dataCount <= 10 }"
      [length]="dataCount"
      [hidePageSize]="true"
      [pageSize]="[30]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
