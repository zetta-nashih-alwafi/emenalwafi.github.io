<div class="horizontal">
  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
    <ng-container matColumnDef="reset">
      <th mat-header-cell *matHeaderCellDef colspan="13" class="action-header-column">
        <button [disabled]="!selection.hasValue()" mat-raised-button color="primary" matTooltip="{{ 'Export' | translate }} ">
          <mat-icon svgIcon="file-excel-outline" class="mat-icon-svgIcon"></mat-icon>
          {{ 'Export' | translate }}
        </button>
        <button mat-raised-button color="accent" matTooltip="{{ 'Reset Filter' | translate }}">
          <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
          {{ 'RESET' | translate }}
        </button>
      </th>
    </ng-container>

    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef class="text-center">
        <mat-checkbox
          (change)="$event ? masterToggle() : null"
          (change)="showOptions('all')"
          [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
          [indeterminate]="selection.hasValue() && !isAllSelected()"
          [aria-label]="checkboxLabel()"
        >
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row" class="text-center">
        <mat-checkbox
          (click)="$event.stopPropagation()"
          (change)="$event ? selection.toggle(row) : null"
          [checked]="selection.isSelected(row) || isCheckedAll"
          (change)="showOptions('one')"
          [aria-label]="checkboxLabel(row)"
        >
        </mat-checkbox>
      </td>
    </ng-container>

    <ng-container matColumnDef="typeFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of typeFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="studentFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input matInput class="form-field" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="nationalityFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="AllF">{{ 'AllS' | translate }} </mat-option>
            <mat-option value="French">{{ 'French' | translate }} </mat-option>
            <mat-option value="English">{{ 'English' | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="currentProgramFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="AllF">{{ 'AllS' | translate }} </mat-option>
            <mat-option value="20-21 EFAPAR 1">{{ '20-21 EFAPAR 1' }} </mat-option>
            <mat-option value="21-22 EFATOU 2">{{ '21-22 EFATOU 2' }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="engagementLevelFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="AllF">{{ 'AllS' | translate }} </mat-option>
            <mat-option value="French">{{ 'lost' | translate }} </mat-option>
            <mat-option value="English">{{ 'low' | translate }} </mat-option>
            <mat-option value="English">{{ 'medium' | translate }} </mat-option>
            <mat-option value="English">{{ 'registered' | translate }} </mat-option>
            <!-- <mat-option value="20-21 EFAPAR 1">{{ '20-21 EFAPAR 1' }} </mat-option>
              <mat-option value="21-22 EFATOU 2">{{ '21-22 EFATOU 2' }} </mat-option> -->
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="mentorFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input matInput class="form-field" placeholder="{{ 'search' | translate }}" />
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="connectionFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of connectionFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="cvFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of connectionFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="motivationLetterFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of connectionFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="videoProfileFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of connectionFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="internProfileFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <mat-select>
            <mat-option [value]="record.value" *ngFor="let record of internProfileFilterList">{{ record.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field>
      </th>
    </ng-container>

    <ng-container matColumnDef="actionFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="selectFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Type' | translate }}" matTooltipPosition="above">
        <h5>
          <img alt="emgagement level icon" class="img-responsive engagement-level-icon" [src]="shieldAccountIcon" />
        </h5>
        <!-- <h5 mat-sort-header="last_name">{{ 'INTERN_PROFILE.Type' | translate }}</h5> -->
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.type | translate"
          matTooltipPosition="above"
          *ngIf="element?.type"
          [ngClass]="{
            purple: element?.type === 'classic',
            yellow: element?.type === 'alternance',
            blue: element?.type === 'special'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="student">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Student' | translate }}" matTooltipPosition="above">
        <h5>{{ 'INTERN_PROFILE.Student' | translate }}</h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        matTooltip="{{ element?.student?.last_name | uppercase }} {{ element?.student?.first_name }} {{
          element?.student?.civility && element?.student?.civility === 'neutral' ? '' : (element?.student?.civility | translate)
        }}"
        matTooltipPosition="above"
        class="pad-l-xs"
      >
        {{ element?.student?.last_name | uppercase }} {{ element?.student?.first_name }}
        {{ element?.student?.civility && element?.student?.civility === 'neutral' ? '' : (element?.student?.civility | translate) }}
      </td>
    </ng-container>

    <ng-container matColumnDef="nationality">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Nationality' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="flag-variant-outline" class="mat-icon-svgIcon"> flag-variant-outline </mat-icon>
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        matTooltip="{{ element?.nationality | translate }}"
        matTooltipPosition="above"
        class="pad-l-xs"
      >
        {{ element?.nationality | translate }}
      </td>
    </ng-container>

    <ng-container matColumnDef="currentProgram">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Current Program' | translate }}" matTooltipPosition="above">
        <h5>{{ 'INTERN_PROFILE.Current Program' | translate }}</h5>
      </th>
      <td mat-cell *matCellDef="let element" matTooltip="{{ element?.program | translate }}" matTooltipPosition="above" class="pad-l-xs">
        {{ element?.program }}
      </td>
    </ng-container>

    <ng-container matColumnDef="engagementLevel">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Engagement level' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="heart-cog" class="mat-icon-svgIcon"> heart-cog </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.engagement_level | translate"
          matTooltipPosition="above"
          *ngIf="element?.engagement_level"
          [ngClass]="{
            black: element?.engagement_level === 'lost',
            red: element?.engagement_level === 'low',
            orange: element?.engagement_level === 'medium',
            green: element?.engagement_level === 'high'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="mentor">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.School Mentor' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="account-star" class="mat-icon-svgIcon"> account-star </mat-icon>
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        matTooltip="{{ element?.mentor?.last_name | uppercase }} {{ element?.mentor?.first_name }} {{
          element?.mentor?.civility && element?.mentor?.civility === 'neutral' ? '' : (element?.mentor?.civility | translate)
        }}"
        matTooltipPosition="above"
        class="pad-l-xs"
      >
        {{ element?.mentor?.last_name | uppercase }} {{ element?.mentor?.first_name }}
        {{ element?.mentor?.civility && element?.mentor?.civility === 'neutral' ? '' : (element?.mentor?.civility | translate) }}
      </td>
    </ng-container>

    <ng-container matColumnDef="connection">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Connection' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="login" class="mat-icon-svgIcon"> login </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.connection | translate"
          matTooltipPosition="above"
          *ngIf="element?.connection"
          [ngClass]="{
            green: element?.connection === 'done'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="cv">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.CV' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="file-account" class="mat-icon-svgIcon"> file-account </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.cv | translate"
          matTooltipPosition="above"
          *ngIf="element?.cv"
          [ngClass]="{
            green: element?.cv === 'done'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="motivationLetter">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Motivation Letter' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="text-box-outline" class="mat-icon-svgIcon"> text-box-outline </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.motivation_letter | translate"
          matTooltipPosition="above"
          *ngIf="element?.motivation_letter"
          [ngClass]="{
            green: element?.motivation_letter === 'done'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="videoProfile">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Video Profile' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="video" class="mat-icon-svgIcon"> video </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.video_profile | translate"
          matTooltipPosition="above"
          *ngIf="element?.video_profile"
          [ngClass]="{
            green: element?.video_profile === 'done'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="internProfile">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'INTERN_PROFILE.Intern Profile' | translate }}" matTooltipPosition="above">
        <h5>
          <mat-icon svgIcon="card-account-details-star-outline" class="mat-icon-svgIcon"> card-account-details-star-outline </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <mat-icon
          [matTooltip]="element?.intern_profile | translate"
          matTooltipPosition="above"
          *ngIf="element?.intern_profile"
          [ngClass]="{
            green: element?.intern_profile === 'done'
          }"
          aria-hidden="true"
          >lens
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Action' | translate }}" matTooltipPosition="above">
        <h5>{{ 'Action' | translate }}</h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <button mat-icon-button [matTooltipDisabled]="false" class="margin-right-button" matTooltip="{{ 'Send an email' | translate }}">
          <mat-icon> send </mat-icon>
        </button>
        <button
          mat-icon-button
          [matTooltipDisabled]="false"
          class="margin-right-button"
          matTooltip="{{ 'Contact on WA or SMS' | translate }}"
        >
          <mat-icon svgIcon="whatsapp"> whatsapp </mat-icon>
        </button>
        <button mat-icon-button [matTooltipDisabled]="false" class="margin-right-button" matTooltip="{{ 'Call' | translate }}">
          <mat-icon svgIcon="phone-forward"> phone_forward </mat-icon>
        </button>
        <button mat-icon-button [matTooltipDisabled]="false" class="margin-right-button" matTooltip="{{ 'Add a note' | translate }}">
          <mat-icon svgIcon="pencil"> pencil </mat-icon>
        </button>
        <button
          mat-icon-button
          [matTooltipDisabled]="false"
          class="margin-right-button"
          matTooltip="{{ 'Connect as the User' | translate }}"
        >
          <mat-icon svgIcon="incognito"></mat-icon>
        </button>
        <button
          mat-icon-button
          [matTooltipDisabled]="false"
          class="margin-right-button"
          matTooltip="{{ 'see the Student File' | translate }}"
          (click)="viewProfileInfo(element._id, 'history-tab')"
        >
          <mat-icon svgIcon="eye"> eye </mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="loading">
      <th mat-header-cell *matHeaderCellDef colspan="13" style="text-align: center !important">
        <div class="center-spinner">
          <mat-spinner color="accent"></mat-spinner>
        </div>
      </th>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['reset']"></tr>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="filterColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isLoading"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
  </table>
  <div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isLoading }">
    {{ 'NOT RECORD FOUND' | translate }}
  </div>
  <div [ngClass]="{ hide: noData | async }">
    <mat-paginator
      [ngClass]="{ 'hide-pagination-buttons': paginator.length <= 10 }"
      [hidePageSize]="true"
      [pageSize]="[10]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
