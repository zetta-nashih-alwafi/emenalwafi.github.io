<div class="dialog-border">
  <div class="dialogTitleWrapper">
    <div class="p-grid">
      <div class="w-30 no-padding">
        <mat-icon style="vertical-align: middle">group</mat-icon>
      </div>
      <div class="p-col-10 acad-title">
        <h3 class="dialogTitle">
          {{ 'Change Company relation member' | translate }}
        </h3>
      </div>
      <div class="w-65 no-padding">
        <button mat-icon-button class="close-icon float-right" mat-dialog-close tabindex="-1">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
<div>
  <div class="fontColor">
    <mat-dialog-content>
      <div class="p-grid pad-btm-sm">
        <div class="p-col-12 no-padding">
          <div class="p-grid">
            <div class="p-col-12 no-padding">{{ 'Actual Company Relation Member' | translate }} :</div>
            <ng-container *ngIf="data && data.length; else single">
              <div class="p-col-12 no-padding">
                <span>
                  {{ data[0]?.company_relation_member_id?.civility && data[0]?.company_relation_member_id?.civility ==='neutral' ? '' : (data[0]?.company_relation_member_id?.civility | translate) }}
                  {{ data[0]?.company_relation_member_id?.last_name | uppercase }} {{ data[0]?.company_relation_member_id?.first_name }}
                </span>
              </div>
            </ng-container>
            <ng-template #single>
              <div class="p-col-12 no-padding">
                <span>
                  {{ data[0]?.company_relation_member_id?.civility && data[0]?.company_relation_member_id?.civility ==='neutral' ? '' : (data[0]?.company_relation_member_id?.civility | translate) }}
                  {{ data?.company_relation_member_id?.last_name | uppercase }} {{ data?.company_relation_member_id?.first_name }}
                </span>
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div class="p-grid">
        <div class="p-col-12 no-padding">
          <!-- <mat-form-field> -->
          <!-- <mat-select [formControl]="companyRelationMember">
              <mat-option *ngFor="let crm of crmList" [value]="crm?.lastName">
                {{ crm?.civility | translate }} {{ crm?.lastName | uppercase }} {{ crm?.firstName }}
              </mat-option>
            </mat-select> -->
          <ng-select placeholder="{{ 'INTERN_FOLLOW_UP.New CRM' | translate }}" [formControl]="companyRelationMember" appendTo="body">
            <ng-container *ngIf="crmList.length !== 0">
              <ng-option *ngFor="let crm of crmList" [value]="crm._id">
                
                {{ crm?.civility && crm?.civility ==='neutral' ? '' : (crm?.civility | translate) }} {{ crm?.last_name }} {{ crm?.first_name }}
              </ng-option>
            </ng-container>
            <ng-container *ngIf="crmList.length === 0">
              <ng-option [disabled]="true">
                {{ 'No item found' | translate }}
              </ng-option>
            </ng-container>
          </ng-select>
          <!-- </mat-form-field> -->
        </div>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="right">
      <button mat-raised-button type="button" color="warn" mat-dialog-close>{{ 'CANCEL' | translate }}</button>
      <button (click)="validate()" mat-raised-button color="primary">{{ 'Validate' | translate }}</button>
    </mat-dialog-actions>
  </div>
</div>
