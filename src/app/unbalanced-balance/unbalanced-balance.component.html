<ms-filter-breadcrumb
  [filterBreadcrumbData]="filterBreadcrumbData"
  (removeFilterTrigger)="removeFilterBreadcrumb($event)"
></ms-filter-breadcrumb>
<div class="top-spacer">
  <!-- super filter -->
  <!-- <div class="p-col-12">
      <div class="p-grid no-padding">
        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'CARDDETAIL.Scholar Season' | translate }}</mat-label>
            <mat-select
              (selectionChange)="scholarSelect()"
              [formControl]="superFilter.controls.scholar_season_filter"
              [disableOptionCentering]="true"
              panelClass="filterPanel"
            >
              <mat-option *ngIf="dropdowns.scholar_season.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              <mat-option *ngIf="dropdowns?.scholar_season?.length > 0" value="All">{{ 'All' | translate }}</mat-option>
              <mat-option *ngFor="let scholar of dropdowns.scholar_season" [value]="scholar._id">{{ scholar.scholar_season }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.School' | translate }}</mat-label>
            <ng-container *ngIf="dropdowns.schools.length > 0">
              <mat-select
                [formControl]="superFilter.controls.schools_filter"
                multiple
                [disableOptionCentering]="true"
                panelClass="filterPanel"
              >
                <mat-option *ngIf="dropdowns?.schools?.length > 0" value="All" (click)="checkSuperfilterSchool('All')">{{ 'All' | translate }}</mat-option>
                <mat-option *ngFor="let school of dropdowns.schools" [value]="school?._id" (click)="checkSuperfilterSchool(school?._id)">{{ school.short_name }}</mat-option>
              </mat-select>
            </ng-container>
            <ng-container *ngIf="dropdowns.schools.length === 0">
              <mat-select [formControl]="superFilter.controls.schools_filter" [disableOptionCentering]="true" panelClass="filterPanel">
                <mat-option *ngIf="dropdowns.schools.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              </mat-select>
            </ng-container>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Campus' | translate }}</mat-label>
            <ng-container *ngIf="dropdowns.campuses.length > 0">
              <mat-select
                [formControl]="superFilter.controls.campuses_filter"
                multiple
                [disableOptionCentering]="true"
                panelClass="filterPanel"
              >
                <mat-option *ngIf="dropdowns?.campuses?.length > 0" value="All" (click)="checkSuperfilterCampus('All')">{{ 'All' | translate }}</mat-option>
                <mat-option *ngFor="let campus of dropdowns.campuses" [value]="campus?._id" (click)="checkSuperfilterCampus(campus?._id)">{{ campus.name }}</mat-option>
              </mat-select>
            </ng-container>
            <ng-container *ngIf="dropdowns.campuses.length === 0">
              <mat-select [formControl]="superFilter.controls.campuses_filter" [disableOptionCentering]="true" panelClass="filterPanel">
                <mat-option *ngIf="dropdowns.campuses.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              </mat-select>
            </ng-container>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Level' | translate }}</mat-label>
            <ng-container *ngIf="dropdowns.levels.length > 0">
              <mat-select
                [formControl]="superFilter.controls.levels_filter"
                multiple
                [disableOptionCentering]="true"
                panelClass="filterPanel"
              >
                <mat-option *ngIf="dropdowns?.levels?.length > 0" value="All" (click)="checkSuperfilterLevel('All')">{{ 'All' | translate }}</mat-option>
                <mat-option *ngFor="let level of dropdowns.levels" [value]="level?._id" (click)="checkSuperfilterLevel(level?._id)">{{ level.name }}</mat-option>
              </mat-select>
            </ng-container>
            <ng-container *ngIf="dropdowns.levels.length === 0">
              <mat-select [formControl]="superFilter.controls.levels_filter" [disableOptionCentering]="true" panelClass="filterPanel">
                <mat-option *ngIf="dropdowns.levels.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              </mat-select>
            </ng-container>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Sector' | translate }}</mat-label>
            <ng-container *ngIf="dropdowns.sectors.length > 0">
              <mat-select
                [formControl]="superFilter.controls.sector_filter"
                multiple
                [disableOptionCentering]="true"
                panelClass="filterPanel"
              >
                <mat-option *ngIf="dropdowns?.sectors?.length > 0" value="All" (click)="checkSuperfilterSector('All')">{{ 'All' | translate }}</mat-option>
                <mat-option *ngFor="let sector of dropdowns?.sectors" [value]="sector?._id" (click)="checkSuperfilterSector(sector?._id)">{{ sector.name }}</mat-option>
              </mat-select>
            </ng-container>
            <ng-container *ngIf="dropdowns.sectors.length === 0">
              <mat-select [formControl]="superFilter.controls.sector_filter" [disableOptionCentering]="true" panelClass="filterPanel">
                <mat-option *ngIf="dropdowns.sectors.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              </mat-select>
            </ng-container>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="width: 150px">
          <mat-form-field appearance="legacy">
            <mat-label>{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Speciality' | translate }}</mat-label>
            <ng-container *ngIf="dropdowns.specialities.length > 0">
              <mat-select
                [formControl]="superFilter.controls.speciality_filter"
                multiple
                [disableOptionCentering]="true"
                panelClass="filterPanel"
              >
                <mat-option *ngIf="dropdowns?.specialities?.length > 0" value="All" (click)="checkSuperfilterSpeciality('All')">{{ 'All' | translate }}</mat-option>
                <mat-option *ngFor="let speciality of dropdowns?.specialities" [value]="speciality?._id" (click)="checkSuperfilterSpeciality(speciality?._id)">{{ speciality.name }}</mat-option>
              </mat-select>
            </ng-container>
            <ng-container *ngIf="dropdowns.specialities.length === 0">
              <mat-select [formControl]="superFilter.controls.speciality_filter" [disableOptionCentering]="true" panelClass="filterPanel">
                <mat-option *ngIf="dropdowns.specialities.length === 0" disabled>{{ 'NOT RECORD FOUND' | translate }}</mat-option>
              </mat-select>
            </ng-container>
          </mat-form-field>
        </div>

        <div class="p-col-fixed pad-y-none pad-x-none pad-r-md" style="margin-top: 14px">
          <button
            mat-button
            mat-raised-button
            color="accent"
            [disabled]="isDisabled || isWaitingForResponse"
            (click)="applySuperFilter()"
          >
            {{ 'Apply Filter' | translate }}
          </button>
        </div>
      </div>
    </div> -->

  <div class="p-col-12 reset-row mt-10">
    <div class="p-grid justify-content-end align-items-center">
      <!-- action button -->
      <!-- <ng-container>
        <button
          mat-button
          mat-raised-button
          color="accent"
          class="relative"
          [matMenuTriggerFor]="actions"
          [matTooltip]="'Action' | translate"
          matTooltipPosition="above"
          [disabled]="!isWaitingForResponse"
        >
          {{ 'Action' | translate }}
          <mat-icon>expand_more</mat-icon>
        </button>
        <mat-menu #actions="matMenu">
          <button mat-menu-item>
            <mat-icon>send</mat-icon>
            <span>{{ 'Send email' | translate }}</span>
          </button>
        </mat-menu>
      </ng-container> -->
      <!-- export button -->
      <ng-container>
        <button
          mat-button
          mat-raised-button
          *ngIf="allowExport"
          [disabled]="isWaitingForResponse"
          color="primary"
          [matTooltip]="'Export' | translate"
          matTooltipPosition="above"
          (click)="controllerButton('export-sage')"
          data-cy="button-export"
        >
          <mat-icon svgIcon="file-excel-outline" class="mat-icon-svgIcon"></mat-icon>
          {{ 'Export' | translate }}
        </button>
      </ng-container>
      <!-- reset button -->
      <ng-container>
        <button
          mat-button
          mat-raised-button
          *ngIf="allowReset"
          [disabled]="isWaitingForResponse"
          color="primary"
          [matTooltip]="'RESET' | translate"
          matTooltipPosition="above"
          (click)="resetFilter()"
          data-cy="button-reset"
        >
          <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
          {{ 'RESET' | translate }}
        </button>
      </ng-container>
    </div>
  </div>

  <div class="p-col-12 no-padding table-wrapper mat-elevation-z8">
    <table mat-table matSort (matSortChange)="onSort($event)" [dataSource]="dataSource" data-cy="table-unbalanced-balance">
      <ng-container matColumnDef="loading">
        <th mat-header-cell colspan="100%" *matHeaderCellDef>
          <div class="p-grid justify-content-center align-items-center p-all-md">
            <mat-spinner color="accent" [diameter]="64" data-cy="table-spinner"></mat-spinner>
          </div>
        </th>
      </ng-container>

      <ng-container matColumnDef="checkbox-filter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>

      <ng-container matColumnDef="student-number-filter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <mat-label>{{ 'search' | translate }}</mat-label>
            <input matInput [formControl]="studentNumberFilter" data-cy="table-filter-student-number" />
          </mat-form-field>
        </th>
      </ng-container>

      <ng-container matColumnDef="student-name-filter" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <mat-label>{{ 'search' | translate }}</mat-label>
            <input matInput [formControl]="studentNameFilter" data-cy="table-filter-student-name" />
          </mat-form-field>
        </th>
      </ng-container>

      <ng-container matColumnDef="status-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <ng-select
            class="auto-grow custom-style-ngselect-fi style-ng-select"
            [items]="studentStatusFilterList"
            bindValue="value"
            bindLabel="label"
            [appendTo]="'body'"
            [multiple]="true"
            notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
            placeholder="{{ 'search' | translate }}"
            [formControl]="studentStatusFilter"
            [clearable]="false"
            [closeOnSelect]="false"
            (close)="setStudentStatusFilter()"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="studentStatusFilterList?.length">
              <mat-checkbox
                class="all-input"
                style="cursor: pointer"
                [checked]="isAllDropdownSelectedTable('studentStatus')"
                [indeterminate]="isSomeDropdownSelectedTable('studentStatus')"
                (change)="selectAllDataTable($event, 'studentStatus')"
              >
                {{ 'AllM' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="program-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <ng-select
            class="auto-grow custom-style-ngselect-fi style-ng-select"
            [appendTo]="'body'"
            [multiple]="false"
            [clearable]="false"
            [formControl]="programFilter"
            placeholder="{{ 'search' | translate }}"
            clear
            data-cy="table-filter-program"
          >
            <ng-option value="AllF" data-cy="table-filter-program-option">{{ 'AllF' | translate }}</ng-option>
            <ng-option *ngFor="let item of listOfProgram" [value]="item?._id" data-cy="table-filter-program-option">
              {{ item?.program }}
            </ng-option>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="legal-entity-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <ng-select
            [items]="listOfLegalEntity"
            bindValue="legal_entity_name"
            bindLabel="legal_entity_name"
            class="auto-grow custom-style-ngselect-fi style-ng-select"
            [appendTo]="'body'"
            [multiple]="true"
            notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
            placeholder="{{ 'search' | translate }}"
            [formControl]="legalEntityFilter"
            [clearable]="false"
            [closeOnSelect]="false"
            (close)="setLegalEntityFilter()"
          >
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.legal_entity_name | translate }}
            </ng-template>
            <ng-template ng-header-tmp *ngIf="listOfLegalEntity?.length">
              <mat-checkbox
                class="all-input"
                style="cursor: pointer"
                [checked]="isAllDropdownSelectedTable('legalEntity')"
                [indeterminate]="isSomeDropdownSelectedTable('legalEntity')"
                (change)="selectAllDataTable($event, 'legalEntity')"
              >
                {{ 'AllM' | translate }}
              </mat-checkbox>
            </ng-template>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="debit-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>

      <ng-container matColumnDef="credit-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>

      <ng-container matColumnDef="balance-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>

      <ng-container matColumnDef="reason-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center custom-filter-table">
          <ng-select
            class="auto-grow custom-style-ngselect-fi style-ng-select"
            [appendTo]="'body'"
            [multiple]="false"
            [clearable]="false"
            [formControl]="reasonFilter"
            placeholder="{{ 'search' | translate }}"
            data-cy="table-filter-reason"
          >
            <ng-option value="AllF" data-cy="table-filter-reason-option">{{ 'AllF' | translate }}</ng-option>
            <ng-option *ngFor="let item of listOfReason" [value]="item?.value" data-cy="table-filter-reason-option">
              {{ 'UNBALANCED_ACCOUNT_REASONS.' + item?.key | translate }}
            </ng-option>
          </ng-select>
        </th>
      </ng-container>

      <ng-container matColumnDef="date-filter">
        <th mat-header-cell *matHeaderCellDef class="text-center">
          <mat-form-field>
            <input
              matInput
              (click)="dateDatePicker.open()"
              readonly
              class="form-field"
              placeholder="{{ 'search' | translate }}"
              [matDatepicker]="dateDatePicker"
              [formControl]="dateFilter"
              data-cy="table-filter-date"
            />
            <mat-datepicker-toggle matSuffix [for]="dateDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #dateDatePicker></mat-datepicker>
          </mat-form-field>
        </th>
      </ng-container>

      <ng-container matColumnDef="action-filter" stickyEnd>
        <th mat-header-cell *matHeaderCellDef class="text-center"></th>
      </ng-container>

      <ng-container matColumnDef="checkbox" sticky>
        <th mat-header-cell *matHeaderCellDef class="text-center" data-cy="table-col-selection">
          <mat-checkbox
            (change)="$event ? masterToggle() : null"
            (change)="showOptions('all', '')"
            [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
            [indeterminate]="selection.hasValue() && !isAllSelected()"
            [aria-label]="checkboxLabel()"
          >
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row" class="text-center" data-cy="table-col-selection">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row._id) : null"
            [checked]="selection.isSelected(row._id) || (isCheckedAll && !dataUnselect?.includes(row?._id))"
            (change)="showOptions('one', row)"
            [aria-label]="checkboxLabel(row)"
          >
          </mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="student-number" sticky>
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header="student_number"
          class="text-center student-header"
          [matTooltip]="'Student Number' | translate"
          matTooltipPosition="above"
          data-cy="table-col-student-number"
        >
          <!-- <mat-icon class="mat-icon-status"> account_box </mat-icon> -->
          {{ 'Student Number' | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          matTooltipPosition="above"
          matTooltip="{{ element?.candidate_id?.candidate_unique_number }}"
          data-cy="table-col-student-number"
        >
          {{ element?.candidate_id?.candidate_unique_number }}
        </td>
      </ng-container>

      <ng-container matColumnDef="student-name" sticky>
        <th
          mat-sort-header="student_name"
          mat-header-cell
          class="text-center"
          matTooltipPosition="above"
          [matTooltip]="'Student name' | translate"
          *matHeaderCellDef
          data-cy="table-col-student-name"
        >
          {{ 'Student name' | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          matTooltip="{{
            (element?.candidate_id?.last_name | uppercase) +
              ' ' +
              element?.candidate_id?.first_name +
              ' ' +
              (element?.candidate_id?.civility && element?.candidate_id?.civility === 'neutral'
                ? ''
                : (element?.candidate_id?.civility | translate))
          }}"
          data-cy="table-col-student-name"
        >
          {{
            (element?.candidate_id?.last_name | uppercase) +
              ' ' +
              element?.candidate_id?.first_name +
              ' ' +
              (element?.candidate_id?.civility && element?.candidate_id?.civility === 'neutral'
                ? ''
                : (element?.candidate_id?.civility | translate))
          }}
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Status' | translate"
          matTooltipPosition="above"
          mat-sort-header="candidate_admission_status"
          data-cy="table-col-status"
        >
          {{ 'Status' | translate }}
        </th>
        <td mat-cell *matCellDef="let element">
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'admitted' || element?.candidate_id?.candidate_admission_status === 'admission_in_progress'"
            [matTooltip]="'Admitted' | translate"
          >
            {{ 'Adm.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'engaged'" [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
            {{ 'Eng.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'bill_validated'"
            [matTooltip]="element?.candidate_id?.candidate_admission_status | translate"
          >
            {{ 'Bill' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'registered'" [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
            {{ 'Reg.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'resign_after_school_begins'"
            [matTooltip]="'Resigned after school begins' | translate"
          >
            {{ 'status_resign_after_school_begins' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'no_show'" [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
            {{ 'No.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned'" [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
            {{ 'Res.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'report_inscription'" [matTooltip]="'Postpone Inscription N+1' | translate">
            {{ 'Post.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned_after_engaged'"
            [matTooltip]="element?.candidate_id?.candidate_admission_status | translate"
          >
            {{ 'ResAfter.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned_after_registered'"
            [matTooltip]="element?.candidate_id?.candidate_admission_status | translate"
          >
            {{ 'ResReg.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'deactivated'" [matTooltip]="'Deactivated' | translate">
            {{ 'Deac.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'in_scholarship'" [matTooltip]="'in_scholarship' | translate">
            {{ 'Sch.' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'resignation_missing_prerequisites'"
            [matTooltip]="'resignation_missing_prerequisites' | translate"
          >
            {{ 'Ren. PM' | translate }}
          </span>
          <span
            *ngIf="element?.candidate_id?.candidate_admission_status === 'mission_card_validated'"
            [matTooltip]="element?.candidate_id?.candidate_admission_status | translate"
          >
            {{ 'Miss.' | translate }}
          </span>
          <span *ngIf="element?.candidate_id?.candidate_admission_status === 'financement_validated'" [matTooltip]="'financement_validated' | translate">
            {{ 'Await.' | translate }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="program">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Program' | translate"
          matTooltipPosition="above"
          mat-sort-header="program_name"
          data-cy="table-col-program"
        >
          {{ 'Program' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" matTooltip="{{ displayProgram(element?.candidate_id) }}" data-cy="table-col-program">
          {{ displayProgram(element?.candidate_id) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="legal-entity">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Legal entity' | translate"
          matTooltipPosition="above"
          mat-sort-header="legal_entity_name"
          data-cy="table-col-legal-entity"
        >
          {{ 'Legal entity' | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          matTooltip="{{ element?.legal_entity_id?.legal_entity_name }}"
          data-cy="table-col-legal-entity"
        >
          {{ element?.legal_entity_id?.legal_entity_name }}
        </td>
      </ng-container>

      <ng-container matColumnDef="debit">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Debit' | translate"
          matTooltipPosition="above"
          mat-sort-header="debit"
          data-cy="table-col-debit"
        >
          {{ 'Debit' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" matTooltip=" {{ formatCurrency(element?.debit) }}" data-cy="table-col-debit">
          {{ formatCurrency(element?.debit) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="credit">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Credit' | translate"
          matTooltipPosition="above"
          mat-sort-header="credit"
          data-cy="table-col-credit"
        >
          {{ 'Credit' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" matTooltip="{{ formatCurrency(element?.credit) }}" data-cy="table-col-credit">
          {{ formatCurrency(element?.credit) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="balance">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Balance' | translate"
          matTooltipPosition="above"
          mat-sort-header="balance"
          data-cy="table-col-balance"
        >
          {{ 'Balance' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" matTooltip="{{ formatCurrency(element?.balance) }}" data-cy="table-col-balance">
          {{ formatCurrency(element?.balance) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="reason">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Reason' | translate"
          matTooltipPosition="above"
          data-cy="table-col-reason"
          mat-sort-header="reason"
        >
          {{ 'Reason' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" data-cy="table-col-reason" [matTooltip]="element?.reason && element?.reason !== 'empty_reason' ? ('UNBALANCED_ACCOUNT_REASONS.' + element?.reason | translate) : ''">
          <span *ngIf="!element?.reason">-</span>
          <span *ngIf="element?.reason">
            {{ 'UNBALANCED_ACCOUNT_REASONS.' + element?.reason | translate }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Date' | translate"
          matTooltipPosition="above"
          mat-sort-header="date"
          data-cy="table-col-date"
        >
          {{ 'Date' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" matTooltip="{{ element?.date_history_reason }}" data-cy="table-col-date">
          {{ element?.date_history_reason }}
        </td>
      </ng-container>

      <ng-container matColumnDef="action" stickyEnd>
        <th
          mat-header-cell
          *matHeaderCellDef
          class="text-center"
          [matTooltip]="'Action' | translate"
          matTooltipPosition="above"
          data-cy="table-col-action"
        >
          {{ 'Action' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" class="text-center" data-cy="table-col-action">
          <button
            (click)="viewCandidateInfo(element?.candidate_id?._id,'Student','Finance', element)"
            mat-icon-button
            [matTooltip]="'View student card' | translate"
            matTooltipPosition="above"
            data-cy="table-action-view-student-card"
          >
            <mat-icon>visibility</mat-icon>
          </button>
          <button
            mat-icon-button
            *ngIf="element?.reason === 'transfer' && allowSendSchoolContract"
            [matTooltip]="'Send school contract amendment' | translate"
            matTooltipPosition="above"
            (click)="onSendSchoolContract(element)"
            data-cy="table-action-send-school-contract-amendment"
          >
            <mat-icon>description</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-header-row *matHeaderRowDef="filterCols"></tr>
      <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isWaitingForResponse"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isWaitingForResponse"></tr>
    </table>
  </div>

  <div *ngIf="(noData | async) && !isWaitingForResponse" class="no-records" data-cy="no-data">
    {{ 'NOT RECORD FOUND' | translate }}
  </div>
  <div [ngClass]="{ hide: noData | async }">
    <mat-paginator
      [ngClass]="{ 'hide-pagination-buttons': paginator.length <= 10 }"
      [length]="dataCount"
      [hidePageSize]="true"
      [pageSize]="10"
      showFirstLastButtons
      data-cy="mat-paginator"
    ></mat-paginator>
  </div>
</div>

<div *ngIf="isLoading" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent" data-cy="page-spinner"></mat-progress-spinner>
</div>
