<div class="p-grid card-row" style="margin-top: 2rem !important; padding: 10px" [formGroup]="templateStepForm">
  <div class="p-col-12 no-padding">
    <div class="revision-box-container" *ngIf="stepData?.revise_request_messages?.length">
      <ms-form-filling-revision-box
        [formDetail]="formDetail"
        [stepId]="stepData?._id"
        [messages]="stepData?.revise_request_messages"
        [stepData]="stepData"
        [dataForm]="formData"
        (triggerRefresh)="this.triggerRefresh.emit(formId)"
      >
      </ms-form-filling-revision-box>
    </div>

    <div
      *ngIf="!fromModalityPayment"
      class="header"
      [innerHTML]="templateStepForm?.get('direction')?.value | safeHtml"
    ></div>

    <ng-container formArrayName="segments">
      <div
        class="p-col-12 no-padding"
        *ngFor="let segment of getSegmentFormarray()?.controls; let segmentIndex = index"
        [formGroupName]="segmentIndex"
      >
        <!-- Payment Information -->
        <div class="p-col-12 no-padding" *ngIf="fromModalityPayment">
          <h2>
            {{ 'Scholarship fees remaining due (after payment of the down payment)' | translate }}:
            {{ candidates?.selected_payment_plan?.total_amount || 0 | currency : 'EURO' : '' : '0.2' }} EUR
          </h2>
          <ng-container *ngIf="candidates?.selected_payment_plan?.payment_date?.length > 0">
            <p>
              {{ 'Payment mode x times' | translate : { x: candidates?.selected_payment_plan?.payment_date?.length || 0 } }} -
              {{ (candidates?.method_of_payment === 'credit_card' ? 'Bank Debit' : candidates?.method_of_payment) | translate }}
            </p>
            <ul>
              <li *ngFor="let date of candidates?.selected_payment_plan?.payment_date">{{ date?.date }}</li>
            </ul>
          </ng-container>
        </div>

        <!-- Button to add student -->
        <div class="p-grid">
          <ng-container *ngIf="segment.get('is_student_included')?.value && !studentAsFinancialSupport">
            <div class="row final-btns btn-back margin-right-5">
              <div class="p-col">
                <button
                  mat-raised-button
                  matTooltip="{{ 'Add myself as financial support (student)' | translate }}"
                  matTooltipPosition="above"
                  (click)="addStudent(segmentIndex)"
                  class="regirstration-color btn-loan-touch btn-back-action"
                >
                  <mat-icon class="mat-icon-default">add</mat-icon>
                  {{ 'Add myself as financial support (student)' | translate }}
                </button>
              </div>
            </div>
          </ng-container>
          <!-- Button to add multiple financial support -->
          <ng-container *ngIf="segment.get('is_multiple_financial_support')?.value">
            <div class="row final-btns btn-back">
              <div class="p-col">
                <button
                  mat-raised-button
                  matTooltip="{{ 'Add someone else as financial support' | translate }}"
                  matTooltipPosition="above"
                  (click)="addMultipleFinancialSupport(segmentIndex, questionIndex)"
                  class="regirstration-color btn-loan-touch btn-back-action"
                >
                  <mat-icon class="mat-icon-default">add</mat-icon>
                  {{ 'Add someone else as financial support' | translate }}
                </button>
              </div>
            </div>
          </ng-container>
        </div>
        <!-- <div
            *ngIf="!fromModalityPayment"
            style="text-align: end; cursor: pointer"
            (click)="addMultipleFinancialSupport(segmentIndex, questionIndex)"
          >
            <button mat-icon-button class="small-icon" color="success">
              <mat-icon style="font-size: 25px">add</mat-icon>
            </button>
            {{ 'Add another financial support' | translate }}
          </div> -->

        <ng-container *ngIf="!fromModalityPayment">
          <h3 class="segment-name">{{ segment.get('segment_title')?.value }}</h3>
        </ng-container>
        <!-- <hr /> -->

        <!-- <hr /> -->

        <!-- For Question -->
        <ng-container
          formArrayName="questions"
          *ngIf="
            !fromModalityPayment ||
            (fromModalityPayment && studentAsFinancialSupport) ||
            (fromModalityPayment && !segment.get('is_student_included')?.value && !segment.get('is_multiple_financial_support')?.value)
          "
        >
          <div class="p-grid" [ngClass]="{ 'border-modality': fromModalityPayment }">
            <div *ngIf="getQuestionFieldFormArray(segmentIndex).length > 0 && segment.get('is_student_included')?.value" class="btn-remove">
              <button
                mat-icon-button
                class="small-icon"
                color="red"
                matTooltip="{{ 'Remove Student ' | translate }}"
                (click)="removeStudent(segmentIndex)"
              >
                <mat-icon style="font-size: 25px">close</mat-icon>
              </button>
            </div>
            <legend *ngIf="fromModalityPayment">
              {{ 'Student' | translate }}:
              {{ candidates?.civility && candidates?.civility === 'neutral' ? '' : (candidates?.civility | translate) }}
              {{ candidates?.first_name }} {{ candidates?.last_name | uppercase }}
            </legend>
            <div
              #questionLoop
              *ngFor="let quest of getQuestionFieldFormArray(segmentIndex)?.controls; let quesIndex = index; let firstIndex = first"
              [formGroupName]="quesIndex"
              style="margin-top: 25px"
              [ngClass]="[
                quest?.get('answer_type')?.value === 'long_text'
                  ? 'long-text'
                  : (getNextQuestionField(segmentIndex, quesIndex)?.get('field_position').value === 'right' &&
                      quest?.get('field_position').value !== 'right') ||
                    (getPreviousQuestionField(segmentIndex, quesIndex).get('field_position').value === 'left' &&
                      quest?.get('field_position').value === 'right') ||
                    (quest?.get('field_position').value === 'left' &&
                      getNextQuestionField(segmentIndex, quesIndex)?.get('answer_type')?.value === 'long_text')
                  ? 'half-width'
                  : 'full-width',
                quest?.get('answer_type')?.value === 'long_text'
                  ? ''
                  : questionLoop?.classList?.contains('full-width') && quest?.get('field_position').value === 'right'
                  ? 'right-end'
                  : 'left-end'
              ]"
            >
              <div *ngIf="checkValidation(segmentIndex, quesIndex)">
                <!-- IF FIELD IS ON -------------------------------------------->
                <div *ngIf="quest?.get('is_field')?.value">
                  <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                    <div class="p-col-12 p-md-4">
                      <label *ngIf="quest?.get('is_required')?.value"
                        >{{
                          'FORM_BUILDER_FIELD.' +
                            (quest?.get('field_type')?.value === 'nationality' ? 'nationality_first' : quest?.get('field_type')?.value)
                            | translate
                        }}*</label
                      >
                      <label *ngIf="!quest?.get('is_required')?.value">{{
                        'FORM_BUILDER_FIELD.' +
                          (quest?.get('field_type')?.value === 'nationality' ? 'nationality_first' : quest?.get('field_type')?.value)
                          | translate
                      }}</label>
                    </div>
                    <div class="p-col-12 p-md-8 x-pad-none">
                      <ng-container
                        [ngSwitch]="
                          (formDetail?.formType === 'teacher_contract' || formDetail?.formType === 'fc_contract') &&
                          ([
                            'TEACHER_CIVILITY',
                            'START_DATE',
                            'END_DATE',
                            'TEACHER_SUBJECTS',
                            'CONTRACT_TYPE',
                            'SCHOLAR_SEASON',
                            'TEACHER_MOBILE',
                            'TEACHER_EMAIL',
                            'TEACHER_PROGRAMS',
                            'TEACHER_TYPE_INTERVENTION',
                            'TEACHER_TYPE_INTERVENTION_1',
                            'TEACHER_TYPE_INTERVENTION_2',
                            'TEACHER_TYPE_INTERVENTION_3',
                            'TEACHER_TYPE_INTERVENTION_4',
                            'TEACHER_TYPE_INTERVENTION_5',
                            'TEACHER_TYPE_INTERVENTION_6',
                            'TEACHER_PROGRAMS_1',
                            'TEACHER_PROGRAMS_2',
                            'TEACHER_PROGRAMS_3',
                            'TEACHER_PROGRAMS_4',
                            'TEACHER_PROGRAMS_5',
                            'TEACHER_PROGRAMS_6',
                            'TEACHER_SUBJECTS_1',
                            'TEACHER_SUBJECTS_2',
                            'TEACHER_SUBJECTS_3',
                            'TEACHER_SUBJECTS_4',
                            'TEACHER_SUBJECTS_5',
                            'TEACHER_SUBJECTS_6',
                            'financer',
                            'type_of_financement',
                            'company_address',
                            'mentor',
                            'mentor_function',
                            'ceo',
                            'company_siret',
                            'legal_status',
                            'student_civility',
                            'student_first_name',
                            'student_last_name',
                            'student_address',
                            'volume_hour',
                            'school',
                            'campus',
                            'level',
                            'sector',
                            'speciality',
                            'full_rate',
                            'campus_address',
                            'school_stamp',
                            'legal_entity_address',
                            'legal_entity_region',
                            'legal_entity_siret',
                            'start_date',
                            'today_date',
                            'end_date',
                            'financial_support_link',
                            'financial_support_civility',
                            'EMAIL_SIGNALEMENTS',
                            'TEACHER_HOURLY_RATE_1',
                            'TEACHER_TRIAL_PERIOD_1',
                            'TEACHER_INDUCED_HOUR_COEFFICIENT_1',
                            'PAID_LEAVE_ALLOWANCE_RATE_1',
                            'RATE_EXCLUDING_PAID_LEAVE_ALLOWANCE_1',
                            'TEACHER_COMPENSATION_PAID_VACATION_1',
                            'TEACHER_VOLUME_HOURS_INDUCED_1',
                            'TEACHER_TOTAL_HOURS_AND_VOLUME_HOURS_INDUCED_1',
                            'TEACHER_TOTAL_PERIOD_1',
                            'TOTAL_AMOUNT',
                            'legal_entity_name',
                            'student_acccount_holder_name',
                            'student_cost'
                          ].includes(quest?.get('field_type')?.value) ||
                            teacherContractFieldTypeNumber.includes(quest?.get('field_type')?.value))
                            ? 'teacher-contract'
                            : formDetail?.formType !== 'teacher_contract' &&
                              formDetail?.formType !== 'fc_contract' &&
                              [
                                'parent_civility',
                                'student_civility',
                                'financial_support_civility',
                                'student_date_of_birth',
                                'parent_relation',
                                'date_of_birth'
                              ].includes(quest?.get('field_type')?.value)
                            ? 'admission'
                            : 'default'
                        "
                      >
                        <!-- IF FIELD IS ON AND FORM TYPE IS TEACHER CONTRACT -->
                        <ng-container *ngSwitchCase="'teacher-contract'">
                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'TEACHER_CIVILITY' ||
                              quest?.get('field_type')?.value === 'student_civility' ||
                              quest?.get('field_type')?.value === 'financial_support_civility'
                            "
                          >
                            <mat-radio-group formControlName="answer" [required]="quest?.get('is_required')?.value">
                              <mat-radio-button
                                value="MR"
                                style="padding-right: 10px"
                                [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Mr' | translate }}
                              </mat-radio-button>
                              <mat-radio-button
                                value="MRS"
                                style="padding-right: 10px"
                                [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Mrs' | translate }}
                              </mat-radio-button>
                              <mat-radio-button
                                value="neutral"
                                style="padding-right: 10px"
                                [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Neutral' | translate }}
                              </mat-radio-button>
                            </mat-radio-group>
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              ['START_DATE', 'END_DATE', 'start_date', 'end_date', 'today_date', 'date_of_birth'].includes(
                                quest?.get('field_type')?.value
                              )
                            "
                          >
                            <input
                              formControlName="answer_date"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              (click)="myDatepickersField.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              [max]="['date_of_birth'].includes(quest?.get('field_type')?.value) ? minimumDateOfBirth : null"
                              [matDatepicker]="myDatepickersField"
                              [required]="quest?.get('is_required')?.value"
                            />
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                            <mat-datepicker-toggle
                              *ngIf="quest?.get('is_editable')?.value"
                              matSuffix
                              [for]="myDatepickersField"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #myDatepickersField></mat-datepicker>
                          </div>
                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_relation' ||
                              quest?.get('field_type')?.value === 'parent_link' ||
                              quest?.get('field_type')?.value === 'financial_support_link'
                            "
                          >
                            <div class="p-grid">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                class="form-ng-select"
                                [required]="quest?.get('is_required')?.value"
                                [disabled]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                [clearable]="true"
                              >
                                <ng-option *ngFor="let relation of relationList" [value]="relation">
                                  {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                </ng-option>
                              </ng-select>

                              <!-- will show when Relation disable -->
                              <mat-form-field
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                              >
                                <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                  <mat-option *ngFor="let relation of relationList" [value]="relation">
                                    {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_1' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_2' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_3' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_4' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_5' ||
                              quest?.get('field_type')?.value === 'TEACHER_SUBJECTS_6'
                            "
                          >
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                [appendTo]="'body'"
                                [items]="subjectsList"
                                bindLabel="full_name"
                                bindValue="full_name"
                                [multiple]="false"
                                placeholder="{{ 'Subjects' | translate }}*"
                                formControlName="answer"
                                [clearable]="false"
                              >
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div *ngIf="quest?.get('field_type')?.value === 'EMAIL_SIGNALEMENTS'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                [appendTo]="'body'"
                                [items]="email_sign"
                                bindLabel="signalement_email"
                                bindValue="signalement_email"
                                [multiple]="true"
                                placeholder="{{ quest?.get('question_label')?.value }}"
                                formControlName="answer_multiple"
                                [clearable]="false"
                              >
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer_multiple')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div *ngIf="quest?.get('field_type')?.value === 'CONTRACT_TYPE'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                placeholder="{{ 'ADD_CONTRACT_DIALOG.Type of Contract' | translate }}*"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of contract_type" [value]="type">
                                  {{ 'ERP_009_TEACHER_CONTRACT.TYPE_OF_CONTRACT.' + type | translate }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="'ERP_009_TEACHER_CONTRACT.TYPE_OF_CONTRACT.' + quest?.get('answer')?.value | translate"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_1' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_2' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_3' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_4' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_5' ||
                              quest?.get('field_type')?.value === 'TEACHER_PROGRAMS_6'
                            "
                          >
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                placeholder="{{ 'ADD_CONTRACT_DIALOG.Programs' | translate }}*"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of programs" [value]="type?.program">
                                  {{ type?.program }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>
                          <div *ngIf="quest?.get('field_type')?.value === 'SCHOLAR_SEASON'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                placeholder="{{ 'Select Scholar Season' | translate }}*"
                                formControlName="answer"
                                [clearable]="false"
                                [appendTo]="'body'"
                              >
                                <ng-option *ngFor="let type of scholars" [value]="type?.scholar_season">
                                  {{ type?.scholar_season }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>
                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_1' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_2' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_3' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_4' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_5' ||
                              quest?.get('field_type')?.value === 'TEACHER_TYPE_INTERVENTION_6'
                            "
                          >
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                placeholder="{{ 'ADD_CONTRACT_DIALOG.Type of Intervention' | translate }}*"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of interventions" [value]="type?.value">
                                  {{ 'ERP_009_TEACHER_CONTRACT.INTERVETION_TYPE.' + type?.name | translate }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="
                                  quest?.get('answer')?.value
                                    ? ('ERP_009_TEACHER_CONTRACT.INTERVETION_TYPE.' + quest?.get('answer')?.value | translate)
                                    : ''
                                "
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- ERP_042 Field Type -->

                          <!-- Input Field Type file -->
                          <ng-container *ngIf="quest?.get('field_type')?.value === 'school_stamp'">
                            <div class="form-group">
                              <div class="p-col-12 p-md-8 x-pad-none" style="position: relative">
                                <div class="imgContainer">
                                  <div class="p-grid p-justify-center">
                                    <div class="logo-img-wrapper" *ngIf="!isPhotoUploading">
                                      <img
                                        class="center-image"
                                        [src]="
                                          is_photo_in_s3
                                            ? serverimgPath + photoIsField_s3_path
                                            : photoIsField
                                            ? serverimgPath + photoIsField
                                            : grayBackground
                                        "
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-container>

                          <!-- Input field type text field ERP_042 -->
                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'student_first_name' ||
                              quest?.get('field_type')?.value === 'student_last_name' ||
                              quest?.get('field_type')?.value === 'legal_entity_region' ||
                              quest?.get('field_type')?.value === 'legal_entity_siret' ||
                              quest?.get('field_type')?.value === 'company_siret' ||
                              quest?.get('field_type')?.value === 'mentor_function'
                            "
                          >
                            <div class="form-group">
                              <input
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                class="form-control"
                                type="text"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Input Field type number with answer field ERP_042 -->
                          <div *ngIf="teacherContractFieldTypeNumber.includes(quest?.get('field_type')?.value)">
                            <div class="form-group">
                              <input
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                (wheel)="onWheel($event)"
                                class="form-control"
                                type="number"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Input Field type number with answer_number field ERP_042 -->
                          <div *ngIf="['volume_hour', 'full_rate'].includes(quest?.get('field_type')?.value)">
                            <div class="form-group">
                              <input
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer_number"
                                (wheel)="onWheel($event)"
                                class="form-control"
                                type="number"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- School Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'school'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                (change)="getCampusDropdown(quest?.get('answer')?.value, segmentIndex)"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of schoolList" [value]="type.short_name">
                                  {{ type.short_name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Legal Status Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'legal_status'">
                            <div class="form-group">
                              <ng-select *ngIf="quest?.get('is_editable')?.value && !disable" formControlName="answer" [clearable]="false">
                                <ng-option *ngFor="let type of legalStatusList" [value]="type">
                                  {{ type }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Campus Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'campus'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                (change)="getLevelDropdown(quest?.get('answer')?.value, segmentIndex)"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of campusList" [value]="type.name">
                                  {{ type.name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Level Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'level'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                (change)="getSectorDropdown(selectedSchoolId, selectedCampusId, quest?.get('answer')?.value, segmentIndex)"
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of levelList" [value]="type.name">
                                  {{ type.name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Sector Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'sector'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                (change)="
                                  getSpecialityDropdown(
                                    selectedSchoolId,
                                    selectedCampusId,
                                    selectedLevelId,
                                    quest?.get('answer')?.value,
                                    segmentIndex
                                  )
                                "
                                formControlName="answer"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of sectorList" [value]="type.name">
                                  {{ type.name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Speciality Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'speciality'">
                            <div class="form-group">
                              <ng-select *ngIf="quest?.get('is_editable')?.value && !disable" formControlName="answer" [clearable]="false">
                                <ng-option *ngFor="let type of specialityList" [value]="type.name">
                                  {{ type.name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Financer Dropdown -->
                          <div *ngIf="quest?.get('field_type')?.value === 'financer'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                formControlName="answer"
                                (change)="checkFinancer(quest?.get('answer')?.value, segmentIndex, quesIndex)"
                                [clearable]="false"
                              >
                                <ng-option *ngFor="let type of listFinance" [value]="type.name">
                                  {{ type.name }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Type of Financement dropdown -->

                          <div *ngIf="quest?.get('field_type')?.value === 'type_of_financement'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                formControlName="answer_multiple"
                                [clearable]="false"
                                [multiple]="true"
                              >
                                <ng-option *ngFor="let type of listTypeOfFinancement" [value]="type">
                                  {{ type | translate }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer_multiple')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Text area field ERP_042 -->

                          <div
                            *ngIf="
                              quest?.get('field_type')?.value === 'student_address' ||
                              quest?.get('field_type')?.value === 'campus_address' ||
                              quest?.get('field_type')?.value === 'legal_entity_address' ||
                              quest?.get('field_type')?.value === 'company_address'
                            "
                          >
                            <div class="form-group">
                              <textarea
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                class="form-control custom-text-area"
                              ></textarea>
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Mentor Dropdown -->

                          <div *ngIf="quest?.get('field_type')?.value === 'mentor'">
                            <div class="form-group">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                formControlName="answer"
                                [clearable]="false"
                                (change)="getAllMentor(selectedFinancer, segmentIndex, quesIndex, quest?.get('answer')?.value)"
                              >
                                <ng-option *ngFor="let type of mentorList" value="{{ type?.last_name }} {{ type?.first_name }}">
                                  {{ type?.last_name | uppercase }} {{ type?.first_name }}
                                  {{ type?.civility && type?.civility === 'neutral' ? '' : (type?.civility | translate) }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />

                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- CEO dropdown -->

                          <div *ngIf="quest?.get('field_type')?.value === 'ceo'">
                            <div class="form-group">
                              <ng-select *ngIf="quest?.get('is_editable')?.value && !disable" formControlName="answer" [clearable]="false">
                                <ng-option *ngFor="let type of ceoList" value="{{ type?.last_name }} {{ type?.first_name }}">
                                  {{ type?.last_name | uppercase }} {{ type?.first_name }}
                                  {{ type?.civility && type?.civility === 'neutral' ? '' : (type?.civility | translate) }}
                                </ng-option>
                              </ng-select>
                              <input
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [value]="quest?.get('answer')?.value"
                                class="form-control"
                                type="text"
                                [readonly]="!quest?.get('is_editable')?.value || disable"
                              />

                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <!-- Email Teacher -->
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'TEACHER_EMAIL'">
                            <input
                              [email]="true"
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              pattern="[a-zA-Z0-9+_._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                              (keyup)="checkEmailUnique(segmentIndex, quesIndex, quest)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="emailValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Invalid Email Format' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                            <div style="margin-top: 10px;">
                              <button mat-raised-button color="accent" [disabled]="quest?.get('answer')?.invalid || disableButtonEmailNotValidated(segmentIndex, quesIndex, quest)" (click)="verifyEmail(segmentIndex, quesIndex, quest)">
                                {{ 'COMPANY.Check Email Availability' | translate }}
                              </button>
                            </div>
                          </div>

                          <!-- Phone Teacher  -->
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'TEACHER_MOBILE'">
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keypress)="phoneValidaton($event)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                        </ng-container>
                        <!-- END OF TEACHER CONTRACT AND FC CONTRACT FIELD TYPE QUESTIONS -->

                        <!-- START OF NON TEACHER CONTRACT AND NON FC CONTRACT FIELD TYPE QUESTIONS -->
                        <ng-container *ngSwitchCase="'admission'">
                          <ng-container
                            *ngIf="
                              ['parent_civility', 'student_civility', 'TEACHER_CIVILITY', 'financial_support_civility'].includes(
                                quest?.get('field_type')?.value
                              )
                            "
                          >
                            <mat-radio-group formControlName="answer" [required]="quest?.get('is_required')?.value">
                              <mat-radio-button
                                value="MR"
                                style="padding-right: 10px"
                                [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Mr' | translate }}
                              </mat-radio-button>
                              <mat-radio-button
                                value="MRS"
                                style="padding-right: 10px"
                                [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Mrs' | translate }}
                              </mat-radio-button>
                              <mat-radio-button value="neutral" [disabled]="disable || !quest?.get('is_editable')?.value"
                                >{{ 'Neutral' | translate }}
                              </mat-radio-button>
                            </mat-radio-group>
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </ng-container>

                          <div class="form-group" *ngIf="['student_date_of_birth'].includes(quest?.get('field_type')?.value)">
                            <input
                              formControlName="answer"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              (click)="myDatepickersField.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              [matDatepicker]="myDatepickersField"
                              [required]="quest?.get('is_required')?.value"
                            />

                            <mat-datepicker-toggle
                              matSuffix
                              [for]="myDatepickersField"
                              *ngIf="quest?.get('is_editable')?.value"
                            ></mat-datepicker-toggle>
                            <mat-datepicker [disabled]="!quest?.get('is_editable')?.value || disable" #myDatepickersField></mat-datepicker>
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div class="form-group" *ngIf="['date_of_birth'].includes(quest?.get('field_type')?.value)">
                            <input
                              formControlName="answer_date"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              (click)="myDatepickersField.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              [max]="minimumDateOfBirth"
                              [matDatepicker]="myDatepickersField"
                              [required]="quest?.get('is_required')?.value"
                              (dateInput)="dateBirthValueChange(segmentIndex, quesIndex)"
                            />

                            <mat-datepicker-toggle
                              matSuffix
                              [for]="myDatepickersField"
                              *ngIf="quest?.get('is_editable')?.value"
                            ></mat-datepicker-toggle>
                            <mat-datepicker [disabled]="!quest?.get('is_editable')?.value || disable" #myDatepickersField></mat-datepicker>
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'parent_relation'">
                            <div class="p-grid">
                              <mat-form-field [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }">
                                <mat-select
                                  [required]="quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                >
                                  <mat-option *ngFor="let relation of relationList" [value]="relation">
                                    {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>
                        </ng-container>
                        <!-- END OF NON TEACHER CONTRACT AND NON FC CONTRACT FIELD TYPE QUESTIONS -->

                        <!-- START OF DEFAULT -->
                        <ng-container *ngSwitchCase="'default'">
                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'student_country' ||
                              quest?.get('field_type')?.value === 'parent_country' ||
                              quest?.get('field_type')?.value === 'alumni_country' ||
                              quest?.get('field_type')?.value === 'country_of_birth' ||
                              quest?.get('field_type')?.value === 'financial_support_country' ||
                              quest?.get('field_type')?.value === 'student_college_country' 
                            "
                          >
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let country of countryList" [value]="country?.original">
                                {{ country.name }}
                              </ng-option>
                            </ng-select>

                            <mat-form-field
                              *ngIf="!quest?.get('is_editable')?.value || disable"
                              [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                            >
                              <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                <mat-option *ngFor="let country of countryList" [value]="country?.original">
                                  {{ country.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_promo_year'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let promo of promotionList" [value]="promo">
                                {{ promo }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_professional_status'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let profesi of proffesionalList" [value]="profesi">
                                {{ profesi | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_school'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                              (change)="getDataCampus($event, segmentIndex)"
                            >
                              <ng-option *ngFor="let school of schoolList" [value]="school?.short_name">
                                {{ school?.short_name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_campus'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let campus of campusList" [value]="campus?.name">
                                {{ campus?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_speciality'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let speciality of specialityList" [value]="speciality?.name">
                                {{ speciality?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_sector'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                              (change)="getDataSpecialityBasedSector($event, segmentIndex)"
                            >
                              <ng-option *ngFor="let sector of sectorList" [value]="sector?.name">
                                {{ sector?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'nationality' || quest?.get('field_type')?.value === 'nationality_second'
                            "
                          >
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let national of nationalList" [value]="national.nationality_en">
                                {{ 'NATIONALITY.' + national.nationality_en | translate }}
                              </ng-option>
                            </ng-select>

                            <!-- will show when nationality disable -->
                            <mat-form-field
                              *ngIf="!quest?.get('is_editable')?.value || disable"
                              [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                            >
                              <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                <mat-option *ngFor="let national of nationalList" [value]="national.nationality_en">
                                  {{ 'NATIONALITY.' + national.nationality_en | translate }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>

                            <div
                              class="invalid-feedback"
                              *ngIf="alphaNumericValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert alphabet and number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_relation' ||
                              quest?.get('field_type')?.value === 'parent_link' ||
                              quest?.get('field_type')?.value === 'financial_support_link' ||
                              quest?.get('field_type')?.value === 'emergency_contact_relation'
                            "
                          >
                            <div class="p-grid">
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                class="form-ng-select"
                                [required]="quest?.get('is_required')?.value"
                                [disabled]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                [clearable]="true"
                              >
                                <ng-option *ngFor="let relation of relationList" [value]="relation">
                                  {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                </ng-option>
                              </ng-select>
                              <div
                                class="invalid-feedback"
                                *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                              >
                                {{ 'This field is required' | translate }}
                              </div>

                              <mat-form-field
                                *ngIf="!quest?.get('is_editable')?.value || disable"
                                [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                              >
                                <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                  <mat-option *ngFor="let relation of relationList" [value]="relation">
                                    {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'student_cost'">
                            <div
                              class="input-group"
                              [ngClass]="{
                                'has-error':
                                  (invalidCost || minCostCoverage || maxCostCoverage || !quest?.get('answer')?.value) &&
                                  (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              }"
                            >
                              <input
                                class="form-control"
                                formControlName="answer"
                                (keypress)="decimalFilter($event)"
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                (keyup)="getCostCoverage(segmentIndex)"
                              />
                              <div class="input-group-addon">EUR</div>
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                quest?.get('answer')?.value < 20 &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched) || !isValidCostCoverageAfterRecalculate
                              "
                            >
                              {{ 'minimum value 20' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                invalidCost &&
                                minCostCoverage &&
                                !maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot less than total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                invalidCost &&
                                !minCostCoverage &&
                                maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot exceed the total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'financial_support_cost'">
                            <div
                              class="input-group"
                              [ngClass]="{
                                'has-error':
                                  (invalidCost || minCostCoverage || maxCostCoverage || !quest?.get('answer')?.value) &&
                                  (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              }"
                            >
                              <input
                                class="form-control"
                                formControlName="answer"
                                (keypress)="decimalFilter($event)"
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                (keyup)="getCostCoverage(segmentIndex)"
                              />
                              <div class="input-group-addon">EUR</div>
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="!quest?.get('answer')?.value && (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)"
                            >
                              {{ 'minimum value 1' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                invalidCost &&
                                !minCostCoverage &&
                                !maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot exceed the student cost coverage' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                !invalidCost &&
                                minCostCoverage &&
                                !maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot less than total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                !invalidCost &&
                                !minCostCoverage &&
                                maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot exceed the total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_postcode' ||
                              quest?.get('field_type')?.value === 'postcode' ||
                              quest?.get('field_type')?.value === 'alumni_first_name' ||
                              quest?.get('field_type')?.value === 'alumni_rncp_title' ||
                              quest?.get('field_type')?.value === 'alumni_last_name' ||
                              quest?.get('field_type')?.value === 'alumni_last_name_used' ||
                              quest?.get('field_type')?.value === 'alumni_activity_sector' ||
                              quest?.get('field_type')?.value === 'alumni_company' ||
                              quest?.get('field_type')?.value === 'alumni_job_name' ||
                              quest?.get('field_type')?.value === 'alumni_zip_code' ||
                              quest?.get('field_type')?.value === 'alumni_department' ||
                              quest?.get('field_type')?.value === 'alumni_region' ||
                              quest?.get('field_type')?.value === 'alumni_city' ||
                              quest?.get('field_type')?.value === 'alumni_address' ||
                              quest?.get('field_type')?.value === 'parent_department' ||
                              quest?.get('field_type')?.value === 'parent_region' ||
                              quest?.get('field_type')?.value === 'parent_city' ||
                              quest?.get('field_type')?.value === 'parent_address' ||
                              quest?.get('field_type')?.value === 'parent_first_name' ||
                              quest?.get('field_type')?.value === 'parent_last_name' ||
                              quest?.get('field_type')?.value === 'region' ||
                              quest?.get('field_type')?.value === 'departement' ||
                              quest?.get('field_type')?.value === 'city' ||
                              quest?.get('field_type')?.value === 'address' ||
                              quest?.get('field_type')?.value === 'place_of_birth' ||
                              quest?.get('field_type')?.value === 'city_of_birth' ||
                              quest?.get('field_type')?.value === 'post_code_of_birth' ||
                              quest?.get('field_type')?.value === 'first_name' ||
                              quest?.get('field_type')?.value === 'last_name' ||
                              quest?.get('field_type')?.value === 'cvec_number' ||
                              quest?.get('field_type')?.value === 'ine_number' ||
                              quest?.get('field_type')?.value === 'used_last_name' ||
                              quest?.get('field_type')?.value === 'used_first_name' ||
                              quest?.get('field_type')?.value === 'TEACHER_FIRST_NAME' ||
                              quest?.get('field_type')?.value === 'TEACHER_LAST_NAME' ||
                              quest?.get('field_type')?.value === 'financial_support_address' ||
                              quest?.get('field_type')?.value === 'financial_support_city' ||
                              quest?.get('field_type')?.value === 'financial_support_departement' ||
                              quest?.get('field_type')?.value === 'financial_support_region' ||
                              quest?.get('field_type')?.value === 'student_iban' ||
                              quest?.get('field_type')?.value === 'student_bic' ||
                              quest?.get('field_type')?.value === 'financial_support_iban' ||
                              quest?.get('field_type')?.value === 'financial_support_bic' ||
                              quest?.get('field_type')?.value === 'financial_support_postcode' ||
                              quest?.get('field_type')?.value === 'financial_support_first_name' ||
                              quest?.get('field_type')?.value === 'financial_support_last_name' ||
                              quest?.get('field_type')?.value === 'student_acccount_holder_name' ||
                              quest?.get('field_type')?.value === 'financial_support_account_holder_name' ||
                              quest?.get('field_type')?.value === 'emergency_contact_last_name' ||
                              quest?.get('field_type')?.value === 'emergency_contact_first_name' ||
                              quest?.get('field_type')?.value === 'emergency_contact_address' ||
                              quest?.get('field_type')?.value === 'emergency_contact_city' ||
                              quest?.get('field_type')?.value === 'emergency_contact_zipcode' ||
                              quest?.get('field_type')?.value === 'student_college_name' || 
                              quest?.get('field_type')?.value === 'student_college_city' || 
                              quest?.get('field_type')?.value === 'student_college_zipcode'
                            "
                          >
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keypress)="alphaNumberOnly($event, quest?.get('field_type')?.value)"
                              (keyup)="getPostcodeData(quest, segmentIndex, quesIndex, 'questions')"
                            />

                            <div
                              class="invalid-feedback"
                              *ngIf="alphaNumericValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert alphabet and number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <!-- <div
                        class="form-group"
                        *ngIf="quest?.get('field_type')?.value === 'postcode' || quest?.get('field_type')?.value === 'parent_postcode'"
                      >
                        <input
                          #numericInput
                          [readOnly]="!quest?.get('is_editable')?.value || disable"
                          formControlName="answer"
                          type="number"
                          class="form-control"
                          [required]="quest?.get('is_required')?.value"
                          onKeyPress="if(this.value.length==9) return false;"
                          (keypress)="preventNonNumericalInput($event)"
                          (keyup)="getPostcodeData(quest, segmentIndex, quesIndex)"
                        />
                        <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                          {{ 'This field is required' | translate }}
                        </div>
                      </div> -->

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_home_phone' ||
                              quest?.get('field_type')?.value === 'home_phone' ||
                              quest?.get('field_type')?.value === 'financial_support_home_phone'
                            "
                          >
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keypress)="phoneValidaton($event)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <!-- *************** START OF code for country phone and dial code (Related to EVOL_0012) -->
                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_phone' ||
                              quest?.get('field_type')?.value === 'alumni_telephone' ||
                              quest?.get('field_type')?.value === 'phone_number' ||
                              quest?.get('field_type')?.value === 'emergency_contact_telephone'
                            "
                          >
                            <div class="no-padding-y p-grid" style="position: relative">
                              <div class="phone-number p-col-4">
                                <ng-select
                                  [formControl]="getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')"
                                  [required]="quest?.get('answer')?.value || quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  (change)="selectionDialCode($event, segmentIndex, quesIndex)"
                                  [clearable]="false"
                                  bindLabel="name"
                                  [appendTo]="'body'"
                                  class="mrgn-btn"
                                  class="form-control custom-dropdownpanel-dialcode"
                                  [ngClass]="
                                    getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.hasError('required') &&
                                    (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.dirty ||
                                    getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.touched) ? 'has-error-dialcode' : ''
                                  "
                                >
                                  <ng-template ng-label-tmp let-item="item">
                                    <img class="flag-icon-trigger" [src]="flagsIconPath + item?.flagIcon + '.svg'"/>
                                    <span *ngIf="item?.flagIcon" class="ml-4">+{{ item?.dialCode }}</span>
                                  </ng-template>
                                  <ng-option *ngFor="let country of countryCodeList" [value]="country">
                                    <ng-container *ngIf="country?.name">
                                      <img class="flag-icon" [src]="flagsIconPath + country?.flagIcon + '.svg'" /> {{ country?.name | translate }} +{{ country?.dialCode }}
                                    </ng-container>
                                  </ng-option>
                                </ng-select>
                              </div>
                              <div class="phone-number p-col-8">
                                <input
                                  [required]="quest?.get('is_required')?.value || getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.value"
                                  [readOnly]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                  pattern="^[0-9]+$"
                                  class="form-control"
                                  (keypress)="phoneValidaton($event)" 
                                />
                                <div
                                  class="invalid-feedback"
                                  *ngIf="(paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || (quest?.get('answer').hasError('pattern') && (quest?.get('answer').dirty || quest?.get('answer').touched))"
                                >
                                  {{ 'Please insert number only' | translate }}
                                </div>
                              </div>
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  (requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || 
                                  (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.hasError('required') && 
                                  (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.dirty || 
                                  getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.touched))
                                  "
                              >
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'financial_support_phone_number'
                            "
                          >
                            <div class="no-padding-y p-grid" style="position: relative">
                              <div class="phone-number p-col-4">
                                <ng-select
                                  [formControl]="getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')"
                                  [required]="quest?.get('answer')?.value || quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  (change)="selectionDialCode($event, segmentIndex, quesIndex, 'financial_support_phone_number', addtionalIndex)"
                                  [clearable]="false"
                                  bindLabel="name"
                                  [appendTo]="'body'"
                                  class="mrgn-btn"
                                  class="form-control custom-dropdownpanel-dialcode"
                                  [ngClass]="
                                    getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.hasError('required') &&
                                    (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.dirty ||
                                    getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.touched) ? 'has-error-dialcode' : ''
                                  "
                                >
                                  <ng-template ng-label-tmp let-item="item">
                                    <img class="flag-icon-trigger" [src]="flagsIconPath + item?.flagIcon + '.svg'"/>
                                    <span *ngIf="item?.flagIcon" class="ml-4">+{{ item?.dialCode }}</span>
                                  </ng-template>
                                  <ng-option *ngFor="let country of countryCodeList" [value]="country">
                                    <ng-container *ngIf="country?.name">
                                      <img class="flag-icon" [src]="flagsIconPath + country?.flagIcon + '.svg'" /> {{ country?.name | translate }} +{{ country?.dialCode }}
                                    </ng-container>
                                  </ng-option>
                                </ng-select>
                              </div>
                              <div class="phone-number p-col-8">
                                <input
                                  [required]="quest?.get('is_required')?.value || getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.value"
                                  [readOnly]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                  class="form-control"
                                  pattern="^[0-9]+$"
                                  (keypress)="phoneValidaton($event)" 
                                />
                                <div
                                  class="invalid-feedback"
                                  *ngIf="(paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || (quest?.get('answer').hasError('pattern') && (quest?.get('answer').dirty || quest?.get('answer').touched))"
                                >
                                  {{ 'Please insert number only' | translate }} 4134123123
                                </div>
                              </div>
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                  (requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || 
                                  (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.hasError('required') && 
                                  (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.dirty || 
                                  getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.touched))
                                "
                              >
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>
                          <!-- *************** END OF code for country phone and dial code (Related to EVOL_0012) -->

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_email' ||
                              quest?.get('field_type')?.value === 'financial_support_email' ||
                              quest?.get('field_type')?.value === 'school_mail' ||
                              quest?.get('field_type')?.value === 'alumni_email' ||
                              quest?.get('field_type')?.value === 'email' ||
                              quest?.get('field_type')?.value === 'emergency_contact_email'
                            "
                          >
                            <input
                              [email]="true"
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              pattern="[a-zA-Z0-9+_._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                              (keyup)="checkEmailUnique(segmentIndex, quesIndex, quest)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                quest?.value?.answer === candidateData?.email &&
                                quest.touched &&
                                quest?.get('field_type')?.value === 'financial_support_email'
                              "
                            >
                              {{ "Email can't be same like candidate email" | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="emailValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Invalid Email Format' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                            <div style="margin-top: 10px;" *ngIf="quest?.get('field_type')?.value !== 'emergency_contact_email'">
                              <button mat-raised-button color="accent" [disabled]="quest?.get('answer')?.invalid || disableButtonEmailNotValidated(segmentIndex, quesIndex, quest)" (click)="verifyEmail(segmentIndex, quesIndex, quest)">
                                {{ 'COMPANY.Check Email Availability' | translate }}
                              </button>
                            </div>
                          </div>

                          <ng-container *ngIf="quest?.get('field_type')?.value === 'upload_picture'">
                            <div class="form-group">
                              <div class="p-col-12 p-md-8 x-pad-none" style="position: relative">
                                <div class="imgContainer" [ngClass]="isMandatory(quest) ? 'img-required-border' : ''">
                                  <input
                                    type="file"
                                    #userphoto
                                    style="display: none"
                                    name="file"
                                    accept="image/png, image/jpeg, image/jpg"
                                    [required]="quest?.get('is_required')?.value"
                                    (change)="selectFile($event, 'isField', segmentIndex, quesIndex)"
                                  />
                                  <div class="overlay-cover" (click)="openUploadWindow(quest)">
                                    <mat-icon class="text">edit</mat-icon>
                                  </div>
                                  <div class="p-grid p-justify-center">
                                    <div class="logo-img-wrapper" *ngIf="!isPhotoUploading">
                                      <img
                                        class="center-image"
                                        (click)="openUploadWindow(quest)"
                                        [src]="
                                          is_photo_in_s3
                                            ? serverimgPath + photoIsField_s3_path
                                            : photoIsField
                                            ? serverimgPath + photoIsField
                                            : quest?.get('answer')?.value
                                            ? serverimgPath + quest?.get('answer')?.value
                                            : neutralStudentIcon
                                        "
                                      />
                                    </div>
                                  </div>
                                  <div class="logo-spinner-wrapper" *ngIf="isPhotoUploading">
                                    <mat-progress-spinner style="margin: 0 auto" mode="indeterminate" color="accent"></mat-progress-spinner>
                                  </div>
                                </div>
                                <div class="button-container">
                                  <button
                                    style="margin-right: 10px; margin-top: 10px"
                                    matTooltip="{{ 'Edit Picture' | translate }}"
                                    mat-mini-fab
                                    color="primary"
                                    (click)="openUploadWindow(quest)"
                                  >
                                    <mat-icon>edit</mat-icon>
                                  </button>
                                </div>
                                <div class="invalid-feedback" *ngIf="isMandatory(quest)" style="text-align: center; padding-top: 6px;">
                                  {{ 'You need to upload your photo' | translate }}
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                      </ng-container>
                    </div>
                  </div>
                </div>

                <!-- IF FIELD IS OFF -------------------------------------------->

                <!-- For question with slider is_field off -->
                <div *ngIf="!quest?.get('is_field')?.value">
                  <!-- short_text -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'short_text'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4" style="justify-content: start !important">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <div class="form-group">
                          <input
                            [required]="quest?.get('is_required')?.value"
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            formControlName="answer"
                            class="form-control"
                            (input)="checkTypeForValidation(segmentIndex, quesIndex)"
                          />
                          <div
                            class="invalid-feedback"
                            *ngIf="quest.get('is_required')?.value && !quest?.get('answer')?.value && quest.touched"
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                          <div
                            class="invalid-feedback"
                            *ngIf="quest.get('text_validation')?.get('custom_error_text') && quest.invalid && quest.touched"
                          >
                            {{ quest.get('text_validation')?.get('custom_error_text')?.value }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- long_text -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'long_text'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-2" style="justify-content: start !important">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-10 x-pad-none">
                        <div class="form-group">
                          <textarea
                            [required]="quest?.get('is_required')?.value"
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            formControlName="answer"
                            class="form-control"
                            (input)="checkTypeForValidation(segmentIndex, quesIndex)"
                            cdkTextareaAutosize
                            cdkAutosizeMinRows="2"
                            cdkAutosizeMaxRows="4"
                            #autosize="cdkTextareaAutosize"
                          ></textarea>
                          <div
                            class="invalid-feedback"
                            *ngIf="quest.get('is_required')?.value && !quest?.get('answer')?.value && quest.touched"
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                          <div
                            class="invalid-feedback"
                            *ngIf="quest.get('text_validation')?.get('custom_error_text') && quest.invalid && quest.touched"
                          >
                            {{ quest.get('text_validation')?.get('custom_error_text')?.value }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- email -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'email'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4 self-center">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <div class="form-group">
                          <input
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            [required]="quest?.get('is_required')?.value"
                            formControlName="answer"
                            class="form-control"
                            (keyup)="checkEmailUnique(segmentIndex, quesIndex, quest)"
                          />
                          <div
                            class="invalid-feedback"
                            *ngIf="quest.get('is_required')?.value && !quest?.get('answer')?.value && quest.touched"
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                          <mat-error
                            *ngIf="quest?.get('answer').dirty && quest?.get('answer').touched && quest?.get('answer').hasError('email')"
                          >
                            {{ 'Invalid email format' | translate }}
                          </mat-error>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- duration -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'duration'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4 self-center">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <div class="form-group">
                          <input
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            [required]="quest?.get('is_required')?.value"
                            formControlName="answer_duration"
                            class="form-control"
                            type="time"
                            step="1"
                            (change)="validateDurationInput($event)"
                            (keydown)="onKeyDownDuration($event)"
                          />
                          <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Time -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'time'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <div class="form-group">
                          <ng-container *ngIf="!disable">
                            <input
                              class="form-control"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [required]="quest?.get('is_required')?.value"
                              formControlName="answer_time"
                              [ngxTimepicker]="timePicker"
                              [format]="24"
                            />
                            <ngx-material-timepicker-toggle class="btn-time" matSuffix [for]="timePicker">
                              <svg
                                style="transform: scale(0.85)"
                                viewBox="0 0 30 30"
                                width="30px"
                                height="30px"
                                ngxMaterialTimepickerToggleIcon
                              >
                                <path
                                  fill="#000000"
                                  d="M15,3C8.373,3,3,8.373,3,15c0,6.627,5.373,12,12,12s12-5.373,12-12C27,8.373,21.627,3,15,3z M16,16H7.995 C7.445,16,7,15.555,7,15.005v-0.011C7,14.445,7.445,14,7.995,14H14V5.995C14,5.445,14.445,5,14.995,5h0.011 C15.555,5,16,5.445,16,5.995V16z"
                                />
                              </svg>
                            </ngx-material-timepicker-toggle>
                            <ngx-material-timepicker #timePicker></ngx-material-timepicker>
                          </ng-container>
                          <ng-container *ngIf="disable">
                            <input
                              class="form-control"
                              formControlName="answer_time"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                            />
                          </ng-container>
                          <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Date Type -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'date'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <div class="form-group">
                          <input
                            (click)="myDatepickers.open()"
                            (keydown)="validateDateKeyInput($event)"
                            class="form-control"
                            formControlName="answer_date"
                            [matDatepicker]="myDatepickers"
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            [disabled]="!quest?.get('is_editable')?.value || disable"
                            [required]="quest?.get('is_required')?.value"
                          />
                          <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                          <mat-datepicker-toggle matSuffix [for]="myDatepickers"></mat-datepicker-toggle>
                          <mat-datepicker #myDatepickers></mat-datepicker>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Numeric -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'numeric'">
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <!-- <mat-form-field class="width-ninety">
                          <input appearance="fill" matInput type="number" />
                        </mat-form-field> -->
                        <div class="form-group">
                          <input
                            #numericInput
                            [readOnly]="!quest?.get('is_editable')?.value || disable"
                            formControlName="answer_number"
                            type="number"
                            (wheel)="onWheel($event)"
                            class="form-control"
                            (change)="checkValidationNumeric(segmentIndex, quesIndex, quest?.get('is_required')?.value)"
                            [required]="quest?.get('is_required')?.value"
                            onKeyPress="if(this.value.length==9) return false;"
                            (keypress)="preventNonNumericalInput($event)"
                          />
                          <div
                            class="invalid-feedback"
                            *ngIf="
                              quest.get('answer_number').hasError('required') &&
                              quest.get('answer_number').dirty &&
                              quest.get('answer_number').touched
                            "
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                          <div
                            class="invalid-feedback"
                            *ngIf="
                              quest.get('answer_number').hasError('errors') &&
                              quest.get('answer_number').dirty &&
                              quest.get('answer_number').touched &&
                              quest.get('answer_number').value
                            "
                          >
                            {{ quest.get('numeric_validation')?.get('custom_error_text')?.value }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Single Option  && Dropdown Single Option-->
                  <ng-container
                    *ngIf="
                      quest?.get('answer_type')?.value === 'single_option' ||
                      quest?.get('answer_type')?.value === 'single_option_diploma' ||
                      quest?.get('answer_type')?.value === 'dropdown_single_option' ||
                      quest?.get('answer_type')?.value === 'single_option_readmission_yes_or_no' ||
                      quest?.get('answer_type')?.value === 'single_option_reason_not_readmission'
                    "
                  >
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        <div
                          class="invalid-feedback"
                          *ngIf="
                            quest?.get('answer_multiple').dirty &&
                            quest?.get('answer_multiple').touched &&
                            quest?.get('answer').hasError('required')
                          "
                        >
                          {{ 'This field is required' | translate }}
                        </div>
                      </div>
                      <div class="p-col-12 p-md-8 x-pad-none">
                        <!-- Single Option -->
                        <ng-container *ngIf="quest?.get('answer_type')?.value !== 'dropdown_single_option' &&  quest?.get('answer_type')?.value !== 'single_option_readmission_yes_or_no'">
                          <mat-radio-group [required]="quest?.get('is_required')?.value" formControlName="answer">
                            <mat-radio-button
                              [value]="option?.option_name"
                              *ngFor="let option of quest?.get('options')?.value"
                              style="width: 100%; padding-right: 10px"
                              [disabled]="disable"
                            >
                              {{ option?.option_name }}
                            </mat-radio-button>
                          </mat-radio-group>
                          <div class="invalid-feedback center" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </ng-container>

                        <!-- Single Option Redmission Yes Or No -->
                        <ng-container *ngIf="quest?.get('answer_type')?.value === 'single_option_readmission_yes_or_no'">
                          <mat-radio-group [required]="quest?.get('is_required')?.value" formControlName="answer">
                            <mat-radio-button
                              [value]="option?.option_name"
                              *ngFor="let option of quest?.get('options')?.value; let indexOption = index"
                              style="width: 100%; padding-right: 10px"
                              (click)="handleRadioOption(segmentIndex, quesIndex, option?.option_name, indexOption)"
                              [disabled]="disable"
                            >
                              {{ option?.option_name }}
                            </mat-radio-button>
                          </mat-radio-group>
                          <div class="invalid-feedback center" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </ng-container>
                        <!-- Dropdonw Single Option -->
                        <ng-container *ngIf="quest?.get('answer_type')?.value === 'dropdown_single_option'">
                          <mat-form-field>
                            <mat-label>{{ 'Select' | translate }}</mat-label>
                            <mat-select
                              [disableOptionCentering]="true"
                              panelClass="filterPanel"
                              formControlName="answer"
                              [disabled]="disable"
                              [required]="quest?.get('is_required')?.value"
                              [multiple]="false"
                            >
                              <mat-option
                                *ngFor="let option of quest?.get('options')?.value"
                                [matTooltip]="option?.option_name"
                                [value]="option?.option_name"
                              >
                                {{ option?.option_name }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <div class="invalid-feedback center" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </ng-container>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Multiple Option && Dropdown Multiple Option -->
                  <ng-container
                    *ngIf="
                      quest?.get('answer_type')?.value === 'multiple_option' ||
                      quest?.get('answer_type')?.value === 'dropdown_multiple_option'
                    "
                  >
                    <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-12 p-md-4">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        <div
                          class="invalid-feedback"
                          *ngIf="
                            (quest?.get('answer_multiple').hasError('required') &&
                              quest?.get('answer_multiple').touched &&
                              quest?.get('answer_type')?.value === 'multiple_option') ||
                            (quest.get('is_required')?.value &&
                              quest?.invalid &&
                              quest.touched &&
                              quest?.get('answer_type')?.value === 'multiple_option')
                          "
                        >
                          {{ 'This field is required' | translate }}
                        </div>
                        <ng-container
                          *ngIf="
                            quest?.value?.multiple_option_validation?.custom_error_text &&
                            quest?.get('answer_multiple').dirty &&
                            quest?.get('answer_multiple').touched &&
                            quest?.get('answer_type')?.value === 'multiple_option'
                          "
                        >
                          <div
                            class="invalid-feedback"
                            *ngIf="
                              !quest?.get('answer_multiple').hasError('required') &&
                              (quest?.get('answer_multiple').hasError('minSelection') ||
                                quest?.get('answer_multiple').hasError('maxSelection') ||
                                quest?.get('answer_multiple').hasError('exactSelection'))
                            "
                          >
                            {{ quest?.value?.multiple_option_validation?.custom_error_text }}
                          </div>
                        </ng-container>
                      </div>
                      <div class="p-col-12 p-md-8" style="padding-left: 3px">
                        <!-- Multiple Optiom -->
                        <ng-container *ngIf="quest?.get('answer_type')?.value === 'multiple_option'">
                          <mat-checkbox
                            *ngFor="let option of quest?.get('options')?.value"
                            style="padding-right: 10px"
                            [disabled]="disable"
                            [checked]="quest?.get('answer_multiple')?.value?.includes(option?.option_name)"
                            (change)="setOptions(segmentIndex, quesIndex, option?.option_name, quest?.get('is_required')?.value)"
                          >
                            {{ option?.option_name }}
                          </mat-checkbox>
                        </ng-container>
                        <!-- Dropdown Multiple Option -->
                        <ng-container *ngIf="quest?.get('answer_type')?.value === 'dropdown_multiple_option'">
                          <mat-form-field>
                            <mat-label>{{ 'Select' | translate }}</mat-label>
                            <mat-select
                              [disableOptionCentering]="true"
                              panelClass="filterPanel"
                              [required]="quest?.get('is_required')?.value"
                              [multiple]="true"
                              [disabled]="disable"
                              formControlName="answer_multiple"
                              (selectionChange)="setOptions(segmentIndex, quesIndex, $event.value, quest?.get('is_required')?.value)"
                            >
                              <mat-option
                                *ngFor="let option of quest?.get('options')?.value"
                                [matTooltip]="option?.option_name"
                                [value]="option?.option_name"
                              >
                                {{ option?.option_name }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                          <div
                            class="invalid-feedback"
                            *ngIf="
                              (quest?.get('answer_multiple').hasError('required') && quest?.get('answer_multiple').touched) ||
                              (quest.get('is_required')?.value &&
                                quest?.invalid &&
                                quest.touched &&
                                quest?.get('answer_type')?.value === 'dropdown_multiple_option')
                            "
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                          <ng-container
                            *ngIf="
                              quest?.value?.multiple_option_validation?.custom_error_text &&
                              quest?.get('answer_multiple').dirty &&
                              quest?.get('answer_multiple').touched &&
                              quest?.get('answer_type')?.value === 'dropdown_multiple_option'
                            "
                          >
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                !quest?.get('answer_multiple').hasError('required') &&
                                (quest?.get('answer_multiple').hasError('minSelection') ||
                                  quest?.get('answer_multiple').hasError('maxSelection') ||
                                  quest?.get('answer_multiple').hasError('exactSelection'))
                              "
                            >
                              {{ quest?.value?.multiple_option_validation?.custom_error_text }}
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Parent Child Option -->
                  <ng-container *ngIf="quest?.get('answer_type')?.value === 'parent_child_option'">
                    <div
                      class="p-grid"
                      [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'"
                      *ngIf="quest?.get('answer_type')?.value === 'parent_child_option'"
                    >
                      <div class="p-col-4" style="justify-content: start; padding-left: 5px">
                        <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                        <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                      </div>
                      <div class="p-col-8 x-pad-none align-left">
                        <ms-form-fill-recursive-single-option
                          [stepForm]="templateStepForm"
                          [inputQuestion]="quest"
                          [segmentIndex]="segmentIndex"
                          [questionIndex]="quesIndex"
                          [isFormDisabled]="disable"
                        >
                        </ms-form-fill-recursive-single-option>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </div>
              <!-- Parent Child Option -->
              <ng-container *ngIf="quest?.get('answer_type')?.value === 'parent_child_option' && !checkValidation(segmentIndex, quesIndex)">
                <div
                  class="p-grid"
                  [ngClass]="questionLoop.classList.contains('right-end') ? 'justify-end' : 'justify-start'"
                  *ngIf="quest?.get('answer_type')?.value === 'parent_child_option'"
                >
                  <div class="p-col-4" style="justify-content: start; padding-left: 5px">
                    <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                    <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                  </div>
                  <div class="p-col-8 x-pad-none align-left">
                    <ms-form-fill-recursive-single-option
                      [stepForm]="templateStepForm"
                      [inputQuestion]="quest"
                      [segmentIndex]="segmentIndex"
                      [questionIndex]="quesIndex"
                      [isFormDisabled]="disable"
                    >
                    </ms-form-fill-recursive-single-option>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
        </ng-container>

        <ng-container formArrayName="additional_financial_supports">
          <div
            class="p-col-12 no-padding"
            [ngClass]="{ 'border-modality': fromModalityPayment }"
            *ngFor="let addtional of getAddtionalQuestionFieldFormArray(segmentIndex)?.controls; let addtionalIndex = index"
            [formGroupName]="addtionalIndex"
          >
            <!-- <hr /> -->
            <!-- For Question -->
            <ng-container formArrayName="questions">
              <div *ngIf="getAddtionalQuestionField(segmentIndex, addtionalIndex).length > 1" style="text-align: right">
                <button
                  mat-icon-button
                  class="small-icon btn-remove"
                  color="red"
                  matTooltip="{{ 'Remove financial support' | translate }}"
                  (click)="removeMultipleFinancialSupport(segmentIndex, addtionalIndex)"
                >
                  <mat-icon style="font-size: 25px">close</mat-icon>
                </button>
                <legend *ngIf="fromModalityPayment" style="text-align: left">
                  {{ 'Financial Respondent' | translate }} {{ addtionalIndex + 1 }}
                </legend>
              </div>
              <div class="p-grid">
                <div
                  #questionLoop2
                  *ngFor="
                    let quest of getAddtionalQuestionField(segmentIndex, addtionalIndex)?.controls;
                    let quesIndex = index;
                    let firstIndex = first
                  "
                  [formGroupName]="quesIndex"
                  style="margin-top: 25px"
                  [ngClass]="[
                    (getNextAddtionalQuestionField(segmentIndex, addtionalIndex, quesIndex)?.get('field_position').value === 'right' &&
                      quest?.get('field_position').value !== 'right') ||
                    (getPreviousAddtionalQuestionField(segmentIndex, addtionalIndex, quesIndex)?.get('field_position').value === 'left' &&
                      quest?.get('field_position').value === 'right')
                      ? 'half-width'
                      : 'full-width',
                    questionLoop2?.classList?.contains('full-width') && quest?.get('field_position').value === 'right'
                      ? 'right-end'
                      : 'left-end'
                  ]"
                >
                  <!-- IF FIELD IS ON -------------------------------------------->
                  <div *ngIf="quest?.get('is_field')?.value">
                    <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                      <div class="p-col-4" style="padding: 8px !important;" [ngStyle]="{'margin-top': quest?.get('field_type')?.value === 'financial_support_email' ? '-58px' : '' }">
                        <label *ngIf="quest?.get('is_required')?.value"
                          >{{ 'FORM_BUILDER_FIELD.' + quest?.get('field_type')?.value | translate }}*</label
                        >
                        <label *ngIf="!quest?.get('is_required')?.value">{{
                          'FORM_BUILDER_FIELD.' + quest?.get('field_type')?.value | translate
                        }}</label>
                      </div>
                      <div class="p-col-8 x-pad-none">
                        <ng-container
                          *ngIf="
                            [
                              'parent_civility',
                              'student_civility',
                              'student_date_of_birth',
                              'date_of_birth',
                              'parent_relation',
                              'financial_support_link',
                              'financial_support_phone_number',
                              'financial_support_home_phone',
                              'financial_support_email',
                              'financial_support_country',
                              'financial_support_civility',
                              'financial_support_address',
                              'financial_support_postcode',
                              'financial_support_city',
                              'financial_support_departement',
                              'financial_support_region',
                              'financial_support_first_name',
                              'financial_support_last_name',
                              'student_iban',
                              'student_bic',
                              'financial_support_iban',
                              'financial_support_bic',
                              'financial_support_account_holder_name',
                              'financial_support_cost',
                              'first_name',
                              'last_name',
                              'TEACHER_FIRST_NAME',
                              'TEACHER_LAST_NAME',
                              'phone_number',
                              'home_phone',
                              'email',
                              'place_of_birth',
                              'city_of_birth',
                              'country_of_birth',
                              'post_code_of_birth',
                              'address',
                              'postcode',
                              'city',
                              'departement',
                              'region',
                              'parent_link',
                              'parent_civility',
                              'parent_first_name',
                              'parent_last_name',
                              'parent_home_phone',
                              'parent_email',
                              'parent_address',
                              'parent_postcode',
                              'parent_city',
                              'parent_country',
                              'parent_region',
                              'parent_phone',
                              'parent_department',
                              'school_mail',
                              'student_country',
                              'alumni_civility',
                              'alumni_date_of_birth',
                              'today_date',
                              'alumni_first_name',
                              'alumni_rncp_title',
                              'alumni_last_name',
                              'alumni_last_name_used',
                              'alumni_promo_year',
                              'alumni_sector',
                              'alumni_email',
                              'alumni_school',
                              'alumni_speciality',
                              'alumni_campus',
                              'alumni_telephone',
                              'alumni_address',
                              'alumni_zip_code',
                              'alumni_country',
                              'alumni_city',
                              'alumni_department',
                              'alumni_region',
                              'alumni_professional_status',
                              'alumni_job_name',
                              'alumni_company',
                              'alumni_activity_sector',
                              'upload_picture',
                              'cvec_number',
                              'ine_number'
                            ].includes(quest?.get('field_type')?.value);
                            else default
                          "
                        >
                          <mat-radio-group
                            formControlName="answer"
                            [required]="quest?.get('is_required')?.value"
                            *ngIf="
                              quest?.get('field_type')?.value === 'student_civility' ||
                              quest?.get('field_type')?.value === 'parent_civility' ||
                              quest?.get('field_type')?.value === 'alumni_civility' ||
                              quest?.get('field_type')?.value === 'financial_support_civility'
                            "
                          >
                            <mat-radio-button
                              value="MR"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Mr' | translate }}
                            </mat-radio-button>
                            <mat-radio-button
                              value="MRS"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Mrs' | translate }}
                            </mat-radio-button>
                            <mat-radio-button
                              value="neutral"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Neutral' | translate }}
                            </mat-radio-button>
                          </mat-radio-group>

                          <!-- <mat-radio-group
                            formControlName="answer"
                            [required]="quest?.get('is_required')?.value"
                            *ngIf="quest?.get('field_type')?.value === 'financial_support_civility'"
                          >
                            <mat-radio-button
                              value="MR"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Mr' | translate }}
                            </mat-radio-button>
                            <mat-radio-button
                              value="MRS"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Mrs' | translate }}
                            </mat-radio-button>
                            <mat-radio-button
                              value="neutral"
                              style="padding-right: 10px"
                              [disabled]="disable || !quest?.get('is_editable')?.value"
                              >{{ 'Neutral' | translate }}
                            </mat-radio-button>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </mat-radio-group> -->

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'alumni_date_of_birth' ||
                              quest?.get('field_type')?.value === 'student_date_of_birth' ||
                              quest?.get('field_type')?.value === 'today_date' ||
                              quest?.get('field_type')?.value === 'date_of_birth'
                            "
                          >
                            <input
                              formControlName="answer_date"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              (click)="myDatepickersField.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              [max]="['date_of_birth'].includes(quest?.get('field_type')?.value) ? minimumDateOfBirth : null"
                              [matDatepicker]="myDatepickersField"
                              [required]="quest?.get('is_required')?.value"
                            />

                            <mat-datepicker-toggle
                              *ngIf="quest?.get('is_editable')?.value"
                              matSuffix
                              [for]="myDatepickersField"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #myDatepickersField></mat-datepicker>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'date_of_birth'">
                            <input
                              formControlName="answer_date"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              (click)="myDatepickersField.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              [max]="minimumDateOfBirth"
                              [matDatepicker]="myDatepickersField"
                              [required]="quest?.get('is_required')?.value"
                              (dateInput)="dateBirthValueChange(segmentIndex, quesIndex)"
                            />

                            <mat-datepicker-toggle
                              *ngIf="quest?.get('is_editable')?.value"
                              matSuffix
                              [for]="myDatepickersField"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #myDatepickersField></mat-datepicker>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'parent_relation'">
                            <div class="p-grid">
                              <mat-form-field [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }">
                                <mat-select
                                  [required]="quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                >
                                  <mat-option *ngFor="let relation of relationList" [value]="relation">
                                    {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'financial_support_link'">
                            <div class="p-grid">
                              <!-- <mat-form-field [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }">
                                <mat-select
                                  [required]="quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                >
                                  <mat-option *ngFor="let relation of financialSsupportLinkList" [value]="relation">
                                    {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field> -->
                              <ng-select
                                *ngIf="quest?.get('is_editable')?.value && !disable"
                                [required]="quest?.get('is_required')?.value"
                                [disabled]="!quest?.get('is_editable')?.value || disable"
                                class="form-ng-select"
                                formControlName="answer"
                                [clearable]="true"
                              >
                                <ng-option *ngFor="let relation of relationList" [value]="relation">
                                  {{ 'CARDDETAIL.RELATION.' + relation | translate }}
                                </ng-option>
                              </ng-select>
                              <div
                                class="invalid-feedback"
                                *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                              >
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'student_country' ||
                              quest?.get('field_type')?.value === 'parent_country' ||
                              quest?.get('field_type')?.value === 'alumni_country' ||
                              quest?.get('field_type')?.value === 'country_of_birth' ||
                              quest?.get('field_type')?.value === 'financial_support_country'
                            "
                          >
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let country of countryList" [value]="country?.original">
                                {{ country.name }}
                              </ng-option>
                            </ng-select>

                            <mat-form-field
                              *ngIf="!quest?.get('is_editable')?.value || disable"
                              [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                            >
                              <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                <mat-option *ngFor="let country of countryList" [value]="country?.original">
                                  {{ country.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>

                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_promo_year'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let promo of promotionList" [value]="promo">
                                {{ promo }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_professional_status'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let profesi of proffesionalList" [value]="profesi">
                                {{ profesi | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_school'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                              (change)="getDataCampus($event, segmentIndex)"
                            >
                              <ng-option *ngFor="let school of schoolList" [value]="school?.short_name">
                                {{ school?.short_name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_campus'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let campus of campusList" [value]="campus?.name">
                                {{ campus?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_speciality'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                            >
                              <ng-option *ngFor="let speciality of specialityList" [value]="speciality?.name">
                                {{ speciality?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'alumni_sector'">
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                              (change)="getDataSpecialityBasedSector($event, segmentIndex)"
                            >
                              <ng-option *ngFor="let sector of sectorList" [value]="sector?.name">
                                {{ sector?.name | translate }}
                              </ng-option>
                            </ng-select>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div class="form-group" *ngIf="quest?.get('field_type')?.value === 'financial_support_cost'">
                            <div
                              class="input-group"
                              [ngClass]="{
                                'has-error':
                                  (invalidCost || minCostCoverage || maxCostCoverage || !quest?.get('answer')?.value) &&
                                  (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              }"
                            >
                              <input
                                class="form-control"
                                formControlName="answer"
                                (keypress)="decimalFilter($event)"
                                [required]="quest?.get('is_required')?.value"
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                (keyup)="getCostCoverage(segmentIndex)"
                              />
                              <div class="input-group-addon">EUR</div>
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="quest?.get('answer')?.value < 20 && (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)"
                            >
                              {{ 'minimum value 20' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                invalidCost &&
                                !minCostCoverage &&
                                !maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot exceed the student cost coverage' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                !invalidCost &&
                                minCostCoverage &&
                                !maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot less than total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                !invalidCost &&
                                !minCostCoverage &&
                                maxCostCoverage &&
                                quest?.get('answer')?.value &&
                                (quest?.get('answer')?.dirty || quest?.get('answer')?.touched)
                              "
                            >
                              {{ 'Cannot exceed the total price of the studies' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_postcode' ||
                              quest?.get('field_type')?.value === 'postcode' ||
                              quest?.get('field_type')?.value === 'alumni_first_name' ||
                              quest?.get('field_type')?.value === 'alumni_rncp_title' ||
                              quest?.get('field_type')?.value === 'alumni_last_name' ||
                              quest?.get('field_type')?.value === 'alumni_last_name_used' ||
                              quest?.get('field_type')?.value === 'alumni_activity_sector' ||
                              quest?.get('field_type')?.value === 'alumni_company' ||
                              quest?.get('field_type')?.value === 'alumni_job_name' ||
                              quest?.get('field_type')?.value === 'alumni_zip_code' ||
                              quest?.get('field_type')?.value === 'alumni_department' ||
                              quest?.get('field_type')?.value === 'alumni_region' ||
                              quest?.get('field_type')?.value === 'alumni_city' ||
                              quest?.get('field_type')?.value === 'alumni_address' ||
                              quest?.get('field_type')?.value === 'parent_department' ||
                              quest?.get('field_type')?.value === 'parent_region' ||
                              quest?.get('field_type')?.value === 'parent_city' ||
                              quest?.get('field_type')?.value === 'parent_address' ||
                              quest?.get('field_type')?.value === 'parent_link' ||
                              quest?.get('field_type')?.value === 'parent_first_name' ||
                              quest?.get('field_type')?.value === 'parent_last_name' ||
                              quest?.get('field_type')?.value === 'region' ||
                              quest?.get('field_type')?.value === 'departement' ||
                              quest?.get('field_type')?.value === 'city' ||
                              quest?.get('field_type')?.value === 'address' ||
                              quest?.get('field_type')?.value === 'place_of_birth' ||
                              quest?.get('field_type')?.value === 'city_of_birth' ||
                              quest?.get('field_type')?.value === 'post_code_of_birth' ||
                              quest?.get('field_type')?.value === 'first_name' ||
                              quest?.get('field_type')?.value === 'last_name' ||
                              quest?.get('field_type')?.value === 'ine_number' ||
                              quest?.get('field_type')?.value === 'cvec_number' ||
                              quest?.get('field_type')?.value === 'TEACHER_FIRST_NAME' ||
                              quest?.get('field_type')?.value === 'TEACHER_LAST_NAME' ||
                              quest?.get('field_type')?.value === 'financial_support_address' ||
                              quest?.get('field_type')?.value === 'financial_support_city' ||
                              quest?.get('field_type')?.value === 'financial_support_departement' ||
                              quest?.get('field_type')?.value === 'financial_support_region' ||
                              quest?.get('field_type')?.value === 'student_iban' ||
                              quest?.get('field_type')?.value === 'student_bic' ||
                              quest?.get('field_type')?.value === 'financial_support_iban' ||
                              quest?.get('field_type')?.value === 'financial_support_bic' ||
                              quest?.get('field_type')?.value === 'financial_support_postcode' ||
                              quest?.get('field_type')?.value === 'financial_support_account_holder_name' ||
                              quest?.get('field_type')?.value === 'financial_support_first_name' ||
                              quest?.get('field_type')?.value === 'financial_support_last_name'
                            "
                          >
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keypress)="alphaNumberOnly($event, quest?.get('field_type')?.value)"
                              (keyup)="getPostcodeData(quest, segmentIndex, quesIndex, 'additional_financial_supports', addtionalIndex)"
                            />

                            <div
                              class="invalid-feedback"
                              *ngIf="alphaNumericValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert alphabet and number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'nationality' || quest?.get('field_type')?.value === 'nationality_second'
                            "
                          >
                            <ng-select
                              [required]="quest?.get('is_required')?.value"
                              *ngIf="quest?.get('is_editable')?.value && !disable"
                              formControlName="answer"
                              [clearable]="true"
                              class="form-control"
                            >
                              <ng-option *ngFor="let national of nationalList" [value]="national.nationality_en">
                                {{ 'NATIONALITY.' + national.nationality_en | translate }}
                              </ng-option>
                            </ng-select>

                            <!-- will show when nationality disable -->
                            <mat-form-field
                              *ngIf="!quest?.get('is_editable')?.value || disable"
                              [ngClass]="{ 'parent-relation': quest?.get('is_editable')?.value && !disable }"
                            >
                              <mat-select [disabled]="!quest?.get('is_editable')?.value || disable" formControlName="answer">
                                <mat-option *ngFor="let national of nationalList" [value]="national.nationality_en">
                                  {{ 'NATIONALITY.' + national.nationality_en | translate }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>

                            <div
                              class="invalid-feedback"
                              *ngIf="alphaNumericValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert alphabet and number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <!-- <div
                              class="form-group"
                              *ngIf="quest?.get('field_type')?.value === 'postcode' || quest?.get('field_type')?.value === 'parent_postcode'"
                            >
                              <input
                                #numericInput
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                formControlName="answer"
                                type="number"
                                class="form-control"
                                [required]="quest?.get('is_required')?.value"
                                onKeyPress="if(this.value.length==9) return false;"
                                (keypress)="preventNonNumericalInput($event)"
                                (keyup)="getPostcodeData(quest, segmentIndex, quesIndex)"
                              />
                              <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                                {{ 'This field is required' | translate }}
                              </div>
                            </div> -->

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_home_phone' ||
                              quest?.get('field_type')?.value === 'home_phone' ||
                              quest?.get('field_type')?.value === 'financial_support_home_phone'
                            "
                          >
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keypress)="phoneValidaton($event)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Please insert number only' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>

                          <!-- *************** START OF code for country phone and dial code (Related to EVOL_0012) -->
                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_phone' ||
                              quest?.get('field_type')?.value === 'alumni_telephone' ||
                              quest?.get('field_type')?.value === 'phone_number' ||
                              quest?.get('field_type')?.value === 'emergency_contact_telephone'
                            "
                          >
                            <div class="no-padding-y p-grid" style="position: relative">
                              <div class="phone-number p-col-4">
                                <ng-select
                                  [formControl]="getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')"
                                  [required]="quest?.get('answer')?.value || quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  (change)="selectionDialCode($event, segmentIndex, quesIndex)"
                                  [clearable]="false"
                                  bindLabel="name"
                                  [appendTo]="'body'"
                                  class="mrgn-btn"
                                  class="form-control custom-dropdownpanel-dialcode"
                                  [ngClass]="
                                    getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.hasError('required') &&
                                    (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.dirty ||
                                    getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.touched) ? 'has-error-dialcode' : ''
                                  "
                                >
                                  <ng-template ng-label-tmp let-item="item">
                                    <img class="flag-icon-trigger" [src]="flagsIconPath + item?.flagIcon + '.svg'"/>
                                    <span *ngIf="item?.flagIcon" class="ml-4">+{{ item?.dialCode }}</span>
                                  </ng-template>
                                  <ng-option *ngFor="let country of countryCodeList" [value]="country">
                                    <ng-container *ngIf="country?.name">
                                      <img class="flag-icon" [src]="flagsIconPath + country?.flagIcon + '.svg'" /> {{ country?.name | translate }} +{{ country?.dialCode }}
                                    </ng-container>
                                  </ng-option>
                                </ng-select>
                              </div>
                              <div class="phone-number p-col-8">
                                <input
                                  [required]="quest?.get('is_required')?.value || getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.value"
                                  [readOnly]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                  class="form-control"
                                  pattern="^[0-9]+$"
                                  (keypress)="phoneValidaton($event)" 
                                />
                                <div
                                  class="invalid-feedback"
                                  *ngIf="(paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || (quest?.get('answer').hasError('pattern') && (quest?.get('answer').dirty || quest?.get('answer').touched))"
                                >
                                  {{ 'Please insert number only' | translate }}
                                </div>
                              </div>
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                    (requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || 
                                    (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.hasError('required') && 
                                    (getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.dirty ||
                                    getQuestionDialCodeField(segmentIndex, quesIndex)?.get('answer')?.touched))
                                  "
                              >
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'financial_support_phone_number'
                            "
                          >
                            <div class="no-padding-y p-grid" style="position: relative">
                              <div class="phone-number p-col-4">
                                <ng-select
                                  [formControl]="getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')"
                                  [required]="quest?.get('answer')?.value || quest?.get('is_required')?.value"
                                  [disabled]="!quest?.get('is_editable')?.value || disable"
                                  (change)="selectionDialCode($event, segmentIndex, quesIndex, 'financial_support_phone_number', addtionalIndex)"
                                  [clearable]="false"
                                  bindLabel="name"
                                  [appendTo]="'body'"
                                  class="mrgn-btn"
                                  class="form-control custom-dropdownpanel-dialcode"
                                  [ngClass]="
                                    getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.hasError('required') &&
                                    (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.dirty ||
                                    getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.touched) ? 'has-error-dialcode' : ''
                                  "
                                >
                                  <ng-template ng-label-tmp let-item="item">
                                    <img class="flag-icon-trigger" [src]="flagsIconPath + item?.flagIcon + '.svg'"/>
                                    <span *ngIf="item?.flagIcon" class="ml-4">+{{ item?.dialCode }}</span>
                                  </ng-template>
                                  <ng-option *ngFor="let country of countryCodeList" [value]="country">
                                    <ng-container *ngIf="country?.name">
                                      <img class="flag-icon" [src]="flagsIconPath + country?.flagIcon + '.svg'" /> {{ country?.name | translate }} +{{ country?.dialCode }}
                                    </ng-container>
                                  </ng-option>
                                </ng-select>
                              </div>
                              <div class="phone-number p-col-8">
                                <input
                                  [required]="quest?.get('is_required')?.value || getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.value"
                                  [readOnly]="!quest?.get('is_editable')?.value || disable"
                                  formControlName="answer"
                                  class="form-control"
                                  pattern="^[0-9]+$"
                                  (keypress)="phoneValidaton($event)" 
                                />
                                <div
                                  class="invalid-feedback"
                                  *ngIf="(paternNumberValidate(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) || (quest?.get('answer').hasError('pattern') && (quest?.get('answer').dirty || quest?.get('answer').touched))"
                                >
                                  {{ 'Please insert number only' | translate }}
                                </div>
                              </div>
                              <div
                                class="invalid-feedback"
                                *ngIf="
                                    (requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched) ||
                                    (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.hasError('required') &&
                                    (getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.dirty ||
                                    getAddtionalQuestionFieldForDialCode(segmentIndex, addtionalIndex)?.at(quesIndex)?.get('answer')?.touched))
                                  "
                              >
                                {{ 'This field is required' | translate }}
                              </div>
                            </div>
                          </div>
                          <!-- *************** END OF code for country phone and dial code (Related to EVOL_0012) -->

                          <div
                            class="form-group"
                            *ngIf="
                              quest?.get('field_type')?.value === 'parent_email' ||
                              quest?.get('field_type')?.value === 'financial_support_email' ||
                              quest?.get('field_type')?.value === 'school_mail' ||
                              quest?.get('field_type')?.value === 'alumni_email' ||
                              quest?.get('field_type')?.value === 'email'
                            "
                          >
                            <input
                              [email]="true"
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              pattern="[a-zA-Z0-9+_._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                              (keyup)="checkEmailUnique(segmentIndex, quesIndex, quest, 'financialSupport', addtionalIndex)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="
                                quest?.value?.answer === candidateData?.email &&
                                quest.touched &&
                                quest?.get('field_type')?.value === 'financial_support_email'
                              "
                            >
                              {{ "Email can't be same like candidate email" | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="emailValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Invalid Email Format' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>

                            <div style="margin-top: 10px;">
                              <button mat-raised-button color="accent" [disabled]="quest?.get('answer')?.invalid || disableButtonEmailNotValidated(segmentIndex, quesIndex, quest, 'financialSupport', addtionalIndex)" (click)="verifyEmail(segmentIndex, quesIndex, quest, 'financialSupport', addtionalIndex)">
                                {{ 'COMPANY.Check Email Availability' | translate }}
                              </button>
                            </div>
                          </div>

                          <ng-container *ngIf="quest?.get('field_type')?.value === 'upload_picture'">
                            <div class="form-group">
                              <div class="p-col-12 p-md-8 x-pad-none" style="position: relative">
                                <div class="imgContainer" [ngClass]="isMandatory(quest) ? 'img-required-border' : ''">
                                  <input
                                    type="file"
                                    #userphoto
                                    style="display: none"
                                    name="file"
                                    accept="image/png, image/jpeg, image/jpg"
                                    [required]="quest?.get('is_required')?.value"
                                    (change)="selectFile($event, 'isField', segmentIndex, quesIndex)"
                                  />
                                  <div class="overlay-cover" (click)="openUploadWindow(quest)">
                                    <mat-icon class="text">edit</mat-icon>
                                  </div>
                                  <div class="p-grid p-justify-center">
                                    <div class="logo-img-wrapper" *ngIf="!isPhotoUploading">
                                      <img
                                        class="center-image"
                                        (click)="openUploadWindow(quest)"
                                        [src]="
                                          is_photo_in_s3
                                            ? serverimgPath + photoIsField_s3_path
                                            : photoIsField
                                            ? serverimgPath + photoIsField
                                            : quest?.get('answer')?.value
                                            ? serverimgPath + photoIsField
                                            : neutralStudentIcon
                                        "
                                      />
                                    </div>
                                  </div>
                                  <div class="logo-spinner-wrapper" *ngIf="isPhotoUploading">
                                    <mat-progress-spinner style="margin: 0 auto" mode="indeterminate" color="accent"></mat-progress-spinner>
                                  </div>
                                </div>
                                <div class="button-container">
                                  <button
                                    style="margin-right: 10px; margin-top: 10px"
                                    matTooltip="{{ 'Edit Picture' | translate }}"
                                    mat-mini-fab
                                    color="primary"
                                    (click)="openUploadWindow(quest)"
                                  >
                                    <mat-icon>edit</mat-icon>
                                  </button>
                                </div>
                                <div class="invalid-feedback" *ngIf="isMandatory(quest)" style="text-align: center; padding-top: 6px;">
                                  {{ 'You need to upload your photo' | translate }}
                                </div>
                              </div>
                            </div>
                          </ng-container>

                          <!-- <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div> -->
                        </ng-container>

                        <ng-template #default>
                          <div class="form-group">
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              (keyup)="getPostcodeData(quest, segmentIndex, quesIndex)"
                            />
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- IF FIELD IS OFF -------------------------------------------->

                  <!-- For question with slider is_field off -->
                  <div *ngIf="!quest?.get('is_field')?.value">
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'free_text'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4" style="justify-content: start !important">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <div class="form-group">
                            <input
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                            />
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'long_answer'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4" style="justify-content: start !important">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <div class="form-group">
                            <textarea
                              matInput
                              cdkTextareaAutosize
                              formControlName="answer"
                              cdkAutosizeMinRows="1"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              #autosize="cdkTextareaAutosize"
                              [required]="quest?.get('is_required')?.value"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- email -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'email'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4 self-center">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <div class="form-group">
                            <input
                              [email]="true"
                              [required]="quest?.get('is_required')?.value"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer"
                              class="form-control"
                              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                              (keyup)="checkEmailUnique(segmentIndex, quesIndex, quest)"
                            />
                            <div
                              class="invalid-feedback"
                              *ngIf="emailValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'Invalid Email Format' | translate }}
                            </div>
                            <div
                              class="invalid-feedback"
                              *ngIf="requairedValidation(quest, segmentIndex, quesIndex) && quest.invalid && quest.touched"
                            >
                              {{ 'This field is required' | translate }}
                            </div>
                            <!-- <input
                                [readOnly]="!quest?.get('is_editable')?.value || disable"
                                [required]="quest?.get('is_required')?.value"
                                formControlName="answer"
                                class="form-control"
                              /> -->
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Date Type -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'date'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <div class="form-group">
                            <input
                              (click)="myDatepickers.open()"
                              (keydown)="validateDateKeyInput($event)"
                              class="form-control"
                              formControlName="answer_date"
                              [matDatepicker]="myDatepickers"
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              [disabled]="!quest?.get('is_editable')?.value || disable"
                              [required]="quest?.get('is_required')?.value"
                            />
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                            <mat-datepicker-toggle matSuffix [for]="myDatepickers"></mat-datepicker-toggle>
                            <mat-datepicker #myDatepickers></mat-datepicker>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Numeric -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'numeric'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <!-- <mat-form-field class="width-ninety">
                                <input appearance="fill" matInput type="number" />
                              </mat-form-field> -->
                          <div class="form-group">
                            <input
                              #numericInput
                              [readOnly]="!quest?.get('is_editable')?.value || disable"
                              formControlName="answer_number"
                              (wheel)="onWheel($event)"
                              type="number"
                              class="form-control"
                              [required]="quest?.get('is_required')?.value"
                              onKeyPress="if(this.value.length==9) return false;"
                              (keypress)="preventNonNumericalInput($event)"
                            />
                            <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                              {{ 'This field is required' | translate }}
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Single Option -->
                    <ng-container
                      *ngIf="
                        quest?.get('answer_type')?.value === 'single_option' || quest?.get('answer_type')?.value === 'single_option_diploma' || quest?.get('answer_type')?.value === 'single_option_readmission_yes_or_no' || quest?.get('answer_type')?.value === 'single_option_reason_not_readmission'
                      "
                    >
                      <div class="p-grid" [ngClass]="questionLoop?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none">
                          <mat-radio-group [required]="quest?.get('is_required')?.value" formControlName="answer">
                            <mat-radio-button
                              [value]="option?.option_name"
                              *ngFor="let option of quest?.get('options')?.value"
                              style="width: 100%; padding-right: 10px"
                              [disabled]="disable"
                              >{{ option?.option_name }}</mat-radio-button
                            >
                          </mat-radio-group>
                          <div class="invalid-feedback" *ngIf="quest.get('is_required')?.value && quest.invalid && quest.touched">
                            {{ 'This field is required' | translate }}
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Multiple Option -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'multiple_option'">
                      <div class="p-grid" [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'">
                        <div class="p-col-12 p-md-4">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8">
                          <mat-checkbox
                            *ngFor="let option of quest?.get('options')?.value"
                            style="padding-right: 10px"
                            [disabled]="disable"
                            [checked]="quest?.get('answer_multiple')?.value?.includes(option?.option_name)"
                            (change)="setOptions(segmentIndex, quesIndex, option?.option_name)"
                          >
                            {{ option?.option_name }}
                          </mat-checkbox>
                          <div
                            class="invalid-feedback"
                            *ngIf="
                              quest.get('is_required')?.value &&
                              quest?.get('answer_multiple')?.invalid &&
                              quest?.get('answer_multiple')?.touched
                            "
                          >
                            {{ 'This field is required' | translate }}
                          </div>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Parent Child Option -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'parent_child_option'">
                      <div
                        class="p-grid"
                        [ngClass]="questionLoop2?.classList?.contains('right-end') ? 'justify-end' : 'justify-start'"
                        *ngIf="quest?.get('answer_type')?.value === 'parent_child_option'"
                      >
                        <div class="p-col-4" style="justify-content: start; padding-left: 5px">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-8 x-pad-none align-left">
                          <ms-form-fill-recursive-single-option
                            [stepForm]="templateStepForm"
                            [inputQuestion]="quest"
                            [segmentIndex]="segmentIndex"
                            [questionIndex]="quesIndex"
                            [isFormDisabled]="disable"
                          >
                          </ms-form-fill-recursive-single-option>
                        </div>
                      </div>
                    </ng-container>

                    <!-- Upload Picture -->
                    <ng-container *ngIf="quest?.get('answer_type')?.value === 'upload_picture'">
                      <div class="p-grid" style="text-align: center !important">
                        <div class="p-col-12 p-md-4">
                          <label *ngIf="quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}*</label>
                          <label *ngIf="!quest?.get('is_required')?.value">{{ quest?.get('question_label')?.value }}</label>
                        </div>
                        <div class="p-col-12 p-md-8 x-pad-none" style="position: relative">
                          <div class="imgContainer" [ngClass]="isMandatory(quest) ? 'img-required-border' : ''">
                            <input
                              type="file"
                              #userphoto
                              style="display: none"
                              name="file"
                              accept="image/png, image/jpeg, image/jpg"
                              [required]="quest?.get('is_required')?.value"
                              (change)="selectFile($event, 'answerType', segmentIndex, quesIndex)"
                            />
                            <div class="overlay-cover" (click)="openUploadWindow(quest)">
                              <mat-icon class="text">edit</mat-icon>
                            </div>
                            <div class="p-grid p-justify-center">
                              <div class="logo-img-wrapper" *ngIf="!isPhotoUploading">
                                <img
                                  class="center-image"
                                  (click)="openUploadWindow(quest)"
                                  [src]="
                                    is_photo_in_s3
                                      ? serverimgPath + photo_s3_path
                                      : photo
                                      ? serverimgPath + photo
                                      : quest?.get('answer')?.value
                                      ? serverimgPath + quest?.get('answer')?.value
                                      : neutralStudentIcon
                                  "
                                />
                              </div>
                            </div>
                            <div class="logo-spinner-wrapper" *ngIf="isPhotoUploading">
                              <mat-progress-spinner style="margin: 0 auto" mode="indeterminate" color="accent"></mat-progress-spinner>
                            </div>
                          </div>
                          <div class="button-container">
                            <button
                              style="margin-right: 10px; margin-top: 10px"
                              matTooltip="{{ 'Edit Picture' | translate }}"
                              mat-mini-fab
                              color="primary"
                              (click)="openUploadWindow(quest)"
                            >
                              <mat-icon>edit</mat-icon>
                            </button>
                          </div>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>

<div class="btn-conditions" *ngIf="!formDetail.isPreview && !formDetail?.is_form_closed">
  <ng-container *ngIf="!stepData?.is_final_step || (stepData?.is_final_step && !formData?.is_final_validator_active)">
    <ng-container>
      <button
        *ngIf="
          stepData?.isCompletingUser &&
          isValidator &&
          (stepData?.step_status === 'not_started' || stepData?.step_status === 'need_validation')
        "
        color="accent"
        mat-raised-button
        class="btn-accept"
        matTooltip="{{ 'Ask For Revision' | translate }} "
        (click)="onAskForRevision()"
      >
        {{ 'Ask For Revision' | translate }}
      </button>
      <button
        *ngIf="isValidator && stepData?.step_status === 'need_validation' && !stepData?.isCompletingUser"
        color="accent"
        mat-raised-button
        class="btn-accept"
        matTooltip="{{ 'Ask For Revision' | translate }} "
        (click)="onAskForRevision()"
      >
        {{ 'Ask For Revision' | translate }}
      </button>
      <button
        *ngIf="isValidator && stepData.step_status === 'need_validation' && !stepData?.isCompletingUser"
        color="accent"
        mat-raised-button
        class="btn-accept"
        (click)="nextStepMessage('validated')"
        matTooltip="{{ 'I accept all form above' | translate }} "
      >
        {{ 'I accept all form above' | translate }}
      </button>
    </ng-container>
    <ng-container *ngIf="stepData?.isCompletingUser">
      <button
        *ngIf="stepData?.isCompletingUser && stepData.step_status === 'not_started'"
        color="accent"
        mat-raised-button
        class="btn-accept"
        (click)="nextStepMessage('waiting_for_validation')"
        matTooltip="{{ 'I accept and continue to next step' | translate }}"
        [disabled]="checkEmailNotValidated()"
      >
        <!--      [disabled]="templateStepForm.invalid"-->
        {{ 'I accept and continue to next step' | translate }}
      </button>
      <button
        *ngIf="stepData?.isCompletingUser && isValidator && stepData.step_status === 'need_validation'"
        color="accent"
        mat-raised-button
        class="btn-accept"
        (click)="nextStepMessage('validated')"
        matTooltip="{{ 'I accept and continue to next step' | translate }} "
      >
        {{ 'I accept and continue to next step' | translate }}
      </button>
    </ng-container>
    <ng-container>
      <button
        *ngIf="stepData.step_status === 'ask_for_revision' && stepData?.isCompletingUser"
        color="accent"
        mat-raised-button
        class="btn-accept"
        (click)="onCompleteRevision()"
        matTooltip="{{ 'Complete Revision' | translate }} "
      >
        {{ 'Complete Revision' | translate }}
      </button>
      <button
        *ngIf="
          (formDetail?.isFinalRevisionUser && formDetail?.admission_status && formDetail?.admission_status === 'ask_for_revision') ||
          (stepData?.isCompletingUser &&
            stepData?.step_status === 'accept' &&
            formDetail?.is_final_validator_active &&
            !formDetail?.admission_status)
        "
        color="accent"
        mat-raised-button
        class="btn-accept"
        (click)="saveOnFinalValidationRevision()"
        matTooltip="{{ 'Save' | translate }} "
      >
        {{ 'Save' | translate }}
      </button>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="stepData?.is_final_step && formData?.is_final_validator_active">
    <button
      *ngIf="formDetail?.isFinalValidatorUser && formData?.admission_status !== 'ask_for_revision'"
      color="accent"
      mat-raised-button
      class="btn-save"
      matTooltip="{{ 'Reject and Ask for Revision' | translate }} "
      (click)="onAskForRevisionFinalValidator()"
    >
      {{ 'Reject and Ask for Revision' | translate }}
    </button>

    <button
      *ngIf="
        formDetail?.isFinalValidatorUser &&
        (formData?.admission_status !== 'ask_for_revision' || formData?.contract_status !== 'ask_for_revision')
      "
      color="accent"
      mat-raised-button
      class="btn-save"
      matTooltip="{{ 'Validate the Admission Form' | translate }}"
      (click)="onValidateFormFinalValidator()"
    >
      <mat-icon class="mat-icon-default">
        <svg style="width: 24px; height: 24px" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"
          />
        </svg>
      </mat-icon>
      {{ 'Validate the Admission Form' | translate }}
    </button>

    <button
      *ngIf="formDetail?.isFinalRevisionUser && formData?.admission_status === 'ask_for_revision'"
      color="accent"
      mat-raised-button
      matTooltip="{{ 'Complete Revision' | translate }}"
      (click)="onCompleteRevisionFinalValidator()"
    >
      {{ 'Complete Revision' | translate }}
    </button>

    <button
      *ngIf="!isAccepted && formData?.admission_status !== 'ask_for_revision'"
      color="accent"
      mat-raised-button
      class="btn-save"
      matTooltip="{{ 'Submit and Complete Form' | translate }}"
      (click)="onSubmitFormFinalVlidator()"
    >
      <mat-icon class="mat-icon-default">save</mat-icon>
      {{ 'Submit and Complete Form' | translate }}
    </button>
  </ng-container>
</div>

<div class="btn-conditions" *ngIf="formDetail.isPreview">
  <ng-container>
    <button color="accent" mat-raised-button class="btn-accept" matTooltip="{{ 'I accept and continue to next step' | translate }} ">
      {{ 'I accept and continue to next step' | translate }}
    </button>
    <!-- Button save here if ask for revision by final validation -->
  </ng-container>
</div>

<div *ngIf="isWaitingForResponse || isWaitingForMessageResponse" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
