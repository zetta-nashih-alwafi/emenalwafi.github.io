<ms-filter-breadcrumb [filterBreadcrumbData]="filterBreadcrumbData" (removeFilterTrigger)="removeFilterBreadcrumb($event)"></ms-filter-breadcrumb>
<div class="p-grid" style="margin-bottom: 10px; font-family: firaSans !important; position: relative">
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="scholarFilter?.value && scholarFilter?.value?.length !== 0">
      {{ 'CARDDETAIL.Scholar Season' | translate }}
    </label>
    <ng-select
      [items]="scholars"
      bindValue="_id"
      bindLabel="scholar_season"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="false"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'CARDDETAIL.Scholar Season' | translate }}"
      [formControl]="scholarFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="scholarSelect()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" />
        {{ item.scholar_season }}
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="schoolsFilter?.value && schoolsFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.School' | translate }}
    </label>
    <ng-select
      [items]="school"
      bindValue="_id"
      bindLabel="short_name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.School' | translate }}"
      [formControl]="schoolsFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkSuperFilterSchool()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.short_name | translate }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="school?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('school')"
          [indeterminate]="isSomeDropdownSelected('school')"
          (change)="selectAllData($event, 'school')">
          {{ 'AllM' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="campusFilter?.value && campusFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Campus' | translate }}
    </label>
    <ng-select
      [items]="campusList"
      bindValue="name"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Campus' | translate }}"
      [formControl]="campusFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkSuperFilterCampus()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="campusList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('campus')"
          [indeterminate]="isSomeDropdownSelected('campus')"
          (change)="selectAllData($event, 'campus')">
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="levelFilter?.value && levelFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Level' | translate }}
    </label>
    <ng-select
      [items]="levels"
      bindValue="name"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Level' | translate }}"
      [formControl]="levelFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkSuperFilterLevel()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="levels?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('level')"
          [indeterminate]="isSomeDropdownSelected('level')"
          (change)="selectAllData($event, 'level')">
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="sectorFilter?.value && sectorFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Sector' | translate }}
    </label>
    <ng-select
      [items]="sectorList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Sector' | translate }}"
      [formControl]="sectorFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectSectorFilter()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="sectorList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('sector')"
          [indeterminate]="isSomeDropdownSelected('sector')"
          (change)="selectAllData($event, 'sector')">
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>
  <div class="p-col-fixed no-padding" style="width: 140px; float: left; padding-right: 15px !important">
    <label class="float-label" *ngIf="specialityFilter?.value && specialityFilter?.value?.length !== 0">
      {{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Speciality' | translate }}
    </label>
    <ng-select
      [items]="specialityList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'ADMISSION.TABLE_ADMISSION_CHANNEL.Speciality' | translate }}"
      [formControl]="specialityFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="selectSpecialityFilter()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="specialityList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('speciality')"
          [indeterminate]="isSomeDropdownSelected('speciality')"
          (change)="selectAllData($event, 'speciality')">
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>

  <div class="p-col-fixed no-padding super-filter" style="width: 140px; float: left; padding-right: 15px !important;">
    <label class="float-label" *ngIf="tagFilter?.value && tagFilter?.value?.length !== 0">
      {{ 'All_Students.Tag' | translate }}
    </label>
    <ng-select
      [items]="tagList"
      bindValue="_id"
      bindLabel="name"
      class="custom-dropdownpanel"
      [appendTo]="'body'"
      [multiple]="true"
      notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
      placeholder="{{ 'All_Students.Tag' | translate }}"
      [formControl]="tagFilter"
      [clearable]="false"
      [closeOnSelect]="false"
      (close)="checkSuperFilterTags()">
      <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
        <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
      </ng-template>
      <ng-template ng-header-tmp *ngIf="tagList?.length">
        <mat-checkbox
          class="all-input"
          style="cursor: pointer"
          [checked]="isAllDropdownSelected('tags')"
          [indeterminate]="isSomeDropdownSelected('tags')"
          (change)="selectAllData($event, 'tags')">
          {{ 'AllF' | translate }}
        </mat-checkbox>
      </ng-template>
    </ng-select>
  </div>

  <div class="p-col-fixed no-padding" style="float: left; padding-right: 15px !important; margin-top: 13px">
    <button
      mat-button
      mat-raised-button
      color="accent"
      [disabled]="isDisabled || isLoading"
      (click)="applySuperFilter()"
      data-cy="button-apply-filter">
      {{ 'Apply Filter' | translate }}
    </button>
  </div>
</div>

<div class="horizontal header-button header-action">
  <div class="text-right" style="display: inline-block; float: right">
    <button
      matTooltip="{{ 'Action' | translate }} "
      style="padding: 0px 7px !important"
      mat-raised-button
      color="accent"
      [disabled]="isLoading"
      [matMenuTriggerFor]="action"
      data-cy="button-action-menu">
      {{ 'Action' | translate }}
      <mat-icon>expand_more</mat-icon>
    </button>
    <mat-menu #action="matMenu">
      <button
        mat-menu-item
        (click)="buttonClicked = 'payment'; controllerButton('payment')"
        matTooltip="{{ 'Asking for payment' | translate }}"
        [disabled]="isLoading"
        class="border-button"
        data-cy="button-asking-for-payment"
        *ngIf="permission?.askingPaymentFinanceFollowUp()">
        {{ 'Asking for payment' | translate }}
      </button>
      <button
        mat-menu-item
        (click)="buttonClicked = 'billing'; controllerButton('billing')"
        matTooltip="{{ 'Generate Billing' | translate }}"
        class="border-button"
        data-cy="button-generate-billing">
        {{ 'Generate Billing' | translate }}
      </button>
      <button
        mat-menu-item
        matTooltip="{{ 'Send email' | translate }} "
        (click)="buttonClicked = 'email'; controllerButton('email')"
        *ngIf="permission?.sendEmailFinanceFollowUpPerm()"
        class="border-button"
        data-cy="button-send-email">
        <!-- <mat-icon svgIcon="email" class="mat-icon-svgIcon icon-svgIcon-menu"></mat-icon> -->
        {{ 'Send email' | translate }}
      </button>
    </mat-menu>
    <button
      class="text-right"
      style="padding: 0px 7px !important"
      mat-raised-button
      color="accent"
      matTooltip="{{ 'Export' | translate }} "      
      [disabled]="isLoading"
      [matMenuTriggerFor]="export"
      *ngIf="permission.exportFinanceFollowUpPerm()"
      data-cy="button-export">      
      {{ 'Export' | translate }}
      <mat-icon>expand_more</mat-icon>
    </button>
    <mat-menu #export="matMenu">
      <button        
        mat-menu-item
        matTooltip="{{ 'Export follow up students' | translate }} "
        (click)="buttonClicked = 'export'; controllerButton('export')"
        [disabled]="isLoading"
        class="border-button"
        *ngIf="permission.exportFinanceFollowUpPerm()"
        data-cy="button-export">        
        {{ 'Export follow up students' | translate }}
      </button>
      <button
        mat-menu-item
        matTooltip="{{ 'Export controlling report' | translate }} "
        (click)="buttonClicked = 'export-controlling'; controllerButton('export-controlling')"
        *ngIf="permission.exportFinanceFollowUpPerm()"
        class="border-button"
        data-cy="button-send-email">        
        {{ 'Export controlling report' | translate }}
      </button>
    </mat-menu>
    <button
      [disabled]="isLoading"
      class="text-right"
      mat-raised-button
      (click)="resetCandidate()"
      color="primary"
      matTooltip="{{ 'Reset Filter' | translate }}"
      *ngIf="permission.resetFinanceFollowUpPerm()"
      data-cy="button-reset">
      <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
      {{ 'RESET' | translate }}
    </button>
  </div>
  <div class="text-right" [ngClass]="dataSelected?.length || (isCheckedAll && dataCount) ? 'text-count' : ''">
    <span style="font-family: 'firaSans' !important" *ngIf="dataSelected?.length || (isCheckedAll && dataCount)">{{
      'Selected Data' | translate }} : {{ isCheckedAll ? dataCount - dataUnselectUser?.length : dataSelected?.length
      }}</span>
  </div>
  <div class="p-grid filter-date">
    <div class="p-col-3 width-datepick">
      <mat-form-field class="form-field-above">
        <input
          matInput
          (click)="fromDatePick.open()"
          readonly
          class="form-field"
          [matDatepicker]="fromDatePick"
          [formControl]="fromDateFilter"
          placeholder="{{ 'From' | translate }}"
          [max]="toDateFilter.value"
          data-cy="table-date-from" />
        <mat-datepicker-toggle matSuffix [for]="fromDatePick"></mat-datepicker-toggle>
        <mat-datepicker #fromDatePick></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="p-col-3 width-datepick">
      <mat-form-field class="form-field-above">
        <input
          matInput
          (click)="toDatePick.open()"
          readonly
          class="form-field"
          [matDatepicker]="toDatePick"
          [formControl]="toDateFilter"
          placeholder="{{ 'To' | translate }}"
          [min]="fromDateFilter.value"
          data-cy="table-date-to" />
        <mat-datepicker-toggle matSuffix [for]="toDatePick"></mat-datepicker-toggle>
        <mat-datepicker #toDatePick></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="p-col-3" style="width: 150px !important; margin-top: 6px">
      <mat-form-field class="form-field-above">
        <mat-select
          [formControl]="statusFilter"
          placeholder="{{ 'Status' | translate }}"
          panelClass="filterPanelBelow custom-matselect-dropdown"
          data-cy="table-status">
          <mat-option [value]="record.value" *ngFor="let record of statusFilterList" data-cy="table-status-option">
            {{ record.key | translate }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</div>

<div class="horizontal mat-elevation-z8 finance-table" style="font-family: 'firaSans' !important">
  <table
    mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="sortData($event)"
    class="mat-elevation-z8"
    style="font-family: 'firaSans'"
    data-cy="table-finance-follow-up-student">
    <ng-container matColumnDef="select" sticky>
      <th mat-header-cell *matHeaderCellDef class="text-center" data-cy="table-col-selection">
        <mat-checkbox
          (change)="$event ? masterToggle() : null"
          (change)="showOptions('all', '')"
          [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
          [indeterminate]="selection.hasValue() && (dataUnselectUser?.length > 0 || !isAllSelected())"
          [aria-label]="checkboxLabel()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row" class="text-center" data-cy="table-col-selection">
        <mat-checkbox
          (click)="$event.stopPropagation()"
          (change)="$event ? selection.toggle(row._id) : null"
          [checked]="selection.isSelected(row?._id) || (isCheckedAll && !dataUnselectUser.includes(row?._id))"
          (change)="showOptions('one', row)"
          [aria-label]="checkboxLabel(row)">
        </mat-checkbox>
      </td>
    </ng-container>

    <ng-container matColumnDef="accountNumberFilter" sticky>
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input
            matInput
            class="form-field"
            [formControl]="accountFilter"
            placeholder="{{ 'search' | translate }}"
            data-cy="table-filter-account-number" />
        </mat-form-field>
      </th>
    </ng-container>
    <ng-container matColumnDef="studentFilter" sticky>
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input
            matInput
            class="form-field"
            [formControl]="studentFilter"
            placeholder="{{ 'search' | translate }}"
            data-cy="table-filter-student" />
        </mat-form-field>
      </th>
    </ng-container>
    <ng-container matColumnDef="currentProgramFilter" sticky>
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table">
        <!-- <mat-form-field>
          <input
            matInput
            class="form-field"
            [matAutocomplete]="currentProgramAuto"
            [formControl]="currentProgramFilter"
            placeholder="{{ 'search' | translate }}"
            data-cy="table-filter-current-program" />
          <mat-autocomplete #currentProgramAuto="matAutocomplete" [panelWidth]="'fit'">
            <mat-option
              value="{{ 'All' | translate }}"
              (click)="setCurrentProgramFilter('All')"
              data-cy="table-filter-current-program-option">{{ 'All' | translate }}</mat-option>
            <mat-option
              *ngFor="let record of filteredCurrentProgram | async"
              [value]="record?.program"
              (click)="setCurrentProgramFilter(record)"
              data-cy="table-filter-current-program-option">
              {{ record?.program | translate }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field> -->
        <!-- <mat-form-field>
          <mat-select [formControl]="currentProgramFilter">
            <mat-option [value]="record?.intake_channel" *ngFor="let record of intakeList"
              >{{ record?.intake_channel | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="intakeList"
          bindValue="_id"
          bindLabel="program"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="currentProgramFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setCurrentProgramFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.program | translate }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="intakeList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('intakeChannel')"
              [indeterminate]="isSomeDropdownSelectedTable('intakeChannel')"
              (change)="selectAllDataTable($event, 'intakeChannel')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="typeOfRegistrationFilter" sticky>
      <th mat-header-cell *matHeaderCellDef class="text-center custom-filter-table">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="type_of_registration"
            [disableOptionCentering]="true"
            panelClass="filterPanel"
            (selectionChange)="onFilterSelect($event.value)"
            matTooltip="{{
              type_of_registration?.value !== 'All' && type_of_registration?.value
                ? ('perimeter.' + type_of_registration.value | translate)
                : ''
            }}">
            <mat-option value="All">{{ 'All' | translate }}</mat-option>
            <mat-option [value]="option" *ngFor="let option of type_of_registrations">
              {{ 'perimeter.' + option | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
        [items]="type_of_registrations"
        bindValue="value"
        bindLabel="label"
        class="custom-dropdownpanel"
        [appendTo]="'body'"
        [multiple]="true"
        notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
        placeholder="{{ 'search' | translate }}"
        [formControl]="type_of_registration"
        [clearable]="false"
        [closeOnSelect]="false"
        (close)="setTypeOfRegistrationFilter()"
      >
        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
          <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label  }}
        </ng-template>
        <ng-template ng-header-tmp *ngIf="type_of_registrations?.length">
          <mat-checkbox
            class="all-input"
            style="cursor: pointer"
            [checked]="isAllDropdownSelectedTable('typeRegistration')"
            [indeterminate]="isSomeDropdownSelectedTable('typeRegistration')"
            (change)="selectAllDataTable($event, 'typeRegistration')"
          >
            {{ 'AllM' | translate }}
          </mat-checkbox>
        </ng-template>
      </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="legalEntityFilter" sticky>
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table">
        <!-- <ng-select
          class="program-dropdown custom-ngselect-content"
          [appendTo]="'body'"
          placeholder="{{ 'Filter' | translate }}"
          [formControl]="legalEntityFilter"
          [clearable]="false"
          data-cy="table-filter-legal-entity">
          <ng-option value="" data-cy="table-filter-legal-entity-option">
            {{ 'All' | translate }}
          </ng-option>
          <ng-option *ngFor="let item of listOfLegalEntity" [value]="item.legal_entity_name"
            data-cy="table-filter-legal-entity-option">
            {{ item.legal_entity_name }}
          </ng-option>
        </ng-select> -->

        <ng-select
        [items]="listOfLegalEntity"
        bindValue="legal_entity_name"
        bindLabel="legal_entity_name"
        class="custom-dropdownpanel"
        [appendTo]="'body'"
        [multiple]="true"
        notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
        placeholder="{{ 'search' | translate }}"
        [formControl]="legalEntityFilter"
        [clearable]="false"
        [closeOnSelect]="false"
        (close)="setLegalEntityFilter()"
      >
        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
          <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.legal_entity_name | translate }}
        </ng-template>
        <ng-template ng-header-tmp *ngIf="listOfLegalEntity?.length">
          <mat-checkbox
            class="all-input"
            style="cursor: pointer"
            [checked]="isAllDropdownSelectedTable('legalEntity')"
            [indeterminate]="isSomeDropdownSelectedTable('legalEntity')"
            (change)="selectAllDataTable($event, 'legalEntity')"
          >
            {{ 'AllM' | translate }}
          </mat-checkbox>
        </ng-template>
      </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="profileFinanceFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-type">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="financialFilter"
            [matTooltip]="financialFilter.value | translate"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-financial-profile">
            <mat-option value="All">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of financeFilterList"
              data-cy="table-filter-financial-profile-option">{{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="financeFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="financialFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setFinancialProfile()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="financeFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('profileFinance')"
              [indeterminate]="isSomeDropdownSelectedTable('profileFinance')"
              (change)="selectAllDataTable($event, 'profileFinance')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="statusFilter">
      <th mat-header-cell *matHeaderCellDef class="text-center custom-filter-table-student-status">
        <!-- <mat-form-field *ngIf="displayFilterStatus">
          <mat-select
            [formControl]="studentStatusFilter"
            [matTooltip]="studentStatusFilter.value | translate"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-status">
            <mat-option value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of studentStatusFilterList"
              data-cy="table-filter-status-option">{{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="studentStatusFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="studentStatusFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setStudentStatusFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="studentStatusFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('studentStatus')"
              [indeterminate]="isSomeDropdownSelectedTable('studentStatus')"
              (change)="selectAllDataTable($event, 'studentStatus')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="typeFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-type">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="typeFilter"
            [matTooltip]="typeFilter.value ? ('type_formation.' + typeFilter.value | translate) : ''"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-type">
            <mat-option value="" data-cy="table-filter-type-option">{{ 'All' | translate }}</mat-option>
            <mat-option [value]="record?.value" *ngFor="let record of typeFilterList"
              data-cy="table-filter-type-option">{{ 'type_formation.' + record?.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="typeFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="typeFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setStudentTypeFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ 'type_formation.' + item?.key | translate }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="typeFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('studentType')"
              [indeterminate]="isSomeDropdownSelectedTable('studentType')"
              (change)="selectAllDataTable($event, 'studentType')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="profileRateFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-profile-rate">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="profileRateFilter"
            [matTooltip]="
              profileRateFilter.value && profileRateFilter.value !== 'All'
                ? profileRateFilter.value + ' ' + ('termss' | translate)
                : profileRateFilter.value === 'All'
                ? ('All' | translate)
                : ''
            "
            panelClass="custom-matselect-dropdown filterPanelBelow"
            data-cy="table-filter-admission-profile">
            <mat-option value="All" data-cy="table-filter-admission-profile-option">{{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record" *ngFor="let record of listTerm"
              data-cy="table-filter-admission-profile-option">{{ record }} {{ 'termss' | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="listTerm"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="profileRateFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setProfileRateFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="listTerm?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('profileRate')"
              [indeterminate]="isSomeDropdownSelectedTable('profileRate')"
              (change)="selectAllDataTable($event, 'profileRate')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="paymentMethodFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-type">
        <!-- <mat-form-field>
          <mat-select [formControl]="paymentFilter" [disableOptionCentering]="true" panelClass="filterPanel custom-matselect-dropdown">
            <mat-option value="All">{{ 'All' | translate }} </mat-option>
            <mat-option [value]="record?.value" *ngFor="let record of paymentMode">{{ record?.key | translate }} </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="paymentMode"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="paymentFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setPaymentModeFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="paymentMode?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('paymentMethod')"
              [indeterminate]="isSomeDropdownSelectedTable('paymentMethod')"
              (change)="selectAllDataTable($event, 'paymentMethod')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="sponsorFinanceFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field>
          <input
            matInput
            class="form-field"
            [formControl]="financialSupportFilter"
            placeholder="{{ 'search' | translate }}"
            data-cy="table-filter-financial-support" />
        </mat-form-field>
      </th>
    </ng-container>
    <!-- <ng-container matColumnDef="paymentInformationFilter">
      <th mat-header-cell *matHeaderCellDef>
        <mat-form-field style="margin-top: 6px">
          <mat-select
            [formControl]="paymentInformationFilter"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-payment-information"
          >
            <mat-option value="All" data-cy="table-filter-payment-information-option">{{ 'All' | translate }} </mat-option>
            <mat-option
              [value]="record?.value"
              *ngFor="let record of paymentInformationFilterList"
              data-cy="table-filter-payment-information-option"
              >{{ 'PAYMENT_INFORMATION.' + record?.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -
        <ng-select
          [items]="paymentInformationFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="paymentInformationFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setPaymentInformation()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="paymentInformationFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('paymentInformation')"
              [indeterminate]="isSomeDropdownSelectedTable('paymentInformation')"
              (change)="selectAllDataTable($event, 'paymentInformation')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container> -->
    <ng-container matColumnDef="specialCaseFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-special-case">
        <!-- <mat-form-field style="margin-top: 6px">
          <mat-select [formControl]="specialCaseFilter" [matTooltip]="specialCaseFilter.value | translate" [disableOptionCentering]="true" panelClass="filterPanel custom-matselect-dropdown">
            <mat-option value="All">{{ 'All' | translate }} </mat-option>
            <mat-option [value]="record?.key" *ngFor="let record of specialCaseFilterList">{{ record?.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          class="custom-dropdownpanel"
          style="margin-top: 4px !important;"
          [items]="specialCaseFilterList"
          bindValue="value"
          bindLabel="key"
          [appendTo]="'body'"
          [multiple]="true"
          [closeOnSelect]="false"
          [clearable]="false"
          (close)="setSpecialCaseFilter()"
          placeholder="{{ 'search' | translate }}"
          [formControl]="specialCaseFilter">
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.key | translate }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="specialCaseFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelected('specialCase')"
              [indeterminate]="isSomeDropdownSelected('specialCase')"
              (change)="selectAllDataTable($event, 'specialCase')">
              {{ 'AllF' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="latestAskForPaymentFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-latest-ask">
        <!-- <mat-form-field style="margin-top: 6px">
          <mat-select
            panelClass="filterPanel custom-matselect-dropdown"
            [formControl]="latestAskForPaymentFilter"
            [disableOptionCentering]="true"
            [matTooltipDisabled]="!latestAskForPaymentFilter.value"
            [matTooltip]="latestAskForPaymentFilter.value | translate"
            data-cy="table-filter-latest-ask-for-payment">
            <mat-option
              value="all">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option
              [value]="item.value"
              *ngFor="let item of latestAskForPaymentFilterList"
              data-cy="table-filter-latest-ask-for-payment-option">
              {{ item.label | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
        [items]="latestAskForPaymentFilterList"
        bindValue="value"
        bindLabel="key"
        class="custom-dropdownpanel"
        [appendTo]="'body'"
        [multiple]="true"
        notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
        placeholder="{{ 'search' | translate }}"
        [formControl]="latestAskForPaymentFilter"
        [clearable]="false"
        [closeOnSelect]="false"
        (close)="setLastestPaymentFilter()"
      >
        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
          <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.key }}
        </ng-template>
        <ng-template ng-header-tmp *ngIf="latestAskForPaymentFilterList?.length">
          <mat-checkbox
            class="all-input"
            style="cursor: pointer"
            [checked]="isAllDropdownSelectedTable('latestPayment')"
            [indeterminate]="isSomeDropdownSelectedTable('latestPayment')"
            (change)="selectAllDataTable($event, 'latestPayment')"
          >
            {{ 'AllM' | translate }}
          </mat-checkbox>
        </ng-template>
      </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="totalAmountFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="amountBilledFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="amountPaidFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="remainingDueFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="amountLateFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="accumulatedLateFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="depositFilter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-type">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="depositFilter"
            [matTooltip]="depositFilter.value ? ('DP_Status.' + depositFilter.value | translate) : ''"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-deposit">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPFilterList"
              data-cy="table-filter-deposit-option">
              {{ 'DP_Status.' + record.value | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="depositFilter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setDownPaymentFilter()"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('downPayment')"
              [indeterminate]="isSomeDropdownSelectedTable('downPayment')"
              (change)="selectAllDataTable($event, 'downPayment')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="notRespectedFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="notSettledFilter">
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>
    <ng-container matColumnDef="term1Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms1Filter"
            [matTooltip]="terms1Filter.value === 'billed' ? ('Generated' | translate) : (terms1Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-1">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-1-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms1Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms1')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms1')"
              [indeterminate]="isSomeDropdownSelectedTable('terms1')"
              (change)="selectAllDataTable($event, 'terms1')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term2Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms2Filter"
            [matTooltip]="terms2Filter.value === 'billed' ? ('Generated' | translate) : (terms2Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-2">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-2-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms2Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms2')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms2')"
              [indeterminate]="isSomeDropdownSelectedTable('terms2')"
              (change)="selectAllDataTable($event, 'terms2')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term3Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms3Filter"
            [matTooltip]="terms3Filter.value === 'billed' ? ('Generated' | translate) : (terms3Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-3">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-3-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms3Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms3')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms3')"
              [indeterminate]="isSomeDropdownSelectedTable('terms3')"
              (change)="selectAllDataTable($event, 'terms3')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term4Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms4Filter"
            [matTooltip]="terms4Filter.value === 'billed' ? ('Generated' | translate) : (terms4Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-4">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-4-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms4Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms4')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms4')"
              [indeterminate]="isSomeDropdownSelectedTable('terms4')"
              (change)="selectAllDataTable($event, 'terms4')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term5Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms5Filter"
            [matTooltip]="terms5Filter.value === 'billed' ? ('Generated' | translate) : (terms5Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-5">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-5-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms5Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms5')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms5')"
              [indeterminate]="isSomeDropdownSelectedTable('terms5')"
              (change)="selectAllDataTable($event, 'terms5')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term6Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms6Filter"
            [matTooltip]="terms6Filter.value === 'billed' ? ('Generated' | translate) : (terms6Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-6">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-6-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms6Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms6')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms6')"
              [indeterminate]="isSomeDropdownSelectedTable('terms6')"
              (change)="selectAllDataTable($event, 'terms6')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term7Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms7Filter"
            [matTooltip]="terms7Filter.value === 'billed' ? ('Generated' | translate) : (terms7Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-7">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-7-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms7Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms7')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms7')"
              [indeterminate]="isSomeDropdownSelectedTable('terms7')"
              (change)="selectAllDataTable($event, 'terms7')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term8Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms8Filter"
            [matTooltip]="terms8Filter.value === 'billed' ? ('Generated' | translate) : (terms8Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-8">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-8-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms8Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms8')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms8')"
              [indeterminate]="isSomeDropdownSelectedTable('terms8')"
              (change)="selectAllDataTable($event, 'terms8')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term9Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms9Filter"
            [matTooltip]="terms9Filter.value === 'billed' ? ('Generated' | translate) : (terms9Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-9">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-9-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms9Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms9')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms9')"
              [indeterminate]="isSomeDropdownSelectedTable('terms9')"
              (change)="selectAllDataTable($event, 'terms9')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term10Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms10Filter"
            [matTooltip]="terms10Filter.value === 'billed' ? ('Generated' | translate) : (terms10Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-10">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-10-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms10Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms10')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms10')"
              [indeterminate]="isSomeDropdownSelectedTable('terms10')"
              (change)="selectAllDataTable($event, 'terms10')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term11Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms11Filter"
            [matTooltip]="terms11Filter.value === 'billed' ? ('Generated' | translate) : (terms11Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-11">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-11-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms11Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms11')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms11')"
              [indeterminate]="isSomeDropdownSelectedTable('terms11')"
              (change)="selectAllDataTable($event, 'terms11')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>
    <ng-container matColumnDef="term12Filter">
      <th mat-header-cell *matHeaderCellDef class="custom-filter-table-student-status">
        <!-- <mat-form-field>
          <mat-select
            [formControl]="terms12Filter"
            [matTooltip]="terms12Filter.value === 'billed' ? ('Generated' | translate) : (terms12Filter.value | translate)"
            [disableOptionCentering]="true"
            panelClass="filterPanel custom-matselect-dropdown"
            data-cy="table-filter-term-12">
            <mat-option
              value="AllM">
              {{ 'All' | translate }}
            </mat-option>
            <mat-option [value]="record.value" *ngFor="let record of DPandTermsFilterList"
              data-cy="table-filter-term-12-option">
              {{ record.key | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <ng-select
          [items]="DPandTermsFilterList"
          bindValue="value"
          bindLabel="label"
          class="custom-dropdownpanel"
          [appendTo]="'body'"
          [multiple]="true"
          notFoundText="{{ 'NOT RECORD FOUND' | translate }}"
          placeholder="{{ 'search' | translate }}"
          [formControl]="terms12Filter"
          [clearable]="false"
          [closeOnSelect]="false"
          (close)="setTermsFilter('terms12')"
        >
          <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
            <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item?.label }}
          </ng-template>
          <ng-template ng-header-tmp *ngIf="DPandTermsFilterList?.length">
            <mat-checkbox
              class="all-input"
              style="cursor: pointer"
              [checked]="isAllDropdownSelectedTable('terms12')"
              [indeterminate]="isSomeDropdownSelectedTable('terms12')"
              (change)="selectAllDataTable($event, 'terms12')"
            >
              {{ 'AllM' | translate }}
            </mat-checkbox>
          </ng-template>
        </ng-select>
      </th>
    </ng-container>

    <ng-container matColumnDef="actionFilter" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="selectFilter" sticky>
      <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="accountNumber" sticky>
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Student Number' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-account-number">
        <h5 mat-sort-header="account_number" style="font-size: 11px; font-weight: 500">
          {{ 'Student Number' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-account-number">
        {{ element?.account_number }}
      </td>
    </ng-container>

    <ng-container matColumnDef="student" sticky>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Student' | translate }}" matTooltipPosition="above"
        data-cy="table-col-student">
        <h5 mat-sort-header="candidate_last_name" style="font-size: 11px; text-align: center">
          <mat-icon class="mat-icon-status" style="font-size: 16px; position: relative; top: 0px"> school </mat-icon>
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="
          (element?.candidate_id?.last_name | uppercase) +
          ' ' +
          element?.candidate_id?.first_name +
          ' ' +
          (element?.candidate_id?.civility && element?.candidate_id?.civility === 'neutral'
            ? ''
            : (element?.candidate_id?.civility | translate))
        "
        class="pad-l-xs"
        data-cy="table-col-student">
        {{
        (element?.candidate_id?.last_name | uppercase) +
        ' ' +
        element?.candidate_id?.first_name +
        ' ' +
        (element?.candidate_id?.civility && element?.candidate_id?.civility === 'neutral'
        ? ''
        : (element?.candidate_id?.civility | translate))
        }}
      </td>
    </ng-container>

    <ng-container matColumnDef="currentProgram" sticky>
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Current Program' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-current-program">
        <h5 style="font-size: 11px; font-weight: 500; text-align: center">
          {{ 'Current Program' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        class="pad-l-xs"
        [matTooltip]="intakeChannel(element)"
        style="text-align: start; padding-left: 0.5rem !important"
        data-cy="table-col-current-program">
        {{ intakeChannel(element) }}
        <!-- {{ element?.intake_channel?.program }} -->
      </td>
    </ng-container>

    <ng-container matColumnDef="typeOfRegistration" sticky>
      <th
        mat-header-cell
        mat-sort-header="type_of_registration"
        *matHeaderCellDef
        class="text-center"
        [matTooltip]="'Type of Registration' | translate"
        matTooltipPosition="above">
        {{ 'Type of Registration' | translate }}
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="
          element?.candidate_id?.readmission_status ? ('STUDENT_TABLE.readmission' | translate) : ('STUDENT_TABLE.admission' | translate)
        ">
        {{
        element?.candidate_id?.readmission_status ? ('STUDENT_TABLE.readmission' | translate) :
        ('STUDENT_TABLE.admission' | translate)
        }}
      </td>
    </ng-container>

    <ng-container matColumnDef="legalEntity" sticky>
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Legal entity' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-legal-entity">
        <h5 style="font-size: 11px; font-weight: 500; text-align: center">
          {{ 'Legal entity' | translate }}
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        matTooltip="{{ element?.legal_entity?.legal_entity_name }}"
        class="pad-l-xs"
        style="text-align: start; padding-left: 0.5rem !important"
        data-cy="table-col-legal-entity">
        <ng-container *ngIf="element?.legal_entity?.legal_entity_name">
          {{
            element?.legal_entity?.legal_entity_name.length > 15
              ? (element?.legal_entity?.legal_entity_name | slice : 0 : 15) + '...'
              : element?.legal_entity?.legal_entity_name
          }}
        </ng-container>
        <ng-container *ngIf="!element.legal_entity"> - </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="profileFinance">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Financial Profile' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-financial-profile">
        <h5 style="font-size: 11px">
          <mat-icon class="mat-icon-status" style="font-size: 16px; position: relative; top: 0px"> euro </mat-icon>
        </h5>
      </th>
      <td
        mat-cell
        *matCellDef="let element"
        [matTooltip]="element?.financial_profile | translate"
        class="pad-l-xs"
        data-cy="table-col-financial-profile">
        <mat-icon
          matTooltipPosition="above"
          class="icon-status"
          style="font-size: 14px !important"
          aria-hidden="true"
          [ngClass]="{
            grey: element?.financial_profile === 'litigation',
            red: element?.financial_profile === 'doubtful',
            orange: element?.financial_profile === 'bad',
            blue: element?.financial_profile === 'good',
            green: element?.financial_profile === 'excellent'
          }">euro
        </mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th
        style="padding-top: 7px"
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'AdmissionFollowUp.Status' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-status">
        <h5>
          <mat-icon svgIcon="file-document-edit" class="mat-icon-svgIcon mat-icon-default"></mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" style="font-size: 14px;" data-cy="table-col-status">
        <span
          *ngIf="
            element?.candidate_id?.candidate_admission_status === 'admitted' ||
            element?.candidate_id?.candidate_admission_status === 'admission_in_progress'
          "
          [matTooltip]="'Admitted' | translate">
          {{ 'Adm.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'bill_validated'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Bil.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'engaged'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Eng.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'registered'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Reg.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Res.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned_after_engaged'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'ResAfter.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'mission_card_validated'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Miss.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'financement_validated'"
          [matTooltip]="'financement_validated' | translate">
          {{ 'Await.' | translate }}
        </span>

        <span *ngIf="element?.candidate_id?.candidate_admission_status === 'in_scholarship'"
          [matTooltip]="'in_scholarship' | translate">
          {{ 'Sch.' | translate }}
        </span>

        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'resign_after_school_begins'"
          [matTooltip]="'Resigned after school begins' | translate">
          {{ 'status_resign_after_school_begins' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'no_show'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'No.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'resignation_missing_prerequisites'"
          [matTooltip]="'resignation_missing_prerequisites' | translate">
          {{ 'Ren. PM' | translate }}
        </span>

        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'report_inscription'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ 'Post.' | translate }}
        </span>
        <span
          *ngIf="element?.candidate_id?.candidate_admission_status === 'resigned_after_registered'"
          [matTooltip]="element?.candidate_id?.candidate_admission_status | translate">
          {{ element?.candidate_id?.candidate_admission_status | translate }}
        </span>
        <span *ngIf="element?.candidate_id?.candidate_admission_status === 'deactivated'"
          [matTooltip]="'Deactivated' | translate">
          {{ 'Deac.' | translate }}
        </span>
      </td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Type' | translate }}" matTooltipPosition="above"
        data-cy="table-col-type">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="shield-account" class="mat-icon-svgIcon"> shield-account </mat-icon>
        </h5>
      </th>
      <ng-container *matCellDef="let element">
        <td
          mat-cell
          [matTooltip]="
            element?.student_type?.type_of_information ? ('type_formation.' + element?.student_type?.type_of_information | translate) : null
          "
          class="pad-l-xs"
          data-cy="table-col-type">
          <span class="m-left-5" *ngIf="element?.student_type?.type_of_information">{{ 'type_formation.' +
            element?.student_type?.type_of_information | translate }}
          </span>
        </td>
      </ng-container>
    </ng-container>

    <ng-container matColumnDef="profileRate">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Profil rate' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-admission-profile">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="clipboard-list-outline" class="mat-icon-svgIcon"> clipboard-list-outline </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-admission-profile">
        <!-- Classic Profile Rate -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || !element?.profil_rate || element?.payment_method === 'avoir'">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element) && element?.payment_method !== 'avoir'">
            <ng-container>
              <div [matTooltip]="element?.profil_rate">
                {{ element?.profil_rate }}
              </div>
              <mat-icon
                *ngIf="element?.is_profil_rate_updated"
                matTooltip="{{ 'Pending' | translate }}"
                class="icon-status orange"
                aria-hidden="true"
                style="width: 100%; display: block; margin: 0 auto;">lens
              </mat-icon>
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Profile Rate -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container *ngIf="!element?.profil_rate">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container *ngIf="element?.profil_rate">
              <div [matTooltip]="element?.profil_rate">
                {{ element?.profil_rate }}
              </div>
              <mat-icon
                *ngIf="element?.is_profil_rate_updated"
                matTooltip="{{ 'Pending' | translate }}"
                class="icon-status orange"
                aria-hidden="true"
                style="width: 100%; display: block; margin: 0 auto;">lens
              </mat-icon>
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="paymentMethod">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Paiement Method' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-payment-method">
        <h5 style="font-size: 11px; text-align: center; padding: 0px !important; font-weight: 500">
          {{ 'Paiement Method' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-payment-method">
        <!-- Classic Payment Method -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container
            *ngIf="checkNoPayment(element) || checkHasMethodPayment(element) || !element?.candidate_id?.registration_profile">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element) && !checkHasMethodPayment(element)">
            <ng-container *ngIf="element?.payment_method && element?.candidate_id?.registration_profile">
              <div>
                <span *ngIf="element?.payment_method !== 'avoir'" [matTooltip]="element?.payment_method === 'credit_card' ? ('Bank Debit' | translate) : (element?.payment_method | translate)">
                  {{ element?.payment_method === 'credit_card' ? ('Bank Debit' | translate) : (element?.payment_method | translate) }}
                </span>
                <span *ngIf="element?.payment_method === 'avoir'" style="color: #b7b7b7">X</span>
              </div>
            </ng-container>
            <ng-container *ngIf="!element?.payment_method && element?.candidate_id?.registration_profile">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Payment Method -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || checkHasMethodPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container
            *ngIf="(!checkNoPayment(element) && !checkHasMethodPayment(element)) || !element?.candidate_id?.registration_profile">
            <ng-container *ngIf="!element?.payment_method || !element?.candidate_id?.registration_profile">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container *ngIf="element?.payment_method">
              <div
                [matTooltip]="
                  element?.payment_method === 'credit_card' ? ('Bank Debit' | translate) : (element?.payment_method | translate)
                ">
                {{ element?.payment_method === 'credit_card' ? ('Bank Debit' | translate) : (element?.payment_method |
                translate) }}
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="sponsorFinance">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Finance Sponsor' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-financial-support">
        <h5 style="font-size: 11px; font-weight: 500">
          {{ 'Finance Sponsor' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-financial-support">
        <ng-container *ngIf="element?.is_financial_support">
          {{
          (element?.financial_support_info?.civility ? (element?.financial_support_info?.civility | translate) : '') +
          ' ' +
          (element?.financial_support_info?.family_name | uppercase) +
          ' ' +
          element?.financial_support_info?.name
          }}
        </ng-container>
        <!-- Classic Finance Sponsor -->
        <ng-container
          *ngIf="element?.student_type?.type_of_information === 'classic' && !element?.is_financial_support">
          <ng-container *ngIf="checkNoPayment(element) && element?.candidate_id?.registration_profile">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element) || !element?.candidate_id?.registration_profile">
            <ng-container *ngIf="element?.financial_supports && element?.financial_supports.length">
              <span>
                {{ element?.financial_supports?.length }}
              </span>
            </ng-container>
            <ng-container
              *ngIf="
                !element?.financial_supports || element?.financial_supports?.length === 0 || !element?.candidate_id?.registration_profile
              ">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Finance Sponsor -->
        <ng-container
          *ngIf="element?.student_type?.type_of_information !== 'classic' && !element?.is_financial_support">
          <ng-container *ngIf="checkNoPayment(element)">
            <ng-container
              *ngIf="
                checkNoPayment(element) ||
                !element?.financial_supports ||
                element?.financial_supports?.length === 0 ||
                !element?.candidate_id?.registration_profile
              ">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container
              *ngIf="
                !checkNoPayment(element) ||
                !element?.financial_supports ||
                element?.financial_supports?.length === 0 ||
                !element?.candidate_id?.registration_profile
              ">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <!-- <ng-container matColumnDef="paymentInformation">
      <th mat-header-cell *matHeaderCellDef class="text-center" [matTooltip]="'Payment Information' | translate" matTooltipPosition="above">
        <mat-icon svgIcon="information-outline" class="mat-icon-svgIcon"></mat-icon>
      </th>
      <td mat-cell *matCellDef="let element" class="text-center" data-cy="table-col-payment-information">
        <span *ngIf="!element?.candidate_id?.modality_step_special_form_status"> - </span>
        <span *ngIf="element?.candidate_id?.modality_step_special_form_status">
          <mat-icon
            [ngClass]="{
              purple: element?.candidate_id?.modality_step_special_form_status === 'sent',
              green: element?.candidate_id?.modality_step_special_form_status === 'completed'
            }"
            aria-hidden="true"
            class="mat-icon-status"
            [matTooltip]="'PAYMENT_INFORMATION.' + element?.candidate_id?.modality_step_special_form_status | translate"
            >lens
          </mat-icon>
        </span>
      </td>
    </ng-container> -->

    <ng-container matColumnDef="specialCase">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="is_have_special_case" class="text-center"
        [matTooltip]="'Special Case' | translate" matTooltipPosition="above">
        <h5 style="font-size: 11px; font-weight: 500; text-align:center">{{ 'Special Case' | translate }}</h5>
      </th>
      <td mat-cell *matCellDef="let element" class="text-center">
        <span>
          <mat-icon
            [ngClass]="element?.is_have_special_case ? 'green' : 'red'"
            class="mat-icon-status"
            [matTooltip]="element?.is_have_special_case ? ('Yes' | translate) : ('No' | translate)">lens
          </mat-icon>
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="latestAskForPayment">
      <th
        mat-header-cell
        mat-sort-header="pay_n2"
        *matHeaderCellDef
        class="text-center"
        matTooltipPosition="above"
        [matTooltip]="'Latest Ask For Payment' | translate"
        data-cy="table-col-latest-ask-for-payment">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">{{ 'Latest Ask For Payment' | translate }}</h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-latest-ask-for-payment">
        <span *ngIf="element?.sent_pay_n2_datetime_str; else showX" [matTooltip]="element.sent_pay_n2_datetime_str">
          {{ element.sent_pay_n2_datetime_str }}
        </span>
        <ng-template #showX>
          <span style="color: #b7b7b7">X</span>
        </ng-template>
      </td>
    </ng-container>

    <ng-container matColumnDef="totalAmount">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Total Amount' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-total-amount">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Total Amount' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-total-amount">
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || element?.total_amount === 0">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ element?.total_amount && element?.total_amount !== '0' ? formatCurrencyHistory(element?.total_amount) :
              '' }}
            </ng-container>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container
              *ngIf="
                element?.total_amount === '0' ||
                element?.total_amount === '0.00' ||
                element?.total_amount === 0 ||
                element?.total_amount === 0.0 ||
                element?.total_amount === '' ||
                element?.total_amount === null
              ">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="
                element?.total_amount &&
                element?.total_amount !== '0' &&
                element?.total_amount !== '0.00' &&
                element?.total_amount !== 0 &&
                element?.total_amount !== 0.0 &&
                element?.total_amount !== '' &&
                element?.total_amount !== null
              ">
              {{ formatCurrencyHistory(element?.total_amount) }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="amountBilled">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Amount Billed' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-amount-billed">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Amount Billed' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-amount-billed">
        <!-- Classic Amount Billed -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || element?.amount_billed === 0">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ element?.amount_billed && element?.amount_billed !== '0' ?
              formatCurrencyHistory(element?.amount_billed) : '' }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Amount Billed -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container *ngIf="element?.amount_billed === 0">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container *ngIf="element?.amount_billed > 0">
              {{ element?.amount_billed && element?.amount_billed > 0 ? formatCurrencyHistory(element?.amount_billed) :
              '' }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="amountPaid">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Amount Paid' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-amount-paid">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Amount Paid' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-amount-paid">
        <!-- Classic Amount Paid -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) && !checkIfCandidateTransferHasAmountPaid(element?.amount_paid)">
            <ng-container
              *ngIf="!element?.amount_paid || element?.amount_paid === '0' || element?.amount_paid === '0.00'">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element) || checkIfCandidateTransferHasAmountPaid(element?.amount_paid)">
            <ng-container *ngIf="!checkIfCandidateTransferHasAmountPaid(element?.amount_paid) || element?.amount_paid === '0' || element?.amount_paid === '0.00'">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="
                element?.amount_paid !== '0' ||
                element?.amount_paid !== '0.00' ||
                !element?.amount_paid ||
                checkIfCandidateTransferHasAmountPaid(element?.amount_paid)
              ">
              {{
              formatCurrency(element?.amount_paid) && (element?.amount_paid !== '0' && element?.amount_paid !== '0.00')
              ? formatCurrencyHistory(element?.amount_paid)
              : ''
              }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Amount Paid -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element) && !checkIfCandidateTransferHasAmountPaid(element?.amount_paid)">
            <ng-container
              *ngIf="!element?.amount_paid || element?.amount_paid === '0' || element?.amount_paid === '0.00'">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element) || checkIfCandidateTransferHasAmountPaid(element?.amount_paid)">
            <ng-container *ngIf="!checkIfCandidateTransferHasAmountPaid(element?.amount_paid) || element?.amount_paid === '0' || element?.amount_paid === '0.00'">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="
                element?.amount_paid &&
                element?.amount_paid !== '0' &&
                element?.amount_paid !== '0.00' &&
                checkIfCandidateTransferHasAmountPaid(element?.amount_paid)
              ">
              {{
              formatCurrency(element?.amount_paid) && (element?.amount_paid !== '0' && element?.amount_paid !== '0.00')
              ? formatCurrencyHistory(element?.amount_paid)
              : ''
              }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="remainingDue">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Remaining Due' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-remaining-due">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Remaining Due' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-remaining-due">
        <!-- Classic Remaining Due -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || element?.remaining_billed === '0'">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container *ngIf="element?.remaining_billed !== '0' || !element?.remaining_billed">
              {{
              formatCurrency(element?.remaining_billed) && element?.remaining_billed !== '0'
              ? formatCurrencyHistory(element?.remaining_billed)
              : ''
              }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Remaining Due -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container
              *ngIf="element?.remaining_billed === '0' || element?.remaining_billed === '0.00' || !element?.remaining_billed">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="element?.remaining_billed && element?.remaining_billed !== '0' && element?.remaining_billed !== '0.00'">
              {{
              formatCurrency(element?.remaining_billed) && element?.remaining_billed !== '0'
              ? formatCurrencyHistory(element?.remaining_billed)
              : ''
              }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="amountLate">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Amount Late' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-amount-late">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Amount Late' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-amount-late">
        <!-- Classic Amount Late -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || !element?.amount_late">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ formatCurrency(element?.amount_late) && element?.amount_late !== '0' ?
              formatCurrencyHistory(element?.amount_late) : '' }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Amount Late -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container
              *ngIf="element?.amount_late === '0' || element?.amount_late === '0.00' || !element?.amount_late">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="element?.amount_late && element?.amount_late !== '0' && element?.amount_late !== '0.00'">
              {{ formatCurrency(element?.amount_late) && element?.amount_late !== '0' ?
              formatCurrencyHistory(element?.amount_late) : '' }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="accumulatedLate">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Accumulated Late (d)' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-accumulated-late">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Accumulated Late (d)' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-accumulated-late">
        <!-- Classic Accumulated Late -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container
            *ngIf="
              (checkNoPayment(element) || element?.accumulated_late === 0) &&
              element?.candidate_id?.candidate_admission_status !== 'registered'
            ">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ element?.accumulated_late ? element?.accumulated_late : '' }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Accumulated Late -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container
              *ngIf="element?.accumulated_late === '0' || element?.accumulated_late === '0.00' || !element?.accumulated_late">
              <span style="color: #b7b7b7">X</span>
            </ng-container>

            <ng-container
              *ngIf="element?.accumulated_late && element?.accumulated_late !== '0' && element?.accumulated_late !== '0.00'">
              {{ element?.accumulated_late ? element?.accumulated_late : '' }}
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="deposit">
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Deposit' | translate }}" matTooltipPosition="above"
        data-cy="table-col-deposit">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="credit-card-check" class="mat-icon-svgIcon"> credit-card-check </mat-icon>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs">
        <ng-container *ngIf="checkNoPayment(element) && !checkIfCandidateTransferHasDP(element?.deposit_pay_amount)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>

        <ng-container *ngIf="!checkNoPayment(element) || checkIfCandidateTransferHasDP(element?.deposit_pay_amount)">
          <ng-container *ngIf="checkHasNoDP(element) && !checkIfCandidateTransferHasDP(element?.deposit_pay_amount)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>
          <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
            <ng-container *ngIf="element?.deposit === 0 && element?.deposit_pay_amount === 0 && !checkHasNoDP(element)">
              <span style="color: #b7b7b7">X</span>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="element?.deposit !== 0 || element?.dp_deposit_chargeback || checkIfCandidateTransferHasDP(element?.deposit_pay_amount)">
            <span
              *ngIf="element?.deposit && element?.deposit_pay_amount !== 0 && element?.deposit_pay_amount !== element?.deposit">
              <ng-container *ngIf="element?.dp_histories?.length > 0 && checkDepositPaidAndDepositHistories(element); else doesntHaveDpHistory">
                <button
                  mat-icon-button
                  class="margin-right-button view-term"
                  matTooltip="{{ 'Detail of Down Payment' | translate }}"
                  (click)="getDPDetail(element?._id)">
                  <mat-icon svgIcon="eye"></mat-icon>
                </button>
              </ng-container>

              <ng-template #doesntHaveDpHistory>
                <span class="deposit">{{
                  element?.deposit_pay_amount
                  ? formatCurrency(element?.deposit_pay_amount)
                  : (element?.deposit_pay_amount | currency : 'EURO' : '' : '0.2')
                  }}
                  <mat-icon *ngIf="element?.candidate_id?.payment !== 'chargeback'" matTooltipPosition="above"
                    matTooltip="{{ 'Paid' | translate }}" class="icon-status green" aria-hidden="true">lens
                  </mat-icon>
                </span>
                <span>{{
                  element?.deposit - element?.deposit_pay_amount
                  ? formatCurrency(element?.deposit - element?.deposit_pay_amount)
                  : (element?.deposit - element?.deposit_pay_amount | currency : 'EURO' : '' : '0.2')
                  }}
                  <mat-icon
                    matTooltipPosition="above"
                    *ngIf="
                      element?.deposit - element?.deposit_pay_amount > 0 &&
                      element?.candidate_id?.payment !== 'sepa_pending' &&
                      element?.candidate_id?.payment !== 'not_authorized' &&
                      element?.candidate_id?.payment !== 'pending'
                    "
                    class="icon-status blue"
                    aria-hidden="true">lens
                  </mat-icon>

                  <mat-icon
                    matTooltipPosition="above"
                    *ngIf="element?.candidate_id?.payment === 'sepa_pending' || element?.candidate_id?.payment === 'pending'"
                    class="icon-status orange"
                    aria-hidden="true">lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="element?.candidate_id?.payment === 'not_authorized'"
                    matTooltipPosition="above"
                    matTooltip="{{ 'Refused' | translate }}"
                    class="icon-status red"
                    aria-hidden="true">lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="element?.candidate_id?.payment === 'chargeback'"
                    matTooltipPosition="above"
                    matTooltip="{{ 'Chargeback' | translate }}"
                    class="icon-status purple"
                    aria-hidden="true">lens
                  </mat-icon>
                </span>
              </ng-template>
            </span>

            <span *ngIf="element?.deposit_pay_amount === 0 || element?.deposit_pay_amount === element?.deposit">
              <ng-container *ngIf="element?.dp_histories?.length < 1 || !checkDepositPaidAndDepositHistories(element)">
                {{ element?.deposit ? formatCurrency(element?.deposit) : element?.dp_deposit_chargeback ? formatCurrency(element?.dp_deposit_chargeback) : 'x' }}
              </ng-container>
              <ng-container
                *ngIf="element?.deposit && element?.deposit_status && element?.deposit_status !== 'not_billed' || element?.dp_deposit_chargeback">
                <ng-container *ngIf="element?.dp_histories?.length < 1 || !checkDepositPaidAndDepositHistories(element)">
                  <mat-icon
                    *ngIf="
                      element?.is_deposit_completed &&
                      element?.deposit &&
                      element?.deposit_status === 'paid' &&
                      element?.candidate_id?.payment !== 'chargeback'
                    "
                    matTooltipPosition="above"
                    matTooltip="{{ 'Paid' | translate }}"
                    class="icon-status green"
                    aria-hidden="true"
                    >lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="
                      element?.deposit &&
                      element?.deposit_status === 'billed' &&
                      element?.candidate_id?.payment !== 'sepa_pending' &&
                      element?.candidate_id?.payment !== 'not_authorized' &&
                      element?.candidate_id?.payment !== 'pending'
                    "
                    matTooltipPosition="above"
                    matTooltip="{{ 'Generated' | translate }}"
                    class="icon-status blue"
                    aria-hidden="true"
                    >lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="
                      (!element?.is_deposit_completed || !element?.deposit) &&
                      (element?.candidate_id?.payment === 'sepa_pending' || element?.candidate_id?.payment === 'pending')
                    "
                    matTooltipPosition="above"
                    matTooltip="{{ 'Pending' | translate }}"
                    class="icon-status orange"
                    aria-hidden="true"
                    >lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="element?.candidate_id?.payment === 'not_authorized'"
                    matTooltipPosition="above"
                    matTooltip="{{ 'Refused' | translate }}"
                    class="icon-status red"
                    aria-hidden="true"
                    >lens
                  </mat-icon>
                  <mat-icon
                    *ngIf="element?.candidate_id?.payment === 'chargeback' || element?.dp_deposit_chargeback"
                    matTooltipPosition="above"
                    matTooltip="{{ 'Chargeback' | translate }}"
                    class="icon-status purple"
                    aria-hidden="true">lens
                  </mat-icon>
                </ng-container>
                <ng-container *ngIf="element?.dp_histories?.length > 0 && checkDepositPaidAndDepositHistories(element)">
                  <button
                    mat-icon-button
                    class="margin-right-button view-term"
                    matTooltip="{{ 'Detail of Down Payment' | translate }}"
                    (click)="getDPDetail(element?._id)">
                    <mat-icon svgIcon="eye"></mat-icon>
                  </button>
                </ng-container>
              </ng-container>
            </span>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="notRespected">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Terms Not respected' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-terms-not-respected">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Terms Not respected' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-terms-not-respected">
        <!-- Classic Terms Not Respected -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || element?.overdue === 0">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ formatNonDecimal(element?.overdue) }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Terms Not Respected -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <span
              *ngIf="
                element?.overdue !== 0 &&
                element?.overdue !== 0.0 &&
                element?.overdue !== '0' &&
                element?.overdue !== '0.00' &&
                element?.overdue !== ''
              ">{{ formatNonDecimal(element?.overdue) }}</span>
            <ng-container
              *ngIf="
                element?.overdue === 0 ||
                element?.overdue === 0.0 ||
                element?.overdue === '0' ||
                element?.overdue === '0.00' ||
                element?.overdue === ''
              ">
              <span
                *ngIf="
                  element?.amount_billed === 0 ||
                  element?.amount_billed === 0.0 ||
                  element?.amount_billed === '0' ||
                  element?.amount_billed === '0.00'
                "
                style="color: #b7b7b7">X</span>
              <span
                *ngIf="
                  element?.amount_billed !== 0 &&
                  element?.amount_billed !== 0.0 &&
                  element?.amount_billed !== '0' &&
                  element?.amount_billed !== '0.00'
                "></span>
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="notSettled">
      <th
        mat-header-cell
        *matHeaderCellDef
        matTooltip="{{ 'Terms Not Respected & till not Settled up today' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-terms-not-settled">
        <h5 style="font-size: 11px; padding: 0px 2px; font-weight: 500">
          {{ 'Terms Not Respected & till not Settled up today' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-terms-not-settled">
        <!-- Classic Terms Not Respected & till not Settled up today -->
        <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
          <ng-container *ngIf="checkNoPayment(element) || element?.overdue_not_paid === 0">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <ng-container>
              {{ formatNonDecimal(element?.overdue_not_paid) }}
            </ng-container>
          </ng-container>
        </ng-container>

        <!-- Continous Terms Not Respected & till not Settled up today -->
        <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
          <ng-container *ngIf="checkNoPayment(element)">
            <span style="color: #b7b7b7">X</span>
          </ng-container>

          <ng-container *ngIf="!checkNoPayment(element)">
            <span
              *ngIf="
                element?.overdue_not_paid !== 0 &&
                element?.overdue_not_paid !== 0.0 &&
                element?.overdue_not_paid !== '0' &&
                element?.overdue_not_paid !== '0.00' &&
                element?.overdue_not_paid !== ''
              ">
              {{ formatNonDecimal(element?.overdue_not_paid) }}
            </span>
            <ng-container
              *ngIf="
                element?.overdue_not_paid === 0 ||
                element?.overdue_not_paid === 0.0 ||
                element?.overdue_not_paid === '0' ||
                element?.overdue_not_paid === '0.00' ||
                element?.overdue_not_paid === ''
              ">
              <span
                *ngIf="
                  element?.amount_billed === 0 ||
                  element?.amount_billed === 0.0 ||
                  element?.amount_billed === '0' ||
                  element?.amount_billed === '0.00'
                "
                style="color: #b7b7b7">X</span>
              <span
                *ngIf="
                  element?.amount_billed !== 0 &&
                  element?.amount_billed !== 0.0 &&
                  element?.amount_billed !== '0' &&
                  element?.amount_billed !== '0.00'
                "></span>
            </ng-container>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term1">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 1' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-1">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-1-box" class="mat-icon-svgIcon"> numeric-1-box </mat-icon>
          <span class="date-term">{{ 'August' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-1">
        <ng-container *ngIf="element?.term_1?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_1?.length">
          <ng-container *ngIf="element?.term_1?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_1)">
            <ng-container *ngFor="let term of element?.term_1">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_1?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_1)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_1, 'August')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term2">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 2' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-2">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-2-box" class="mat-icon-svgIcon"> numeric-2-box </mat-icon>
          <span class="date-term">{{ 'September' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-2">
        <ng-container *ngIf="element?.term_2?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_2?.length">
          <ng-container *ngIf="element?.term_2?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_2)">
            <ng-container *ngFor="let term of element?.term_2">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_2?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_2)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_2, 'September')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term3">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 3' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-3">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-3-box" class="mat-icon-svgIcon"> numeric-3-box </mat-icon>
          <span class="date-term">{{ 'October' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-3">
        <ng-container *ngIf="element?.term_3?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_3?.length">
          <ng-container *ngIf="element?.term_3?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_3)">
            <ng-container *ngFor="let term of element?.term_3">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')"
                    >{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_3?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_3)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_3, 'October')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term4">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 4' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-4">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-4-box" class="mat-icon-svgIcon"> numeric-4-box </mat-icon>
          <span class="date-term">{{ 'November' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-4">
        <ng-container *ngIf="element?.term_4?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_4?.length">
          <ng-container *ngIf="element?.term_4?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_4)">
            <ng-container *ngFor="let term of element?.term_4">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_4?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_4)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_4, 'November')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term5">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 5' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-5">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-5-box" class="mat-icon-svgIcon"> numeric-5-box </mat-icon>
          <span class="date-term">{{ 'December' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-5">
        <ng-container *ngIf="element?.term_5?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_5?.length">
          <ng-container *ngIf="element?.term_5?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_5)">
            <ng-container *ngFor="let term of element?.term_5">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_5?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_5)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_5, 'December')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term6">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 6' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-6">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-6-box" class="mat-icon-svgIcon"> numeric-6-box </mat-icon>
          <span class="date-term">{{ 'January' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-6">
        <ng-container *ngIf="element?.term_6?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_6?.length">
          <ng-container *ngIf="element?.term_6?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_6)">
            <ng-container *ngFor="let term of element?.term_6">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_6?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_6)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_6, 'January')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term7">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 7' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-7">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-7-box" class="mat-icon-svgIcon"> numeric-7-box </mat-icon>
          <span class="date-term">{{ 'February' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-7">
        <ng-container *ngIf="element?.term_7?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_7?.length">
          <ng-container *ngIf="element?.term_7?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_7)">
            <ng-container *ngFor="let term of element?.term_7">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_7?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_7)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_7, 'February')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term8">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 8' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-8">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-8-box" class="mat-icon-svgIcon"> numeric-8-box </mat-icon>
          <span class="date-term">{{ 'March' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-8">
        <ng-container *ngIf="element?.term_8?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_8?.length">
          <ng-container *ngIf="element?.term_8?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_8)">
            <ng-container *ngFor="let term of element?.term_8">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_8?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_8)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_8, 'March')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term9">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 9' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-9">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-9-box" class="mat-icon-svgIcon"> numeric-9-box </mat-icon>
          <span class="date-term">{{ 'April' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-9">
        <ng-container *ngIf="element?.term_9?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_9?.length">
          <ng-container *ngIf="element?.term_9?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_9)">
            <ng-container *ngFor="let term of element?.term_9">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_9?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_9)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_9, 'April')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term10">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 10' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-10">
        <h5 style="font-size: 11px">
          <mat-icon svgIcon="numeric-10-box" class="customs-icon"></mat-icon>
          <span class="date-term" style="margin-top: -3px; margin-bottom: 15px">{{ 'May' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-10">
        <ng-container *ngIf="element?.term_10?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_10?.length">
          <ng-container *ngIf="element?.term_10?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_10)">
            <ng-container *ngFor="let term of element?.term_10">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_10?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_10)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_10, 'May')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term11">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 11' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-11">
        <h5 style="font-size: 11px">
          <span class="box-outline">11</span>
          <span class="date-term">{{ 'June' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-11">
        <ng-container *ngIf="element?.term_11?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_11?.length">
          <ng-container *ngIf="element?.term_11?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_11)">
            <ng-container *ngFor="let term of element?.term_11">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_11?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_11)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_11, 'June')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="term12">
      <th
        mat-header-cell
        *matHeaderCellDef="let element"
        matTooltip="{{ 'Term 12' | translate }}"
        matTooltipPosition="above"
        data-cy="table-col-term-12">
        <h5 style="font-size: 11px">
          <span class="box-outline">12</span>
          <span class="date-term">{{ 'July' | translate }}</span>
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-term-12">
        <ng-container *ngIf="element?.term_12?.length < 1 || checkNoPayment(element)">
          <span style="color: #b7b7b7">X</span>
        </ng-container>
        <ng-container *ngIf="element?.term_12?.length">
          <ng-container *ngIf="element?.term_12?.length === 1 && !checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_12)">
            <ng-container *ngFor="let term of element?.term_12">
              <ng-container *ngIf="checkNoPayment(element)">
                <div *ngIf="!term || !term?.term_amount" style="color: #b7b7b7">X</div>
              </ng-container>

              <ng-container *ngIf="!checkNoPayment(element)" [matTooltip]="term">
                <ng-container *ngIf="element?.student_type?.type_of_information === 'classic'">
                  <ng-container *ngIf="!term || !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="element?.student_type?.type_of_information !== 'classic'">
                  <ng-container *ngIf="!term && !term?.term_amount">
                    <span style="color: #b7b7b7">X</span>
                  </ng-container>
                </ng-container>

                <ng-container *ngIf="term">
                  <div style="text-align: end; margin-right: 8px">
                    <span
                      class="date-terms"
                      *ngIf="term?.term_status === 'partially_paid' && term?.term_pay_amount - term?.term_amount_chargeback > 0"
                      >{{
                        term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount
                          ? term?.term_pay_amount
                            ? formatCurrency(term?.term_pay_amount)
                            : (term?.term_pay_amount | currency : 'EURO' : '' : '0.2')
                          : ''
                      }}
                      <mat-icon
                        *ngIf="term?.term_pay_amount && term?.term_pay_amount !== term?.term_amount"
                        matTooltipPosition="above"
                        matTooltip="{{ 'Paid' | translate }}"
                        class="icon-status green"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="!term?.is_partial">{{
                      term?.term_amount - term?.term_amount_chargeback - term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending
                      )
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_status === 'billed' &&
                          term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.is_partial && (term?.term_status !== 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          (term?.term_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0) ||
                          (term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0)
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <span *ngIf="term?.is_partial && (term?.term_status === 'partially_paid')">{{
                      term?.term_amount_chargeback
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_amount_chargeback -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : term?.term_pay_amount
                      ? formatCurrency(
                      term?.term_amount -
                      term?.term_pay_amount -
                      term?.term_amount_not_authorised -
                      term?.term_amount_pending)
                      : ''
                      }}
                      <mat-icon
                        *ngIf="
                          term?.term_amount -
                          term?.term_pay_amount -
                          term?.term_amount_chargeback -
                          term?.term_amount_not_authorised -
                          term?.term_amount_pending >
                          0
                        "
                        matTooltipPosition="above"
                        matTooltip="{{ 'Generated' | translate }}"
                        class="icon-status blue"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>

                    <mat-icon
                      *ngIf="term?.is_term_paid && !term?.is_partial && term?.term_status === 'paid' && !term?.term_amount_chargeback"
                      matTooltipPosition="above"
                      matTooltip="{{ 'Paid' | translate }}"
                      class="icon-status green"
                      aria-hidden="true">lens
                    </mat-icon>
                    <mat-icon
                      *ngIf="
                        ((!term?.is_term_paid && term?.term_amount) ||
                          checkPartiallyTerms(term)) &&
                        term?.term_status === 'not_billed' &&
                        term?.term_amount_not_authorised &&
                        term?.term_amount > term?.term_amount_not_authorised + term?.term_amount_chargeback + term?.term_amount_pending
                      "
                      matTooltipPosition="above"
                      matTooltip="{{ 'Rejected' | translate }}"
                      class="icon-status red"
                      aria-hidden="true"
                      [ngClass]="{
                        none: changedPlan(term) && term?.term_payment_deferment?.date && term?.term_status === 'not_billed'
                      }">lens
                    </mat-icon>
                  </div>
                  <div style="text-align: end; margin-right: 8px">
                    <span *ngIf="term?.term_amount_pending">
                      {{
                      term?.term_amount_pending
                      ? formatCurrency(term?.term_amount_pending)
                      : (term?.term_amount_pending | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Pending' | translate }}"
                        class="icon-status orange"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_chargeback">
                      {{
                      term?.term_amount_chargeback
                      ? formatCurrency(term?.term_amount_chargeback)
                      : (term?.term_amount_chargeback | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'chargeback' | translate }}"
                        class="icon-status magenta"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                    <span *ngIf="term?.term_amount_not_authorised">
                      {{
                      term?.term_amount_not_authorised
                      ? formatCurrency(term?.term_amount_not_authorised)
                      : (term?.term_amount_not_authorised | currency : 'EURO' : '' : '0.2')
                      }}
                      <mat-icon
                        matTooltipPosition="above"
                        matTooltip="{{ 'Rejected' | translate }}"
                        class="icon-status red"
                        aria-hidden="true">lens
                      </mat-icon>
                    </span>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="element?.term_12?.length > 1 || checkIfTermHaveChargebackAndHaveDifferentStatus(element?.term_12)">
            <button
              mat-icon-button
              class="margin-right-button view-term"
              matTooltip="{{ 'View term' | translate }}"
              (click)="viewTermDetail(element?.term_12, 'July')">
              <mat-icon svgIcon="eye"></mat-icon>
            </button>
          </ng-container>
        </ng-container>
      </td>
    </ng-container>

    <ng-container matColumnDef="action" stickyEnd>
      <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'Action' | translate }}" matTooltipPosition="above"
        data-cy="table-col-action">
        <h5 style="font-size: 11px">
          {{ 'Action' | translate }}
        </h5>
      </th>
      <td mat-cell *matCellDef="let element" class="pad-l-xs" data-cy="table-col-action">
        <button
          mat-icon-button
          class="margin-right-button"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          matTooltip="{{ 'Special Case' | translate }}"
          [ngClass]="element.is_have_special_case ? 'green' : 'red'"
          (click)="updateSpecialCase(element)">
          <mat-icon svgIcon="thumb-up-outline"></mat-icon>
        </button>
        <button
          mat-icon-button
          class="margin-right-button"
          (click)="internshipMailDialog(element)"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          matTooltip="{{ 'Send an email' | translate }}"
          *ngIf="permission.sendEmailFinanceFollowUpPerm()"
          data-cy="table-action-send-an-email">
          <mat-icon> send </mat-icon>
        </button>
        <button
          mat-icon-button
          class="margin-right-button"
          (click)="addPaymentDialog(element)"
          matTooltip="{{ 'Add payment' | translate }}"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          *ngIf="permission.addPaymentFinanceFollowUpPerm()"
          data-cy="table-action-add-payment">
          <mat-icon svgIcon="pencil"> </mat-icon>
        </button>
        <button
          mat-icon-button
          class="margin-right-button"
          (click)="termAmountDialog(element)"
          matTooltip="{{ 'Changer echeances/montant' | translate }}"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          *ngIf="permission.editFollowUpPerm() && changeDueDateAmountTermPermission?.includes(element?.candidate_id?.candidate_admission_status)"
          data-cy="table-action-term-amount">
          <mat-icon svgIcon="archive-edit-outline"> </mat-icon>
        </button>
        <button
          mat-icon-button
          class="margin-right-button"
          (click)="viewCandidateInfo(element?.candidate_id?._id,'Student','Finance', element?.intake_channel?._id)"
          matTooltip="{{ 'View' | translate }}"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          *ngIf="permission.viewStudentCardFollowUpPerm()"
          data-cy="table-action-view">
          <mat-icon svgIcon="eye"> </mat-icon>
        </button>
        <button
          mat-icon-button
          class="margin-right-button"
          (click)="askingForPaymentAction(element)"
          matTooltip="{{ 'Asking for payment' | translate }}"
          [disabled]="(dataSelected && dataSelected.length > 0) || isCheckedAll"
          data-cy="table-action-asking-for-payment"
          *ngIf="permission?.askingPaymentFinanceFollowUp()">
          <mat-icon svgIcon="account-cash"> </mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="loading">
      <th mat-header-cell *matHeaderCellDef colspan="100%" style="text-align: center !important">
        <div class="center-spinner">
          <mat-spinner color="accent" data-cy="table-spinner"></mat-spinner>
        </div>
      </th>
    </ng-container>

    <!-- <tr mat-header-row *matHeaderRowDef="['reset']"></tr> -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="filterColumns"></tr>
    <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isLoading"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isLoading"></tr>
  </table>
</div>

<div class="horizontal" style="margin-bottom: 40px">
  <div [ngClass]="{ hide: noData | async }">
    <mat-paginator
      [ngClass]="{ 'hide-pagination-buttons': paginator.length <= 10 }"
      [hidePageSize]="true"
      [pageSize]="10"
      showFirstLastButtons
      data-cy="mat-paginator"></mat-paginator>
  </div>
  <div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isLoading }" data-cy="no-data">
    {{ 'NOT RECORD FOUND' | translate }}
  </div>
</div>